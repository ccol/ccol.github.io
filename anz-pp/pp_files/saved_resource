(function(){if(typeof window.QSI==='undefined'){window.QSI={};}
var tempQSIConfig={"hostedJSLocation":"https://siteintercept.qualtrics.com/dxjsmodule/","zoneId":"ZN_38gZUpfeZke4Elv"};if(typeof window.QSI.config!=='undefined'&&typeof window.QSI.config==='object'){for(var attrname in tempQSIConfig){window.QSI.config[attrname]=tempQSIConfig[attrname];}}else{window.QSI.config=tempQSIConfig;}
window.QSI.overrides={"baseURL":"https://siteintercept.qualtrics.com"};window.QSI.shouldStripQueryParamsInQLoc=false;})();try{!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),e.exports=i(17)},function(e,t){if(void 0===window.QSI&&(window.QSI={}),void 0===QSI.reg&&(QSI.reg={}),void 0===QSI.ed&&(QSI.ed={}),void 0===QSI.reqID&&(QSI.reqID={}),QSI.overrides=QSI.overrides||{},void 0===QSI.isFullDbgInitialized&&(QSI.isFullDbgInitialized=!1),QSI.initFullDbg=function(){!0!==QSI.isFullDbgInitialized&&(QSI.isFullDbgInitialized=!0,QSI.dbg={log:function(){},c:function(e){try{console.log(e)}catch(e){}QSI.dbg.log(e)},d:function(e){try{console.dir(e)}catch(e){}QSI.dbg.log(e)},t:function(e){try{console.trace()}catch(e){}QSI.dbg.log(e)},e:function(e){var t="error";e.message&&(t=e.message);try{console.log(t),console.error(e)}catch(i){try{console.log(t),console.log(e)}catch(e){}}QSI.dbg.log(e)}})},-1===window.location.href.indexOf("Q_DEBUG")?QSI.dbg={log:function(){},c:function(e){QSI.dbg.log(e)},d:function(e){QSI.dbg.log(e)},t:function(e){QSI.dbg.log(e)},e:function(e){QSI.dbg.log(e)}}:QSI.initFullDbg(),void 0===QSI.config&&(QSI.config={}),void 0===QSI.global&&(QSI.global={currentZIndex:2e9,intercepts:{},eventTrackers:[]}),QSI.global.hostedJSLocation=QSI.config.hostedJSLocation||QSI.config.clientBaseURL,QSI.global.legacyId=QSI.config.interceptId||QSI.config.zoneId||QSI.config.targetingId||QSI.global.ID,!QSI.global.legacyId)throw"You must specify a zoneId or zoneId and interceptId";QSI.getBaseURLFromConfigAndOverrides=function(e,t){t=t||{},(e=e||{}).zoneId=e.zoneId||"",e.brandId=e.brandId||"";var i="",n=!1;if(t.baseURL?(n=!0,0===(i=t.baseURL).indexOf("https://")?i=i.substring(8):0===i.indexOf("http://")?i=i.substring(7):0===i.indexOf("//")&&(i=i.substring(2))):i="siteintercept.qualtrics.com",!n&&e.brandId){if(!e.zoneId)throw"You must specify a zoneId";i=e.zoneId.replace("_","").toLowerCase()+"-"+e.brandId.toLowerCase()+"."+i}return i},QSI.global.baseURL=QSI.getBaseURLFromConfigAndOverrides(QSI.config,QSI.overrides),QSI.global.baseURL="//"+QSI.global.baseURL,QSI.global.clientVersion="1.15.2",QSI.global.clientType="web",void 0===QSI.global.isHostedJS&&(QSI.global.isHostedJS=function(){return"hostedjs"===QSI.global.clientType}),QSI.global.isHostedJS()?QSI.global.enableJSSanitization=void 0===QSI.config.enableJSSanitization||QSI.config.enableJSSanitization:QSI.global.enableJSSanitization=!1,QSI.baseURL=QSI.baseURL||QSI.overrides.siBaseURL||"https:"+QSI.global.baseURL+"/WRSiteInterceptEngine/",QSI.Browser={}},function(e,t){QSI.history&&!window.QTest||(QSI.historyStorage={historySessionName:"QSI_HistorySession",get useCookie(){return"sessionStorage"!==QSI.historyStorageType},get limit(){return this.useCookie?2e3:1e4},getHistorySessionData:function(){return this.useCookie?QSI.cookie.get(this.historySessionName):sessionStorage.getItem(this.historySessionName)},eraseHistorySessionData:function(){this.useCookie?QSI.cookie.erase(this.historySessionName):sessionStorage.removeItem(this.historySessionName)},setHistorySessionData:function(e){this.useCookie?QSI.cookie.set(this.historySessionName,e,0):sessionStorage.setItem(this.historySessionName,e)}},QSI.history={historyStorage:QSI.historyStorage,logVisit:function(){this.logCurrentURL(),this.logSearch(),this.startFocusTracking(),this.logReferrer()},startFocusTracking:function(){if(!this.started)try{this.started=!0,this.focusTime=this.getFocusTimeFromBrowserStorage(),this.blurTime=this.getBlurTimeFromBrowserStorage();var e=this;setInterval(function(){try{e.focused?e.focusTime+=1:e.blurTime+=1}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}},1e3);var t,i=function(){try{e.focused=!0}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}};i(),QSI.util.observe(window,"focus",i),QSI.util.observe(window,"blur",function(){try{e.focused=!1}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}),t=QSI.Browser.isMobile?"pagehide":"unload",QSI.util.observe(window,t,function(){try{QSI.profile.set("History","BlurTime",e.blurTime),QSI.profile.set("History","FocusTime",e.focusTime)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}catch(e){QSI.dbg.e(e)}},logSite:function(e,t){var i,n=this.historyStorage.getHistorySessionData();if(n){var r=(n=decodeURIComponent(n)).split("|");i=r[r.length-1].split("~")[0],n+="|"}else n="",i="";e!==i&&(n+=e+"~"+t,this.writeHistory(n))},writeHistory:function(e,t){if(null!=t&&t<=0)this.historyStorage.eraseHistorySessionData();else{t=t||QSI.historyStorageSize||QSI.global.maxCookieSize||this.historyStorage.limit;var i=encodeURIComponent(e),n=this.limitSize(i,t);try{this.historyStorage.setHistorySessionData(n)}catch(i){e=decodeURIComponent(n),this.writeHistory(e,t-500)}}},limitSize:function(e,t){if(!e.length)return e;for(t=t||this.historyStorage.limit;e.length>t;){var i=decodeURIComponent(e).split("|");i.splice(0,1),e=i.join("|"),e=encodeURIComponent(e)}return e},get:function(){var e=this.historyStorage.getHistorySessionData();return e||(e=[]),e=this.limitSize(e),decodeURIComponent(e)},logCurrentURL:function(){var e=window.location.href,t=1*new Date;this.logSite(e,t)},getReferrer:function(){return document.referrer},logSearch:function(){var e,t,i=this.getReferrer();if(i.search(/(google.com)|(bing.com)|(yahoo.com)/)>=0){var n="";i.search(/(google.com)|(bing.com)/)>=0?(e=/q=(.*?)\&/,(t=i.match(e))&&t.length&&t[1]&&(n=t[1])):i.search(/yahoo.com/)>=0&&(e=/p=(.*?)\&/,(t=i.match(e))&&t.length&&t[1]&&(n=t[1])),n=unescape(n),QSI.profile.set("History","SearchTerm",n)}},logReferrer:function(){var e=this.getReferrer();e&&(QSI.util.build("a",{href:e}).hostname!==document.location.host&&QSI.profile.set("History","SiteReferrer",e),QSI.profile.set("History","PageReferrer",e))},logIntercept:function(e,t){t&&this.logActionSet(t)},logActionSet:function(e){if(e.search("AS_")>=0){var t=e,i=1*new Date;QSI.profile.set("ActionSetHistory",t,i),QSI.profile.set("ActionSetHistory",t,i,1)}},logSurvey:function(e,t){QSI.profile.set("QualtricsSurveyHistory",e,t,1)},getSiteReferrer:function(){return QSI.profile.get("History","SiteReferrer")},getPageReferrer:function(){return QSI.profile.get("History","PageReferrer")},getSearch:function(){var e=QSI.profile.get("History","SearchTerm");return e||(e=""),e},getTimeOnSite:function(){var e=this.focusTime;return e+this.blurTime+"|"+e},getFocusTimeFromBrowserStorage:function(){var e=QSI.profile.get("History","FocusTime");return e||(e=0),e},getBlurTimeFromBrowserStorage:function(){var e=QSI.profile.get("History","BlurTime");return e||(e=0),e},getActionSetHistory:function(e,t){var i=QSI.profile.get("ActionSetHistory",e,t);return i||(i=0),i},getPageCount:function(){var e,t,i=this.historyStorage.getHistorySessionData(),n=0,r=[];if(i){var o=(i=decodeURIComponent(i)).split("|");for(t=o.length,e=0;e<t;e++)r.push(o[e].split("~")[0]);var a={};for(t=r.length,e=0;e<t;e++)a[r[e]]||(n++,a[r[e]]=!0)}return{unique:n,total:r.length}}})},function(e,t){QSI.EventTracker&&!window.QTest||(QSI.EventTracker={counts:{},cookieName:"QSI_CT",clicked:!1,loaded:!1,trackElements:function(){if(!1===this.loaded){this.loadCounts();var e=QSI.global.eventTrackers,t=this;QSI.util.forOwn(e,function(i,n){var r=e[n];t.trackElement(r,n)}),QSI.util.observe(window,"beforeunload",function(){try{t.storeCounts()}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}),this.loaded=!0}},trackElement:function(e,t){var i=QSI.util.$(e);if(i){var n=this;QSI.util.observe(i,"click",function(){try{n.track(t)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}},track:function(e){this.clicked=!0,this.counts[e]?this.counts[e]++:this.counts[e]=1},storeCounts:function(){if(!0===this.clicked){var e=JSON.stringify(this.counts);QSI.cookie.set(this.cookieName,e)}},loadCounts:function(){var e=QSI.cookie.get(this.cookieName);e&&(this.counts=JSON.parse(e))},get:function(e){return this.counts[e]?this.counts[e]:0},incrementEventList:function(){if("_qsie"in window&&QSI.util.isArray(window._qsie))for(var e=0,t=window._qsie.length;e<t;e++){var i=window._qsie[e];QSI.util.isString(i)&&this.track(i)}}})},function(e,t){QSI.cookie={set:function(e,t,i,n,r){r=r||{};var o=this.getCookieSize(),a=this.get(e),s=QSI.global.maxCookieSize;a&&(o-=(e+"="+a).length);var c="";if(i){var l=new Date;l.setTime(l.getTime()+864e5*i),c="; expires="+l.toGMTString()}var p="";n?p="domain="+n:QSI.CookieDomain&&(p="domain="+QSI.CookieDomain);var d=e+"="+t,I=o+d.length;if(!(r.force||null!==s&&I<=s||null===s))throw new Error("Cannot exceed the specified maximum cookie size");r.erase?this.cookieSize=o:this.cookieSize=I;var S=d+c+"; path=/; "+p;"https:"===location.protocol&&(S+="; secure"),document.cookie=S},get:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null},erase:function(e,t){this.set(e,"",-1,t,{force:!0,erase:!0})},getCookieSize:function(){if(!this.cookieSize){this.cookieSize=0;for(var e=document.cookie.split(";"),t=0,i=e.length;t<i;t++){for(var n=e[t];" "===n.charAt(0);)n=n.substring(1,n.length);n.indexOf("QSI")>=0&&(this.cookieSize+=n.length)}}return this.cookieSize},areCookiesEnabled:function(){try{document.cookie="cookietest=1";var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(e){return!1}}}},function(e,t){QSI.CookieStorage=function(){var e={},t="QSI_DATA";function i(){try{var i=QSI.cookie.get(t);i&&(e=JSON.parse(i))}catch(t){e={}}}function n(){try{QSI.cookie.set(t,JSON.stringify(e))}catch(e){}}return i(),{setItem:function(t,i){e[t]=i,n()},getItem:function(t){return e[t]||null},removeItem:function(t){delete e[t],n()},reload:i,clear:function(){e={},n()}}}()},function(e,t){(void 0===window.QSI.LatencyLog||window.QTest)&&(QSI.LatencyLog={metricName:"si.SILatency",components:{CORE_MODULE:"coreModuleRequest",TARGETING:"targetingRequest",DPR_TARGETING:"dprTargetingRequest",ASSETS_AND_MODULES:"allAssetDefinitionsAndJSModules",CONTACT_FREQUENCY:"contactFrequencyCheck"},overallLatencyStartTime:null,overallLatency:null,componentStartTimes:{},componentLatencies:{},startTimer:function(){this.latencyStartTime=Date.now()},endTimer:function(){null!==this.latencyStartTime?this.overallLatency=Date.now()-this.latencyStartTime:QSI.dbg.e("Tried to log overall end time without a start time.")},startComponentTimer:function(e){this.componentStartTimes[e]=Date.now()},endComponentTimer:function(e){var t=this.componentStartTimes[e];void 0!==t?this.componentLatencies[e]=Date.now()-t:QSI.dbg.e("Tried to log a component end time without a component start time.  Component name:"+e)},send:function(){try{if(null===this.overallLatency)return void QSI.dbg.e("Incomplete Latency Data Provided");var e=QSI.baseURL+"Ajax.php?action=LatencyLog";void 0!==QSI.Orchestrator&&void 0!==QSI.Orchestrator.getClientVersionQueryString&&(e=e+"&"+QSI.Orchestrator.getClientVersionQueryString());var t={MetricName:this.metricName,Latency:this.overallLatency,ComponentLatencies:this.componentLatencies},i=[];for(var n in QSI.reqID)Object.prototype.hasOwnProperty.call(QSI.reqID,n)&&i.push(n);t.AdditionalData={RequestIDs:i,ClientURL:QSI.currentURL,UserAgent:navigator.userAgent,BrandID:QSI.global.brandID,BrandDC:QSI.global.brandDC},QSI.util.sendHttpRequest({type:"POST",url:e,header:{"Content-type":"application/x-www-form-urlencoded"},includeCookies:!1,data:QSI.util.buildQueryString({LoggingData:JSON.stringify(t)})})}catch(e){QSI.dbg.e(e)}},sampledSend:function(e){try{Math.random()<=e/100==!0&&this.send()}catch(e){QSI.dbg.e(e)}}})},function(e,t){QSI.profile||(QSI.profile={namespace:"QSI_",set:function(e,t,i,n){if(void 0===e||void 0===t||void 0===i)throw new Error("To few arguments");try{var r=this.getStorage(n),o=this.namespace+e,a=r.getItem(o);(a=a?JSON.parse(a):{})[t]=i,a=JSON.stringify(a),r.setItem(o,a)}catch(e){QSI.dbg.e("error setting profile item"),QSI.dbg.e(e)}},get:function(e,t,i){var n=this.getStorage(i),r=this.namespace+e,o=n.getItem(r);return o?(o=JSON.parse(o),t?o[t]?o[t]:null:o):null},erase:function(e,t,i){var n=this.getStorage(i),r=this.namespace+e;if(t){var o=JSON.parse(n.getItem(r));delete o[t],o=JSON.stringify(o),n.setItem(r,o)}else n.removeItem(r)},getStorage:function(e){if(this.hasSessionStorage())return e?localStorage:sessionStorage;if(QSI.UserDataStorage){var t=QSI.UserDataStorage;return e?t.isPermanent(!0):t.isPermanent(!1),t}return QSI.CookieStorage},hasSessionStorage:function(){var e="qualtricssessionstoragetestkey",t=window.sessionStorage;try{return t.setItem(e,e),t.removeItem(e),!0}catch(e){return!1}}})},function(e,t){void 0===QSI.util&&(QSI.util={$:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},forOwn:function(e,t){if(e&&e instanceof Object&&this.isFunction(t))for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(e[i],i,e)},build:function(e,t,i){var n=document.createElement(e);if(t){var r=this;QSI.util.forOwn(t,function(e,i){switch(i){case"style":r.setStyle(n,t[i]);break;case"className":n.className=t[i];break;case"id":n.id=t[i];break;default:n.setAttribute(i,t[i])}})}if(i)if(QSI.util.isString(i))"style"===e&&n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(String(i)));else if(QSI.util.isArray(i))for(var o=0,a=i.length;o<a;o++){var s=i[o];"string"==typeof s||"number"==typeof s?n.appendChild(document.createTextNode(String(s))):s&&s.nodeType&&n.appendChild(s)}return n},setStyle:function(e,t){QSI.util.forOwn(t,function(i,n){try{e.style[n]=t[n]}catch(e){QSI.dbg.e(e)}})},isString:function(e){return"string"==typeof e},isArray:function(e){return"object"==typeof e&&e instanceof Array},getQueryParam:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":i[1]},observe:function(e,t,i,n){this.obs=this.obs||[],e&&(this.obs.push({el:e,e:t,f:i,preventRemove:n||!1}),e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+this.capFirst(t)]&&(e["on"+this.capFirst(t)]=i))},stopObserving:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+this.capFirst(t)]&&(e["on"+this.capFirst(t)]=null)},removeObservers:function(){var e=this;this.each(this.obs||[],function(t){t.preventRemove||e.stopObserving(t.el,t.e,t.f)})},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isFunction:function(e){return"function"==typeof e||!1},capFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},each:function(e,t){var i=e.length;if(i)for(var n=0;n<i;n++)t(e[n],n)}})},function(e,t){QSI.API&&!window.QTest||(QSI.API={load:function(){function e(e){try{if(QSI.reg||this.unloading)return void e.reject();void 0===window.QSI&&(window.QSI={}),void 0===QSI.reg&&(QSI.reg={}),void 0===QSI.ed&&(QSI.ed={}),void 0===QSI.reqID&&(QSI.reqID={}),void 0===QSI.Request&&(QSI.Request={}),void 0===QSI.styleElements&&(QSI.styleElements=[]),QSI.util.forOwn(QSI.reqID,function(t,i){var n={loadingFromAPI:!0};n.id=i,"Editing"===QSI.version&&(n.version="0"),void 0!==QSI.global.clientVersion&&null!==QSI.global.clientVersion&&(n.Q_CLIENTVERSION=QSI.global.clientVersion),void 0!==QSI.global.clientType&&null!==QSI.global.clientType&&(n.Q_CLIENTTYPE=QSI.global.clientType,void 0!==QSI.clientTypeVariant&&(n.Q_CLIENTTYPE+=QSI.clientTypeVariant)),0===i.search(/ZN/)?n.ZoneID=i:n.InterceptID=i,QSI.isDebug&&(n.Q_DEBUG=null),n.deferred=e,QSI.Orchestrator.load(n)})}catch(e){QSI.dbg.e(e)}}try{var t=QSI.Orchestrator.Deferred(),i=t.promise();return QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LoadingState&&QSI.LoadingState.length>0?QSI.PendingQueue.push(e.bind(this,t)):e.bind(this,t)(),i}catch(e){QSI.dbg.e(e)}},unload:function(){try{if(QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LoadingState&&QSI.LoadingState.length>0)return void QSI.PendingQueue.push(QSI.API.unload);if(this.unloading=!0,QSI.reg&&(QSI.util.forOwn(QSI.reg,function(e,t){QSI.reg[t].remove()}),QSI.util.removeObservers()),QSI.debug&&(QSI.util.remove(QSI.util.$("QSI_Debug")),QSI.debuggerHasDisplayed=!1),QSI.styleElements)for(var e=QSI.styleElements,t=0;t<e.length;t++)QSI.util.remove(e[t]);QSI.reg=void 0,QSI.Request=void 0,QSI.styleElements=void 0,this.unloading=!1}catch(e){QSI.dbg.e(e)}},run:function(){try{if(QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LoadingState&&QSI.LoadingState.length>0)return void QSI.PendingQueue.push(QSI.API.run);QSI.InterceptsRan||void 0===QSI.reg||QSI.RunIntercepts(null,!0)}catch(e){QSI.dbg.e(e)}},Events:{increment:function(e){try{QSI.EventTracker.track(e)}catch(e){QSI.dbg.e(e)}},count:function(e){try{return QSI.EventTracker.get(e)}catch(e){QSI.dbg.e(e)}},push:function(e){try{QSI.EventTracker.track(e)}catch(e){QSI.dbg.e(e)}}}})},function(e,t){QSI.ContactFrequency={contactFrequencyRequestTimeout:1e4,contactFrequencyCheckResults:{},contactFrequencyCheckStates:{CAN_CONTACT:"CAN_CONTACT",DO_NOT_CONTACT:"DO_NOT_CONTACT",NOT_CHECKED:"NOT_CHECKED"},checkContactFrequencyRules:function(e,t){var i=QSI.Orchestrator.Deferred(),n={};return QSI.util.forOwn(e,function(e,i){if(this.contactFrequencyCheckResults[i]={status:this.contactFrequencyCheckStates.NOT_CHECKED,brandId:null,surveyId:null},null!==e.Targeting.Decision.ActionSetID){var r=e.Intercept;if(!QSI.util.shouldPreventRepeatedDisplay(i,r.DisplayOptions)&&this.shouldCheckContactFrequency(r)){var o=this.getIQDirectorySettings(r);if(o){var a=this.getTargetSurveyId(r,e.Targeting);a&&(o.surveyId=a,this.contactFrequencyCheckResults[i].surveyId=a),this.contactFrequencyCheckResults[i].brandId=t,o.brandId=t,n[i]=o,this.contactFrequencyCheckResults[i].status=this.contactFrequencyCheckStates.DO_NOT_CONTACT}else this.contactFrequencyCheckResults[i].status=this.contactFrequencyCheckStates.DO_NOT_CONTACT}}}.bind(this)),0!==Object.keys(n).length?this.sendContactFrequencyRequest(n,i):i.resolve(),i.promise()},shouldCheckContactFrequency:function(e){return e.DisplayOptions&&e.DisplayOptions.useContactFrequencyRules},getIQDirectorySettings:function(e){if(!e.DisplayOptions)return null;var t,i=e.DisplayOptions;if(QSI.global.featureFlags["DX.ContactFrequencyV2"]?QSI.config&&QSI.config.externalReference&&(t=QSI.config.externalReference):t=this.resolveContactFrequencyExternalReference(i.contactFrequencyRefLocator,i.contactFrequencyRefExpression),!t)return QSI.dbg.e("Could not retrieve external reference ID for Contact Frequency Check"),null;if(!("string"==typeof t||t instanceof String))return QSI.dbg.e("External reference ID must be a string for Contact Frequency Check"),null;var n=i.contactFrequencyDirectoryID;if(!n)return QSI.dbg.e("Missing directoryId for Contact Frequency Check"),null;var r=i.contactFrequencyUserID;return r?{extRef:t,directoryId:n,userId:r}:(QSI.dbg.e("Missing User Id for Contact Frequency Check"),null)},getTargetSurveyId:function(e,t){if(!t.Decision||!t.Decision.ActionSetID)return null;var i=t.Decision.ActionSetID;return e.ActionSets&&e.ActionSets[i]&&e.ActionSets[i].Target&&"Survey"===e.ActionSets[i].Target.Type?e.ActionSets[i].Target.PrimaryElement:null},resolveContactFrequencyExternalReference:function(e,t){if(!t)return QSI.dbg.e("No reference expression used for contact frequency check"),null;switch(e){case"JavaScript":return QSI.EmbeddedData.getJavaScriptValue(t.expression);case"Cookie":return QSI.cookie.get(t.expression);default:return QSI.dbg.e("Reference locator used for contact frequency check is unsupported:"+e),null}},sendContactFrequencyRequest:function(e,t){var i="https://"+QSI.global.brandDC+"/dx-iqd-proxy/check-frequency-rules";return QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),void QSI.util.sendHttpRequest({type:"POST",url:i,header:{"Content-type":"application/json"},data:JSON.stringify(e),successCallback:function(e){try{var i;if(e.response&&(i=JSON.parse(e.response)),"object"!=typeof i)throw new Error("ContactFrequency check came back with invalid response: "+results);QSI.util.forOwn(i,function(e,t){null!==e?!0===e.passesFrequencyRules&&(this.contactFrequencyCheckResults[t].status=this.contactFrequencyCheckStates.CAN_CONTACT,this.contactFrequencyCheckResults[t].contactId=e.contactId):QSI.dbg.e("ContactFrequency check for intercept:"+t+" errored; defaulting to no show")}.bind(this))}catch(e){QSI.dbg.e(e)}finally{QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),t.resolve()}}.bind(this),errorCallback:function(e){var n="Call to ContactFrequency endpoint: "+i+" failed.";e.status&&(n=n+" Status:"+e.status);e.response&&(n=n+" Response:"+e.response);QSI.dbg.e(n),QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),t.resolve()}.bind(this),timeout:this.contactFrequencyRequestTimeout,timeoutCallback:function(){QSI.dbg.e("ContactFrequency check POST request to:"+i+" timed out"),QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.CONTACT_FREQUENCY),t.resolve()}})},recordContactFrequencyRequest:function(e){var t="https://"+QSI.global.brandDC+"/dx-iqd-proxy/record-contact";return void QSI.util.sendHttpRequest({type:"POST",url:t,header:{"Content-type":"application/json"},data:JSON.stringify(e),errorCallback:function(e){var i="Call to ContactFrequency endpoint: "+t+" failed.";e.status&&(i=i+" Status:"+e.status);e.response&&(i=i+" Response:"+e.response);QSI.dbg.e(i)}.bind(this),timeout:this.contactFrequencyRequestTimeout,timeoutCallback:function(){QSI.dbg.e("ContactFrequency record POST request to:"+t+" timed out")}})}}},function(e,t){QSI.AssetManager={loadedScripts:{},promiseFetch:function(e,t,i){var n=QSI.Orchestrator.Deferred(),r=new XMLHttpRequest;return r.open(e,t,!0),r.withCredentials=!0,"POST"===e&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n.resolve(r.responseText):n.reject(r.responseText))},r.send(i),n.promise()},generateDefinitionRequestURL:function(e,t,i,n){var r=QSI.baseURL+"Asset.php?",o=[];if(t=t||i.version,o.push("Module="+e),o.push("Version="+t),null!=n&&o.push("Q_InterceptID="+n),null===i.Q_NOCACHE&&o.push("Q_NOCACHE"),QSI.CORSOrigin&&o.push("Q_ORIGIN="+QSI.CORSOrigin),void 0!==i.Q_CLIENTVERSION&&null!==i.Q_CLIENTVERSION&&o.push("Q_CLIENTVERSION="+i.Q_CLIENTVERSION),void 0!==i.Q_CLIENTTYPE&&null!==i.Q_CLIENTTYPE){var a="Q_CLIENTTYPE="+i.Q_CLIENTTYPE;o.push(a)}return r+=o.join("&")},loadDefinition:function(e,t){var i=QSI.Orchestrator.Deferred(),n=new XMLHttpRequest;return n.open("GET",e,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)try{var e=JSON.parse(n.responseText);e.Error?i.reject(e):(t(e),i.resolve(n.responseText))}catch(e){i.reject(n.responseText)}else i.reject(n.responseText)},n.send(),i.promise()},promiseLoadIntercept:function(e,t,i){var n=t.InterceptID,r=QSI.AssetManager.generateDefinitionRequestURL(n,t.InterceptRevision,i);return QSI.LatencyLog.startComponentTimer("AssetDefinition-"+n),QSI.AssetManager.loadDefinition(r,function(t){QSI.LatencyLog.endComponentTimer("AssetDefinition-"+n),QSI.Request[e].Intercepts[n].Intercept=t.InterceptDefinition})},promiseLoadCreative:function(e,t,i){var n=t.Decision.Creative.ID;if("CR_NoCreative"!==n){var r=QSI.AssetManager.generateDefinitionRequestURL(n,t.Decision.Creative.Revision,i,t.InterceptID);return QSI.LatencyLog.startComponentTimer("AssetDefinition-"+n),QSI.AssetManager.loadDefinition(r,function(i){QSI.LatencyLog.endComponentTimer("AssetDefinition-"+n),QSI.util.isLegacyCreative(i.CreativeDefinition.Type)&&(i.CreativeDefinition=QSI.AssetManager.sortCreativeDefinition(i.CreativeDefinition)),QSI.Request[e].Intercepts[t.InterceptID].Creative=i.CreativeDefinition})}return QSI.Request[e].Intercepts[t.InterceptID].Creative=null,QSI.Orchestrator.Deferred().resolve(null)},promiseLoadPopUnderTarget:function(e,t,i){var n=QSI.AssetManager.generateDefinitionRequestURL(t.Decision.PopUnderTarget.ID,t.Decision.PopUnderTarget.Revision,i,t.InterceptID);return QSI.AssetManager.loadDefinition(n,function(i){QSI.Request[e].Intercepts[t.InterceptID].PopUnderTarget=i.CreativeDefinition})},promiseLoadScript:function(e,t){var i;if(this.alreadyFetched(e))return(i=QSI.Orchestrator.Deferred()).resolve(),i.promise();i=QSI.Orchestrator.Deferred();var n=document.createElement("script");n.src=QSI.global.hostedJSLocation+e+"Module.js?";var r=[];return void 0!==QSI.Orchestrator&&void 0!==QSI.Orchestrator.getClientVersionQueryString&&r.push(QSI.Orchestrator.getClientVersionQueryString()),(-1!==window.location.href.indexOf("Q_DEBUG")||QSI.config.debug)&&r.push("Q_DEBUG=true"),n.src+=r.join("&"),n.defer=!0,n.addEventListener("load",function(){try{!0===QSI.wrongModuleVersionRequested&&(i.reject(),QSI.dbg.e("Script: "+e+" failed to load because an unavailable version ("+t+") was requested.")),QSI.AssetManager.loadedScripts[e]=n,QSI.LatencyLog.endComponentTimer("JSModule-"+e),i.resolve()}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}},!1),n.addEventListener("error",function(){try{i.reject(),QSI.dbg.e("Script: "+e+" failed to load.")}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}}),QSI.LatencyLog.startComponentTimer("JSModule-"+e),document.body.appendChild(n),i.promise()},alreadyFetched:function(e){return e in QSI.AssetManager.loadedScripts},sortCreativeDefinition:function(e){if(e&&e.Options&&e.Options.elements&&e.Options.elements.Elements){var t=e.Options.elements.Elements;t=QSI.util.stableSort(t,function(e,t){return Number(e.style.zIndex)<Number(t.style.zIndex)?-1:Number(e.style.zIndex)>Number(t.style.zIndex)?1:0});for(var i=0;i<t.length;i++)t[i].style&&t[i].style.zIndex&&(t[i].style.zIndex=QSI.global.currentZIndex++);return t=QSI.util.stableSort(t,function(e,t){return Number(e.position.left)<Number(t.position.left)?-1:Number(e.position.left)>Number(t.position.left)?1:0}),t=QSI.util.stableSort(t,function(e,t){return Number(e.position.top)<Number(t.position.top)?-1:Number(e.position.top)>Number(t.position.top)?1:0}),e.Options.elements.Elements=t,e}return e}}},function(e,t){QSI.CreativeManager={isCreativeSupported:function(e){return!!QSI.CreativeManager["run"+e]},runEmpty:function(e){var t;t=new QSI.Empty({id:e.interceptID,type:QSI.util.creativeTypes.EMPTY}),QSI.reg[e.interceptID]=t},runWebResponsiveDialog:function(e){var t,i,n,r;t=e.creative.Type,i=e.creative.Options.Layout,n=QSI.BuildResponsiveElementModule.PARENT_CONTAINER_CLASS,r=new QSI.WebResponsive[t][i]({id:e.interceptID,type:t,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,hasCreativeEmbeddedTarget:!!e.creative.Options.SizeAndStyle.UseEmbeddedTarget,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getWebResponsiveResetStyle(n)}),QSI.reg[e.interceptID]=r},runFeedbackButton:function(e){var t,i;t=e.creative.Type,i=new QSI.FeedbackButton({id:e.interceptID,type:t,target:e.decision.Target,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options,resetStyle:QSI.CreativeManager.Utilities.getWebResponsiveResetStyle("QSIFeedbackButton")}),QSI.reg[e.interceptID]=i},runFeedbackLink:function(e){var t;t=new QSI.FeedbackLink({id:e.interceptID,type:QSI.util.creativeTypes.FEEDBACK_LINK,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id,displayOptions:e.creative.Options,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIFeedbackLink")}),QSI.reg[e.interceptID]=t},runHTTPRedirect:function(e){var t;QSI.global.isHostedJS()?QSI.dbg.c("Creative type '"+QSI.util.creativeTypes.HTTP_REDIRECT+"' is not supported."):(t=new QSI.HTTPRedirect({id:e.interceptID,type:QSI.util.creativeTypes.HTTP_REDIRECT,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions}),QSI.reg[e.interceptID]=t)},runIFrame:function(e){var t;t=new QSI.IFrame({id:e.interceptID,type:QSI.util.creativeTypes.IFRAME,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,iframeOptions:e.creative.Options,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id}),QSI.reg[e.interceptID]=t},runInfoBar:function(e){!function(){var t={id:e.interceptID,type:QSI.util.creativeTypes.INFO_BAR,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,displayOptions:e.creative.Options.displayOptions};e.creative.Options.elements&&(t.elements=e.creative.Options.elements,t.resetStyle=QSI.CreativeManager.Utilities.getResetStyle("QSIInfoBar"));var i=new QSI.InfoBar(t);QSI.reg[e.interceptID]=i}()},runLink:function(e){var t,i;t=QSI.CreativeManager.Utilities.parsePipedText(e.creative.Options.linkText),i=new QSI.Link({id:e.interceptID,type:QSI.util.creativeTypes.LINK,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,text:e.creative.Options.linkText,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id,locators:t&&t.length>0?t:null}),QSI.reg[e.interceptID]=i},runNoCreative:function(e){var t;t=new QSI.NoCreative({id:e.interceptID,type:QSI.util.creativeTypes.NO_CREATIVE,actionOptions:e.actionSet.ActionOptions,interceptDisplayOptions:e.intercept.DisplayOptions}),QSI.reg[e.interceptID]=t},runPopOver:function(e){var t;t=new QSI.PopOver({id:e.interceptID,type:QSI.util.creativeTypes.POP_OVER,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,hasCreativeEmbeddedTarget:QSI.CreativeManager.Utilities.hasCreativeEmbeddedTarget(e.creative),impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options.elements,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIPopOver")}),QSI.reg[e.interceptID]=t},runPopUnder:function(e){!function(){if(!("Chrome"===QSI.Browser.name&&QSI.Browser.version>29)){var t=e.creative.Options,i={id:e.interceptID,type:QSI.util.creativeTypes.POP_UNDER,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions};if(e.creative.Options.elements){i.elements=e.creative.Options.elements;var n="body { background-color: "+t.baseElement.style.backgroundColor+"; } .QSIPopUnder .close { color: #000000; text-decoration: none; } ";i.resetStyle=n+QSI.CreativeManager.Utilities.getResetStyle("QSIPopUnder"),t.width=t.baseElement.style.width,t.height=t.baseElement.style.height}else i.locators=QSI.CreativeManager.Utilities.parsePipedText(null);t.helperScriptSrc=QSI.baseURL+"Orchestrator.php?InterceptID="+e.interceptID+"&Q_Type=PopUnderHelper";var r={onPopForwardShowTarget:t.showTargetOnPopForward,showOnPageChange:t.showOnPageChange,showOnSiteExit:t.showOnSiteExit,checkThreshold:3,watchInterval:1e3,targetWidth:e.actionSet.ActionOptions.targetWidth,targetHeight:e.actionSet.ActionOptions.targetHeight,targetFullScreen:e.actionSet.ActionOptions.targetFullScreen,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID})};i.popunderOptions=t,i.popunderHelperOptions=r;var o=new QSI.PopUnder(i);QSI.reg[e.interceptID]=o}}()},runPopUnderHelper:function(e){QualtricsSI[e.interceptID].popunderCheckThreshold=null,QualtricsSI[e.interceptID].popunderWatchInterval=null,QualtricsSI.PopunderWatcherModule.startWatching(e.interceptID)},runPopUp:function(e){var t;t=new QSI.PopUp({id:e.interceptID,type:QSI.util.creativeTypes.POP_UP,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,creativeOptions:e.creative.Options}),QSI.reg[e.interceptID]=t},runRelay:function(e){var t;t=new QSI.Relay({id:e.interceptID,type:QSI.util.creativeTypes.RELAY,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options.elements,containerElement:e.creative.Options.baseElement,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIRelay")}),QSI.reg[e.interceptID]=t},runSlider:function(e){var t;t=new QSI.Slider({id:e.interceptID,type:QSI.util.creativeTypes.SLIDER,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,hasCreativeEmbeddedTarget:QSI.CreativeManager.Utilities.hasCreativeEmbeddedTarget(e.creative),impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,elements:e.creative.Options.elements,displayOptions:e.creative.Options.displayOptions,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSISlider")}),QSI.reg[e.interceptID]=t},runSocialMedia:function(e){!function(){if(QSI.global.isHostedJS())QSI.dbg.c("Creative type '"+QSI.util.creativeTypes.SOCIAL_MEDIA+"' is not supported.");else{var t=new QSI.SocialMedia({id:e.interceptID,type:QSI.util.creativeTypes.SOCIAL_MEDIA,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,buttons:e.creative.Options.buttons,buttonStyles:QSI.CreativeManager.SocialMediaHelper.getButtonStyles(e.creative),displayOptions:e.creative.Options.displayOptions,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id});QSI.reg[e.interceptID]=t}}()},runUserDefinedHTML:function(e){!function(){var t={id:e.interceptID,type:QSI.util.creativeTypes.USER_DEFINED_HTML,targetURL:e.decision.Target.OriginalURL,targetURLOrigin:e.decision.Target.OriginalURLOrigin,targetURLType:e.decision.Target.Type,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),clickURL:QSI.CreativeManager.Utilities.getClickURL({interceptID:e.interceptID,creativeID:e.decision.Creative.ID,asid:e.decision.ActionSetID}),interceptDisplayOptions:e.intercept.DisplayOptions,actionOptions:e.actionSet.ActionOptions,displayOptions:e.creative.Options.displayOptions,insertionLocation:e.actionSet.ActionOptions.displayElement?e.actionSet.ActionOptions.displayElement:e.id};if(e.creative.Options.elements)t.elements=e.creative.Options.elements,t.resetStyle=QSI.CreativeManager.Utilities.getResetStyle("QSIUserDefinedHTML");else{t.html=e.creative.Options.html,t.size=e.creative.Options.size;var i=QSI.CreativeManager.Utilities.parsePipedText(e.creative.Options.html);i&&i.length>0&&(t.locators=i)}var n=new QSI.UserDefinedHTML(t);QSI.reg[e.interceptID]=n}()}}},function(e,t){QSI.CreativeManager.SocialMediaHelper={getButtonStyles:function(e){var t=e.Options.displayOptions.size;e.Options.displayOptions.useWidget&&(t="Large"===t?"80px":"");var i=QSI.CreativeManager.SocialMediaHelper.getThemeStyles(e),n=QSI.CreativeManager.SocialMediaHelper.getPadding(t),r=QSI.CreativeManager.SocialMediaHelper.getBoxShadow(e,t),o=QSI.CreativeManager.SocialMediaHelper.getWidth(e,t),a=".QSI_SocialMediaButton { float: left; cursor: pointer; background: "+i.background+"; border-bottom: "+i.border+"; border-right: "+i.border+"; border-top: "+i.highlight+"; border-left: "+i.highlight+"; } #QSI_SocialMediaContainer { border-top: "+i.border+"; border-left: "+i.border+"; box-shadow: "+r.shadowOutset+"; border-radius: "+r.borderRadius+"; } ";return e.Options.displayOptions.useWidget?(a+=QSI.CreativeManager.SocialMediaHelper.getWidgetStyles(e,t),"Large"===t&&(a+="#QSI_SocialMediaContainer { width: "+o+"; } ")):a+="#QSI_SocialMediaContainer { width: "+o+"; } .QSI_SocialMediaButton { padding: "+n+"; width: "+t+"; height: "+t+"; } ",1===QSI.CreativeManager.SocialMediaHelper.getMaxCols(e)?a+=".QSI_First .QSI_SocialMediaButton { border-radius: "+r.firstBorderRadius+"; } .QSI_Last .QSI_SocialMediaButton { border-radius: "+r.lastBorderRadius+"; } ":a+=".QSI_First .QSI_SocialMediaButton.QSI_First { border-radius: "+r.tlBorderRadius+"; } QSI_First .QSI_SocialMediaButton.QSI_Last { border-radius: "+r.trBorderRadius+"; } QSI_Last .QSI_SocialMediaButton.QSI_First { border-radius: "+r.blBorderRadius+"; } QSI_Last .QSI_SocialMediaButton.QSI_Last { border-radius: "+r.brBorderRadius+"; } ",a},getThemeStyles:function(e){var t={background:"none",border:"none",highlight:"none"};switch(e.Options.displayOptions.theme){case"Transparent":break;case"Glass":if(!("Internet Explorer"===QSI.Browser.name&&QSI.Browser.version<8)){t.background="rgba(255, 255, 255, .4)",t.border="1px solid rgba(200, 200, 200, .6)",t.highlight="1px solid rgba(255, 255, 255, .8)";break}case"Light":t.background="#E6E6E6",t.border="1px solid #B3B3B3",t.highlight="1px solid #FFFFFF";break;case"Medium":t.background="#666666",t.border="1px solid #4D4D4D",t.highlight="1px solid #7D7D7D";break;case"Dark":t.background="#333333",t.border="1px solid #1A1A1A",t.highlight="1px solid #484848"}return t},getPadding:function(e){var t="";switch(e){case"64px":t="8px";break;case"48px":t="7px";break;case"32px":t="6px";break;case"24px":t="5px"}return t},getBoxShadow:function(e,t){var i="0",n={};if("Small"===t)return{shadowOutset:"none",shadowInset:"none",borderRadius:"none",tlBorderRadius:"none",trBorderRadius:"none",blBorderRadius:"none",brBorderRadius:"none",firstBorderRadius:"none",lastBorderRadius:"none"};switch(e.Options.displayOptions.theme){case"Transparent":break;case"Glass":i=.15;break;case"Light":i=.25;break;case"Medium":i=.45;break;case"Dark":i=.6}n.shadowOutset="0px 0px 10px 0px rgba(0, 0, 0, "+i+")",n.shadowInset="none";var r="3px";switch(t){case"64px":r="6px";break;case"48px":r="5px";break;case"32px":r="4px";break;case"24px":r="3px"}if(n.borderRadius=r,n.tlBorderRadius=r+" 0px 0px 0px",n.trBorderRadius="0px "+r+" 0px 0px",n.blBorderRadius="0px 0px 0px "+r,n.brBorderRadius="0px 0px "+r+" 0px",n.firstBorderRadius=r+" "+r+" 0px 0px",n.lastBorderRadius="0px 0px "+r+" "+r,0===e.Options.displayOptions.xOffset)switch(e.Options.displayOptions.position){case"OTLL":case"OML":case"OBLL":n.shadowOutset="0px -4px 10px -2px rgba(0, 0, 0, "+i+"), -5px 0px 10px -4px rgba(0, 0, 0, "+i+"), -2px 4px 10px -3px rgba(0, 0, 0, "+i+")",n.borderRadius=r+" 0px 0px "+r,n.tlBorderRadius=r+" 0px 0px "+r,n.trBorderRadius="none",n.blBorderRadius="0px 0px 0px "+r,n.brBorderRadius="none",n.firstBorderRadius=r+" 0px 0px 0px",n.lastBorderRadius="0px 0px 0px "+r;break;case"OTRR":case"OMR":case"OBRR":n.shadowOutset="2px -5px 10px -3px rgba(0, 0, 0, "+i+"), 8px 0px 10px -6px rgba(0, 0, 0, "+i+"), 0px 5px 10px -3px rgba(0, 0, 0, "+i+")",n.borderRadius="0px "+r+" "+r+" 0px",n.tlBorderRadius="none",n.trBorderRadius="0px "+r+" 0px 0px",n.blBorderRadius="none",n.brBorderRadius="0px 0px "+r+" 0px",n.firstBorderRadius="0px "+r+" 0px 0px",n.lastBorderRadius="0px 0px "+r+"0px"}return n},getWidth:function(e,t){var i=0;switch(t){case"64px":i=82;break;case"48px":i=64;break;case"32px":i=46;break;case"24px":i=38;break;case"Large":case"Small":i=82}return i*QSI.CreativeManager.SocialMediaHelper.getMaxCols(e)},getMaxCols:function(e){var t=0;for(var i in e.Options.buttons)Object.prototype.hasOwnProperty.call(e.Options.buttons,i)&&(t=Math.max(t,e.Options.buttons[i].length));return t},getWidgetStyles:function(e,t){var i=".QSI_SocialMediaButton {position:relative;} ";for(var n in i+="Small"===t?".QSI_SocialMediaButton .Content { height: 20px; padding: 3px; } ":".QSI_SocialMediaButton { height: 80px; width: 80px; } ",e.Options.buttons)if(Object.prototype.hasOwnProperty.call(e.Options.buttons,n)){var r=e.Options.buttons[n];if(r)switch(r.type){case"Facebook":i+="Large"===t?".QSI_SocialMediaButton.QSI_Facebook .Content { width: 48px; height: 62px; position: absolute; top: 9px; left: 17px; } ":".QSI_SocialMediaButton.QSI_Facebook .Content { width: 90px; } ";break;case"GooglePlus":i+="Large"===t?".QSI_SocialMediaButton.QSI_GooglePlus .Content { width: 50px; height: 60px; position: absolute; top: 11px; left: 16px; } ":".QSI_SocialMediaButton.QSI_GooglePlus .Content { width: 90px; } ";break;case"Twitter":i+="Large"===t?".QSI_SocialMediaButton.QSI_Twitter .Content { width: 55px; height: 62px; position: absolute; top: 10px; left: 13px; } ":".QSI_SocialMediaButton.QSI_Twitter .Content { width: 107px; } ";break;case"LinkedIn":i+="Large"===t?".QSI_SocialMediaButton.QSI_LinkedIn .Content { height: 62px; position: absolute; top: 9px; left: 11px; } ":".QSI_SocialMediaButton.QSI_LinkedIn .Content { width: 93px; } ";break;case"Reddit":i+="Large"===t?".QSI_SocialMediaButton.QSI_Reddit .Content { width: 50px; height: 66px; position: absolute; top: 5px; left: 15px; } ":".QSI_SocialMediaButton.QSI_Reddit .Content { height: 17px; width: 75px; margin-top: 3px; } ";break;case"Digg":i+="Large"===t?".QSI_SocialMediaButton.QSI_Digg .Content { width: 54px; height: 69px; position: absolute; top: 6px; left: 14px; } ":".QSI_SocialMediaButton.QSI_Digg .Content { width: 76px; } "}}return i}}},function(e,t){QSI.CreativeManager.Utilities={getImpressionURL:function(e){return this.getStatsUrl("Q_Impress",e)},getClickURL:function(e){return this.getStatsUrl("Q_Click",e)},getStatsUrl:function(e,t){var i={};i[e]=1;var n={Q_CID:t.creativeID,Q_SIID:t.interceptID,Q_ASID:t.asid,Q_CLIENTVERSION:QSI.global.clientVersion||"unknown",Q_CLIENTTYPE:QSI.global.clientType||"unknown"};return QSI.util.forOwn(n,function(e,t){i[t]=e}),void 0!==QSI.clientTypeVariant&&(i.Q_CLIENTTYPE+=QSI.clientTypeVariant),QSI.baseURL+"?"+QSI.Orchestrator.generateQueryString(i)},getWebResponsiveResetStyle:function(e){var t="";return[{selectorList:["div","dl","dt","dd","ul","ol","li","h1","h2","h3","h4","h5","h6","span","pre","form","fieldset","textarea","p","blockquote","tr","th","td"],styleResets:"{ margin: 0; padding: 0;background-color: transparent; border: 0; font-size: 12px; line-height: normal; vertical-align:baseline; box-shadow: none; }"},{selectorList:["img"],styleResets:"{ height: auto; width: auto; margin: 0; padding: 0 }"},{selectorList:["ul","ol"],styleResets:"{ margin: 12px 0; padding-left: 40px; }"},{selectorList:["ul li"],styleResets:"{ list-style-type: disc; }"},{selectorList:["ol li"],styleResets:"{ list-style-type: decimal; }"},{selectorList:[".scrollable"],styleResets:"{ -webkit-overflow-scrolling: touch; }"},{selectorList:["table"],styleResets:"{ border-collapse: collapse; border-spacing: 0; }"},{selectorList:["table td"],styleResets:"{ padding: 2px; }"},{selectorList:["*"],styleResets:"{ box-sizing: content-box; }"}].forEach(function(i){t+=function(t,i){if(0===t.length)return"";for(var n="."+e,r="",o=0;o<t.length;o++)r+=n+" "+t[o]+",";return(r=r.slice(0,-1))+i}(i.selectorList,i.styleResets)}),t},getResetStyle:function(e){var t="."+e;return t+" div,"+t+" dl,"+t+" dt,"+t+" dd,"+t+" ul,"+t+" ol,"+t+" li,"+t+" h1,"+t+" h2,"+t+" h3,"+t+" h4,"+t+" h5,"+t+" h6,"+t+" pre,"+t+" form,"+t+" fieldset,"+t+" textarea,"+t+" p,"+t+" blockquote,"+t+" th,"+t+" td {margin: 0;padding: 0;color: black;font-family: arial;font-size: 12px;line-height: normal;}"+t+" ul {margin: 12px 0;padding-left: 40px;}"+t+" ol,"+t+" ul {margin: 12px 0;padding-left: 40px;}"+t+" ul li {list-style-type: disc;}"+t+" ol li {list-style-type: decimal;}"+t+" .scrollable {-webkit-overflow-scrolling: touch;}"+t+" table {border-collapse: collapse;border-spacing: 0;}"+t+" table td {padding: 2px;}.QSIPopOver *,.QSISlider *,.QSIPopUnder *,.QSIEmbeddedTarget * {box-sizing: content-box;}"},hasCreativeEmbeddedTarget:function(e){if(!e||!e.Options.elements||!e.Options.elements.Elements)return!1;var t=e.Options.elements.Elements;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];if(n.type&&"EmbeddedTarget"===n.type)return!0}return!1},parsePipedText:function(e){var t,i=/\$\{(SI)?([A-Za-z]*):\/\/([^\}]*)\}/g,n=[];do{(t=i.exec(e))&&n.push(t)}while(t);return n}}},function(e,t,i){QSI.Orchestrator={init:function(){if(this.setupJFEMessageEventHandlerForIOSOptimization(),QSI.global.latencySamplePercentage=.02,QSI.LoadingState||(QSI.LoadingState=[]),QSI.PendingQueue||(QSI.PendingQueue=[]),QSI.LatencyLog.startTimer(),QSI.global.legacyId){QSI.Request||(QSI.Request={}),QSI.debug={};var e,t=QSI.global.legacyId,i={id:t};if(0===t.indexOf("ZN")?i.ZoneID=t:i.InterceptID=t,QSI.global.isHostedJS())(void 0!==(e=QSI.Orchestrator.parseQueryString(window.location.href)).Q_DEBUG||QSI.config.debug)&&(i.Q_DEBUG=null,QSI.initFullDbg()),(QSI.config.editing||"0"===QSI.global.version)&&(i.version="0");else{var n;if(document.currentScript)n=document.currentScript.src;else try{var r=document.querySelectorAll("script"),o=[];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(o[a]=r[a]);var s=QSI.global.baseURL;0===s.indexOf("https://")?s=s.substring(8):0===s.indexOf("http://")?s=s.substring(7):0===s.indexOf("//")&&(s=s.substring(2)),n=o.filter(function(e){return(-1!==e.src.indexOf(s+"/WRSiteInterceptEngine/?")||-1!==e.src.indexOf(s+"/SIE/?"))&&(-1===e.src.indexOf("Q_Impress")&&-1===e.src.indexOf("Q_Redirect")&&-1===e.src.indexOf("Q_Click")&&-1===e.src.indexOf("Q_DPR"))})[0].src}catch(e){QSI.dbg.e("An error occurred while loading the intercept.",e)}void 0!==(e=QSI.Orchestrator.parseQueryString(n)).Q_NOCACHE&&(i.Q_NOCACHE=null),void 0!==e.Q_BOOKMARKLET&&(i.Q_BOOKMARKLET=null,i.Q_DEBUG=null,QSI.initFullDbg()),void 0!==e.Q_DEBUG&&(i.Q_DEBUG=null,QSI.initFullDbg()),void 0!==e.Q_VERSION&&(i.version=e.Q_VERSION)}void 0!==QSI.global.clientVersion&&null!==QSI.global.clientVersion&&(i.Q_CLIENTVERSION=QSI.global.clientVersion),void 0!==QSI.global.clientType&&null!==QSI.global.clientType&&(i.Q_CLIENTTYPE=QSI.global.clientType,void 0!==QSI.clientTypeVariant&&(i.Q_CLIENTTYPE+=QSI.clientTypeVariant)),QSI.Orchestrator.load(i)}else if(!QSI.Request){QSI.Request={};for(var c=document.querySelectorAll("[data-siteinterceptscript]"),l=0;l<c.length;l++){var p=c[l];QSI.isDebug=QSI.isDebug||p.hasAttribute("data-qdebug")||-1!==window.location.href.indexOf("Q_DEBUG"),QSI.isDebug&&QSI.initFullDbg();var d={};p.hasAttribute("data-interceptid")&&(d.InterceptID=p.getAttribute("data-interceptid"),d.id=d.InterceptID),p.hasAttribute("data-zoneid")&&(d.ZoneID=p.getAttribute("data-zoneid"),d.id=d.ZoneID),p.hasAttribute("data-qnocache")&&(d.Q_NOCACHE=null),p.hasAttribute("data-qbookmarklet")&&(d.Q_BOOKMARKLET=null),QSI.isDebug&&(d.Q_DEBUG=null),p.hasAttribute("data-version")&&(d.version=p.getAttribute("data-version")),QSI.Orchestrator.load(d)}}},load:function(e){QSI.LoadingState.push(!0);var t=QSI.Orchestrator.generateTargetingURL(e);QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.TARGETING);var i=QSI.Orchestrator.getTargetingPostData(),n=QSI.AssetManager.promiseFetch("POST",t,i);QSI.Request[e.id]={},QSI.Request[e.id].Intercepts={},QSI.Request[e.id].Params=e,n.then(function(){QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.TARGETING)}).then(QSI.Orchestrator.handleTargetingResponse.bind(null,e),function(t){QSI.dbg.e(t.Message),e.deferred&&e.deferred.reject()})},getTargetingPostData:function(){var e;return e=QSI.shouldStripQueryParamsInQLoc?"Q_LOC="+encodeURIComponent(window.location.href.split("?")[0]):"Q_LOC="+encodeURIComponent(window.location.href),void 0!==QSI.config.externalReference&&(e+="&extRef="+QSI.config.externalReference),e},generateTargetingURL:function(e){var t=QSI.baseURL+"Targeting.php?",i=[];e.InterceptID&&i.push("Q_InterceptID="+e.InterceptID),e.ZoneID&&i.push("Q_ZoneID="+e.ZoneID),null===e.Q_DEBUG&&(i.push("Q_DEBUG"),QSI.isDebug=!0),null===e.Q_BOOKMARKLET&&i.push("Q_BOOKMARKLET"),null===e.Q_NOCACHE&&i.push("Q_NOCACHE"),void 0!==e.version&&null!==e.version&&i.push("Version="+e.version);var n=QSI.profile.get("QualtricsSurveyHistory","",1);if(n){var r=encodeURIComponent(Object.keys(n));i.push("Q_QualtricsSurveyTaken="+r)}return void 0!==e.Q_CLIENTVERSION&&null!==e.Q_CLIENTVERSION&&i.push("Q_CLIENTVERSION="+e.Q_CLIENTVERSION),void 0!==e.Q_CLIENTTYPE&&null!==e.Q_CLIENTTYPE&&i.push("Q_CLIENTTYPE="+e.Q_CLIENTTYPE),t+i.join("&")},isMessageEventOriginAllowed:function(e){if(QSI.reg&&QSI.reg instanceof Object)for(var t in QSI.reg)if(Object.prototype.hasOwnProperty.call(QSI.reg,t)&&QSI.reg[t]&&QSI.reg[t].options){var i=QSI.reg[t].options;if(i.targetURLOrigin===e)return!0;if(i.target&&i.target.OriginalURLOrigin===e)return!0}return QSI.dbg&&QSI.dbg.c&&QSI.dbg.c("Event origin is not allowed: "+e),!1},handleTargetingResponse:function(e,t){try{var i="";if("SampleRejected"===t)return;try{i=JSON.parse(t)}catch(e){return void QSI.dbg.e("Failed to parse JSON of targeting response: "+t)}if(i.Error)return void QSI.dbg.e(i.Message);QSI.Orchestrator.setGlobalVars(i),QSI.Orchestrator.setupDBGLog();var n=i.Modules;if(QSI.history.logVisit(),!QSI.Request[e.id].hasDependencies&&QSI.Request[e.id].hasBeenResolved||(QSI.EventTracker.trackElements(),QSI.EventTracker.incrementEventList(),window._qsie=QSI.API.Events),n.Core)QSI.AssetManager.promiseLoadScript("Core",n.Core).then(function(){try{if(i.Intercepts)for(var t=0;t<i.Intercepts.length;t++){var n=i.Intercepts[t];n&&(n.Error?QSI.dbg.log(n.Message):(QSI.Request[e.id].Intercepts[n.InterceptID]={},QSI.Request[e.id].Intercepts[n.InterceptID].Targeting=n))}i.Dependencies?QSI.Orchestrator.handleDependencyResolver(e,i):QSI.Orchestrator.loadModules(e,i)}catch(e){QSI.dbg.e(e)}},function(){});else QSI.Orchestrator.doneLoading(e)}catch(e){QSI.dbg.e(e)}},setupDBGLog:function(){QSI.dbg&&(QSI.dbg.log=function(e,t,i){if(QSI.ClientLog)if(QSI.global.featureFlags.isClientLoggingEnabled)QSI.ClientLog.send(e,t,i);else{QSI.ClientLog.sampledSend(e,t,i,.02)}})},handleDependencyResolver:function(e,t){var i=QSI.Orchestrator.generateTargetingURL(e);i+="&t="+(new Date).getTime(),i+="&Q_VSI="+encodeURIComponent(JSON.stringify(t.RequestData.validIntercepts)),i+="&Q_DPR=true",QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.DPR_TARGETING);var n="";for(var r in t.Dependencies)Object.prototype.hasOwnProperty.call(t.Dependencies,r)&&("SiteCatalyst"===r&&(QSI["Resolve"+r].rootName=QSI.adobeVar),n+=QSI["Resolve"+r].prepare(t.Dependencies[r]));n+="&"+QSI.Orchestrator.getTargetingPostData(),QSI.AssetManager.promiseFetch("POST",i,n).then(function(){QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.DPR_TARGETING)}).then(QSI.Orchestrator.handleTargetingResponse.bind(this,e),function(t){QSI.dbg.e(t.Message),e.deferred&&e.deferred.reject()})},loadModules:function(e,t){var i=[],n=t.Modules;for(var r in QSI.LatencyLog.startComponentTimer(QSI.LatencyLog.components.ASSETS_AND_MODULES),n)if(Object.prototype.hasOwnProperty.call(n,r)){if("ScreenCapture"===r){QSI.Orchestrator.setupScreenCaptureListener(n[r]);continue}if(("HTTPRedirect"===r||"SocialMedia"===r||"LatencyLog"===r)&&QSI.global.isHostedJS()){QSI.dbg.c("Module type '"+r+"' is not supported when using Site Intercept Hosted JS");continue}var o=QSI.AssetManager.promiseLoadScript(r,n[r]);i.push(o)}for(var a=0;a<t.Intercepts.length;a++){var s=t.Intercepts[a];if(s&&!s.Error&&null!==s.Decision.ActionSetID){var c=QSI.AssetManager.promiseLoadIntercept(e.id,s,e),l=QSI.AssetManager.promiseLoadCreative(e.id,s,e);if(i.push(c,l),s.Decision.PopUnderTarget&&s.Decision.PopUnderTarget.ID&&"Target"!==s.Decision.PopUnderTarget.ID){var p=QSI.AssetManager.promiseLoadPopUnderTarget(e.id,s,e);i.push(p)}}}QSI.Orchestrator.when.apply(this,i).then(function(){try{if(QSI.LatencyLog.endComponentTimer(QSI.LatencyLog.components.ASSETS_AND_MODULES),QSI.global.featureFlags["DX.ContactFrequencyV3"]||!QSI.global.featureFlags["DX.ContactFrequencyV2"]&&!QSI.global.featureFlags["DX.ContactFrequency"])QSI.Orchestrator.prepareIntercepts(e,t);else QSI.ContactFrequency.checkContactFrequencyRules(QSI.Request[e.id].Intercepts,QSI.global.brandID).then(function(){QSI.Orchestrator.prepareIntercepts(e,t)})}catch(e){QSI.dbg.e(e)}},function(t){var i="";"string"==typeof t?i=t:t&&"string"==typeof t.Message&&(i=t),QSI.dbg.e("An error occurred while loading the intercept. "+i),e.deferred&&e.deferred.reject()})},setInterceptDisplayOptionCallback:function(e,t){switch(e){case"":case"onfocus":QSI.util.waitForFocus().done(t);break;case"onload":t();break;case"onexit":QSI.util.waitForExitIntent().done(t);break;default:return}},prepareIntercepts:function(e,t){!0!==e.loadingFromAPI&&(QSI.LatencyLog.endTimer(),QSI.LatencyLog.sampledSend(QSI.global.latencySamplePercentage)),QSI.Orchestrator.setGlobalIncludes(e,t),("manual"!==QSI.Request[e.id].displayInterceptType&&!QSI.Request[e.id].zoneManualDisplay||QSI.Request[e.id].hasDependencies)&&QSI.RunIntercepts(e.id,!1),QSI.Orchestrator.doneLoading(e),e.deferred&&e.deferred.resolve()},setGlobalIncludes:function(e,t){QSI.isDebug&&(QSI.Request[e.id].Debug={debugInfo:JSON.parse(t.DebugInfo),version:t.RequestData.bVersion},QSI.debug.version=t.RequestData.bVersion,QSI.debug.debugInfo=JSON.parse(t.DebugInfo)),QSI.version=t.RequestData.bVersion,QSI.InterceptsRan=!1,QSI.Request[e.id].hasDependencies=t.RequestData.hasDependencies,QSI.Request[e.id].hasBeenResolved=t.RequestData.hasBeenResolved,QSI.Request[e.id].displayInterceptType=t.RequestData.displayInterceptType,QSI.Request[e.id].zoneManualDisplay=t.RequestData.zoneManualDisplay},setGlobalVars:function(e){QSI.Browser={name:e.RequestData.browser,version:e.RequestData.browserVersion,isMobile:e.RequestData.isMobile,isBrowserSupported:e.RequestData.isBrowserSupported},QSI.CORSOrigin=e.RequestData.CORSOrigin,QSI.OS={name:e.RequestData.osName,version:e.RequestData.osVersion},QSI.global.brandID=e.RequestData.brandID,QSI.global.brandDC=e.RequestData.brandDC,QSI.global.isHostedJS()?(QSI.global.graphicPath="https://"+QSI.global.brandDC+"/WRQualtricsSiteIntercept/Graphic.php?IM=",QSI.global.imagePath="https:"+QSI.global.baseURL+"/WRSiteInterceptEngine/../WRQualtricsShared/Graphics/"):(QSI.global.graphicPath="https://"+QSI.global.brandDC+"/WRQualtricsSiteIntercept/Graphic.php?IM=",QSI.global.imagePath=QSI.global.baseURL+"/WRQualtricsShared/Graphics/"),QSI.global.maxCookieSize=e.RequestData.maxCookieSize,QSI.global.featureFlags=e.FeatureFlags,QSI.global.screenCaptureServiceBaseURL=e.RequestData.screenCaptureServiceBaseURL,QSI.global.eventTrackers=e.RequestData.eventTrackers,QSI.adobeVar=e.RequestData.adobeSCVariable,QSI.id=e.RequestData.ID,QSI.reqID[e.RequestData.ID]=!0,QSI.CookieDomain=e.RequestData.cookieDomain,QSI.historyStorageType=e.RequestData.historyStorageType,QSI.historyStorageSize=e.RequestData.historyStorageSize,QSI.currentURL=window.location.href.split("?")[0],function(){var e=document.createElement("div");e.className="scrollbar-measure",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-99999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;QSI.scrollbarWidth=t,document.body.removeChild(e)}()},parseQueryString:function(e){var t={};if(e&&-1!==e.indexOf("?")){var i=e.split("?",2)[1];i=i.split("&");for(var n=0;n<i.length;n++){var r=i[n].split("=",2);"Q_LOC"===r[0]&&-1!==r[1].indexOf("Q_DEBUG")&&(t.Q_DEBUG=!0),r[0]&&(t[r[0]]=decodeURIComponent(r[1]))}}return t},generateQueryString:function(e){var t=[];for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=i;e[i]&&(n+="="+encodeURIComponent(e[i])),t.push(n)}return t.join("&")},getClientVersionQueryString:function(){var e={Q_CLIENTVERSION:QSI.global.clientVersion||"unknown",Q_CLIENTTYPE:QSI.global.clientType||"unknown"};return void 0!==QSI.clientTypeVariant&&(e.Q_CLIENTTYPE+=QSI.clientTypeVariant),QSI.Orchestrator.generateQueryString(e)},replaceAll:function(e,t,i){return t=t.replace(/([.*+?^${}()|\[\]\\=!:\/])/g,"\\$1"),e.replace(new RegExp(t,"g"),i)},Deferred:function(){var e={},t="pending",i=[],n=[],r=[],o=[],a={state:function(){return t},then:function(e,t){return this.done(e).fail(t),this},done:function(e){if("pending"===t)r.push(e);else if("resolved"===t)try{e.apply(this,i)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}return this},fail:function(e){if("pending"===t)o.push(e);else if("rejected"===t)try{e.apply(this,n)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}return this},promise:function(){return a}};return QSI.Orchestrator.forOwn(a,function(t,i){e[i]=a[i]}),e.resolve=function(){if("pending"===t){t="resolved";var e=QSI.Orchestrator.createArrayFromArguments(arguments);i=e;var n=this;QSI.Orchestrator.each(r,function(t){try{t.apply(n,e)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}},e.reject=function(){if("pending"===t){t="rejected";var e=QSI.Orchestrator.createArrayFromArguments(arguments);n=e;var i=this;QSI.Orchestrator.each(o,function(t){try{t.apply(i,e)}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}},e},when:function(e){var t=QSI.Orchestrator.createArrayFromArguments(arguments),i=t.length,n=i,r=1===n?e:QSI.Orchestrator.Deferred(),o=function(e,t){return function(i){t[e]=arguments.length>1?i:QSI.Orchestrator.createArrayFromArguments(arguments),--n||r.resolve(t)}};if(i>1)for(var a=0;a<i;a++)t[a]&&t[a].promise?t[a].promise().done(o(a,t)).fail(r.reject):n--;return n<1&&r.resolve(t),r.promise()},createArrayFromArguments:function(e){return e?Array.prototype.slice.call(e):[]},isFunction:function(e){return"function"==typeof e||!1},forOwn:function(e,t){if(e&&e instanceof Object&&this.isFunction(t))for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(e[i],i,e)},each:function(e,t){var i=e.length;if(i)for(var n=0;n<i;n++)t(e[n],n)},doneLoading:function(e){if(QSI.LoadingState.pop(),0===QSI.LoadingState.length){if(!0!==e.loadingFromAPI){var t=document.createEvent("Event");t.initEvent("qsi_js_loaded",!0,!0),window.dispatchEvent(t)}for(var i=QSI.PendingQueue.length,n=0;n<i;n++){QSI.PendingQueue.shift()()}}},setupJFEMessageEventHandlerForIOSOptimization:function(){if(!QSI.JFEListenerRegistered){QSI.JFEListenerRegistered=!0;return window.addEventListener("message",function(e){try{if(QSI.Orchestrator&&QSI.Orchestrator.isMessageEventOriginAllowed&&!QSI.Orchestrator.isMessageEventOriginAllowed(e.origin))return;(function(e){var t=null;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return!1}return null!==t&&"JFE"===t.from&&"SI"===t.to&&"JFELoaded"===t.event&&"iOS"===QSI.OS.name})(e.data)&&(t=e.source,i=e.origin,t.postMessage({event:"addIOSSIWorkaround",from:"SI",to:"JFE"},i))}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}var t,i})}},setupScreenCaptureListener:function(e){if(!QSI.screenCaptureListenerRegistered)return QSI.screenCaptureListenerRegistered=!0,window.addEventListener("message",function(t){try{if(QSI.Orchestrator&&QSI.Orchestrator.isMessageEventOriginAllowed&&!QSI.Orchestrator.isMessageEventOriginAllowed(t.origin))return;var i=QSI.util.getOriginInterceptOfMessage(t.source);if(!i)return;var n=t.data;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return}if(!n||"JFE"!==n.from||"SI"!==n.to)return;if(QSI.screenCaptureHandlers||(QSI.screenCaptureHandlers={}),"canScreenCapture"===n.event){void 0===QSI.screenCaptureModulePromise&&(QSI.screenCaptureModulePromise=QSI.AssetManager.promiseLoadScript("ScreenCapture",e));return void t.source.postMessage(JSON.stringify({event:"canScreenCapture",from:"SI",to:"JFE",canScreenCapture:!0}),t.origin)}void 0!==QSI.screenCaptureModulePromise&&QSI.screenCaptureModulePromise.then(function(){switch(QSI.screenCaptureHandlers[n.sessionId]||(QSI.screenCaptureHandlers[n.sessionId]=new QSI.ScreenCaptureHandler(i,t.source,n.sessionId,n.translations,t.origin)),n.event){case"startScreenCapture":QSI.screenCaptureHandlers[n.sessionId].captureScreen(n.questionId);break;case"editScreenCapture":QSI.screenCaptureHandlers[n.sessionId].editAnnotations(n.questionId);break;case"removeScreenCapture":QSI.screenCaptureHandlers[n.sessionId].removeScreenCapture(n.questionId);break;case"sessionFinished":QSI.screenCaptureHandlers[n.sessionId].removeAllScreenCaptures();break;default:return}})}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}})}}},function(e,t){QSI.RunIntercepts=function(e,t){void 0===e&&(e=null),QSI.util.observe(window,"message",function(e){try{if(QSI.Orchestrator&&QSI.Orchestrator.isMessageEventOriginAllowed&&!QSI.Orchestrator.isMessageEventOriginAllowed(e.origin))return;if(e.data&&"string"==typeof e.data){var t=e.data.split("|");if("QualtricsEOS"===t[0]){var i=t[1],n=t[2];QSI.history.logSurvey(i,n)}}}catch(e){"undefined"!=typeof QSI&&QSI.dbg&&QSI.dbg.e&&QSI.dbg.e(e)}});for(var i=e?[e]:Object.keys(QSI.Request),n=0;n<i.length;n++){for(var r in QSI.Request[i[n]].Intercepts)if(Object.prototype.hasOwnProperty.call(QSI.Request[i[n]].Intercepts,r)){var o=QSI.Request[i[n]].Intercepts[r];if(!QSI.reg[r]){var a;if(QSI.history.logIntercept(r,o.Targeting.Decision.ActionSetID),o.siid=i[n],o.Intercept){var s=o.Intercept.DisplayOptions;a=void 0!==s.displayInterceptType?s.displayInterceptType:!0===s.manualDisplay?"manual":"onload"}!t||QSI.Request[i[n]].zoneManualDisplay&&"manual"!==a?QSI.Orchestrator.setInterceptDisplayOptionCallback(a,QSI.RunIntercept.bind(null,r,o)):"manual"===a&&QSI.RunIntercept(r,o)}}QSI.isDebug&&!QSI.debuggerHasDisplayed&&(new QSI.DebugHandler(QSI.Request[i[n]].Debug),QSI.debuggerHasDisplayed=!0)}var c=document.createEvent("Event");c.initEvent("Resolved",!0,!0),document.body.dispatchEvent(c)},QSI.Orchestrator.addPopUnderTarget=function(e,t){t.Options.width=t.Options.baseElement.style.width,t.Options.height=t.Options.baseElement.style.height,t.Options.helperScriptSrc=QSI.baseURL+"Orchestrator.php";var i={onPopForwardShowTarget:t.Options.showTargetOnPopForward,showOnPageChange:t.Options.showOnPageChange,showOnSiteExit:t.Options.showOnSiteExit,checkThreshold:3,watchInterval:1e3,targetWidth:e.actionSet.ActionOptions.targetWidth,targetHeight:e.actionSet.ActionOptions.targetHeight,targetFullScreen:e.actionSet.ActionOptions.targetFullScreen,impressionURL:QSI.CreativeManager.Utilities.getImpressionURL(e),clickURL:QSI.CreativeManager.Utilities.getClickURL(e),originalURL:e.decision.Target.OriginalURL};e.actionSet.ActionOptions.targetPopUnderDisplay.creative={elements:t.Options.elements,resetStyle:QSI.CreativeManager.Utilities.getResetStyle("QSIPopUnder"),popunderOptions:t.Options,popunderHelperOptions:i}},QSI.RunIntercept=function(e,t){try{if(void 0===t.Targeting.Decision.ActionSetID||null===t.Targeting.Decision.ActionSetID)return;var i=t.Intercept.ActionSets[t.Targeting.Decision.ActionSetID];d=i.EmbeddedData,(!QSI.ed[e]||d&&0!==d.length)&&(QSI.ed[e]=d),QSI.global.intercepts[e]={CreativeID:t.Targeting.Decision.Creative.ID,ASID:t.Targeting.Decision.ActionSetID};var n={id:t.siid,interceptID:t.Targeting.InterceptID,intercept:t.Intercept,actionSet:t.Intercept.ActionSets[t.Targeting.Decision.ActionSetID],creative:t.Creative,decision:t.Targeting.Decision,params:QSI.Request[t.siid].Params},r=t.Targeting.Decision.Creative.LocatorValues;if(r)for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var a=r[o];if(t.Creative.Options&&t.Creative.Options.html&&(t.Creative.Options.html=QSI.Orchestrator.replaceAll(t.Creative.Options.html,o,a)),t.Creative.Options&&t.Creative.Options.elements)for(var s in t.Creative.Options.elements.Elements)if(Object.prototype.hasOwnProperty.call(t.Creative.Options.elements.Elements,s)){var c=t.Creative.Options.elements.Elements[s];c.content=QSI.Orchestrator.replaceAll(c.content,o,a)}}QSI.RunInterceptUtilities.processAnchorTags(t),n.actionSet.ActionOptions.targetPopUnderDisplay&&t.PopUnderTarget&&("Target"===t.Targeting.Decision.PopUnderTarget.ID?n.actionSet.ActionOptions.targetPopUnderDisplay.id="Target":QSI.Orchestrator.addPopUnderTarget(n,t.PopUnderTarget));var l,p=function(){t.Creative?QSI.CreativeManager.isCreativeSupported(t.Creative.Type)?QSI.CreativeManager["run"+t.Creative.Type](n):QSI.dbg.c("Creative type '"+t.Creative.Type+"' is not supported."):QSI.CreativeManager.runNoCreative(n)};if(i.ActionOptions.useCustomTrigger)"scroll"===i.ActionOptions.triggerType?(l=function(){try{var e=i.ActionOptions.scrollPercentage?i.ActionOptions.scrollPercentage:0;QSI.util.hasReachedScrollPosition(e)&&(p(),QSI.util.stopObserving(window,i.ActionOptions.triggerType,l))}catch(e){QSI.dbg.e(e)}},QSI.util.observe(window,i.ActionOptions.triggerType,l)):i.ActionOptions.triggerEntirePage?(l=function(){try{p(),QSI.util.stopObserving(document.body,i.ActionOptions.triggerType,l)}catch(e){QSI.dbg.e(e)}},QSI.util.observe(document.body,i.ActionOptions.triggerType,l)):"pageLoad"===i.ActionOptions.triggerType?p():(l=function(){try{p(),QSI.util.stopObserving(QSI.util.$(i.ActionOptions.triggerElementID),i.ActionOptions.triggerType,l)}catch(e){QSI.dbg.e(e)}},QSI.util.observe(QSI.util.$(i.ActionOptions.triggerElementID),i.ActionOptions.triggerType,l));else p()}catch(e){QSI.dbg.e(e)}var d},QSI.RunInterceptUtilities={processAnchorTags:function(e){var t;if(e.Targeting&&e.Targeting.Decision&&e.Targeting.Decision.Creative&&(t=e.Targeting.Decision.Creative.AnchorTags),t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){t[i];if(e.Creative.Options&&e.Creative.Options.elements){var n=e.Creative.Options.elements.Elements;if(n&&n.length)for(var r=0;r<n.length;r++)new RegExp(i,"i").test(n[r].content)&&(n[r].addQClickListener=!0)}}}}},function(e,t){QSI.Orchestrator.init()}]);}catch(e){if(typeof QSI!=='undefined'&&QSI.dbg&&QSI.dbg.e){QSI.dbg.e(e);}}