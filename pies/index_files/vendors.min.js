!function(p,m){"use strict";if("IntersectionObserver"in p&&"IntersectionObserverEntry"in p&&"intersectionRatio"in p.IntersectionObserverEntry.prototype)"isIntersecting"in p.IntersectionObserverEntry.prototype||Object.defineProperty(p.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(p,"resize",this._checkForIntersections,!0),n(m,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in p&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(m,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(p,"resize",this._checkForIntersections,!0),i(m,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var o=this._rootIsInDom(),l=o?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,n=y(t),i=this._rootContainsTarget(t),r=e.entry,a=o&&i&&this._computeTargetAndRootIntersection(t,l),s=e.entry=new u({time:p.performance&&performance.now&&performance.now(),target:t,boundingClientRect:n,rootBounds:l,intersectionRect:a});r?o&&i?this._hasCrossedThreshold(r,s)&&this._queuedEntries.push(s):r&&r.isIntersecting&&this._queuedEntries.push(s):this._queuedEntries.push(s)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=p.getComputedStyle(e).display){for(var n,i,r,a,s,o,l,u,c=y(e),d=v(e),h=!1;!h;){var f=null,g=1==d.nodeType?p.getComputedStyle(d):{};if("none"==g.display)return;if(d==this.root||d==m?(h=!0,f=t):d!=m.body&&d!=m.documentElement&&"visible"!=g.overflow&&(f=y(d)),f&&(n=f,i=c,void 0,r=Math.max(n.top,i.top),a=Math.min(n.bottom,i.bottom),s=Math.max(n.left,i.left),o=Math.min(n.right,i.right),u=a-r,!(c=0<=(l=o-s)&&0<=u&&{top:r,bottom:a,left:s,right:o,width:l,height:u})))break;d=v(d)}return c}},e.prototype._getRootRect=function(){var e;if(this.root)e=y(this.root);else{var t=m.documentElement,n=m.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),t={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var a=this.thresholds[r];if(a==n||a==i||a<n!=a<i)return!0}},e.prototype._rootIsInDom=function(){return!this.root||r(m,this.root)},e.prototype._rootContainsTarget=function(e){return r(this.root||m,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},p.IntersectionObserver=e,p.IntersectionObserverEntry=u}function u(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function e(e,t){var n,i,r,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout(function(){n(),r=null},i))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function n(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function y(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(e,t){for(var n=t;n;){if(n==e)return!0;n=v(n)}return!1}function v(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,r;function v(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function u(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)b(t,n)&&(e[n]=t[n]);return b(t,"toString")&&(e.toString=t.toString),b(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t,n,i){return Tt(e,t,n,i,!0).utc()}function I(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=I(e),n=r.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=g(NaN);return null!=e?f(I(t),e):I(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var a=v.momentProperties=[];function y(e,t){var n,i,r;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=I(t)),u(t._locale)||(e._locale=t._locale),0<a.length)for(n=0;n<a.length;n++)u(r=t[i=a[n]])||(e[i]=r);return e}var t=!1;function C(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,v.updateOffset(this),t=!1)}function _(e){return e instanceof C||null!=e&&null!=e._isAMomentObject}function B(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function A(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=B(t)),n}function s(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&A(e[i])!==A(t[i]))&&s++;return s+a}function T(e){!1===v.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(r,a){var s=!0;return f(function(){if(null!=v.deprecationHandler&&v.deprecationHandler(null,r),s){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var i in e+="\n["+n+"] ",arguments[0])e+=i+": "+arguments[0][i]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}T(r+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),s=!1}return a.apply(this,arguments)},a)}var i,S={};function U(e,t){null!=v.deprecationHandler&&v.deprecationHandler(e,t),S[e]||(T(t),S[e]=!0)}function F(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e,t){var n,i=f({},e);for(n in t)b(t,n)&&(l(e[n])&&l(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)b(e,n)&&!b(t,n)&&l(e[n])&&(i[n]=f({},i[n]));return i}function w(e){null!=e&&this.set(e)}v.suppressDeprecationWarnings=!1,v.deprecationHandler=null,i=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)b(e,t)&&n.push(t);return n};var x={};function E(e,t){var n=e.toLowerCase();x[n]=x[n+"s"]=x[t]=e}function Q(e){return"string"==typeof e?x[e]||x[e.toLowerCase()]:void 0}function G(e){var t,n,i={};for(n in e)b(e,n)&&(t=Q(n))&&(i[t]=e[n]);return i}var R={};function L(e,t){R[e]=t}function V(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},W={};function D(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(W[e]=r),t&&(W[t[0]]=function(){return V(r.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function X(e,t){return e.isValid()?(t=P(t,e.localeData()),N[t]=N[t]||function(i){var e,r,t,a=i.match(Z);for(e=0,r=a.length;e<r;e++)W[a[e]]?a[e]=W[a[e]]:a[e]=(t=a[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,n="";for(t=0;t<r;t++)n+=F(a[t])?a[t].call(e,i):a[t];return n}}(t),N[t](e)):e.localeData().invalidDate()}function P(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(O.lastIndex=0;0<=n&&O.test(e);)e=e.replace(O,i),O.lastIndex=0,n-=1;return e}var M=/\d/,H=/\d\d/,Y=/\d{3}/,j=/\d{4}/,z=/[+-]?\d{6}/,J=/\d\d?/,q=/\d\d\d\d?/,K=/\d\d\d\d\d\d?/,$=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,ie=/[+-]?\d+/,re=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,oe={};function le(e,n,i){oe[e]=F(n)?n:function(e,t){return e&&i?i:n}}function ue(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ce={};function de(e,n){var t,i=n;for("string"==typeof e&&(e=[e]),c(n)&&(i=function(e,t){t[n]=A(e)}),t=0;t<e.length;t++)ce[e[t]]=i}function he(e,r){de(e,function(e,t,n,i){n._w=n._w||{},r(e,n._w,n,i)})}var fe=0,ge=1,pe=2,me=3,ye=4,ve=5,be=6,Ie=7,Ce=8;function _e(e){return Be(e)?366:365}function Be(e){return e%4==0&&e%100!=0||e%400==0}D("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),D(0,["YY",2],0,function(){return this.year()%100}),D(0,["YYYY",4],0,"year"),D(0,["YYYYY",5],0,"year"),D(0,["YYYYYY",6,!0],0,"year"),E("year","y"),L("year",1),le("Y",ie),le("YY",J,H),le("YYYY",ee,j),le("YYYYY",te,z),le("YYYYYY",te,z),de(["YYYYY","YYYYYY"],fe),de("YYYY",function(e,t){t[fe]=2===e.length?v.parseTwoDigitYear(e):A(e)}),de("YY",function(e,t){t[fe]=v.parseTwoDigitYear(e)}),de("Y",function(e,t){t[fe]=parseInt(e,10)}),v.parseTwoDigitYear=function(e){return A(e)+(68<A(e)?1900:2e3)};var Ae,Te=Se("FullYear",!0);function Se(t,n){return function(e){return null!=e?(Fe(this,t,e),v.updateOffset(this,n),this):Ue(this,t)}}function Ue(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&Be(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ke(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function ke(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%12+12)%12;return e+=(t-n)/12,1===n?Be(e)?29:28:31-n%7%2}Ae=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},D("M",["MM",2],"Mo",function(){return this.month()+1}),D("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),D("MMMM",0,0,function(e){return this.localeData().months(this,e)}),E("month","M"),L("month",8),le("M",J),le("MM",J,H),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),de(["M","MM"],function(e,t){t[ge]=A(e)-1}),de(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[ge]=r:I(n).invalidMonth=e});var we=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Qe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=A(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),ke(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ge(e){return null!=e?(Qe(this,e),v.updateOffset(this,!0),this):Ue(this,"Month")}var Re=se,Le=se;function Ve(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],a=[];for(t=0;t<12;t++)n=g([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),a.sort(e),t=0;t<12;t++)i[t]=ue(i[t]),r[t]=ue(r[t]);for(t=0;t<24;t++)a[t]=ue(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ze(e){var t;if(e<100&&0<=e){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Oe(e,t,n){var i=7+t-n;return-(7+Ze(e,0,i).getUTCDay()-t)%7+i-1}function Ne(e,t,n,i,r){var a,s,o=1+7*(t-1)+(7+n-i)%7+Oe(e,i,r);return s=o<=0?_e(a=e-1)+o:o>_e(e)?(a=e+1,o-_e(e)):(a=e,o),{year:a,dayOfYear:s}}function We(e,t,n){var i,r,a=Oe(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?i=s+De(r=e.year()-1,t,n):s>De(e.year(),t,n)?(i=s-De(e.year(),t,n),r=e.year()+1):(r=e.year(),i=s),{week:i,year:r}}function De(e,t,n){var i=Oe(e,t,n),r=Oe(e+1,t,n);return(_e(e)-i+r)/7}function Xe(e,t){return e.slice(t,7).concat(e.slice(0,t))}D("w",["ww",2],"wo","week"),D("W",["WW",2],"Wo","isoWeek"),E("week","w"),E("isoWeek","W"),L("week",5),L("isoWeek",5),le("w",J),le("ww",J,H),le("W",J),le("WW",J,H),he(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=A(e)}),D("d",0,"do","day"),D("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),D("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),D("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),D("e",0,0,"weekday"),D("E",0,0,"isoWeekday"),E("day","d"),E("weekday","e"),E("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),le("d",J),le("e",J),le("E",J),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),he(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:I(n).invalidWeekday=e}),he(["d","e","E"],function(e,t,n,i){t[i]=A(e)});var Pe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Me="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),He="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ye=se,je=se,ze=se;function Je(){function e(e,t){return t.length-e.length}var t,n,i,r,a,s=[],o=[],l=[],u=[];for(t=0;t<7;t++)n=g([2e3,1]).day(t),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),a=this.weekdays(n,""),s.push(i),o.push(r),l.push(a),u.push(i),u.push(r),u.push(a);for(s.sort(e),o.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)o[t]=ue(o[t]),l[t]=ue(l[t]),u[t]=ue(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function qe(){return this.hours()%12||12}function Ke(e,t){D(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function $e(e,t){return t._meridiemParse}D("H",["HH",2],0,"hour"),D("h",["hh",2],0,qe),D("k",["kk",2],0,function(){return this.hours()||24}),D("hmm",0,0,function(){return""+qe.apply(this)+V(this.minutes(),2)}),D("hmmss",0,0,function(){return""+qe.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)}),D("Hmm",0,0,function(){return""+this.hours()+V(this.minutes(),2)}),D("Hmmss",0,0,function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),E("hour","h"),L("hour",13),le("a",$e),le("A",$e),le("H",J),le("h",J),le("k",J),le("HH",J,H),le("hh",J,H),le("kk",J,H),le("hmm",q),le("hmmss",K),le("Hmm",q),le("Hmmss",K),de(["H","HH"],me),de(["k","kk"],function(e,t,n){var i=A(e);t[me]=24===i?0:i}),de(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),de(["h","hh"],function(e,t,n){t[me]=A(e),I(n).bigHour=!0}),de("hmm",function(e,t,n){var i=e.length-2;t[me]=A(e.substr(0,i)),t[ye]=A(e.substr(i)),I(n).bigHour=!0}),de("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[me]=A(e.substr(0,i)),t[ye]=A(e.substr(i,2)),t[ve]=A(e.substr(r)),I(n).bigHour=!0}),de("Hmm",function(e,t,n){var i=e.length-2;t[me]=A(e.substr(0,i)),t[ye]=A(e.substr(i))}),de("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[me]=A(e.substr(0,i)),t[ye]=A(e.substr(i,2)),t[ve]=A(e.substr(r))});var et,tt=Se("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:xe,monthsShort:Ee,week:{dow:0,doy:6},weekdays:Pe,weekdaysMin:He,weekdaysShort:Me,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function st(e){var t=null;if(!it[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),ot(t)}catch(e){}return it[e]}function ot(e,t){var n;return e&&((n=u(t)?ut(e):lt(e,t))?et=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function lt(e,t){if(null===t)return delete it[e],null;var n,i=nt;if(t.abbr=e,null!=it[e])U("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])i=it[t.parentLocale]._config;else{if(null==(n=st(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return it[e]=new w(k(i,t)),rt[e]&&rt[e].forEach(function(e){lt(e.name,e.config)}),ot(e),it[e]}function ut(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!o(e)){if(t=st(e))return t;e=[e]}return function(e){for(var t,n,i,r,a=0;a<e.length;){for(t=(r=at(e[a]).split("-")).length,n=(n=at(e[a+1]))?n.split("-"):null;0<t;){if(i=st(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&s(r,n,!0)>=t-1)break;t--}a++}return et}(e)}function ct(e){var t,n=e._a;return n&&-2===I(e).overflow&&(t=n[ge]<0||11<n[ge]?ge:n[pe]<1||n[pe]>ke(n[fe],n[ge])?pe:n[me]<0||24<n[me]||24===n[me]&&(0!==n[ye]||0!==n[ve]||0!==n[be])?me:n[ye]<0||59<n[ye]?ye:n[ve]<0||59<n[ve]?ve:n[be]<0||999<n[be]?be:-1,I(e)._overflowDayOfYear&&(t<fe||pe<t)&&(t=pe),I(e)._overflowWeeks&&-1===t&&(t=Ie),I(e)._overflowWeekday&&-1===t&&(t=Ce),I(e).overflow=t),e}function dt(e,t,n){return null!=e?e:null!=t?t:n}function ht(e){var t,n,i,r,a,s=[];if(!e._d){var o,l;for(o=e,l=new Date(v.now()),i=o._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],e._w&&null==e._a[pe]&&null==e._a[ge]&&function(e){var t,n,i,r,a,s,o,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,s=4,n=dt(t.GG,e._a[fe],We(St(),1,4).year),i=dt(t.W,1),((r=dt(t.E,1))<1||7<r)&&(l=!0);else{a=e._locale._week.dow,s=e._locale._week.doy;var u=We(St(),a,s);n=dt(t.gg,e._a[fe],u.year),i=dt(t.w,u.week),null!=t.d?((r=t.d)<0||6<r)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||6<t.e)&&(l=!0)):r=a}i<1||i>De(n,a,s)?I(e)._overflowWeeks=!0:null!=l?I(e)._overflowWeekday=!0:(o=Ne(n,i,r,a,s),e._a[fe]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=dt(e._a[fe],i[fe]),(e._dayOfYear>_e(a)||0===e._dayOfYear)&&(I(e)._overflowDayOfYear=!0),n=Ze(a,0,e._dayOfYear),e._a[ge]=n.getUTCMonth(),e._a[pe]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[me]&&0===e._a[ye]&&0===e._a[ve]&&0===e._a[be]&&(e._nextDay=!0,e._a[me]=0),e._d=(e._useUTC?Ze:function(e,t,n,i,r,a,s){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,i,r,a,s),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,i,r,a,s),o}).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[me]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(I(e).weekdayMismatch=!0)}}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/Z|[+-]\d\d(?::?\d\d)?/,mt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],yt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,n,i,r,a,s,o=e._i,l=ft.exec(o)||gt.exec(o);if(l){for(I(e).iso=!0,t=0,n=mt.length;t<n;t++)if(mt[t][1].exec(l[1])){r=mt[t][0],i=!1!==mt[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(l[3])){a=(l[2]||" ")+yt[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!pt.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(a||"")+(s||""),Bt(e)}else e._isValid=!1}var It=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var Ct={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _t(e){var t,n,i,r,a,s,o,l,u,c,d,h=It.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(h){var f=(r=h[4],a=h[3],s=h[2],o=h[5],l=h[6],u=h[7],d=[(c=parseInt(r,10),c<=49?2e3+c:c<=999?1900+c:c),Ee.indexOf(a),parseInt(s,10),parseInt(o,10),parseInt(l,10)],u&&d.push(parseInt(u,10)),d);if(n=f,i=e,(t=h[1])&&Me.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(I(i).weekdayMismatch=!0,!(i._isValid=!1)))return;e._a=f,e._tzm=function(e,t,n){if(e)return Ct[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(h[8],h[9],h[10]),e._d=Ze.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),I(e).rfc2822=!0}else e._isValid=!1}function Bt(e){if(e._f!==v.ISO_8601)if(e._f!==v.RFC_2822){e._a=[],I(e).empty=!0;var t,n,i,r,a,s,o,l,u=""+e._i,c=u.length,d=0;for(i=P(e._f,e._locale).match(Z)||[],t=0;t<i.length;t++)r=i[t],(n=(u.match((m=r,y=e,b(oe,m)?oe[m](y._strict,y._locale):new RegExp(ue(m.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})))))||[])[0])&&(0<(a=u.substr(0,u.indexOf(n))).length&&I(e).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),d+=n.length),W[r]?(n?I(e).empty=!1:I(e).unusedTokens.push(r),s=r,l=e,null!=(o=n)&&b(ce,s)&&ce[s](o,l._a,l,s)):e._strict&&!n&&I(e).unusedTokens.push(r);I(e).charsLeftOver=c-d,0<u.length&&I(e).unusedInput.push(u),e._a[me]<=12&&!0===I(e).bigHour&&0<e._a[me]&&(I(e).bigHour=void 0),I(e).parsedDateParts=e._a.slice(0),I(e).meridiem=e._meridiem,e._a[me]=(h=e._locale,f=e._a[me],null==(g=e._meridiem)?f:null!=h.meridiemHour?h.meridiemHour(f,g):(null!=h.isPM&&((p=h.isPM(g))&&f<12&&(f+=12),p||12!==f||(f=0)),f)),ht(e),ct(e)}else _t(e);else bt(e);var h,f,g,p,m,y}function At(e){var t,n,i,r,a=e._i,s=e._f;return e._locale=e._locale||ut(e._l),null===a||void 0===s&&""===a?m({nullInput:!0}):("string"==typeof a&&(e._i=a=e._locale.preparse(a)),_(a)?new C(ct(a)):(d(a)?e._d=a:o(s)?function(e){var t,n,i,r,a;if(0===e._f.length)return I(e).invalidFormat=!0,e._d=new Date(NaN);for(r=0;r<e._f.length;r++)a=0,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Bt(t),p(t)&&(a+=I(t).charsLeftOver,a+=10*I(t).unusedTokens.length,I(t).score=a,(null==i||a<i)&&(i=a,n=t));f(e,n||t)}(e):s?Bt(e):u(n=(t=e)._i)?t._d=new Date(v.now()):d(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(i=t,null===(r=vt.exec(i._i))?(bt(i),!1===i._isValid&&(delete i._isValid,_t(i),!1===i._isValid&&(delete i._isValid,v.createFromInputFallback(i)))):i._d=new Date(+r[1])):o(n)?(t._a=h(n.slice(0),function(e){return parseInt(e,10)}),ht(t)):l(n)?function(e){if(!e._d){var t=G(e._i);e._a=h([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ht(e)}}(t):c(n)?t._d=new Date(n):v.createFromInputFallback(t),p(e)||(e._d=null),e))}function Tt(e,t,n,i,r){var a,s={};return!0!==n&&!1!==n||(i=n,n=void 0),(l(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=e,s._f=t,s._strict=i,(a=new C(ct(At(s))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function St(e,t,n,i){return Tt(e,t,n,i,!1)}v.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),v.ISO_8601=function(){},v.RFC_2822=function(){};var Ut=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Ft=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:m()});function kt(e,t){var n,i;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return St();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function xt(e){var t=G(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ae.call(wt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<wt.length;++i)if(e[wt[i]]){if(n)return!1;parseFloat(e[wt[i]])!==A(e[wt[i]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*o*60*60,this._days=+s+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=ut(),this._bubble()}function Et(e){return e instanceof xt}function Qt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Gt(e,n){D(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+V(~~(e/60),2)+n+V(~~e%60,2)})}Gt("Z",":"),Gt("ZZ",""),le("Z",ae),le("ZZ",ae),de(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Lt(ae,e)});var Rt=/([\+\-]|\d\d)/gi;function Lt(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Rt)||["-",0,0],r=60*i[1]+A(i[2]);return 0===r?0:"+"===i[0]?r:-r}function Vt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(_(e)||d(e)?e.valueOf():St(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),v.updateOffset(n,!1),n):St(e).local()}function Zt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ot(){return!!this.isValid()&&this._isUTC&&0===this._offset}v.updateOffset=function(){};var Nt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Wt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Dt(e,t){var n,i,r,a,s,o,l=e,u=null;return Et(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:c(e)?(l={},t?l[t]=e:l.milliseconds=e):(u=Nt.exec(e))?(n="-"===u[1]?-1:1,l={y:0,d:A(u[pe])*n,h:A(u[me])*n,m:A(u[ye])*n,s:A(u[ve])*n,ms:A(Qt(1e3*u[be]))*n}):(u=Wt.exec(e))?(n="-"===u[1]?-1:1,l={y:Xt(u[2],n),M:Xt(u[3],n),w:Xt(u[4],n),d:Xt(u[5],n),h:Xt(u[6],n),m:Xt(u[7],n),s:Xt(u[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(a=St(l.from),s=St(l.to),r=a.isValid()&&s.isValid()?(s=Vt(s,a),a.isBefore(s)?o=Pt(a,s):((o=Pt(s,a)).milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0},(l={}).ms=r.milliseconds,l.M=r.months),i=new xt(l),Et(e)&&b(e,"_locale")&&(i._locale=e._locale),i}function Xt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Pt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Mt(i,r){return function(e,t){var n;return null===t||isNaN(+t)||(U(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),Ht(this,Dt(e="string"==typeof e?+e:e,t),i),this}}function Ht(e,t,n,i){var r=t._milliseconds,a=Qt(t._days),s=Qt(t._months);e.isValid()&&(i=null==i||i,s&&Qe(e,Ue(e,"Month")+s*n),a&&Fe(e,"Date",Ue(e,"Date")+a*n),r&&e._d.setTime(e._d.valueOf()+r*n),i&&v.updateOffset(e,a||s))}Dt.fn=xt.prototype,Dt.invalid=function(){return Dt(NaN)};var Yt=Mt(1,"add"),jt=Mt(-1,"subtract");function zt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Jt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ut(e))&&(this._locale=t),this)}v.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",v.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var qt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}var $t=126227808e5;function en(e,t){return(e%t+t)%t}function tn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-$t:new Date(e,t,n).valueOf()}function nn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-$t:Date.UTC(e,t,n)}function rn(e,t){D(0,[e,e.length],0,t)}function an(e,t,n,i,r){var a;return null==e?We(this,i,r).year:((a=De(e,i,r))<t&&(t=a),function(e,t,n,i,r){var a=Ne(e,t,n,i,r),s=Ze(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,e,t,n,i,r))}D(0,["gg",2],0,function(){return this.weekYear()%100}),D(0,["GG",2],0,function(){return this.isoWeekYear()%100}),rn("gggg","weekYear"),rn("ggggg","weekYear"),rn("GGGG","isoWeekYear"),rn("GGGGG","isoWeekYear"),E("weekYear","gg"),E("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),le("G",ie),le("g",ie),le("GG",J,H),le("gg",J,H),le("GGGG",ee,j),le("gggg",ee,j),le("GGGGG",te,z),le("ggggg",te,z),he(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=A(e)}),he(["gg","GG"],function(e,t,n,i){t[i]=v.parseTwoDigitYear(e)}),D("Q",0,"Qo","quarter"),E("quarter","Q"),L("quarter",7),le("Q",M),de("Q",function(e,t){t[ge]=3*(A(e)-1)}),D("D",["DD",2],"Do","date"),E("date","D"),L("date",9),le("D",J),le("DD",J,H),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),de(["D","DD"],pe),de("Do",function(e,t){t[pe]=A(e.match(J)[0])});var sn=Se("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear"),E("dayOfYear","DDD"),L("dayOfYear",4),le("DDD",$),le("DDDD",Y),de(["DDD","DDDD"],function(e,t,n){n._dayOfYear=A(e)}),D("m",["mm",2],0,"minute"),E("minute","m"),L("minute",14),le("m",J),le("mm",J,H),de(["m","mm"],ye);var on=Se("Minutes",!1);D("s",["ss",2],0,"second"),E("second","s"),L("second",15),le("s",J),le("ss",J,H),de(["s","ss"],ve);var ln,un=Se("Seconds",!1);for(D("S",0,0,function(){return~~(this.millisecond()/100)}),D(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),D(0,["SSS",3],0,"millisecond"),D(0,["SSSS",4],0,function(){return 10*this.millisecond()}),D(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),D(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),D(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),D(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),D(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),E("millisecond","ms"),L("millisecond",16),le("S",$,M),le("SS",$,H),le("SSS",$,Y),ln="SSSS";ln.length<=9;ln+="S")le(ln,ne);function cn(e,t){t[be]=A(1e3*("0."+e))}for(ln="S";ln.length<=9;ln+="S")de(ln,cn);var dn=Se("Milliseconds",!1);D("z",0,0,"zoneAbbr"),D("zz",0,0,"zoneName");var hn=C.prototype;function fn(e){return e}hn.add=Yt,hn.calendar=function(e,t){var n=e||St(),i=Vt(n,this).startOf("day"),r=v.calendarFormat(this,i)||"sameElse",a=t&&(F(t[r])?t[r].call(this,n):t[r]);return this.format(a||this.localeData().calendar(r,this,St(n)))},hn.clone=function(){return new C(this)},hn.diff=function(e,t,n){var i,r,a;if(!this.isValid())return NaN;if(!(i=Vt(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=Q(t)){case"year":a=zt(this,i)/12;break;case"month":a=zt(this,i);break;case"quarter":a=zt(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-r)/864e5;break;case"week":a=(this-i-r)/6048e5;break;default:a=this-i}return n?a:B(a)},hn.endOf=function(e){var t;if(void 0===(e=Q(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?nn:tn;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-en(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-en(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-en(t,1e3)-1}return this._d.setTime(t),v.updateOffset(this,!0),this},hn.format=function(e){e||(e=this.isUtc()?v.defaultFormatUtc:v.defaultFormat);var t=X(this,e);return this.localeData().postformat(t)},hn.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||St(e).isValid())?Dt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},hn.fromNow=function(e){return this.from(St(),e)},hn.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||St(e).isValid())?Dt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},hn.toNow=function(e){return this.to(St(),e)},hn.get=function(e){return F(this[e=Q(e)])?this[e]():this},hn.invalidAt=function(){return I(this).overflow},hn.isAfter=function(e,t){var n=_(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Q(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},hn.isBefore=function(e,t){var n=_(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Q(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},hn.isBetween=function(e,t,n,i){var r=_(e)?e:St(e),a=_(t)?t:St(t);return!!(this.isValid()&&r.isValid()&&a.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(a,n):!this.isAfter(a,n))},hn.isSame=function(e,t){var n,i=_(e)?e:St(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=Q(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},hn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},hn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},hn.isValid=function(){return p(this)},hn.lang=qt,hn.locale=Jt,hn.localeData=Kt,hn.max=Ft,hn.min=Ut,hn.parsingFlags=function(){return f({},I(this))},hn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:R[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=G(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(F(this[e=Q(e)]))return this[e](t);return this},hn.startOf=function(e){var t;if(void 0===(e=Q(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?nn:tn;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=en(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=en(t,6e4);break;case"second":t=this._d.valueOf(),t-=en(t,1e3)}return this._d.setTime(t),v.updateOffset(this,!0),this},hn.subtract=jt,hn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},hn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},hn.toDate=function(){return new Date(this.valueOf())},hn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?X(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",X(n,"Z")):X(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},hn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},hn.toJSON=function(){return this.isValid()?this.toISOString():null},hn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},hn.unix=function(){return Math.floor(this.valueOf()/1e3)},hn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},hn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},hn.year=Te,hn.isLeapYear=function(){return Be(this.year())},hn.weekYear=function(e){return an.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},hn.isoWeekYear=function(e){return an.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},hn.quarter=hn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},hn.month=Ge,hn.daysInMonth=function(){return ke(this.year(),this.month())},hn.week=hn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},hn.isoWeek=hn.isoWeeks=function(e){var t=We(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},hn.weeksInYear=function(){var e=this.localeData()._week;return De(this.year(),e.dow,e.doy)},hn.isoWeeksInYear=function(){return De(this.year(),1,4)},hn.date=sn,hn.day=hn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-i,"d")):i},hn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},hn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,i=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?i:i-7)},hn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},hn.hour=hn.hours=tt,hn.minute=hn.minutes=on,hn.second=hn.seconds=un,hn.millisecond=hn.milliseconds=dn,hn.utcOffset=function(e,t,n){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?r:Zt(this);if("string"==typeof e){if(null===(e=Lt(ae,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Zt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?Ht(this,Dt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,v.updateOffset(this,!0),this._changeInProgress=null)),this},hn.utc=function(e){return this.utcOffset(0,e)},hn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Zt(this),"m")),this},hn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Lt(re,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},hn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?St(e).utcOffset():0,(this.utcOffset()-e)%60==0)},hn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},hn.isLocal=function(){return!!this.isValid()&&!this._isUTC},hn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},hn.isUtc=Ot,hn.isUTC=Ot,hn.zoneAbbr=function(){return this._isUTC?"UTC":""},hn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},hn.dates=n("dates accessor is deprecated. Use date instead.",sn),hn.months=n("months accessor is deprecated. Use month instead",Ge),hn.years=n("years accessor is deprecated. Use year instead",Te),hn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),hn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(y(e,this),(e=At(e))._a){var t=e._isUTC?g(e._a):St(e._a);this._isDSTShifted=this.isValid()&&0<s(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var gn=w.prototype;function pn(e,t,n,i){var r=ut(),a=g().set(i,t);return r[n](a,e)}function mn(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return pn(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=pn(e,i,n,"month");return r}function yn(e,t,n,i){"boolean"==typeof e?c(t)&&(n=t,t=void 0):(t=e,e=!1,c(n=t)&&(n=t,t=void 0)),t=t||"";var r,a=ut(),s=e?a._week.dow:0;if(null!=n)return pn(t,(n+s)%7,i,"day");var o=[];for(r=0;r<7;r++)o[r]=pn(t,(r+s)%7,i,"day");return o}gn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return F(i)?i.call(t,n):i},gn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},gn.invalidDate=function(){return this._invalidDate},gn.ordinal=function(e){return this._ordinal.replace("%d",e)},gn.preparse=fn,gn.postformat=fn,gn.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return F(r)?r(e,t,n,i):r.replace(/%d/i,e)},gn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return F(n)?n(t):n.replace(/%s/i,t)},gn.set=function(e){var t,n;for(n in e)F(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},gn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||we).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},gn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[we.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},gn.monthsParse=function(e,t,n){var i,r,a;if(this._monthsParseExact)return function(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=g([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Ae.call(this._shortMonthsParse,s))?r:null:-1!==(r=Ae.call(this._longMonthsParse,s))?r:null:"MMM"===t?-1!==(r=Ae.call(this._shortMonthsParse,s))?r:-1!==(r=Ae.call(this._longMonthsParse,s))?r:null:-1!==(r=Ae.call(this._longMonthsParse,s))?r:-1!==(r=Ae.call(this._shortMonthsParse,s))?r:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=g([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},gn.monthsRegex=function(e){return this._monthsParseExact?(b(this,"_monthsRegex")||Ve.call(this),e?this._monthsStrictRegex:this._monthsRegex):(b(this,"_monthsRegex")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},gn.monthsShortRegex=function(e){return this._monthsParseExact?(b(this,"_monthsRegex")||Ve.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(b(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},gn.week=function(e){return We(e,this._week.dow,this._week.doy).week},gn.firstDayOfYear=function(){return this._week.doy},gn.firstDayOfWeek=function(){return this._week.dow},gn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Xe(n,this._week.dow):e?n[e.day()]:n},gn.weekdaysMin=function(e){return!0===e?Xe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},gn.weekdaysShort=function(e){return!0===e?Xe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},gn.weekdaysParse=function(e,t,n){var i,r,a;if(this._weekdaysParseExact)return function(e,t,n){var i,r,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=g([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Ae.call(this._weekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ae.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Ae.call(this._minWeekdaysParse,s))?r:null:"dddd"===t?-1!==(r=Ae.call(this._weekdaysParse,s))?r:-1!==(r=Ae.call(this._shortWeekdaysParse,s))?r:-1!==(r=Ae.call(this._minWeekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ae.call(this._shortWeekdaysParse,s))?r:-1!==(r=Ae.call(this._weekdaysParse,s))?r:-1!==(r=Ae.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Ae.call(this._minWeekdaysParse,s))?r:-1!==(r=Ae.call(this._weekdaysParse,s))?r:-1!==(r=Ae.call(this._shortWeekdaysParse,s))?r:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=g([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},gn.weekdaysRegex=function(e){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(b(this,"_weekdaysRegex")||(this._weekdaysRegex=Ye),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},gn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(b(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},gn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Je.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(b(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},gn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},gn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ot("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===A(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),v.lang=n("moment.lang is deprecated. Use moment.locale instead.",ot),v.langData=n("moment.langData is deprecated. Use moment.localeData instead.",ut);var vn=Math.abs;function bn(e,t,n,i){var r=Dt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function In(e){return e<0?Math.floor(e):Math.ceil(e)}function Cn(e){return 4800*e/146097}function _n(e){return 146097*e/4800}function Bn(e){return function(){return this.as(e)}}var An=Bn("ms"),Tn=Bn("s"),Sn=Bn("m"),Un=Bn("h"),Fn=Bn("d"),kn=Bn("w"),wn=Bn("M"),xn=Bn("Q"),En=Bn("y");function Qn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Gn=Qn("milliseconds"),Rn=Qn("seconds"),Ln=Qn("minutes"),Vn=Qn("hours"),Zn=Qn("days"),On=Qn("months"),Nn=Qn("years"),Wn=Math.round,Dn={ss:44,s:45,m:45,h:22,d:26,M:11},Xn=Math.abs;function Pn(e){return(0<e)-(e<0)||+e}function Mn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Xn(this._milliseconds)/1e3,i=Xn(this._days),r=Xn(this._months);t=B((e=B(n/60))/60),n%=60,e%=60;var a=B(r/12),s=r%=12,o=i,l=t,u=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=Pn(this._months)!==Pn(d)?"-":"",g=Pn(this._days)!==Pn(d)?"-":"",p=Pn(this._milliseconds)!==Pn(d)?"-":"";return h+"P"+(a?f+a+"Y":"")+(s?f+s+"M":"")+(o?g+o+"D":"")+(l||u||c?"T":"")+(l?p+l+"H":"")+(u?p+u+"M":"")+(c?p+c+"S":"")}var Hn=xt.prototype;return Hn.isValid=function(){return this._isValid},Hn.abs=function(){var e=this._data;return this._milliseconds=vn(this._milliseconds),this._days=vn(this._days),this._months=vn(this._months),e.milliseconds=vn(e.milliseconds),e.seconds=vn(e.seconds),e.minutes=vn(e.minutes),e.hours=vn(e.hours),e.months=vn(e.months),e.years=vn(e.years),this},Hn.add=function(e,t){return bn(this,e,t,1)},Hn.subtract=function(e,t){return bn(this,e,t,-1)},Hn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=Q(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Cn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(_n(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Hn.asMilliseconds=An,Hn.asSeconds=Tn,Hn.asMinutes=Sn,Hn.asHours=Un,Hn.asDays=Fn,Hn.asWeeks=kn,Hn.asMonths=wn,Hn.asQuarters=xn,Hn.asYears=En,Hn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12):NaN},Hn._bubble=function(){var e,t,n,i,r,a=this._milliseconds,s=this._days,o=this._months,l=this._data;return 0<=a&&0<=s&&0<=o||a<=0&&s<=0&&o<=0||(a+=864e5*In(_n(o)+s),o=s=0),l.milliseconds=a%1e3,e=B(a/1e3),l.seconds=e%60,t=B(e/60),l.minutes=t%60,n=B(t/60),l.hours=n%24,o+=r=B(Cn(s+=B(n/24))),s-=In(_n(r)),i=B(o/12),o%=12,l.days=s,l.months=o,l.years=i,this},Hn.clone=function(){return Dt(this)},Hn.get=function(e){return e=Q(e),this.isValid()?this[e+"s"]():NaN},Hn.milliseconds=Gn,Hn.seconds=Rn,Hn.minutes=Ln,Hn.hours=Vn,Hn.days=Zn,Hn.weeks=function(){return B(this.days()/7)},Hn.months=On,Hn.years=Nn,Hn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,i,r,a,s,o,l,u,c,d=this.localeData(),h=(t=!e,n=d,i=Dt(this).abs(),r=Wn(i.as("s")),a=Wn(i.as("m")),s=Wn(i.as("h")),o=Wn(i.as("d")),l=Wn(i.as("M")),u=Wn(i.as("y")),(c=r<=Dn.ss&&["s",r]||r<Dn.s&&["ss",r]||a<=1&&["m"]||a<Dn.m&&["mm",a]||s<=1&&["h"]||s<Dn.h&&["hh",s]||o<=1&&["d"]||o<Dn.d&&["dd",o]||l<=1&&["M"]||l<Dn.M&&["MM",l]||u<=1&&["y"]||["yy",u])[2]=t,c[3]=0<+this,c[4]=n,function(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}.apply(null,c));return e&&(h=d.pastFuture(+this,h)),d.postformat(h)},Hn.toISOString=Mn,Hn.toString=Mn,Hn.toJSON=Mn,Hn.locale=Jt,Hn.localeData=Kt,Hn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),Hn.lang=qt,D("X",0,0,"unix"),D("x",0,0,"valueOf"),le("x",ie),le("X",/[+-]?\d+(\.\d{1,3})?/),de("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),de("x",function(e,t,n){n._d=new Date(A(e))}),v.version="2.24.0",e=St,v.fn=hn,v.min=function(){return kt("isBefore",[].slice.call(arguments,0))},v.max=function(){return kt("isAfter",[].slice.call(arguments,0))},v.now=function(){return Date.now?Date.now():+new Date},v.utc=g,v.unix=function(e){return St(1e3*e)},v.months=function(e,t){return mn(e,t,"months")},v.isDate=d,v.locale=ot,v.invalid=m,v.duration=Dt,v.isMoment=_,v.weekdays=function(e,t,n){return yn(e,t,n,"weekdays")},v.parseZone=function(){return St.apply(null,arguments).parseZone()},v.localeData=ut,v.isDuration=Et,v.monthsShort=function(e,t){return mn(e,t,"monthsShort")},v.weekdaysMin=function(e,t,n){return yn(e,t,n,"weekdaysMin")},v.defineLocale=lt,v.updateLocale=function(e,t){if(null!=t){var n,i,r=nt;null!=(i=st(e))&&(r=i._config),(n=new w(t=k(r,t))).parentLocale=it[e],it[e]=n,ot(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},v.locales=function(){return i(it)},v.weekdaysShort=function(e,t,n){return yn(e,t,n,"weekdaysShort")},v.normalizeUnits=Q,v.relativeTimeRounding=function(e){return void 0===e?Wn:"function"==typeof e&&(Wn=e,!0)},v.relativeTimeThreshold=function(e,t){return void 0!==Dn[e]&&(void 0===t?Dn[e]:(Dn[e]=t,"s"===e&&(Dn.ss=t-1),!0))},v.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},v.prototype=hn,v.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},v}),function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(a){"use strict";var t,s={},o={},l={},u={},c={};a&&"string"==typeof a.version||U("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var e=a.version.split("."),n=+e[0],i=+e[1];function d(e){return 96<e?e-87:64<e?e-29:e-48}function r(e){var t=0,n=e.split("."),i=n[0],r=n[1]||"",a=1,s=0,o=1;for(45===e.charCodeAt(0)&&(o=-(t=1));t<i.length;t++)s=60*s+d(i.charCodeAt(t));for(t=0;t<r.length;t++)a/=60,s+=d(r.charCodeAt(t))*a;return s*o}function h(e){for(var t=0;t<e.length;t++)e[t]=r(e[t])}function f(e,t){var n,i=[];for(n=0;n<t.length;n++)i[n]=e[t[n]];return i}function g(e){var t=e.split("|"),n=t[2].split(" "),i=t[3].split(""),r=t[4].split(" ");return h(n),h(i),h(r),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(r,i.length),{name:t[0],abbrs:f(t[1].split(" "),i),offsets:f(n,i),untils:r,population:0|t[5]}}function p(e){e&&this._set(g(e))}function m(e,t){this.name=e,this.zones=t}function y(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function v(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function b(e,t){for(var n,i;i=6e4*((t.at-e.at)/12e4|0);)(n=new y(new Date(e.at+i))).offset===e.offset?e=n:t=n;return e}function I(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function C(e,t){var n,i;for(h(t),n=0;n<t.length;n++)i=t[n],c[i]=c[i]||{},c[i][e]=!0}function _(e){return(e||"").toLowerCase().replace(/\//g,"_")}function B(e){var t,n,i,r;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r=_(n=(i=e[t].split("|"))[0]),s[r]=e[t],u[r]=n,C(r,i[2].split(" "))}function A(e,t){e=_(e);var n,i=s[e];return i instanceof p?i:"string"==typeof i?(i=new p(i),s[e]=i):o[e]&&t!==A&&(n=A(o[e],A))?((i=s[e]=new p)._set(n),i.name=u[e],i):null}function T(e){var t,n,i,r;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i=_((n=e[t].split("|"))[0]),r=_(n[1]),o[i]=r,u[i]=n[0],o[r]=i,u[r]=n[1]}function S(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function U(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function F(e){var t=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],i=A(n),r=a.utc.apply(null,t);return i&&!a.isMoment(e)&&S(r)&&r.add(i.parse(r),"minutes"),r.tz(n),r}(n<2||2==n&&i<6)&&U("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),p.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,i=this.untils;for(t=0;t<i.length;t++)if(n<i[t])return t},countries:function(){var t=this.name;return Object.keys(l).filter(function(e){return-1!==l[e].zones.indexOf(t)})},parse:function(e){var t,n,i,r,a=+e,s=this.offsets,o=this.untils,l=o.length-1;for(r=0;r<l;r++)if(t=s[r],n=s[r+1],i=s[r?r-1:r],t<n&&F.moveAmbiguousForward?t=n:i<t&&F.moveInvalidForward&&(t=i),a<o[r]-6e4*t)return s[r];return s[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return U("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},v.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},F.version="0.5.28",F.dataVersion="",F._zones=s,F._links=o,F._names=u,F._countries=l,F.add=B,F.link=T,F.load=function(e){B(e.zones),T(e.links),function(e){var t,n,i,r;if(e&&e.length)for(t=0;t<e.length;t++)n=(r=e[t].split("|"))[0].toUpperCase(),i=r[1].split(" "),l[n]=new m(n,i)}(e.countries),F.dataVersion=e.version},F.zone=A,F.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,U("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!A(t)},F.guess=function(e){return t&&!e||(t=function(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&3<e.length){var t=u[_(e)];if(t)return t;U("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,i,r,a=function(){var e,t,n,i=(new Date).getFullYear()-2,r=new y(new Date(i,0,1)),a=[r];for(n=1;n<48;n++)(t=new y(new Date(i,n,1))).offset!==r.offset&&(e=b(r,t),a.push(e),a.push(new y(new Date(e.at+6e4)))),r=t;for(n=0;n<4;n++)a.push(new y(new Date(i+n,0,1))),a.push(new y(new Date(i+n,6,1)));return a}(),s=a.length,o=function(e){var t,n,i,r=e.length,a={},s=[];for(t=0;t<r;t++)for(n in i=c[e[t].offset]||{})i.hasOwnProperty(n)&&(a[n]=!0);for(t in a)a.hasOwnProperty(t)&&s.push(u[t]);return s}(a),l=[];for(i=0;i<o.length;i++){for(n=new v(A(o[i]),s),r=0;r<s;r++)n.scoreOffsetAt(a[r]);l.push(n)}return l.sort(I),0<l.length?l[0].zone.name:void 0}()),t},F.names=function(){var e,t=[];for(e in u)u.hasOwnProperty(e)&&(s[e]||s[o[e]])&&u[e]&&t.push(u[e]);return t.sort()},F.Zone=p,F.unpack=g,F.unpackBase60=r,F.needsOffset=S,F.moveInvalidForward=!0,F.moveAmbiguousForward=!1,F.countries=function(){return Object.keys(l)},F.zonesForCountry=function(e,t){if(n=(n=e).toUpperCase(),!(e=l[n]||null))return null;var n,i=e.zones.sort();return t?i.map(function(e){return{name:e,offset:A(e).utcOffset(new Date)}}):i};var k,w=a.fn;function x(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function E(e){return function(){return this._z=null,e.apply(this,arguments)}}a.tz=F,a.defaultZone=null,a.updateOffset=function(e,t){var n,i=a.defaultZone;if(void 0===e._z&&(i&&S(e)&&!e._isUTC&&(e._d=a.utc(e._a)._d,e.utc().add(i.parse(e),"minutes")),e._z=i),e._z)if(n=e._z.utcOffset(e),Math.abs(n)<16&&(n/=60),void 0!==e.utcOffset){var r=e._z;e.utcOffset(-n,t),e._z=r}else e.zone(n,t)},w.tz=function(e,t){if(e){if("string"!=typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=A(e),this._z?a.updateOffset(this,t):U("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},w.zoneName=x(w.zoneName),w.zoneAbbr=x(w.zoneAbbr),w.utc=E(w.utc),w.local=E(w.local),w.utcOffset=(k=w.utcOffset,function(){return 0<arguments.length&&(this._z=null),k.apply(this,arguments)}),a.tz.setDefault=function(e){return(n<2||2==n&&i<9)&&U("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=e?A(e):null,a};var Q=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(Q)?(Q.push("_z"),Q.push("_a")):Q&&(Q._z=null),a}),function(e,t){if("function"==typeof define&&define.amd)define(["moment"],t);else if("object"==typeof exports)try{module.exports=t(require("moment"))}catch(e){module.exports=t}e&&(e.momentDurationFormatSetup=e.moment?t(e.moment):t)}(this,function(ee){var te=!1,A=!1,ne=!1,T=!1,ie="escape years months weeks days hours minutes seconds milliseconds general".split(" "),re=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function ae(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function S(e){for(var t="";e;)t+="0",e-=1;return t}function U(e,t){var n=e+"+"+fe(Ie(t).sort(),function(e){return e+":"+t[e]}).join(",");return U.cache[n]||(U.cache[n]=Intl.NumberFormat(e,t)),U.cache[n]}function se(e,t,n){var i,r,a,s=t.useToLocaleString,o=t.useGrouping,l=o&&t.grouping.slice(),u=t.maximumSignificantDigits,c=t.minimumIntegerDigits||1,d=t.fractionDigits||0,h=t.groupingSeparator,f=t.decimalSeparator;if(s&&n){var g={minimumIntegerDigits:c,useGrouping:o};if(d&&(g.maximumFractionDigits=d,g.minimumFractionDigits=d),u&&0<e&&(g.maximumSignificantDigits=u),ne){var p;if(!T)(p=be({},t)).useGrouping=!1,p.decimalSeparator=".",e=parseFloat(se(e,p),10);return U(n,g).format(e)}return A||((p=be({},t)).useGrouping=!1,p.decimalSeparator=".",e=parseFloat(se(e,p),10)),e.toLocaleString(n,g)}var m=(u?e.toPrecision(u+1):e.toFixed(d+1)).split("e");a=m[1]||"",r=(m=m[0].split("."))[1]||"";var y=(i=m[0]||"").length,v=r.length,b=y+v,I=i+r;(u&&b===u+1||!u&&v===d+1)&&((I=function(e){for(var t=e.split("").reverse(),n=0,i=!0;i&&n<t.length;)n?"9"===t[n]?t[n]="0":(t[n]=(parseInt(t[n],10)+1).toString(),i=!1):(parseInt(t[n],10)<5&&(i=!1),t[n]="0"),n+=1;return i&&t.push("1"),t.reverse().join("")}(I)).length===b+1&&(y+=1),v&&(I=I.slice(0,-1)),i=I.slice(0,y),r=I.slice(y)),u&&(r=r.replace(/0*$/,""));var C=parseInt(a,10);0<C?r=r.length<=C?(i+=r+=S(C-r.length),""):(i+=r.slice(0,C),r.slice(C)):C<0&&(r=S(Math.abs(C)-i.length)+i+r,i="0"),u||((r=r.slice(0,d)).length<d&&(r+=S(d-r.length)),i.length<c&&(i=S(c-i.length)+i));var _,B="";if(o)for(m=i;m.length;)l.length&&(_=l.shift()),B&&(B=h+B),B=m.slice(-_)+B,m=m.slice(0,-_);else B=i;return r&&(B=B+f+r),B}function oe(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}U.cache={};var le={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,n){return 1===t&&null===n?e:e+e}};function ue(e){return"[object Array]"===Object.prototype.toString.call(e)}function ce(e){return"[object Object]"===Object.prototype.toString.call(e)}function de(e,t){var n,i=0,r=e&&e.length||0;for("function"!=typeof t&&(n=t,t=function(e){return e===n});i<r;){if(t(e[i]))return e[i];i+=1}}function he(e,t){var n=0,i=e.length;if(e&&i)for(;n<i;){if(!1===t(e[n],n))return;n+=1}}function fe(e,t){var n=0,i=e.length,r=[];if(!e||!i)return r;for(;n<i;)r[n]=t(e[n],n),n+=1;return r}function ge(e,t){return fe(e,function(e){return e[t]})}function pe(e){var t=[];return he(e,function(e){e&&t.push(e)}),t}function me(e){var t=[];return he(e,function(e){de(t,e)||t.push(e)}),t}function ye(e,n){var i=[];return he(e,function(t){he(n,function(e){t===e&&i.push(t)})}),me(i)}function ve(n,i){var r=[];return he(n,function(e,t){if(!i(e))return r=n.slice(t),!1}),r}function be(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ie(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function Ce(e,t){var n=0,i=e.length;if(!e||!i)return!1;for(;n<i;){if(!0===t(e[n],n))return!0;n+=1}return!1}function e(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function t(e){var t=!0;return!!(t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(!!(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(!!(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&!!(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1}))))}function n(){var n,e=[].slice.call(arguments),i={};if(he(e,function(e,t){if(!t){if(!ue(e))throw"Expected array as the first argument to durationsFormat.";n=e}"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?ce(e)&&be(i,e):i.precision=e:i.template=e}),!n||!n.length)return[];i.returnMomentTypes=!0;var t,r=fe(n,function(e){return e.format(i)}),a=ye(ie,me(ge((t=[],he(r,function(e){t=t.concat(e)}),t),"type"))),s=i.largest;return s&&(a=a.slice(0,s)),i.returnMomentTypes=!1,i.outputTypes=a,fe(n,function(e){return e.format(i)})}function i(){var e=[].slice.call(arguments),l=be({},this.format.defaults),t=this.asMilliseconds(),n=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(n=t=0);var i=t<0,u=ee.duration(Math.abs(t),"milliseconds"),c=ee.duration(Math.abs(n),"months");he(e,function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?ce(e)&&be(l,e):l.precision=e:l.template=e});var d={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},r={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};l.types=ie;var a=function(t){return de(ie,function(e){return r[e].test(t)})},s=new RegExp(fe(ie,function(e){return r[e].source}).join("|"),"g");l.duration=this;var o="function"==typeof l.template?l.template.apply(l):l.template,h=l.outputTypes,f=l.returnMomentTypes,g=l.largest,p=[];h||(ue(l.stopTrim)&&(l.stopTrim=l.stopTrim.join("")),l.stopTrim&&he(l.stopTrim.match(s),function(e){var t=a(e);"escape"!==t&&"general"!==t&&p.push(t)}));var m=ee.localeData();m||(m={}),he(Ie(le),function(e){"function"!=typeof le[e]?m["_"+e]||(m["_"+e]=le[e]):m[e]||(m[e]=le[e])}),he(Ie(m._durationTimeTemplates),function(e){o=o.replace("_"+e+"_",m._durationTimeTemplates[e])});var y=l.userLocale||ee.locale(),v=l.useLeftUnits,b=l.usePlural,I=l.precision,C=l.forceLength,_=l.useGrouping,B=l.trunc,A=l.useSignificantDigits&&0<I,T=A?l.precision:0,S=T,U=l.minValue,F=!1,k=l.maxValue,w=!1,x=l.useToLocaleString,E=l.groupingSeparator,Q=l.decimalSeparator,G=l.grouping;x=x&&(te||ne);var R=l.trim;ue(R)&&(R=R.join(" ")),null===R&&(g||k||A)&&(R="all"),null!==R&&!0!==R&&"left"!==R&&"right"!==R||(R="large"),!1===R&&(R="");var L=function(e){return e.test(R)},V=/both/,Z=/^all|[^sm]all/,O=0<g||Ce([/large/,V,Z],L),N=Ce([/small/,V,Z],L),W=Ce([/mid/,Z],L),D=Ce([/final/,Z],L),X=fe(o.match(s),function(e,t){var n=a(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==n&&"general"!==n&&p.push(n)),{index:t,length:e.length,text:"",token:"escape"===n?e.replace(r.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}}),P={index:0,length:0,token:"",text:"",type:null},M=[];v&&X.reverse(),he(X,function(e){if(e.type)return(P.type||P.text)&&M.push(P),void(P=e);v?P.text=e.token+P.text:P.text+=e.token}),(P.type||P.text)&&M.push(P),v&&M.reverse();var H=ye(ie,me(pe(ge(M,"type"))));if(!H.length)return ge(M,"text").join("");H=fe(H,function(t,e){var n,i=e+1===H.length,r=!e;n="years"===t||"months"===t?c.as(t):u.as(t);var a=Math.floor(n),s=n-a,o=de(M,function(e){return t===e.type});return r&&k&&k<n&&(w=!0),i&&U&&Math.abs(l.duration.as(t))<U&&(F=!0),r&&null===C&&1<o.length&&(C=!0),u.subtract(a,t),c.subtract(a,t),{rawValue:n,wholeValue:a,decimalValue:i?s:0,isSmallest:i,isLargest:r,type:t,tokenLength:o.length}});var Y,j=B?Math.floor:Math.round,z=function(e,t){var n=Math.pow(10,t);return j(e*n)/n},J=!1,q=!1,K=function(e,t){var n={useGrouping:_,groupingSeparator:E,decimalSeparator:Q,grouping:G,useToLocaleString:x};return A&&(T<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(n.maximumSignificantDigits=T,e.significantDigits=T)),w&&!q&&(e.isLargest?e.wholeValue=k:e.wholeValue=0,e.decimalValue=0),F&&!q&&(e.isSmallest?e.wholeValue=U:e.wholeValue=0,e.decimalValue=0),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?I<0?e.value=z(e.wholeValue,I):0===I?e.value=j(e.wholeValue+e.decimalValue):A?(e.value=B?z(e.rawValue,T-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(T-=e.wholeValue.toString().length)):(n.fractionDigits=I,e.value=B?e.wholeValue+z(e.decimalValue,I):e.wholeValue+e.decimalValue):A&&e.wholeValue?(e.value=Math.round(z(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),T-=e.wholeValue.toString().length):e.value=e.wholeValue,1<e.tokenLength&&(C||J)&&(n.minimumIntegerDigits=e.tokenLength,q&&n.maximumSignificantDigits<e.tokenLength&&delete n.maximumSignificantDigits),!J&&(0<e.value||""===R||de(p,e.type)||de(h,e.type))&&(J=!0),e.formattedValue=se(e.value,n,y),n.useGrouping=!1,n.decimalSeparator=".",e.formattedValueEn=se(e.value,n,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=se(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if(1<(H=pe(H=fe(H,K))).length){var $=function(t){return de(H,function(e){return e.type===t})};he(re,function(e){var n=$(e.type);n&&he(e.targets,function(e){var t=$(e.type);t&&parseInt(n.formattedValueEn,10)===e.value&&(n.rawValue=0,n.wholeValue=0,n.decimalValue=0,t.rawValue+=1,t.wholeValue+=1,t.decimalValue=0,t.formattedValueEn=t.wholeValue.toString(),q=!0)})})}return q&&(J=!1,T=S,H=pe(H=fe(H,K))),!h||w&&!l.trim?(O&&(H=ve(H,function(e){return!e.isSmallest&&!e.wholeValue&&!de(p,e.type)})),g&&H.length&&(H=H.slice(0,g)),N&&1<H.length&&(Y=function(e){return!e.wholeValue&&!de(p,e.type)&&!e.isLargest},H=ve(H.slice().reverse(),Y).reverse()),W&&(H=pe(H=fe(H,function(e,t){return 0<t&&t<H.length-1&&!e.wholeValue?null:e}))),!D||1!==H.length||H[0].wholeValue||!B&&H[0].isSmallest&&H[0].rawValue<U||(H=[])):H=pe(H=fe(H,function(t){return de(h,function(e){return t.type===e})?t:null})),f?H:(he(M,function(n){var e=d[n.type],t=de(H,function(e){return e.type===n.type});if(e&&t){var i=t.formattedValueEn.split(".");i[0]=parseInt(i[0],10),i[1]?i[1]=parseFloat("0."+i[1],10):i[1]=null;var r,a,s,o=m.durationPluralKey(e,i[0],i[1]),l=(r=e,s=[],he(Ie(a=m),function(t){if("_durationLabels"===t.slice(0,15)){var n=t.slice(15).toLowerCase();he(Ie(a[t]),function(e){e.slice(0,1)===r&&s.push({type:n,key:e,label:a[t][e]})})}}),s),u=!1,c={};he(m._durationLabelTypes,function(t){var e=de(l,function(e){return e.type===t.type&&e.key===o});e&&(c[e.type]=e.label,ae(n.text,t.string)&&(n.text=n.text.replace(t.string,e.label),u=!0))}),b&&!u&&(l.sort(oe),he(l,function(e){return c[e.type]===e.label?!ae(n.text,e.label)&&void 0:ae(n.text,e.label)?(n.text=n.text.replace(e.label,c[e.type]),!1):void 0}))}}),(M=fe(M,function(t){if(!t.type)return t.text;var e=de(H,function(e){return e.type===t.type});if(!e)return"";var n="";return v&&(n+=t.text),(i&&w||!i&&F)&&(n+="< ",F=w=!1),(i&&F||!i&&w)&&(n+="> ",F=w=!1),i&&(0<e.value||""===R||de(p,e.type)||de(h,e.type))&&(n+="-",i=!1),"milliseconds"===t.type&&e.formattedValueMS?n+=e.formattedValueMS:n+=e.formattedValue,v||(n+=t.text),n})).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function r(){var t=this.duration,e=function(e){return t._data[e]},n=de(this.types,e),i=function(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}(this.types,e);switch(n){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(n===i)return"d __";case"weeks":return n===i?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(n===i)return"M __";case"years":return n===i?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function a(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=n,e.duration.fn.format=i,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:r,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",le)}var s=function(e,t,n){return e.toLocaleString(t,n)};te=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&t(s),A=te&&e(s);var o=function(e,t,n){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,n).format(e)};return ne=t(o),T=ne&&e(o),a(ee),a});var objectFitImages=function(){"use strict";function a(e,t,n){var i="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+(t||1)+"' height='"+(n||0)+"'%3E%3C/svg%3E";g.call(e,"src")!==i&&p.call(e,"src",i)}function s(e,t){e.naturalWidth?t(e):setTimeout(s,100,e,t)}function o(t){var n,i,e=function(e){for(var t,n=getComputedStyle(e).fontFamily,i={};null!==(t=u.exec(n));)i[t[1]]=t[2];return i}(t),r=t[l];if(e["object-fit"]=e["object-fit"]||"fill",!r.img){if("fill"===e["object-fit"])return;if(!r.skipTest&&c&&!e["object-position"])return}if(!r.img){r.img=new Image(t.width,t.height),r.img.srcset=g.call(t,"data-ofi-srcset")||t.srcset,r.img.src=g.call(t,"data-ofi-src")||t.src,p.call(t,"data-ofi-src",t.src),t.srcset&&p.call(t,"data-ofi-srcset",t.srcset),a(t,t.naturalWidth||t.width,t.naturalHeight||t.height),t.srcset&&(t.srcset="");try{n=t,i={get:function(e){return n[l].img[e||"src"]},set:function(e,t){return n[l].img[t||"src"]=e,p.call(n,"data-ofi-"+t,e),o(n),e}},Object.defineProperty(n,"src",i),Object.defineProperty(n,"currentSrc",{get:function(){return i.get("currentSrc")}}),Object.defineProperty(n,"srcset",{get:function(){return i.get("srcset")},set:function(e){return i.set(e,"srcset")}})}catch(t){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}(function(e){if(e.srcset&&!f&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}})(r.img),t.style.backgroundImage='url("'+(r.img.currentSrc||r.img.src).replace(/"/g,'\\"')+'")',t.style.backgroundPosition=e["object-position"]||"center",t.style.backgroundRepeat="no-repeat",t.style.backgroundOrigin="content-box",/scale-down/.test(e["object-fit"])?s(r.img,function(){r.img.naturalWidth>t.width||r.img.naturalHeight>t.height?t.style.backgroundSize="contain":t.style.backgroundSize="auto"}):t.style.backgroundSize=e["object-fit"].replace("none","auto").replace("fill","100% 100%"),s(r.img,function(e){a(t,e.naturalWidth,e.naturalHeight)})}function r(e,t){var n=!m&&!e;if(t=t||{},e=e||"img",d&&!t.skipTest||!h)return!1;"img"===e?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var i=0;i<e.length;i++)e[i][l]=e[i][l]||{skipTest:t.skipTest},o(e[i]);n&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&r(e.target,{skipTest:t.skipTest})},!0),m=!0,e="img"),t.watchMQ&&window.addEventListener("resize",r.bind(null,e,{skipTest:t.skipTest}))}var l="bfred-it:object-fit-images",u=/(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g,e="undefined"==typeof Image?{style:{"object-position":1}}:new Image,c="object-fit"in e.style,d="object-position"in e.style,h="background-size"in e.style,f="string"==typeof e.currentSrc,g=e.getAttribute,p=e.setAttribute,m=!1;return r.supportsObjectFit=c,r.supportsObjectPosition=d,function(){function n(e,t){return e[l]&&e[l].img&&("src"===t||"srcset"===t)?e[l].img:e}d||(HTMLImageElement.prototype.getAttribute=function(e){return g.call(n(this,e),e)},HTMLImageElement.prototype.setAttribute=function(e,t){return p.call(n(this,e),e,String(t))})}(),r}();!function(){"use strict";window.PULSE||(window.PULSE={}),window.PULSE.core={},window.PULSE.app={},window.PULSE.ui={}}(),function(){"use strict";window.PULSE.core.common={},window.PULSE.core.data={},window.PULSE.core.date={},window.PULSE.core.dom={},window.PULSE.core.event={},window.PULSE.core.localStorage={},window.PULSE.core.object={},window.PULSE.core.style={},window.PULSE.core.url={}}(),function(e){e.common.formatString=function(e,t){if(e&&t){for(var n=Object.keys(t),i=0;i<n.length;i++)e=e.replace("{{"+n[i]+"}}",t[n[i]]);return e}return!1},e.common.commafy=function(e){return e.toString().replace(/(^|[^\w.])(\d{4,})/g,function(e,t,n){return t+n.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})},e.common.romanize=function(e){if(isNaN(parseFloat(e))||!isFinite(e))return!1;for(var t=String(+e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],i="",r=3;r--;)i=(n[+t.pop()+10*r]||"")+i;return Array(+t.join("")+1).join("M")+i},e.common.deromanize=function(e){var t,n=e.toUpperCase(),i=/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,r={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},a=0;if(!n||!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(n))return!1;for(;null!==(t=i.exec(n));)a+=r[t[0]];return a}}(PULSE.core),function(a){a.common.quicksort=function(e,t,n,i){if(t<n){var r=function(e,t,n,i){for(var r=e[n],a=t,s=t;s<n;s++)if(0<=i(e[s],r)){var o=e[a];e[a]=e[s],e[s]=o,a+=1}var l=e[a];return e[a]=e[n],e[n]=l,a}(e,t,n,i);a.common.quicksort(e,t,r-1,i),a.common.quicksort(e,r+1,n,i)}}}(PULSE.core),function(e){"use strict";var U=function(e){return"http://twitter.com/"+e},F=function(e){return"http://twitter.com/search?q=%23"+e},c={ie:navigator.userAgent.match(/MSIE\s([^;]*)/)};e.common.getTweetModel=function(e){var t,n,i,r,a=U(e.user.screen_name),s=e.timestamp_ms?new Date(parseInt(e.timestamp_ms,void 0)):(t=e.created_at,n=new Date(Date.parse(t)),c.ie&&(n=Date.parse(t.replace(/( \+)/," UTC$1"))),n),o="";if(e.entities&&e.entities.media)for(var l=0,u=e.entities.media.length;l<u;l++)"photo"===e.entities.media[l].type&&(o=e.entities.media[l].media_url);return{timestamp:e.timestamp_ms,date:s,id:e.id_str,text:function(e,t){if(!t)return e.replace(/(https{0,1}:\/\/\S+)/g,'<a target="_blank" href="$1">$1</a>').replace(/@(\S+)/g,'<a target="_blank" href="http://twitter.com/$1">@$1</a>').replace(/#(\S+)/g,'<a target="_blank" href="http://twitter.com/#!/search?q=%23$1">#$1</a>');var n,i=[];if(t.urls)for(var r=0,a=t.urls.length;r<a;r++){var s=t.urls[r];n='<a href="'+s.url+'" title="'+s.expanded_url+'" target="_blank">'+s.display_url+"</a>",i.push({html:n,original:s.url,start:s.indices[0],end:s.indices[1]})}if(t.media)for(var o=0,l=t.media.length;o<l;o++){var u=t.media[o];n='<a href="'+u.url+'" title="'+u.expanded_url+'" target="_blank">'+u.display_url+"</a>",i.push({html:n,original:u.url,start:u.indices[0],end:u.indices[1]})}if(t.user_mentions)for(var c=0,d=t.user_mentions.length;c<d;c++){var h=t.user_mentions[c];n='<a href="'+U(h.screen_name)+'" target="_blank">&#64;'+h.screen_name+"</a>",i.push({html:n,original:"@"+h.screen_name,start:h.indices[0],end:h.indices[1]})}if(t.hashtags)for(var f=0,g=t.hashtags.length;f<g;f++){var p=t.hashtags[f];n='<a href="'+F(p.text)+'" target="_blank">&#35;'+p.text+"</a>",i.push({html:n,original:"#"+p.text,start:p.indices[0],end:p.indices[1]})}i.sort(function(e,t){return e.start-t.start});for(var m=0,y=i.length;m<y;m++){var v=i[m],b=e.toLowerCase(),I=v.original.toLowerCase();v.start=b.search(I),v.end=v.start+v.original.length}for(var C="",_=0,B=0,A=i.length;B<A;B++){var T=i[B],S=T.start-_;C+=e.substr(_,S),C+=T.html,_=T.end}return C+e.substr(_)}(e.text),link:(i=e,r=i.user.screen_name,U(r)+"/status/"+i.id_str),photo:o,user:{id:e.user.id_str,name:e.user.name,account:e.user.screen_name,link:a,description:e.user.description,avatarUrl:e.user.profile_image_url},favorites:e.favorite_count,retweets:e.retweet_count}}}(PULSE.core),function(s){"use strict";var n,i,r;s.data.manager={},s.data.manager=(n={},i=function(e){var r=this;r.url=e.url,r.method=e.method,r.target=e.target,r.type=e.type,r.subscribers=[],r.headers=e.headers,r.requestPayload=e.requestPayload||!1,r.data=null,r.formData=e.formData||!1;var n=function(i,e){r.subscribers.forEach(function(e){var t,n;(!r.data||e.forceCallback||(t=i,(n=function(e){if("object"!=typeof e)return e;var t="";for(var n in e)e.hasOwnProperty(n)&&"fullXhttpResponse"!==n&&(t+=JSON.stringify(e[n]));return t})(r.data)!=n(t)))&&e.callback.call(e.target,i,e.config)}),r.data=i},i=function(){var t=!1;return r.subscribers.map(function(e){e.jsonpCallback&&(t=e.jsonpCallback)}),t},a=function(){var t;t=!1,r.subscribers.map(function(e){e.constant&&(t=e.constant)}),t&&r.data?n(r.data):s.data.request(r.url,r.method,n,r.target,r.jsonpCallback,r.requestPayload,r.headers,r.type,r.formData)};r.stop=function(){r.timer&&clearInterval(r.timer)},r.start=function(){a();var t,e=(t=!1,r.subscribers.forEach(function(e){(!t||e.interval<t)&&(t=e.interval)}),r.interval=t);e&&(r.timer=setInterval(a,e))},r.add=function(e){r.stop(),r.subscribers.push(e),r.jsonpCallback=i(),r.start()},r.remove=function(e){r.stop();var t=r.subscribers.indexOf(e);r.subscribers.splice(t,1),0<r.subscribers.length?(r.jsonp=i(),r.start()):r.data=!1}},r=function(e,t){var n=this;n.config=e,n.callback=e.callback,n.target=e.target,n.interval=e.interval,n.forceCallback=e.forceCallback||!1,n.jsonpCallback=e.jsonpCallback||!1,n.constant=e.constant||!1,n.data=e.data||!1,n.formData=e.formData||!1,n.headers=e.headers||[],n.stop=function(){t.remove(n)},n.start=function(){t.subscribers.indexOf(n)<0&&t.add(n)},n.request=function(){s.data.request(t.url,"GET",n.callback,n.target,n.jsonpCallback,n.data,n.headers,n.type,n.formData)}},{add:function(e){n[e.url]||(n[e.url]=new i({url:e.url,method:e.method,type:e.type,headers:e.headers||[],requestPayload:e.data||!1,formData:e.formData||!1}));var t=new r(e,n[e.url]);return n[e.url].add(t),t},remove:function(e){void 0!==n[e.url]&&delete n[e.url]}})}(PULSE.core),function(e){"use strict";PULSE.core.data.request=function(e,t,n,i,r,a,s,o,l){var u={url:e,method:t||"GET",target:i,callback:n,requestPayload:a||{},formData:l||!1,headers:s||[],type:o||"json"};if(r){var c=function(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t);var n=document.createElement("script");return n.id=e,n.src=u.url,n}(r);window[r]=function(e){u.callback.call(u.target,e,u)},document.body.appendChild(c)}else{var d=new XMLHttpRequest;d.open(u.method,u.url,!0);var h=!1;u.headers.length&&u.headers.forEach(function(e){d.setRequestHeader(e.label,e.value),"Content-Type"===e.label&&e.value&&(h=!0)}),h||u.formData||d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.responseType=u.type,d.onreadystatechange=function(){var e;4===this.readyState&&(200<=this.status&&this.status<400?(e="json"===u.type&&("string"==typeof this.response||this.response instanceof String)?JSON.parse(this.response):this.response||{}).fullXhttpResponse=this:e={fullXhttpResponse:this},u.callback.call(u.target,e,u))},"POST"===u.method||"PUT"===u.method||"DELETE"===u.method?d.send(u.formData?u.requestPayload:f(u.requestPayload)):(d.data=u.requestPayload,d.send()),d=null}};var f=function(e){var t=[];for(var n in e)void 0!==e[n]&&t.push(n+"="+e[n]);var i="";return 0<t.length&&(i+=t.join("&")),i}}(),function(i){i.dom.appendDomString=function(e,t,n,i){var r="boolean"==typeof i&&!0===i,a=!!r&&[],s=document.createElement("div");if(s.innerHTML=t,!n)return e.appendChild(s.children[0]);for(var o=s.children.length,l=0;l<o;l++)r&&"object"==typeof a&&a.push(e.appendChild(s.children[0])),l===i?a=e.appendChild(s.children[0]):r||e.appendChild(s.children[0]);return a||e},i.dom.prependDomString=function(e,t,n,i){var r="boolean"==typeof i&&!0===i,a=!!r&&[],s=document.createElement("div");if(s.innerHTML=t,!n)return e.insertBefore(s.children[0],e.firstChild);for(var o=s.children.length,l=0;l<o;l++)r&&"object"==typeof a&&a.push(e.insertBefore(s.children[0],e.firstChild)),l===i?a=e.insertBefore(s.children[0],e.firstChild):r||e.insertBefore(s.children[0],e.firstChild);return a||e},i.dom.isWhitespace=function(e){return 3==e.nodeType&&/^\s*$/.test(e.data)},i.dom.getNextSiblings=function(e,t){for(var n=[];null!==(e=e.nextSibling);)i.dom.isWhitespace(e)||t&&!t(e)||n.push(e);return n},i.dom.getPreviousSiblings=function(e,t){for(var n=[];null!==(e=e.previousSibling);)i.dom.isWhitespace(e)||t&&!t(e)||n.push(e);return n},i.dom.isDescendant=function(e,t){for(var n=e.parentNode;null!==n;){if(n==t)return!0;n=n.parentNode}return!1},i.dom.isElementInView=function(e,t){var n=e.getBoundingClientRect(),i=0<=n.top&&n.top<window.innerHeight,r=0<=n.bottom&&n.bottom<window.innerHeight,a=0<=n.left&&n.left<window.innerWidth,s=0<=n.right&&n.right<window.innerWidth;return t?i&&r&&a&&s:(i||r)&&(a||s)},i.dom.scrollWindowToElement=function(e,t,i){var r=e.offsetTop;isNaN(t)||(r+=t),isNaN(i)&&(i=100);var a,n=r<(window.scrollY||window.pageYOffset);a=n?requestAnimationFrame(function e(){var t=window.scrollY||window.pageYOffset,n=t-i;n<=r?window.scrollTo(window.scrollX||window.pageXOffset,r):window.scrollTo(window.scrollX||window.pageXOffset,n),t<=r?cancelAnimationFrame(a):requestAnimationFrame(e)}):requestAnimationFrame(function e(){var t=window.scrollY||window.pageYOffset,n=t+i;r<=n?window.scrollTo(window.scrollX||window.pageXOffset,r):window.scrollTo(window.scrollX||window.pageXOffset,n),r<=t?cancelAnimationFrame(a):requestAnimationFrame(e)})}}(PULSE.core),function(e){"use strict";PULSE.core.date.parseString=function(e){if(e){var t;"string"!=typeof e&&(e=e.toISOString());var n=e.split("T");if(1===n.length)return new Date(n[0].replace(/\-/g,"/"));if(2===n.length){var i=n[0].replace(/\-/g,"/"),r=n[1];t=new Date(i+" "+r)}return t&&t.getTime()&&!isNaN(t.getTime())||(t=new Date(e))&&t.getTime()&&isNaN(t.getTime()),t}}}(),function(r){"use strict";r.localStorage={},r.localStorage.setStorage=function(i,r,a,e,s){var t=function(){var e=new Date;a instanceof Date?e=a:e.setDate(e.getDate()+a);var t=escape(r)+(null===a?"":"; expires="+e.toUTCString())+";",n=s?" domain="+(s||window.location.host)+";":"";document.cookie=i+"="+t+n+" path=/"};e?t():"localStorage"in window&&null!==window.localStorage?window.localStorage.setItem(i,r):t()},r.localStorage.getStorage=function(r,e){var t=function(){var e,t,n,i=document.cookie.split(";");for(e=0;e<i.length;e++)if(t=i[e].substr(0,i[e].indexOf("=")),n=i[e].substr(i[e].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==r)return unescape(n)};return e?t():"localStorage"in window&&null!==window.localStorage?window.localStorage.getItem(r):t()},r.localStorage.clearStorage=function(e,t,n){var i=function(){r.localStorage.setStorage(encodeURIComponent(e),"",-1,!0,n)};t?i():"localStorage"in window&&null!==window.localStorage?window.localStorage.removeItem(e):i()}}(PULSE.core),function(e){"use strict";PULSE.core.event.listenForMultiple=function(e,t,n){if(e&&t&&t.length&&n&&"function"==typeof n){for(var i=0;i<t.length;i++)e.addEventListener(t[i],n);return!0}return!1}}(),function(e){var i=[],r=function(e){for(var t,n=0;n<i.length;n++)!(t=i[n])||t.element===e.target||t.element&&t.element.contains(e.target)||e.target===t.preventTriggerOn||t.preventTriggerOn&&t.preventTriggerOn.contains(e.target)||"function"!=typeof t.callback||t.callback(t.element)};e.event.listenForOutsideClick={addElement:function(e,t,n){0===i.length&&document.addEventListener("click",r),i.push({element:e,callback:t,preventTriggerOn:n})},removeElement:function(e){for(var t=0;t<i.length;t++)i[t]&&i[t].element===e&&i.splice(t,1);0===i.length&&document.removeEventListener("click",r)}}}(PULSE.core),function(e){"use strict";PULSE.core.event.windowOnScroll=new function(){var n=this;n.initialised=!1,n.notifiers=[],n.add=function(e){n.notifiers.indexOf(e)<0&&n.notifiers.push(e),n.initialised||t()},n.remove=function(e){var t=n.notifiers.indexOf(e);t&&n.notifiers.splice(t,1)};var t=function(){window.onscroll=function(){n.notifiers.map(function(e){e.method(e.args)})},n.initialised=!0}}(100)}(),function(e){"use strict";PULSE.core.event.windowResize=new function(e){var t,n=this;n.timer=e||200,n.initialised=!1,n.notifiers=[],n.add=function(e){n.notifiers.indexOf(e)<0&&n.notifiers.push(e),n.initialised||i()},n.remove=function(e){var t=n.notifiers.indexOf(e);t&&n.notifiers.splice(t,1)};var i=function(){window.onresize=function(){clearTimeout(t),t=setTimeout(function(){n.notifiers.map(function(e){e.method(e.args)})},n.timer)},n.initialised=!0}}(100)}(),function(a){"use strict";a.object.extend=function(){var n={},i=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0],e++);for(var r=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=i?a.object.clone(e[t]):e[t])};e<t;e++){r(arguments[e])}return n},a.object.clone=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(function(e){return a.object.clone(e)});var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]=a.object.clone(e[n]));return t},a.object.objectByString=function(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0,r=n.length;i<r;++i){var a=n[i];if(!(a in e))return;e=e[a]}return e},a.object.objectSize=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},a.object.sameObject=function(e,t){if(a.object.objectSize(e)!=a.object.objectSize(t))return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0},a.object.getNestedItemFromPath=function(e,t){if(0===e.length)return t;for(var n=t,i=0;i<e.length;i++)n=n[e[i]];return n},a.object.makeArray=function(e){var t=[];if(a.object.isArray(e))t=e;else if("number"==typeof e.length)for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t},a.object.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}}(PULSE.core),function(n){"use strict";n.style={},n.style.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},n.style.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},n.style.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},n.style.toggleClass=function(e,t){n.style.hasClass(e,t)?n.style.removeClass(e,t):n.style.addClass(e,t)},n.style.outerWidth=function(e){var t=e.offsetWidth,n=e.currentStyle||getComputedStyle(e);return t+(("auto"===n.marginLeft?0:parseInt(n.marginLeft,10))+("auto"===n.marginRight?0:parseInt(n.marginRight,10)))}}(PULSE.core),function(a){a.url.updateUrlStringParam=function(e,t,n){var i=t+"="+n;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("([\\?&])"+t+"=([^&#]*)").exec(e);if(r){var a=r[1],s=void 0!==n&&""!==n?a+i:a;e=e.replace(r[0],s)}else void 0!==n&&""!==n&&(e=-1===e.indexOf("?")?e+"?"+i:e+"&"+i);return e},a.url.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);if(!n)return null;if(!n[2])return"";var i=decodeURIComponent(n[2].replace(/\+/g," "));return"null"===i&&(i=null),i},a.url.getParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},a.url.setUrlWithParams=function(e,t){var n=(t=t||{}).state||{},i=t.title||document.title,r=t.url||window.location.href.split("?")[0];t.name,r+=a.url.buildQueryString(e,!0),window.history.pushState(n,i,r)},a.url.buildQueryString=function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)&&void 0!==e[i]&&("[object Array]"!==Object.prototype.toString.call(e[i])||e[i].length)){var r=[].concat(e[i]).join(","),a=[i,encodeURIComponent(r)];n.push(a.join("="))}return n.length?(t?"?":"")+n.join("&"):""}}(PULSE.core),function(e){e.loader=function(e,t){var n=this;n.element=e,n.append=t.append,n.init=t.init,n.active=!1,n.loaderTemplate=t.loaderTemplate,n.init&&n.addLoader()},e.loader.prototype.removeLoader=function(){var e=this;e.element&&e.active&&(e.loaderDiv?e.element.removeChild(e.loaderDiv):e.element.innerHTML="",e.active=!1)},e.loader.prototype.addLoader=function(){var e=this,t=Mustache.render(e.loaderTemplate,{});e.append?(e.loaderDiv=document.createElement("div"),e.loaderDiv.innerHTML=t,e.element.insertBefore(e.loaderDiv,e.element.firstChild)):e.element.innerHTML=t,e.active=!0}}(PULSE.ui),function(e,o){"use strict";var i=function(e){var t;(function(t){var e=document.getElementById(t.config.modalWrapId);e?t.config.modal=e:(t.config.modal=document.createElement("div"),t.config.modal.id=t.config.modalWrapId,t.config.modalWrapClass&&o.style.addClass(t.config.modal,t.config.modalWrapClass),t.config.modal.addEventListener("click",function(e){t.config.modal===e.target&&t.close()}),document.body.insertBefore(t.config.modal,document.body.firstChild));var n=t.config.modal.querySelector("#"+t.config.modalContentId);if(n)t.config.modalContent=n;else{t.config.modalContent=document.createElement("div"),t.config.modalContent.id=t.config.modalContentId,t.config.modalContentWrapClass&&o.style.addClass(t.config.modalContent,t.config.modalContentWrapClass),t.config.modal.appendChild(t.config.modalContent);var i=document.createElement("a");o.style.addClass(i,"close"),i.setAttribute("role","button"),i.setAttribute("tabindex",0),i.textContent=t.config.closeText,i.addEventListener("click",function(){t.close()}),i.addEventListener("keydown",function(e){13==e.which&&t.close()}),t.config.modalContent.appendChild(i)}t.config.closeBtn=t.config.modalContent.querySelector("a.close")})(e),t=e,Array.prototype.map.call(t.config.activators,t.createInstance.bind(t))};e.modal=function(e){var t,n=this;n.config=((t=e||{}).parent||(t.parent=document),t.selector||(t.selector="[data-ui-modal]"),t.openClass||(t.openClass="open"),t.modalWrapId||(t.modalWrapId="modalWrap"),t.modalContentId||(t.modalContentId="modalContent"),t.closeText||(t.closeText="close"),t.activators=t.parent.querySelectorAll(t.selector),t.instances=[],t),n.escapeClose=function(e){27==e.which&&n.close()},i(n)},e.modal.prototype.open=function(){var e=this;return document.addEventListener("keydown",e.escapeClose),o.style.addClass(e.config.modal,e.config.openClass),"function"==typeof e.config.openCallback&&e.config.openCallback(e),setTimeout(function(){e.config.closeBtn.focus()},100),e},e.modal.prototype.close=function(){var e=this;return document.removeEventListener("keydown",e.escapeClose),o.style.removeClass(e.config.modal,e.config.openClass),"function"==typeof e.config.closeCallback&&e.config.closeCallback(e),e},e.modal.prototype.setInstance=function(e){return(this.config.current=e).show(),this},e.modal.prototype.createInstance=function(e){var t,n=this,i=document.querySelectorAll(e.getAttribute("data-ui-modal"));e.getAttribute("data-ui-args")&&(t=JSON.parse(e.getAttribute("data-ui-args")));var r,a,s={activator:e,content:i[0],uiArgs:t};s.show=function(){n.config.instances.forEach(function(e){o.style.removeClass(e.content,n.config.openClass)}),o.style.addClass(s.content,n.config.openClass)},s.content.parentElement!==n.config.modalContent&&n.config.modalContent.appendChild(s.content),n.config.instances.push(s),a=n,(r=s).activator.addEventListener("click",function(e){e.preventDefault(),a.setInstance(r),a.open(r)}),r.activator.setAttribute("data-modal-active",!0)}}(PULSE.ui,PULSE.core),function(e,a){"use strict";var i=function(e){e.moreNavs={},e.moreNavs.visible=!1;var t=document.createElement(e.config.navItemTag);a.style.addClass(t,e.config.moreWrapClass),e.moreNavs.nav=t;var n=function(t){var e;if(t.config.moreButton instanceof HTMLElement)e=t.config.moreButton;else if("string"==typeof t.config.moreButton&&0<t.config.moreButton.length){var n=document.createElement("div");n.innerHTML=t.config.moreButton,e=n.children[0]}else{(e=document.createElement("div")).textContent=t.config.moreLabel;var i=document.createElement("span");a.style.addClass(i,t.config.iconPrefix),a.style.addClass(i,t.config.iconClass),e.appendChild(i)}return a.style.addClass(e,t.config.moreToggleClass),e.addEventListener("click",function(){l(t)}),e.addEventListener("keypress",function(e){13===(e.which||e.keyCode)&&l(t)}),e.setAttribute("tabindex",0),e}(e);t.appendChild(n),e.moreNavs.button=n;var i=document.createElement(e.config.navWrapTag);a.style.addClass(i,e.config.moreDropdownClass),t.appendChild(i),e.moreNavs.dropdown=i,e.config.navItemsWrap.appendChild(t),t.isMoreNav=!0,e.config.navs.push(t),e.moreNavs.wrapWidth=0,s(e);var r={method:function(e){s(e.scope)},args:{scope:e}};a.event.windowResize.add(r)},s=function(i){var e=getComputedStyle(i.config.navItemsWrap),t=parseInt(e.paddingLeft)+parseInt(e.paddingRight),n=a.style.outerWidth(i.config.navWrap)-(t+i.config.toleranceWidth);if(i.moreNavs.wrapWidth!==n){var r=n;o(i,!0),r-=a.style.outerWidth(i.moreNavs.nav),o(i,!1),i.config.navs.forEach(function(e,t){if(!e.isMoreNav){var n=0;-1!==r&&(i.aboveTriggerThreshold&&c(e,i),n=a.style.outerWidth(e)),r<n?(i.aboveTriggerThreshold&&u(e,i),r=-1):r-=n}}),-1===r&&o(i,!0),d(i),i.moreNavs.wrapWidth=n}},o=function(e,t){e.aboveTriggerThreshold&&(t?(a.style.addClass(e.config.navItemsWrap,"showMoreEnabled"),a.event.listenForOutsideClick.addElement(e.moreNavs.dropdown,function(){l(e,!0)},e.moreNavs.button)):(a.style.removeClass(e.config.navItemsWrap,"showMoreEnabled"),a.event.listenForOutsideClick.removeElement(e.moreNavs.dropdown)))},l=function(e,t){t?a.style.removeClass(e.moreNavs.nav,e.config.openClass):a.style.toggleClass(e.moreNavs.nav,e.config.openClass)},u=function(e,t){if(!a.style.hasClass(e,t.config.hideClass)){e.navClone||(e.navClone=e.cloneNode(!0)),e.isHidden=!0,a.style.addClass(e,t.config.hideClass);var n=t.moreNavs.dropdown.getElementsByTagName(t.config.navItemTag);if(0===n.length)t.moreNavs.dropdown.appendChild(e.navClone);else for(var i=0;i<n.length;i++){if(e.index>n[i].getAttribute(t.config.dataNavIndexSelector))return void t.moreNavs.dropdown.insertBefore(e.navClone,n[i]);i===n.length-1&&t.moreNavs.dropdown.appendChild(e.navClone)}}},c=function(e,t){a.style.hasClass(e,t.config.hideClass)&&(e.isHidden=!1,a.style.removeClass(e,t.config.hideClass),t.moreNavs.dropdown.removeChild(e.navClone))},d=function(e){for(var t=!1,n=0;n<e.moreNavs.dropdown.childNodes.length;n++)if(e.moreNavs.dropdown.childNodes[n].classList.contains(e.config.activeClass)){t=!0;break}t?a.style.addClass(e.moreNavs.dropdown.parentNode,e.config.activeClass):a.style.removeClass(e.moreNavs.dropdown.parentNode,e.config.activeClass)},r=function(e){!function(t){t.config.navItemsWrap=t.config.navWrap.querySelector(t.config.navWrapTag);var n=0;Array.prototype.map.call(t.config.navItemsWrap.children,function(e){e.tagName.toLowerCase()===t.config.navItemTag.toLowerCase()&&(e.setAttribute(t.config.dataNavIndexSelector,n++),t.config.navs.push(e))}),t.config.navItemsWrap.children&&(t.numMenuItems=t.config.navItemsWrap.children.length),t.aboveTriggerThreshold=t.numMenuItems>=t.config.minTrigger,i(t),d(t)}(e)};e.moreNav=function(e){var t,n=this;n.config=((t=e||{}).dataNavIndexSelector||(t.dataNavIndexSelector="data-nav-index"),t.navWrap||(t.navWrap=document.querySelector("[data-ui-more-nav]")),t.navWrapTag||(t.navWrapTag="ul"),t.navItemTag||(t.navItemTag="li"),t.moreWrapClass||(t.moreWrapClass="more"),t.moreButton||(t.moreLabel||(t.moreLabel="More"),t.iconPrefix||(t.iconPrefix="icn"),t.iconClass||(t.iconClass="chevron-down")),t.moreToggleClass||(t.moreToggleClass="moreToggle"),t.moreDropdownClass||(t.moreDropdownClass="moreToggleDropdown"),t.activeClass||(t.activeClass="active"),t.openClass||(t.openClass="open"),t.hideClass||(t.hideClass="hide"),t.toleranceWidth||(t.toleranceWidth=20),t.minTrigger||(t.minTrigger=0),t.navs=[],t),r(n),"function"==typeof n.config.buildCallback&&n.config.buildCallback(n)},e.moreNav.prototype.reset=function(){this.moreNavs.wrapWidth=0,s(this)}}(PULSE.ui,PULSE.core),function(e,a){e.pagination=function(e,t){var n,i,r=this;r.config=t||{},r.element=e,r.paginationTemplate=t.paginationTemplate,(i=r).element.innerHTML=Mustache.render(i.paginationTemplate,{}),i.previousContainer=i.element.getElementsByClassName("paginationPreviousContainer")[0],i.nextContainer=i.element.getElementsByClassName("paginationNextContainer")[0],r.initPagination(t.pageInfo),(n=r).previousContainer.addEventListener("click",function(e){a.style.hasClass(n.previousContainer,"inactive")||(n.pageInfo.page--,n.refreshPagination(n.config.callback))}),n.nextContainer.addEventListener("click",function(e){a.style.hasClass(n.nextContainer,"inactive")||(n.pageInfo.page++,n.refreshPagination(n.config.callback))})},e.pagination.prototype.initPagination=function(e){var t=this;t.pageInfo=e||{},t.pageInfo.page||(t.pageInfo.page=0),t.pageInfo.pageSize||(t.pageInfo.pageSize=10),t.pageInfo.numEntries||(t.pageInfo.numEntries=0),!t.pageInfo.numPages&&-1<parseInt(t.pageInfo.numEntries)&&(t.pageInfo.numPages=Math.ceil(parseInt(t.pageInfo.numEntries)/parseInt(t.pageInfo.pageSize))),t.refreshPagination()},e.pagination.prototype.refreshPagination=function(e){var t=this;void 0!==t.pageInfo.numPages&&(t.pageInfo.page>=t.pageInfo.numPages-1||t.pageInfo.numPages<1)||void 0===t.pageInfo.numPages&&t.pageInfo.currentSize<t.pageInfo.pageSize?(t.pageInfo.page=void 0!==t.pageInfo.numPages?t.pageInfo.numPages-1:t.pageInfo.page,a.style.addClass(t.nextContainer,"inactive")):a.style.removeClass(t.nextContainer,"inactive"),0<t.pageInfo.page?a.style.removeClass(t.previousContainer,"inactive"):(t.pageInfo.page=0,a.style.addClass(t.previousContainer,"inactive")),e&&t.config.target&&e.call(t.config.target,t.pageInfo)},e.pagination.prototype.updateCurrentSize=function(e){this.pageInfo.currentSize=e,this.refreshPagination()}}(PULSE.ui,PULSE.core),function(i,n){"use strict";var r=function(e,t){var n=t.getSocialDataset(e.currentTarget);n&&n.socialService&&i.socialHelpers[n.socialService].sharePage(null,!1,t.selectedText,t.config.hideUrl,e.currentTarget)},a=function(e,t){t.mouseDown&&(t.pointer=e,setTimeout(function(){s(t),t.mouseDown=!1},t.config.delay))},s=function(e){e.selectedText=t(),e.selectedText&&e.selectedText.length?o(e):l(e)},t=function(){var e="";return void 0!==window.getSelection?e=window.getSelection().toString():void 0!==document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text),String.prototype.trim&&(e=e.trim()),e},o=function(e){n.style.addClass(e.shareOptions,e.config.activeClass);var t=(e.pointer.pageY,e.contentElement.offsetTop,document.documentElement.scrollTop>document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);e.shareOptions.style.left=(e.shareOptions.offsetWidth?e.pointer.clientX-e.shareOptions.offsetWidth/2:e.pointer.clientX)+"px",e.shareOptions.style.top=e.pointer.clientY+t+"px"},l=function(e){n.style.removeClass(e.shareOptions,e.config.activeClass)},u=function(e){e.contentElement=document.querySelector(e.config.content),e.shareOptions=document.querySelector(e.config.shareOptions),e.shareChannels=document.querySelectorAll(e.config.shareChannels),e.contentElement&&e.shareOptions&&function(t){if(t.contentElement.addEventListener("mousedown",function(e){t.mouseDown=!0}),t.contentElement.addEventListener("touchstart",function(e){t.mouseDown=!0}),document.body.addEventListener("mouseup",function(e){a(e,t)}),document.body.addEventListener("touchend",function(e){e.changedTouches.length&&a(e.changedTouches[0],t)}),document.body.addEventListener("mousedown",function(){l(t)}),document.body.addEventListener("keydown",function(){l(t)}),t.shareChannels.length)for(var e=function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof t.config.channelSelectionCallback?t.config.channelSelectionCallback(this,t.selectedText):r(e,t)},n=function(e){e.preventDefault()},i=0;i<t.shareChannels.length;i++)t.shareChannels[i].addEventListener("mousedown",e),t.shareChannels[i].addEventListener("touchstart",e),null!==t.shareChannels[i].getAttribute("prevent-action")&&t.shareChannels[i].addEventListener("click",n)}(e)};i.shareText=function(e){var t,n=this;n.config=((t=e||{}).activeClass||(t.activeClass="active"),t.socialService||(t.socialService="data-social-service"),void 0===t.hideUrl&&(t.hideUrl=!0),t.delay||(t.delay=250),t),u(n),"function"==typeof n.config.buildCallback&&n.config.buildCallback(n)},i.shareText.prototype.getSocialDataset=function(e){var t=e;do{if(!t)break;if(t.getAttribute("data-social-service"))return t.dataset;t=t.parentElement}while(t!==this.element);return!1}}(PULSE.ui,PULSE.core),function(e){var t=function(e){this.name=e,this.socialLinks={twitter:{shareUrl:"http://www.twitter.com/intent/tweet?text="},facebook:{shareUrl:"http://www.facebook.com/sharer/sharer.php?u="},googleplus:{shareUrl:"http://plus.google.com/share?url="},whatsapp:{shareUrl:"whatsapp://send?text="},email:{}},this.defaultWindowConfiguration={width:"500",height:"500",menubar:0,location:1,resizable:0,scrollbars:0,status:0,titlebar:0,toolbar:0}};t.prototype.buildShareUrl=function(e,t,n,i){var r=e||window.location.href,a=i?"":r;return t&&(a+=" "+t),"facebook"===n&&(a=r),this.socialLinks[this.name].shareUrl+encodeURIComponent(a)},t.prototype.makeWindowConfigurationString=function(e){if(e){var t=Object.keys(e),n="";for(c=0;c<t.length;c++)n+=t[c]+"="+e[t[c]],c<t.length-1&&(n+=",");return n}return!1},t.prototype.sharePage=function(e,t,n,i,r){var a,s=this;switch(s.name){case"email":r&&(a="mailto:?body="+n,r.setAttribute("href",a));break;case"whatsapp":r&&(a=s.socialLinks.whatsapp.shareUrl+n,r.setAttribute("href",a));break;default:window.open(s.buildShareUrl(e,n,s.name,i),"_blank",s.makeWindowConfigurationString(t||s.defaultWindowConfiguration))}},e.socialHelpers={twitter:new t("twitter"),facebook:new t("facebook"),google:new t("googleplus"),email:new t("email"),whatsapp:new t("whatsapp")}}(PULSE.ui),function(r,a){"use strict";r.photoGalleries=[];var s=function(e){e.wrapper=document.createElement("div"),e.wrapper.className="swingSloth__wrapper"},o=function(e){e.viewport=document.createElement("div"),e.viewport.className="swingSloth__viewport",e.viewport.style.position="relative",e.viewport.style.overflow=e.config.singlePhotoViewer?"visible":"hidden"},l=function(e){var t=document.createElement("div");t.className="swingSloth__slider",e.slider=t},u=function(e){if(!document.getElementById("swingsloth__css-styles")){var t=".swingSloth__wrapper.expanded { position: fixed; width: 100%; height: 100%; max-width: none; top: 0; left: 0; }";t+=".swingSloth__viewport { width: 100%; }",t+=".swingSloth__wrapper.expanded .bigger-than-viewport img { height: 100%; width: auto; margin: 0 auto; }";var n=document.createElement("style");n.type="text/css",n.setAttribute("id","swingsloth__css-styles"),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.querySelector("head").appendChild(n)}},c=function(e){e.dragging.initHandlers(e)},d=function(e){e.viewport.appendChild(e.slider),e.wrapper.appendChild(e.viewport),e.element.insertBefore(e.wrapper,e.element.firstChild),a.style.addClass(e.element,"swingSloth");var t=e.element.querySelectorAll(e.config.itemSelector);if(!e.isActive&&t.length){if(e.isActive=!0,i(t,e.slider),h(e),m(e),e.width=e.viewport.offsetWidth,e.config.resize){var n={method:function(){T(e)}};a.event.windowResize.add(n)}f(e),e.animation.animate(e),"function"==typeof e.config.onGalleryBuilt&&setTimeout(function(){e.config.onGalleryBuilt()},0)}},i=function(e,t){for(e=a.object.makeArray(e);e.length;)t.appendChild(e.shift())},h=function(e){e.items=t(e),n(e),p(e),B(e),e.config.created&&y(e)},f=function(e){window.addEventListener("scroll",F,!1),document.onkeydown=U},n=function(e){for(var t,n=0,i=e.items.length;n<i;n++)(t=e.items[n]).width=t.element.offsetWidth,t.height=t.element.offsetHeight,t.positionX=n*t.width,e.expanded&&t.height>=window.innerHeight?(a.style.addClass(t.element,"bigger-than-viewport"),t.width=t.element.offsetWidth,t.height=t.element.offsetHeight,t.positionX=n*t.width):a.style.removeClass(t.element,"bigger-than-viewport"),t.height<e.highestItem?(t.element.style.top="50%",!e.config.singlePhotoViewer||e.config.singlePhotoViewer&&e.expanded?t.element.style.marginTop=-t.height/2+"px":t.element.style.marginTop=0):(t.element.style.top=0,t.element.style.marginTop=0)},g=function(e,t){t.height=t.element.offsetHeight,t.width=t.element.offsetWidth,(e.config.maxHeight?t.height<e.highestItem:t.height>e.highestItem)&&(e.highestItem=t.height,B(e)),e.items&&n(e)},t=function(e){var t,n,i,r=e.element.querySelectorAll(e.config.itemSelector),a=[];for(n=0,i=r.length;n<i;n++)t=new e.Item(r[n],e,g),a.push(t);return a},p=function(e){for(var t,n=0,i=e.items.length;n<i;n++)(t=e.items[n]).positionX=n*t.width,t.element.style.left=100*n+"%"},m=function(e){v(e),e.config.expandable&&I(e),e.config.thumbnails&&b(e),e.config.created=!0},y=function(e){1<e.items.length&&(0===e.selectedIndex?(e.controls.arrowLeft.style.display="none",e.controls.arrowRight.style.display="block"):e.selectedIndex===e.items.length-1&&(e.controls.arrowLeft.style.display="block",e.controls.arrowRight.style.display="none"))},v=function(t){var e,n;t.config.controls.prev?e=t.config.controls.prev:((e=document.createElement("span")).className="swingSloth__arrowleft",e.innerHTML="<"),t.config.controls.next?n=t.config.controls.next:((n=document.createElement("span")).className="swingSloth__arrowright",n.innerHTML=">"),t.wrapper.appendChild(e),t.wrapper.appendChild(n),e.style.display="none",n.style.display="none",e.addEventListener("click",function(e){_(t,-1,!1)}),n.addEventListener("click",function(e){_(t,1,!1)}),t.controls.arrowLeft=e,t.controls.arrowRight=n,y(t)},b=function(e){new e.Thumbnails(e,e.config.thumbnails)},I=function(t){var e=t.config.controls.expand;e?a.style.addClass(e,"swingSloth__expandicon"):((e=document.createElement("span")).className="swingSloth__expandicon",e.innerHTML="F",t.wrapper.appendChild(e)),(t.controls.expand=e).addEventListener("click",function(e){t.toggleGalleryFullscreen()}),t.viewport.addEventListener("touchend",function(e){C(t)})},C=function(e){e.hasBeenDragged||e.toggleGalleryFullscreen()},_=function(e,t,n){e.moveSlideTo(e.selectedIndex+t,n)},B=function(e){e.items&&0<=e.items.length&&(e.highestItem<=0?e.highestItem=e.items[0].height:window.innerHeight<e.highestItem&&(e.highestItem=window.innerHeight),e.viewport.style.height=e.highestItem+"px",e.slider.style.height=e.highestItem+"px")},A=function(e){var t;for(n(e),e.highestItem=-1,t=0;t<e.items.length;t++)e.items[t].height=e.items[t].element.offsetHeight,(e.config.maxHeight?e.items[t].height<e.highestItem:e.items[t].height>e.highestItem)&&(e.highestItem=e.items[t].height);B(e)},T=function(e){var t=e.viewport.offsetWidth;t!==e.width&&(e.width=t,A(e),e.moveSlideTo(e.selectedIndex,!0),e.expanded&&k(e))},S=function(e){e.viewport.style.marginTop=0,e.viewport.style.height="100%",e.slider.style.height="100%",A(e),e.moveSlideTo(e.selectedIndex,!0),e.expanded&&k(e)},U=function(e){var t,n;for(e=e||window.event,t=0;t<r.photoGalleries.length;t++)if(r.photoGalleries[t].expanded){n=r.photoGalleries[t];break}if(n&&n.expanded){switch(e.keyCode){case 37:0<n.selectedIndex&&n.moveSlideTo(n.selectedIndex-1);break;case 39:n.moveSlideTo(n.selectedIndex+1);break;case 27:n.toggleGalleryFullscreen()}e.stopPropagation()}},F=function(){var e,t,n=document.documentElement,i=window.innerHeight||n.clientHeight;for(t=0;t<r.photoGalleries.length;t++)0<=(e=r.photoGalleries[t].element.getBoundingClientRect()).top&&e.top<=i||0<=e.bottom&&e.bottom<=i?(r.photoGalleries[t].isInViewport=!0,"function"==typeof r.photoGalleries[t].config.isVisibleEvent&&r.photoGalleries[t].config.isVisibleEvent()):r.photoGalleries[t].isInViewport=!1},k=function(e){var t;t=((window.innerHeight||document.documentElement.clientHeight)-e.highestItem)/2,e.viewport.style.marginTop=t+"px"};r.swingSloth=function(e,t){if(e){this.element=e,this.config=((i=t||{}).singlePhotoViewer="true"===i.singlePhotoViewer,a.object.extend({itemSelector:".swingSloth__item",imageSelector:".swingSloth__image",instances:[],attractionStrength:.025,friction:.16,initialIndex:0,draggable:!1,resize:!0,expandable:!0,thumbnails:null,controls:{},singlePhotoViewer:!1,keyboardNavigation:!0,onGalleryBuilt:function(){},onFullscreenOpened:function(){},onFullscreenClosed:function(){},isVisibleEvent:function(){}},i)),r.photoGalleries.push(this),(n=this).selectedIndex=n.config.initialIndex,n.sliderPos=0,n.sliderPosTarget=0,n.firstItemLoaded=!1,n.highestItem=n.config.maxHeight?99999:0,n.controls={},n.velocityX=0,n.acceleration=0,n.friction=1-n.config.friction,n.attractStrength=n.config.attractionStrength,s(n),o(n),l(n),c(n),d(n),u(n),0<n.selectedIndex&&n.selectedIndex<n.items.length?n.moveSlideTo(n.selectedIndex,1,!0):n.selectedIndex=0}var n,i},r.swingSloth.prototype.moveSlideTo=function(e,t){var n=this;n.selectedIndex=e,n.selectedIndex<n.items.length&&0<=n.selectedIndex?(n.selectedItem=n.items[n.selectedIndex],n.selectedIndex===n.items.length-1?n.controls.arrowRight.style.display="none":n.controls.arrowRight.style.display="block",0===n.selectedIndex?n.controls.arrowLeft.style.display="none":n.controls.arrowLeft.style.display="block",n.sliderPosTarget=-n.selectedItem.positionX,t&&(n.sliderPos=-n.selectedItem.positionX)):n.selectedIndex===n.items.length?n.selectedIndex=n.items.length-1:n.selectedIndex<0&&(n.selectedIndex=0)},r.swingSloth.prototype.addItem=function(e){var t=this;if(e){if(a.object.isArray(e))for(var n=0;n<e.length;n++)e[n]&&t.slider.appendChild(e[n]);else t.slider.appendChild(e);h(t),t.animation.animate(t)}},r.swingSloth.prototype.removeItem=function(e){var t=this;0<=e&&e<t.items.length&&(t.slider.removeChild(t.items[e].element),t.items.splice(e,1)),h(t)},r.swingSloth.prototype.toggleGalleryFullscreen=function(){var e=this;(function(t,e){for(var n=function(e){e.imageVariants.fullscreen.image.onload=null,e.imageVariants.fullscreen.loaded=!0,a.style.addClass(e.imageVariants.preview.image,"u-hide"),a.style.removeClass(e.imageVariants.fullscreen.image,"u-hide"),S(t),k(t)},i=0;i<t.items.length;i++)e&&t.items[i].imageVariants.fullscreen?t.items[i].imageVariants.fullscreen.loaded?(a.style.addClass(t.items[i].imageVariants.preview.image,"u-hide"),a.style.removeClass(t.items[i].imageVariants.fullscreen.image,"u-hide")):(t.items[i].imageVariants.fullscreen.image.onload=n.bind(this,t.items[i]),t.items[i].imageVariants.fullscreen.image.src=t.items[i].imageVariants.fullscreen.url):!e&&t.items[i].imageVariants.fullscreen&&(a.style.removeClass(t.items[i].imageVariants.preview.image,"u-hide"),a.style.addClass(t.items[i].imageVariants.fullscreen.image,"u-hide"))})(e,!e.expanded),e.expanded?(e.viewport.style.marginTop=0,e.element.style.height="auto",a.style.removeClass(e.wrapper,"expanded"),e.expanded=!1,S(e),"function"==typeof e.config.onFullscreenClosed&&e.config.onFullscreenClosed()):(e.expanded=!0,a.style.addClass(e.wrapper,"expanded"),e.element.style.height=e.highestItem,S(e),k(e),"function"==typeof e.config.onFullscreenOpened&&e.config.onFullscreenOpened())},r.swingSloth.prototype.setEventListener=function(e,t){"function"==typeof this.config[e]&&(this.config[e]=t)},r.swingSloth.prototype.removeEventListener=function(e){"function"==typeof this.config[e]&&(this.config[e]=function(){})},r.swingSloth.prototype.refresh=function(){h(this)},r.Particle=function(e){e&&(this.element=e,this.positionX=0,this.dragPositionX=0,this.velocityX=1,this.friction=.95,this.accelerationX=1,this.isDragging=!1)},r.Particle.prototype.render=function(){this.element.style.transform="translateX("+this.positionX+"px)"},r.Particle.prototype.update=function(){this.velocityX+=this.accelerationX,this.velocityX*=this.friction,this.positionX+=this.velocityX,this.accelerationX=0},r.Particle.prototype.applyForce=function(e){this.accelerationX+=e}}(PULSE.ui,PULSE.core),function(e,s){"use strict";var o=function(e,t,n){t.config.current!==e&&(s.style.hasClass(e.activator,t.config.disableClass)||(t.config.tabs.map(function(e){s.style.removeClass(e.content,t.config.activeClass),s.style.removeClass(e.activator,t.config.activeClass),t.config.moreToggle&&(e.activatorClone&&s.style.removeClass(e.activatorClone,t.config.activeClass),s.style.removeClass(t.moreTabs.tab,t.config.activeClass))}),s.style.addClass(e.content,t.config.activeClass),s.style.addClass(e.activator,t.config.activeClass),t.config.moreToggle&&(c(t,!0),e.activatorClone&&s.style.addClass(e.activatorClone,t.config.activeClass),t.moreTabs.visible&&e.isHidden&&s.style.addClass(t.moreTabs.tab,t.config.activeClass)),t.config.current=e,"function"!=typeof t.config.tabCallback||n||t.config.tabCallback(t)))},a=function(e,t){var n=e.config.tabs[e.config.defaultIndex];if(1<e.config.tabs.length)for(var i=0;i<e.config.tabs.length;i++)if(e.config.tabs[i].title===t)return e.config.tabs[i];return n},l=function(e){for(var t=0,n=e.config.defaultIndex;t<e.config.tabs.length;){if(n>e.config.tabs.length-1&&(n=0),!s.style.hasClass(e.config.tabs[n].activator,e.config.disableClass))return e.config.tabs[n];n++,t++}return e.config.tabs[e.config.defaultIndex]},t=function(e,t){var n=e.config.defaultTitle?e.config.defaultTitle:s.url.getParam(e.config.tabParam),i=t||n,r=e.config.tabs[e.config.defaultIndex];i&&(r=a(e,i)),s.style.hasClass(r.activator,e.config.disableClass)&&(r=l(e)),o(r,e,!0),"function"==typeof e.config.buildCallback&&e.config.buildCallback(e)},n=function(e){e.moreTabs={},e.moreTabs.visible=!1;var t=document.createElement("li");s.style.addClass(t,e.config.moreClass),e.moreTabs.tab=t;var n=document.createElement("div");s.style.addClass(n,e.config.moreToggleClass),n.textContent=e.config.moreLabel,n.addEventListener("click",function(){c(e)}),t.appendChild(n);var i=document.createElement("div");s.style.addClass(i,"icn"),s.style.addClass(i,"chevron-down"),n.appendChild(i);var r=document.createElement("ul");s.style.addClass(r,e.config.moreToggleDropdownClass),t.appendChild(r),e.moreTabs.dropdown=r,e.config.nav.appendChild(t),e.moreTabs.wrapWidth=0,u(e);var a={method:function(e){u(e.scope)},args:{scope:e}};s.event.windowResize.add(a)},u=function(n){var e=n.config.wrap.offsetWidth;if(n.moreTabs.wrapWidth!==e){var i=0;if(n.config.tabs.forEach(function(e){var t=s.style.outerWidth(e.activator);i+=t,e.activatorWidth=t}),e<=i){var r=e;r-=s.style.outerWidth(n.moreTabs.tab),n.moreTabs.visible=!0,s.style.addClass(n.config.nav,n.config.showMoreEnabledClass),n.config.tabs.forEach(function(e,t){r<e.activatorWidth?(d(e,n),r=-1,n.config.current===e&&s.style.addClass(n.moreTabs.tab,n.config.activeClass)):(h(e,n),r-=e.activatorWidth,n.config.current===e&&s.style.removeClass(n.moreTabs.tab,n.config.activeClass))})}else n.moreTabs.visible=!1,s.style.removeClass(n.config.nav,n.config.showMoreEnabledClass),n.config.tabs.forEach(function(e){h(e,n)});n.moreTabs.wrapWidth=e}},c=function(e,t){t?s.style.removeClass(e.moreTabs.tab,e.config.openClass):s.style.toggleClass(e.moreTabs.tab,e.config.openClass)},d=function(e,t){if(!s.style.hasClass(e.activator,t.config.hideClass)){e.activatorClone||(e.activatorClone=e.activator.cloneNode(!0),e.activatorClone.addEventListener("click",function(){o(e,t)})),e.isHidden=!0,s.style.addClass(e.activator,t.config.hideClass);var n=t.moreTabs.dropdown.getElementsByTagName("li");if(0===n.length)t.moreTabs.dropdown.appendChild(e.activatorClone);else for(var i=0;i<n.length;i++){if(e.index<n[i].getAttribute("data-tab-index"))return void t.moreTabs.dropdown.insertBefore(e.activatorClone,n[i]);i===n.length-1&&t.moreTabs.dropdown.appendChild(e.activatorClone)}}},h=function(e,t){s.style.hasClass(e.activator,t.config.hideClass)&&(e.isHidden=!1,s.style.removeClass(e.activator,t.config.hideClass),t.moreTabs.dropdown.removeChild(e.activatorClone))},i=function(e){(function(s){if(s.config.wrap=document.createElement("div"),s.config.tabItems[0].parentNode.insertBefore(s.config.wrap,s.config.tabItems[0]),s.config.nav=document.createElement("ul"),s.config.nav.classList.add(s.config.tablistClass),s.config.nav.setAttribute("role","tablist"),Array.prototype.map.call(s.config.tabItems,function(e,t){var n,i=e.getAttribute("data-ui-tab");e.getAttribute("data-ui-args")&&(n=JSON.parse(e.getAttribute("data-ui-args")));var r={index:t,title:i,content:e,activator:document.createElement("li"),uiArgs:n,isHidden:!1};r.title=r.content.getAttribute("data-ui-tab"),r.activator.textContent=r.title,r.activator.setAttribute("role","tab"),r.activator.setAttribute("tabindex","0"),r.activator.setAttribute("data-tab-index",r.index),r.activator.addEventListener("click",function(){o(r,s)}),r.activator.addEventListener("keyup",function(e){13===(e.which||e.keyCode)&&o(r,s)}),s.config.setTabClass&&r.activator.classList.add(s.config.setTabClass);var a=r.content.getAttribute("data-ui-class");a&&r.activator.classList.add(a),r.content.getAttribute("data-ui-disabled")&&r.activator.classList.add(s.config.disableClass),s.config.tabs.push(r),s.config.wrap.appendChild(r.content),s.config.nav.appendChild(r.activator)}),s.config.tabs.length-1<s.config.defaultIndex&&(s.config.defaultIndex=s.config.tabs.length-1),s.config.tabLinkWrap)s.config.tabLinkWrap.appendChild(s.config.nav);else{var e=document.createElement("nav");e.classList.add(s.config.tabNavClass),e.appendChild(s.config.nav),s.config.wrap.insertBefore(e,s.config.wrap.firstChild)}s.config.wrap.classList.add(s.config.builtClass),s.config.moreToggle&&n(s)})(e),t(e)},r=function(e,t){if(s.style.addClass(e.activator,t.config.disableClass),s.style.hasClass(e.activator,t.config.activeClass)){var n=l(t);o(n,t)}};e.tab=function(e){if(e.tabItems&&e.tabItems.length<1)return"no tab items to build";var t;this.config=((t=e||{}).tabItems||(t.tabItems=document.querySelectorAll("[data-ui-tab]")),t.builtClass||(t.builtClass="tabbed"),t.tablistClass||(t.tablistClass="tablist"),t.tabNavClass||(t.tabNavClass="tabs"),t.defaultIndex||(t.defaultIndex=0),t.activeClass||(t.activeClass="active"),t.disableClass||(t.disableClass="disabled"),t.tabParam||(t.tabParam="tab"),t.moreToggle||(t.moreToggle=!1),t.moreLabel||(t.moreLabel="More"),t.moreClass||(t.moreClass="more"),t.moreToggleClass||(t.moreToggleClass="moreToggle"),t.moreToggleDropdownClass||(t.moreToggleDropdownClass="moreToggleDropdown"),t.showMoreEnabledClass||(t.showMoreEnabledClass="showMoreEnabled"),t.hideClass||(t.hideClass="hide"),t.openClass||(t.openClass="open"),t.tabs=[],t),i(this)},e.tab.prototype.showTabByIndex=function(e){var t=this.config.tabs[e]||this.config.tabs[0];return o(t,this),this},e.tab.prototype.showTabByTitle=function(e){return t(this,e),this},e.tab.prototype.enableTabByIndex=function(e){var t=this.config.tabs[e]||this.config.tabs[0];return s.style.removeClass(t.activator,this.config.disableClass),this},e.tab.prototype.enableTabByTitle=function(e){var t=a(this,e);return s.style.removeClass(t.activator,this.config.disableClass),this},e.tab.prototype.disableTabByIndex=function(e){var t=this.config.tabs[e]||this.config.tabs[0];return r(t,this),this},e.tab.prototype.disableTabByTitle=function(e){var t=a(this,e);return r(t,this),this}}(PULSE.ui,PULSE.core),function(e){"use strict";var n={lastSliderPos:0,render:function(e){var t=e.sliderPos-n.lastSliderPos;t<0&&(t=-t),.1<t&&(e.slider.style.transform="translateX("+e.sliderPos+"px)",n.lastSliderPos=e.sliderPos)},applyPhysics:function(e){e.velocityX+=e.acceleration,e.sliderPos+=e.velocityX,e.velocityX*=e.friction,e.acceleration=0},applyForce:function(e,t){t.acceleration+=e},animate:function(e){var t=(e.sliderPosTarget-e.sliderPos)*e.attractStrength;isNaN(t)||n.applyForce(t,e),n.applyPhysics(e),n.render(e),requestAnimationFrame(function(){n.animate(e)})}};e.prototype.animation=n}(PULSE.ui.swingSloth),function(e){"use strict";var s=function(e){return e.clientX?e.clientX:e.touches&&e.touches[0]?e.touches[0].clientX:0},o={gallery:null,initHandlers:function(e){(o.gallery=e).config.draggable&&(o.gallery.viewport.addEventListener("dragstart",o.onDragStart,!1),o.gallery.viewport.addEventListener("drag",o.onDrag,!1),o.gallery.viewport.addEventListener("dragend",o.onDragEnd,!1)),o.gallery.viewport.addEventListener("touchstart",o.onDragStart,!1),o.gallery.viewport.addEventListener("touchmove",o.onDrag,!1),o.gallery.viewport.addEventListener("touchend",o.onDragEnd,!1)},onDragStart:function(e,t){"touchstart"===e.type&&e.preventDefault();var n=o.gallery;n.hasBeenDragged=!1,n.dragStartPosition=s(e),n.dragLastPosition=s(e)},onDrag:function(e,t,n){e.preventDefault();var i=o.gallery,r=s(e);if(r!==i.dragLastPosition){var a=r-i.dragLastPosition;a<150&&-150<a&&(i.sliderPosTarget+=a),0!==r&&(i.dragLastPosition=r),i.hasBeenDragged=!0}},onDragEnd:function(e,t){var n,i=o.gallery,r=1;e.preventDefault(),i.dragStartPosition>i.dragLastPosition?r=-1:i.dragStartPosition===self.dragLastPosition&&(r=0),0!==r&&(n=o.getNextSnappingPoint(r),i.moveSlideTo(n))},getPointer:function(e){return{x:void 0!==e.pageX?e.pageX:e.clientX,y:void 0!==e.pageY?e.pageY:e.clientY}},getNextSnappingPoint:function(e){var t,n,i,r=o.gallery,a=-r.sliderPosTarget,s=99999;for(e=e||1,t=0;t<r.items.length;t++)(i=a-r.items[t].positionX-e*(r.items[t].width/2.25))<0&&(i=-i),i<s&&(s=i,n=t);return n}};e.prototype.dragging=o}(PULSE.ui.swingSloth),function(e,i){"use strict";var t=function(e,t,n){this.element=e,this.parent=t,this.create(n)},r=function(e){var t,n;(n=e.nextElementSibling)&&i.style.hasClass("js-item-fullscreen")&&n.remove(),e.imageVariants={preview:{},fullscreen:{},current:{}},e.imageVariants.preview.imageContainer=e.element.querySelector(e.parent.config.imageSelector),e.imageVariants.preview.image=e.imageVariants.preview.imageContainer.querySelector("img"),i.style.addClass(e.imageVariants.preview.image,"js-item-preview"),e.imageVariants.current=e.imageVariants.preview,e.imageVariants.preview.imageContainer.dataset.fullscreen?(t=document.createElement("img"),e.imageVariants.preview.image.classList&&e.imageVariants.preview.image.classList.length&&(t.className=e.imageVariants.preview.image.classList.toString()),i.style.addClass(t,"js-item-fullscreen"),i.style.addClass(t,"u-hide"),e.imageVariants.fullscreen.imageContainer=e.imageVariants.preview.imageContainer,e.imageVariants.fullscreen.image=t,e.imageVariants.fullscreen.url=e.imageVariants.preview.imageContainer.dataset.fullscreen,e.imageVariants.fullscreen.loaded=!1,e.imageVariants.preview.imageContainer.appendChild(e.imageVariants.fullscreen.image)):e.imageVariants.fullscreen=null};t.prototype.create=function(t){var n=this;n.parent.config.singlePhotoViewer||(n.element.style.position="absolute"),n.element.style.width="100%",r(n),n.positionX=0,n.target=0,n.width=n.imageVariants.current.image.offsetWidth,n.height=n.imageVariants.current.image.offsetHeight,n.height<=20?n.imageVariants.current.image.onload=function(e){t(n.parent,n)}:t(n.parent,n)},t.prototype.setPosition=function(e){this.positionX=e},e.prototype.Item=t}(PULSE.ui.swingSloth,PULSE.core),function(e,r){"use strict";var a=function(e,t,n){e.gallery.moveSlideTo(t),e.previousActiveThumb&&e.previousActiveThumb!==n&&r.style.removeClass(e.previousActiveThumb,"is-active"),r.style.addClass(n,"is-active"),e.previousActiveThumb=n;var i=e.thumbList.offsetWidth;e.thumbList.scrollLeft=n.offsetLeft-i/2},s=function(e,t){var n=e.thumbList.offsetWidth;e.thumbList.scrollLeft+=t*n};e.prototype.Thumbnails=function(e,t){var n,i,r=this;if(r.gallery=e,r.config=t,r.config.thumbnails&&(r.items=document.querySelectorAll(r.config.thumbnails),r.items.length)){for(r.previousActiveThumb=r.items[0],n=function(t){r.items[t].addEventListener("click",function(e){a(r,t,e.target)})},i=0;i<r.items.length;i++)n(i);r.config.controls&&r.config.list&&(r.thumbList=document.querySelector(r.config.list),document.querySelector(r.config.controls.left).addEventListener("click",function(e){s(r,-1)}),document.querySelector(r.config.controls.right).addEventListener("click",function(e){s(r,1)}))}}}(PULSE.ui.swingSloth,PULSE.core),function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.svg4everybody=t()}):"object"==typeof module&&module.exports?module.exports=t():e.svg4everybody=t()}(this,function(){function m(e,t,n){if(n){var i=document.createDocumentFragment(),r=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");r&&t.setAttribute("viewBox",r);for(var a=n.cloneNode(!0);a.childNodes.length;)i.appendChild(a.firstChild);e.appendChild(i)}}function y(i){i.onreadystatechange=function(){if(4===i.readyState){var n=i._cachedDocument;n||((n=i._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=i.responseText,i._cachedTarget={}),i._embeds.splice(0).map(function(e){var t=i._cachedTarget[e.id];t||(t=i._cachedTarget[e.id]=n.getElementById(e.id)),m(e.parent,e.svg,t)})}},i.onreadystatechange()}function v(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return function(e){var c,d=Object(e),t=window.top!==window.self;c="polyfill"in d?d.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&t;var h={},f=window.requestAnimationFrame||setTimeout,g=document.getElementsByTagName("use"),p=0;c&&function e(){for(var t=0;t<g.length;){var n=g[t],i=n.parentNode,r=v(i),a=n.getAttribute("xlink:href")||n.getAttribute("href");if(!a&&d.attributeName&&(a=n.getAttribute(d.attributeName)),r&&a){if(c)if(!d.validate||d.validate(a,r,n)){i.removeChild(n);var s=a.split("#"),o=s.shift(),l=s.join("#");if(o.length){var u=h[o];u||((u=h[o]=new XMLHttpRequest).open("GET",o),u.send(),u._embeds=[]),u._embeds.push({parent:i,svg:r,id:l}),y(u)}else m(i,r,document.getElementById(l))}else++t,++p}else++t}(!g.length||0<g.length-p)&&f(e,67)}()}}),function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},t=e._,i=Array.prototype,s=Object.prototype,d="undefined"!=typeof Symbol?Symbol.prototype:null,r=i.push,l=i.slice,h=s.toString,a=s.hasOwnProperty,n=Array.isArray,o=Object.keys,u=Object.create,c=function(){},f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};"undefined"==typeof exports||exports.nodeType?e._=f:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=f),exports._=f),f.VERSION="1.9.2";var g,p=function(r,a,e){if(void 0===a)return r;switch(null==e?3:e){case 1:return function(e){return r.call(a,e)};case 3:return function(e,t,n){return r.call(a,e,t,n)};case 4:return function(e,t,n,i){return r.call(a,e,t,n,i)}}return function(){return r.apply(a,arguments)}},m=function(e,t,n){return f.iteratee!==g?f.iteratee(e,t):null==e?f.identity:f.isFunction(e)?p(e,t,n):f.isObject(e)&&!f.isArray(e)?f.matcher(e):f.property(e)};f.iteratee=g=function(e,t){return m(e,t,1/0)};var y=function(r,a){return a=null==a?r.length-1:+a,function(){for(var e=Math.max(arguments.length-a,0),t=Array(e),n=0;n<e;n++)t[n]=arguments[n+a];switch(a){case 0:return r.call(this,t);case 1:return r.call(this,arguments[0],t);case 2:return r.call(this,arguments[0],arguments[1],t)}var i=Array(a+1);for(n=0;n<a;n++)i[n]=arguments[n];return i[a]=t,r.apply(this,i)}},v=function(e){if(!f.isObject(e))return{};if(u)return u(e);c.prototype=e;var t=new c;return c.prototype=null,t},b=function(t){return function(e){return null==e?void 0:e[t]}},I=function(e,t){return null!=e&&a.call(e,t)},C=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},_=Math.pow(2,53)-1,B=b("length"),A=function(e){var t=B(e);return"number"==typeof t&&0<=t&&t<=_};f.each=f.forEach=function(e,t,n){var i,r;if(t=p(t,n),A(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var a=f.keys(e);for(i=0,r=a.length;i<r;i++)t(e[a[i]],a[i],e)}return e},f.map=f.collect=function(e,t,n){t=m(t,n);for(var i=!A(e)&&f.keys(e),r=(i||e).length,a=Array(r),s=0;s<r;s++){var o=i?i[s]:s;a[s]=t(e[o],o,e)}return a};var T=function(l){return function(e,t,n,i){var r=3<=arguments.length;return function(e,t,n,i){var r=!A(e)&&f.keys(e),a=(r||e).length,s=0<l?0:a-1;for(i||(n=e[r?r[s]:s],s+=l);0<=s&&s<a;s+=l){var o=r?r[s]:s;n=t(n,e[o],o,e)}return n}(e,p(t,i,4),n,r)}};f.reduce=f.foldl=f.inject=T(1),f.reduceRight=f.foldr=T(-1),f.find=f.detect=function(e,t,n){var i=(A(e)?f.findIndex:f.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},f.filter=f.select=function(e,i,t){var r=[];return i=m(i,t),f.each(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r},f.reject=function(e,t,n){return f.filter(e,f.negate(m(t)),n)},f.every=f.all=function(e,t,n){t=m(t,n);for(var i=!A(e)&&f.keys(e),r=(i||e).length,a=0;a<r;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return!1}return!0},f.some=f.any=function(e,t,n){t=m(t,n);for(var i=!A(e)&&f.keys(e),r=(i||e).length,a=0;a<r;a++){var s=i?i[a]:a;if(t(e[s],s,e))return!0}return!1},f.contains=f.includes=f.include=function(e,t,n,i){return A(e)||(e=f.values(e)),("number"!=typeof n||i)&&(n=0),0<=f.indexOf(e,t,n)},f.invoke=y(function(e,n,i){var r,a;return f.isFunction(n)?a=n:f.isArray(n)&&(r=n.slice(0,-1),n=n[n.length-1]),f.map(e,function(e){var t=a;if(!t){if(r&&r.length&&(e=C(e,r)),null==e)return;t=e[n]}return null==t?t:t.apply(e,i)})}),f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matcher(t))},f.findWhere=function(e,t){return f.find(e,f.matcher(t))},f.max=function(e,i,t){var n,r,a=-1/0,s=-1/0;if(null==i||"number"==typeof i&&"object"!=typeof e[0]&&null!=e)for(var o=0,l=(e=A(e)?e:f.values(e)).length;o<l;o++)null!=(n=e[o])&&a<n&&(a=n);else i=m(i,t),f.each(e,function(e,t,n){r=i(e,t,n),(s<r||r===-1/0&&a===-1/0)&&(a=e,s=r)});return a},f.min=function(e,i,t){var n,r,a=1/0,s=1/0;if(null==i||"number"==typeof i&&"object"!=typeof e[0]&&null!=e)for(var o=0,l=(e=A(e)?e:f.values(e)).length;o<l;o++)null!=(n=e[o])&&n<a&&(a=n);else i=m(i,t),f.each(e,function(e,t,n){((r=i(e,t,n))<s||r===1/0&&a===1/0)&&(a=e,s=r)});return a},f.shuffle=function(e){return f.sample(e,1/0)},f.sample=function(e,t,n){if(null==t||n)return A(e)||(e=f.values(e)),e[f.random(e.length-1)];var i=A(e)?f.clone(e):f.values(e),r=B(i);t=Math.max(Math.min(t,r),0);for(var a=r-1,s=0;s<t;s++){var o=f.random(s,a),l=i[s];i[s]=i[o],i[o]=l}return i.slice(0,t)},f.sortBy=function(e,i,t){var r=0;return i=m(i,t),f.pluck(f.map(e,function(e,t,n){return{value:e,index:r++,criteria:i(e,t,n)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var S=function(s,t){return function(i,r,e){var a=t?[[],[]]:{};return r=m(r,e),f.each(i,function(e,t){var n=r(e,t,i);s(a,e,n)}),a}};f.groupBy=S(function(e,t,n){I(e,n)?e[n].push(t):e[n]=[t]}),f.indexBy=S(function(e,t,n){e[n]=t}),f.countBy=S(function(e,t,n){I(e,n)?e[n]++:e[n]=1});var U=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;f.toArray=function(e){return e?f.isArray(e)?l.call(e):f.isString(e)?e.match(U):A(e)?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:A(e)?e.length:f.keys(e).length},f.partition=S(function(e,t,n){e[n?0:1].push(t)},!0),f.first=f.head=f.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:f.initial(e,e.length-t)},f.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},f.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:f.rest(e,Math.max(0,e.length-t))},f.rest=f.tail=f.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},f.compact=function(e){return f.filter(e,Boolean)};var F=function(e,t,n,i){for(var r=(i=i||[]).length,a=0,s=B(e);a<s;a++){var o=e[a];if(A(o)&&(f.isArray(o)||f.isArguments(o)))if(t)for(var l=0,u=o.length;l<u;)i[r++]=o[l++];else F(o,t,n,i),r=i.length;else n||(i[r++]=o)}return i};f.flatten=function(e,t){return F(e,t,!1)},f.without=y(function(e,t){return f.difference(e,t)}),f.uniq=f.unique=function(e,t,n,i){f.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=m(n,i));for(var r=[],a=[],s=0,o=B(e);s<o;s++){var l=e[s],u=n?n(l,s,e):l;t&&!n?(s&&a===u||r.push(l),a=u):n?f.contains(a,u)||(a.push(u),r.push(l)):f.contains(r,l)||r.push(l)}return r},f.union=y(function(e){return f.uniq(F(e,!0,!0))}),f.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=B(e);i<r;i++){var a=e[i];if(!f.contains(t,a)){var s;for(s=1;s<n&&f.contains(arguments[s],a);s++);s===n&&t.push(a)}}return t},f.difference=y(function(e,t){return t=F(t,!0,!0),f.filter(e,function(e){return!f.contains(t,e)})}),f.unzip=function(e){for(var t=e&&f.max(e,B).length||0,n=Array(t),i=0;i<t;i++)n[i]=f.pluck(e,i);return n},f.zip=y(f.unzip),f.object=function(e,t){for(var n={},i=0,r=B(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var k=function(a){return function(e,t,n){t=m(t,n);for(var i=B(e),r=0<a?0:i-1;0<=r&&r<i;r+=a)if(t(e[r],r,e))return r;return-1}};f.findIndex=k(1),f.findLastIndex=k(-1),f.sortedIndex=function(e,t,n,i){for(var r=(n=m(n,i,1))(t),a=0,s=B(e);a<s;){var o=Math.floor((a+s)/2);n(e[o])<r?a=o+1:s=o}return a};var w=function(a,s,o){return function(e,t,n){var i=0,r=B(e);if("number"==typeof n)0<a?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(o&&n&&r)return e[n=o(e,t)]===t?n:-1;if(t!=t)return 0<=(n=s(l.call(e,i,r),f.isNaN))?n+i:-1;for(n=0<a?i:r-1;0<=n&&n<r;n+=a)if(e[n]===t)return n;return-1}};f.indexOf=w(1,f.findIndex,f.sortedIndex),f.lastIndexOf=w(-1,f.findLastIndex),f.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),a=0;a<i;a++,e+=n)r[a]=e;return r},f.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(l.call(e,i,i+=t));return n};var x=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=v(e.prototype),s=e.apply(a,r);return f.isObject(s)?s:a};f.bind=y(function(t,n,i){if(!f.isFunction(t))throw new TypeError("Bind must be called on a function");var r=y(function(e){return x(t,r,n,this,i.concat(e))});return r}),f.partial=y(function(r,a){var s=f.partial.placeholder,o=function(){for(var e=0,t=a.length,n=Array(t),i=0;i<t;i++)n[i]=a[i]===s?arguments[e++]:a[i];for(;e<arguments.length;)n.push(arguments[e++]);return x(r,o,this,this,n)};return o}),(f.partial.placeholder=f).bindAll=y(function(e,t){var n=(t=F(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=f.bind(e[i],e)}}),f.memoize=function(i,r){var a=function(e){var t=a.cache,n=""+(r?r.apply(this,arguments):e);return I(t,n)||(t[n]=i.apply(this,arguments)),t[n]};return a.cache={},a},f.delay=y(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),f.defer=f.partial(f.delay,f,1),f.throttle=function(n,i,r){var a,s,o,l,u=0;r||(r={});var c=function(){u=!1===r.leading?0:f.now(),a=null,l=n.apply(s,o),a||(s=o=null)},e=function(){var e=f.now();u||!1!==r.leading||(u=e);var t=i-(e-u);return s=this,o=arguments,t<=0||i<t?(a&&(clearTimeout(a),a=null),u=e,l=n.apply(s,o),a||(s=o=null)):a||!1===r.trailing||(a=setTimeout(c,t)),l};return e.cancel=function(){clearTimeout(a),u=0,a=s=o=null},e},f.debounce=function(n,i,r){var a,s,o=function(e,t){a=null,t&&(s=n.apply(e,t))},e=y(function(e){if(a&&clearTimeout(a),r){var t=!a;a=setTimeout(o,i),t&&(s=n.apply(this,e))}else a=f.delay(o,i,this,e);return s});return e.cancel=function(){clearTimeout(a),a=null},e},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var n=arguments,i=n.length-1;return function(){for(var e=i,t=n[i].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},f.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},f.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},f.once=f.partial(f.before,2),f.restArguments=y;var E=!{toString:null}.propertyIsEnumerable("toString"),Q=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=function(e,t){var n=Q.length,i=e.constructor,r=f.isFunction(i)&&i.prototype||s,a="constructor";for(I(e,a)&&!f.contains(t,a)&&t.push(a);n--;)(a=Q[n])in e&&e[a]!==r[a]&&!f.contains(t,a)&&t.push(a)};f.keys=function(e){if(!f.isObject(e))return[];if(o)return o(e);var t=[];for(var n in e)I(e,n)&&t.push(n);return E&&G(e,t),t},f.allKeys=function(e){if(!f.isObject(e))return[];var t=[];for(var n in e)t.push(n);return E&&G(e,t),t},f.values=function(e){for(var t=f.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},f.mapObject=function(e,t,n){t=m(t,n);for(var i=f.keys(e),r=i.length,a={},s=0;s<r;s++){var o=i[s];a[o]=t(e[o],o,e)}return a},f.pairs=function(e){for(var t=f.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},f.invert=function(e){for(var t={},n=f.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},f.functions=f.methods=function(e){var t=[];for(var n in e)f.isFunction(e[n])&&t.push(n);return t.sort()};var R=function(l,u){return function(e){var t=arguments.length;if(u&&(e=Object(e)),t<2||null==e)return e;for(var n=1;n<t;n++)for(var i=arguments[n],r=l(i),a=r.length,s=0;s<a;s++){var o=r[s];u&&void 0!==e[o]||(e[o]=i[o])}return e}};f.extend=R(f.allKeys),f.extendOwn=f.assign=R(f.keys),f.findKey=function(e,t,n){t=m(t,n);for(var i,r=f.keys(e),a=0,s=r.length;a<s;a++)if(t(e[i=r[a]],i,e))return i};var L,V,Z=function(e,t,n){return t in n};f.pick=y(function(e,t){var n={},i=t[0];if(null==e)return n;f.isFunction(i)?(1<t.length&&(i=p(i,t[1])),t=f.allKeys(e)):(i=Z,t=F(t,!1,!1),e=Object(e));for(var r=0,a=t.length;r<a;r++){var s=t[r],o=e[s];i(o,s,e)&&(n[s]=o)}return n}),f.omit=y(function(e,n){var t,i=n[0];return f.isFunction(i)?(i=f.negate(i),1<n.length&&(t=n[1])):(n=f.map(F(n,!1,!1),String),i=function(e,t){return!f.contains(n,t)}),f.pick(e,i,t)}),f.defaults=R(f.allKeys,!0),f.create=function(e,t){var n=v(e);return t&&f.extendOwn(n,t),n},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e},f.isMatch=function(e,t){var n=f.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),a=0;a<i;a++){var s=n[a];if(t[s]!==r[s]||!(s in r))return!1}return!0},L=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&V(e,t,n,i)},V=function(e,t,n,i){e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var r=h.call(e);if(r!==h.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return d.valueOf.call(e)===d.valueOf.call(t)}var a="[object Array]"===r;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,o=t.constructor;if(s!==o&&!(f.isFunction(s)&&s instanceof s&&f.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!L(e[l],t[l],n,i))return!1}else{var u,c=f.keys(e);if(l=c.length,f.keys(t).length!==l)return!1;for(;l--;)if(u=c[l],!I(t,u)||!L(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0},f.isEqual=function(e,t){return L(e,t)},f.isEmpty=function(e){return null==e||(A(e)&&(f.isArray(e)||f.isString(e)||f.isArguments(e))?0===e.length:0===f.keys(e).length)},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=n||function(e){return"[object Array]"===h.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){f["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return I(e,"callee")});var O=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof O&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return!f.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&isNaN(e)},f.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){if(!f.isArray(t))return I(e,t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(null==e||!a.call(e,r))return!1;e=e[r]}return!!n},f.noConflict=function(){return e._=t,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=function(t){return f.isArray(t)?function(e){return C(e,t)}:b(t)},f.propertyOf=function(t){return null==t?function(){}:function(e){return f.isArray(e)?C(t,e):t[e]}},f.matcher=f.matches=function(t){return t=f.extendOwn({},t),function(e){return f.isMatch(e,t)}},f.times=function(e,t,n){var i=Array(Math.max(0,e));t=p(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=f.invert(N),D=function(t){var n=function(e){return t[e]},e="(?:"+f.keys(t).join("|")+")",i=RegExp(e),r=RegExp(e,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,n):e}};f.escape=D(N),f.unescape=D(W),f.result=function(e,t,n){f.isArray(t)||(t=[t]);var i=t.length;if(!i)return f.isFunction(n)?n.call(e):n;for(var r=0;r<i;r++){var a=null==e?void 0:e[t[r]];void 0===a&&(a=n,r=i),e=f.isFunction(a)?a.call(e):a}return e};var X=0;f.uniqueId=function(e){var t=++X+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(e){return"\\"+M[e]};f.template=function(a,e,t){!e&&t&&(e=t),e=f.defaults({},e,f.templateSettings);var n,i=RegExp([(e.escape||P).source,(e.interpolate||P).source,(e.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";a.replace(i,function(e,t,n,i,r){return o+=a.slice(s,r).replace(H,Y),s=r+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{n=new Function(e.variable||"obj","_",o)}catch(e){throw e.source=o,e}var r=function(e){return n.call(this,e,f)},l=e.variable||"obj";return r.source="function("+l+"){\n"+o+"}",r},f.chain=function(e){var t=f(e);return t._chain=!0,t};var j=function(e,t){return e._chain?f(t).chain():t};f.mixin=function(n){return f.each(f.functions(n),function(e){var t=f[e]=n[e];f.prototype[e]=function(){var e=[this._wrapped];return r.apply(e,arguments),j(this,t.apply(f,e))}}),f},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];f.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],j(this,e)}}),f.each(["concat","join","slice"],function(e){var t=i[e];f.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}();var fylter=function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * @typedef {string} FilterState\n */\n\n/**\n * Define possible states of the filter\n * @readonly\n * @enum {FilterState}\n */\nvar FILTER_STATE = exports.FILTER_STATE = {\n  /** Filter has not been constructed yet */\n  BUILDING: 'filter/state/building',\n  /** Filter has started the data fetch process */\n  LOADING: 'filter/state/loading',\n  /** Filter has encountered some sort of error */\n  ERROR: 'filter/state/error',\n  /** Filter is not currently perfroming any specific action and is ready for user inout */\n  IDLE: 'filter/state/idle',\n  /** Filter has been disabled and user input is not possible */\n  DISABLED: 'filter/state/disabled'\n};\n\n/**\n * @typedef {string} FilterSetState\n */\n\n/**\n * Define possible states of the filter set as a whole\n * @readonly\n * @enum {FilterSetState}\n */\nvar FILTER_SET_STATE = exports.FILTER_SET_STATE = {\n  /** Filter set is in the process of building and populating initial data in filters */\n  INITIALISING: 'filterset/state/init',\n  /** Filter set is not currently perfroming any specific action and is ready for user inout */\n  IDLE: 'filterset/state/idle',\n  /** Filter set has encountereda problem and user input is not possible */\n  ERROR: 'filterset/state/error',\n  /** Filter set is in process of resetting values */\n  RESETTING: 'filter/state/resetting'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvZW51bS9FbnVtLmpzPzM2ZGYiXSwibmFtZXMiOlsiRklMVEVSX1NUQVRFIiwiQlVJTERJTkciLCJMT0FESU5HIiwiRVJST1IiLCJJRExFIiwiRElTQUJMRUQiLCJGSUxURVJfU0VUX1NUQVRFIiwiSU5JVElBTElTSU5HIiwiUkVTRVRUSU5HIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQTs7OztBQUlBOzs7OztBQUtPLElBQU1BLHNDQUFlO0FBQ3hCO0FBQ0FDLFlBQVUsdUJBRmM7QUFHeEI7QUFDQUMsV0FBUyxzQkFKZTtBQUt4QjtBQUNBQyxTQUFPLG9CQU5pQjtBQU94QjtBQUNBQyxRQUFNLG1CQVJrQjtBQVN4QjtBQUNBQyxZQUFVO0FBVmMsQ0FBckI7O0FBYVA7Ozs7QUFJQTs7Ozs7QUFLTyxJQUFNQyw4Q0FBbUI7QUFDNUI7QUFDQUMsZ0JBQWMsc0JBRmM7QUFHNUI7QUFDQUgsUUFBTSxzQkFKc0I7QUFLNUI7QUFDQUQsU0FBTyx1QkFOcUI7QUFPNUI7QUFDQUssYUFBVztBQVJpQixDQUF6QiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEB0eXBlZGVmIHtzdHJpbmd9IEZpbHRlclN0YXRlXG4gKi9cblxuLyoqXG4gKiBEZWZpbmUgcG9zc2libGUgc3RhdGVzIG9mIHRoZSBmaWx0ZXJcbiAqIEByZWFkb25seVxuICogQGVudW0ge0ZpbHRlclN0YXRlfVxuICovXG5leHBvcnQgY29uc3QgRklMVEVSX1NUQVRFID0ge1xuICAgIC8qKiBGaWx0ZXIgaGFzIG5vdCBiZWVuIGNvbnN0cnVjdGVkIHlldCAqL1xuICAgIEJVSUxESU5HOiAnZmlsdGVyL3N0YXRlL2J1aWxkaW5nJyxcbiAgICAvKiogRmlsdGVyIGhhcyBzdGFydGVkIHRoZSBkYXRhIGZldGNoIHByb2Nlc3MgKi9cbiAgICBMT0FESU5HOiAnZmlsdGVyL3N0YXRlL2xvYWRpbmcnLFxuICAgIC8qKiBGaWx0ZXIgaGFzIGVuY291bnRlcmVkIHNvbWUgc29ydCBvZiBlcnJvciAqL1xuICAgIEVSUk9SOiAnZmlsdGVyL3N0YXRlL2Vycm9yJyxcbiAgICAvKiogRmlsdGVyIGlzIG5vdCBjdXJyZW50bHkgcGVyZnJvbWluZyBhbnkgc3BlY2lmaWMgYWN0aW9uIGFuZCBpcyByZWFkeSBmb3IgdXNlciBpbm91dCAqL1xuICAgIElETEU6ICdmaWx0ZXIvc3RhdGUvaWRsZScsXG4gICAgLyoqIEZpbHRlciBoYXMgYmVlbiBkaXNhYmxlZCBhbmQgdXNlciBpbnB1dCBpcyBub3QgcG9zc2libGUgKi9cbiAgICBESVNBQkxFRDogJ2ZpbHRlci9zdGF0ZS9kaXNhYmxlZCdcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge3N0cmluZ30gRmlsdGVyU2V0U3RhdGVcbiAqL1xuXG4vKipcbiAqIERlZmluZSBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlIGZpbHRlciBzZXQgYXMgYSB3aG9sZVxuICogQHJlYWRvbmx5XG4gKiBAZW51bSB7RmlsdGVyU2V0U3RhdGV9XG4gKi9cbmV4cG9ydCBjb25zdCBGSUxURVJfU0VUX1NUQVRFID0ge1xuICAgIC8qKiBGaWx0ZXIgc2V0IGlzIGluIHRoZSBwcm9jZXNzIG9mIGJ1aWxkaW5nIGFuZCBwb3B1bGF0aW5nIGluaXRpYWwgZGF0YSBpbiBmaWx0ZXJzICovXG4gICAgSU5JVElBTElTSU5HOiAnZmlsdGVyc2V0L3N0YXRlL2luaXQnLFxuICAgIC8qKiBGaWx0ZXIgc2V0IGlzIG5vdCBjdXJyZW50bHkgcGVyZnJvbWluZyBhbnkgc3BlY2lmaWMgYWN0aW9uIGFuZCBpcyByZWFkeSBmb3IgdXNlciBpbm91dCAqL1xuICAgIElETEU6ICdmaWx0ZXJzZXQvc3RhdGUvaWRsZScsXG4gICAgLyoqIEZpbHRlciBzZXQgaGFzIGVuY291bnRlcmVkYSBwcm9ibGVtIGFuZCB1c2VyIGlucHV0IGlzIG5vdCBwb3NzaWJsZSAqL1xuICAgIEVSUk9SOiAnZmlsdGVyc2V0L3N0YXRlL2Vycm9yJyxcbiAgICAvKiogRmlsdGVyIHNldCBpcyBpbiBwcm9jZXNzIG9mIHJlc2V0dGluZyB2YWx1ZXMgKi9cbiAgICBSRVNFVFRJTkc6ICdmaWx0ZXIvc3RhdGUvcmVzZXR0aW5nJ1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGliL2pzL2VudW0vRW51bS5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Filter = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _TreeNode2 = __webpack_require__(5);\n\nvar _NativeSelect = __webpack_require__(6);\n\nvar _Enum = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Middlewares to use when there is no middlewares provided in filter config\n * @typedef {Object} Middlewares\n * @property {Function} beforeOptionUpdate function called after the filter has successfully fetched data, passed teh data and should return a set of options to render\n * @property {Function} decideDefault function taht is passed tehset of options adn should return an id of an option to set as default\n * @property {Function} decideFilterEnabledState passed a filter that caused an update event and returns a boolean of wether the filter is enabled\n */\n\n/**\n * Type that defines a single filter option, this should be the format returned by the beforeOptionUpdate function\n * @typedef {Object} Option\n * @property {String} name options display name\n * @property {String} value the value for the options\n * @property {Object} extra extra data attached to the options\n */\n\n/**\n * Default filter config to use when no filter config passed\n * @typedef {Object} FilterConfig\n * @property {String} name the name of the filter\n * @property {Function} data a function that defines data grabbing behaviour, returns a string, array of Options or a promise that resolves with a Array of Options\n * @property {FilterInterface} uiClass the class to use to render the filter, must extends the FilterInterface class\n * @property {String} wrapperClass class that gets applied around the whole filter\n * @property {Middlewares} middleWares set of middlewares to use in this filter\n * @property {Array.<String>} dependsOn the set of filters that will cause this one to update\n * @property {HTMLElement} wrapper the wrapper element where the filter should be appended, set by the filter set and shouldnt be overridden\n */\n\n/**\n * Object that represents a filters current state and selected option\n * @typedef {Object} CurrentFilterValue\n * @property {String} filterName the name of the filter\n * @property {String} [name] the name of the curretn option\n * @property {String} [value] the value of the current selcted option\n * @property {Object} [extra] extra data attached to the option\n * @property {FilterState} state the current state of the filter\n */\n\n/**\n * FIlter class to handle interactions between the filter set and the ui element that is implmented\n * by the user or the default filter ui class\n *\n * @extends TreeNode\n */\nvar Filter = exports.Filter = function (_TreeNode) {\n    _inherits(Filter, _TreeNode);\n\n    _createClass(Filter, null, [{\n        key: 'DEFAULT_MIDDLEWARES',\n\n\n        /**\n         * Get the default set of middlewares for a filter\n         *\n         * @return {Middlewares} the middlewares to use of none already set in filter config\n         * @static\n         */\n        value: function DEFAULT_MIDDLEWARES() {\n            return {\n                beforeOptionUpdate: function beforeOptionUpdate(options) {\n                    return options;\n                },\n                decideDefault: function decideDefault(options) {\n                    return options[0].value;\n                },\n                decideFilterEnabledState: function decideFilterEnabledState(dependantUpdated) {\n                    return true;\n                }\n            };\n        }\n\n        /**\n         * Get the default filter config\n         *\n         * @return {FilterConfig} the filter config\n         * @static\n         */\n\n    }, {\n        key: 'DEFAULT_CONFIG',\n        value: function DEFAULT_CONFIG() {\n            return {\n                uiClass: _NativeSelect.NativeSelectFilter,\n                wrapperClass: 'filter'\n            };\n        }\n\n        /**\n         * Render a warning into the console, automatically add this filters name\n         * @param  {String} name    the name of the filter\n         * @param  {String} message the warning message\n         * @static\n         */\n\n    }, {\n        key: 'warn',\n        value: function warn(name, message) {\n            console.warn('Filter (' + name + '): ' + message);\n        }\n\n        /**\n         * Get a set of utility functions that can be used in middleware functions\n         * @return {Object} set of utility functions\n         * @static\n         */\n\n    }, {\n        key: 'FILTER_UTIL_FUNCTIONS',\n        value: function FILTER_UTIL_FUNCTIONS() {\n            return {\n                DISABLE_WHEN_VALUE: function DISABLE_WHEN_VALUE(value) {\n\n                    return function (dependantsUpdated) {\n                        if (dependantsUpdated[0].getCurrentOption().value === value) {\n                            return false;\n                        }\n                        return true;\n                    };\n                }\n            };\n        }\n\n        /**\n         * Check if any filter in the set has an error state\n         * \n         * @param {Array.<Filter>} filters\n         * @return {boolean} wether any filter is in error state\n         */\n\n    }, {\n        key: 'anyError',\n        value: function anyError(filters) {\n            for (var fCount = 0; fCount < filters.length; fCount++) {\n                var filter = filters[fCount];\n                if (filter.getState() === window.fylter.FILTER_STATE.ERROR) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        /**\n         * Check if any filter in the set has a disabled state\n         * \n         * @param {Array.<Filter>} filters\n         * @return {boolean} wether any filter is in disabled state\n         */\n\n    }, {\n        key: 'anyDisabled',\n        value: function anyDisabled(filters) {\n            for (var fCount = 0; fCount < filters.length; fCount++) {\n                var filter = filters[fCount];\n                if (filter.isDisabled()) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        /**\n         * Constructor function for filter class creates filter and sets state to loading\n         *\n         * @param {FilterConfig} config configuration for this filter\n         */\n\n    }]);\n\n    function Filter(config) {\n        _classCallCheck(this, Filter);\n\n        var _this = _possibleConstructorReturn(this, (Filter.__proto__ || Object.getPrototypeOf(Filter)).call(this));\n\n        _this.setState(_Enum.FILTER_STATE.BUILDING);\n        _this.config = _extends({}, Filter.DEFAULT_CONFIG(), config);\n        _this.config.middleWares = _extends({}, Filter.DEFAULT_MIDDLEWARES(), _this.config.middleWares);\n        _this.uiElement = new _this.config.uiClass();\n        _this.uiElement.setSelectedCallback(_this.onSelect.bind(_this));\n        _this.setupContainer();\n        _this.optionList = [];\n        _this.setState(_Enum.FILTER_STATE.LOADING);\n        return _this;\n    }\n\n    /**\n     * Set the state of the filter\n     *\n     * @param {FilterState} state the filter state\n     */\n\n\n    _createClass(Filter, [{\n        key: 'setState',\n        value: function setState(state) {\n            this.state = state;\n        }\n\n        /**\n         * Creates the container that the ui element will render its contents into\n         */\n\n    }, {\n        key: 'setupContainer',\n        value: function setupContainer() {\n\n            this.container = document.createElement('div');\n            this.config.wrapper.appendChild(this.container);\n            this.container.classList.add(this.config.wrapperClass);\n            this.uiElement.setContainer(this.container);\n        }\n\n        /**\n         * Function only called for root filters, called once on the set up of the filter\n         *\n         * @return {Promise} promise that resolves when filter data has been fetched\n         */\n\n    }, {\n        key: 'init',\n        value: function init() {\n            var _this2 = this;\n\n            return this.getOptionsData().then(function () {\n                return _this2.config.onOptionSelected(_this2);\n            });\n        }\n\n        /**\n         * Callback that is invoked by the uiClass when an item has been selected by the user\n         *\n         * @param  {string} id the id of the selected item\n         * @return {Promise} promise that resolves when the filterset has finished its updates related to this change\n         */\n\n    }, {\n        key: 'onSelect',\n        value: function onSelect(id) {\n            this.setCurrentId(id);\n            return this.config.onOptionSelected(this);\n        }\n\n        /**\n         * Get an object representing the current state of the filter\n         *\n         * @return {CurrentFilterValue} the current value of the filter\n         */\n\n    }, {\n        key: 'getCurrentOption',\n        value: function getCurrentOption() {\n\n            var option = this._getOptionForValue(this.getCurrentId());\n\n            return _extends({\n                filterName: this.getName(),\n                state: this.getState()\n            }, option);\n        }\n\n        /**\n         * Given a value fetch an option from the list\n         *\n         * @param  {String} value the value of option to find\n         * @return {Option|Object} the option or an empty object\n         */\n\n    }, {\n        key: '_getOptionForValue',\n        value: function _getOptionForValue(value) {\n\n            if (value === false) {\n                return {};\n            }\n\n            var options = this.getOptionList();\n\n            for (var x = 0; x < options.length; x++) {\n                var option = options[x];\n\n                if (option.value.toString() === value.toString()) {\n                    return option;\n                }\n            }\n\n            return {};\n        }\n\n        /**\n         * When the config.data function returns a string this is used to make a network call. You can also use\n         * format strings with parent filter values here\n         *\n         * @example <caption>Using format parameters in a data url</caption>\n         * // The {{SomeFilter}} value will be replaced by the current value of that filter\n         * // The filter used must be a parent of this filter\n         * {\n         *  dependsOn: [ 'SomeFilter' ]\n         *  data: () => 'http://www.myapi.com/endpoint/{{someFilter}}/data'\n         * }\n         *\n         * @param  {String} url url from the config.data function\n         * @return {String} the url with any format strings evaluated\n         */\n\n    }, {\n        key: '_buildAPIUrl',\n        value: function _buildAPIUrl(url) {\n\n            var parents = this.getParents();\n            if (!parents.length) {\n                return url;\n            }\n\n            return parents.reduce(function (urlString, parent) {\n                var replace = '{{' + parent.getName() + '}}';\n                return urlString.replace(replace, parent.getCurrentOption().value);\n            }, url);\n        }\n\n        /**\n         * The config.data function can return a array, promise or string, here we abstract out this behaviour so whatever\n         * is specified in the config can be fetched as a promise that eventually resolves with data.\n         *\n         * @example <caption>Different ways of specifying the config data property</caption>\n         *\n         * {\n         *  data: updatingFilter => 'http://www.myapi...',\n         *  data: updatingFilter => [ { name, value }... ],\n         *  data: updatingFilter => new Promise(...)\n         * }\n         *\n         * @param  {Array.<Filter>} initiatingFilters the filter that caused the update\n         * @return {Promise<Array.<Option>>} promise that resolves with data\n         */\n\n    }, {\n        key: '_getDataPromise',\n        value: function _getDataPromise(initiatingFilters) {\n            var dataResult = this.config.data(initiatingFilters);\n\n            switch (typeof dataResult === 'undefined' ? 'undefined' : _typeof(dataResult)) {\n\n                case 'string':\n                    return this.config.dataFetchImplementation(this._buildAPIUrl(dataResult));\n                    break;\n                case 'object':\n                    if (dataResult instanceof Array) {\n                        return Promise.resolve(dataResult);\n                    }\n\n                    if (dataResult instanceof Promise) {\n                        return dataResult;\n                    }\n\n                    window.fylter.Filter.warn(this.getName(), 'Filter data needs to be a api endpoint (string) an array or promise');\n                    return Promise.resolve([]);\n                default:\n                    window.fylter.Filter.warn(this.getName(), 'Filter data needs to be a api endpoint (string) an array or promise');\n                    return Promise.resolve([]);\n\n            }\n        }\n\n        /**\n         * main function to initilate the fetching of data for the filter\n         *\n         * @param  {Array.<Filter>} [initiatingFilter] The filter that was updated to cause this filter to update\n         * @return {Promise} Promise that resolves when the data fetch and render is complete\n         */\n\n    }, {\n        key: 'getOptionsData',\n        value: function getOptionsData(initiatingFilters) {\n            var _this3 = this;\n\n            if (initiatingFilters && (window.fylter.Filter.anyDisabled(initiatingFilters) // any parent is disbaled\n            || !this.config.middleWares.decideFilterEnabledState(initiatingFilters))) {\n                // middleware tells us to disable\n                this.setCurrentId(false);\n                this.setState(window.fylter.FILTER_STATE.DISABLED);\n                return Promise.resolve();\n            }\n\n            this.setState(window.fylter.FILTER_STATE.LOADING);\n            return this._getDataPromise(initiatingFilters).then(function (data) {\n                _this3.setRawOptionsData(data);\n                return _this3.config.middleWares.beforeOptionUpdate(data);\n            }).then(function (options) {\n                _this3.setOptionList(options);\n                if (options && options.length) {\n                    _this3.setCurrentId(_this3.config.middleWares.decideDefault(_this3.getOptionList()));\n                    _this3.render();\n                    _this3.setState(window.fylter.FILTER_STATE.IDLE);\n                } else {\n                    _this3.setState(window.fylter.FILTER_STATE.DISABLED);\n                }\n            }).catch(function (error) {\n                Filter.warn(_this3.getName(), error.toString());\n                _this3.setState(window.fylter.FILTER_STATE.ERROR);\n            });\n        }\n\n        /**\n         * Get the name of this filter\n         *\n         * @return {String} the name of the filter\n         */\n\n    }, {\n        key: 'getName',\n        value: function getName() {\n            return this.config.name;\n        }\n\n        /**\n         * get the names of the filters that this filter depends on\n         *\n         * @return {Array.<String>} the filter names\n         */\n\n    }, {\n        key: 'getDependencies',\n        value: function getDependencies() {\n            return this.config.dependsOn || [];\n        }\n\n        /**\n         * Determine if the filter is disabled\n         *\n         * @return {Boolean} wether this filter is currently disabled\n         */\n\n    }, {\n        key: 'isDisabled',\n        value: function isDisabled() {\n            return this.getState() === _Enum.FILTER_STATE.DISABLED;\n        }\n\n        /**\n         * Function that is called when a filter that this instance is dependent on is updated. This is called by the\n         * FilterSet code. Should not be invoked manually.\n         *\n         * @param  {Array.<Filter>} filter filter causing the update\n         * @return {Promise} promise that resolves when this filter is finished fetching data\n         */\n\n    }, {\n        key: 'dependencyDidUpdate',\n        value: function dependencyDidUpdate(filters) {\n\n            if (Filter.anyError(filters)) {\n                this.setState(window.fylter.FILTER_STATE.ERROR);\n                return Promise.reject(new Error('Filter cannot be updated when parent is in an error state'));\n            }\n\n            return this.getOptionsData(filters);\n        }\n\n        /**\n         * Set the set of options that will be displayed by the filter\n         *\n         * @param {Array.<Option>} list list of options\n         */\n\n    }, {\n        key: 'setOptionList',\n        value: function setOptionList(list) {\n            this.optionList = list;\n        }\n\n        /**\n         * Get the current option set\n         *\n         * @return {Array.<Option>} current option set\n         */\n\n    }, {\n        key: 'getOptionList',\n        value: function getOptionList() {\n            return this.optionList;\n        }\n\n        /**\n         * This function will initiate the reset of this filter and also its dependants, this should\n         * not be called manually and is only called by the FilterSet\n         *\n         * @returns {Promise} promise that resolves when this filter and its children has been reset\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n\n            var defaultVal = this.config.middleWares.decideDefault(this.getOptionList());\n            this.uiElement.setValue(defaultVal);\n            return this.onSelect(defaultVal);\n        }\n\n        /**\n         * Set the ID (value) of the current option that is selected\n         *\n         * @param {String} id the id that has been selected\n         */\n\n    }, {\n        key: 'setCurrentId',\n        value: function setCurrentId(id) {\n            this.currentId = id;\n        }\n\n        /**\n         * Get the id of the currently selected option\n         *\n         * @return {String|boolean} the id\n         */\n\n    }, {\n        key: 'getCurrentId',\n        value: function getCurrentId() {\n            return this.currentId || false;\n        }\n\n        /**\n         * Set the state of this filter and perform any associated actions\n         *\n         * @param {FilterState} state state to set\n         */\n\n    }, {\n        key: 'setState',\n        value: function setState(state) {\n            this.state = state;\n\n            switch (this.state) {\n                case _Enum.FILTER_STATE.LOADING:\n                    this.uiElement.setLoadingState(this.getName());\n                    break;\n                case _Enum.FILTER_STATE.ERROR:\n                    this.uiElement.removeLoadingState(this.getName());\n                    this.uiElement.setErrorState(this.getName());\n                    break;\n                case _Enum.FILTER_STATE.IDLE:\n                    this.uiElement.removeLoadingState(this.getName());\n                    break;\n                case _Enum.FILTER_STATE.DISABLED:\n                    this.uiElement.setDisabledState(this.getName());\n                    break;\n            }\n        }\n\n        /**\n         * Get the current state of the filter\n         *\n         * @return {FilterState} current state\n         */\n\n    }, {\n        key: 'getState',\n        value: function getState() {\n            return this.state;\n        }\n\n        /**\n         * checks if all the initial update events have been fired\n         * \n         * @return {boolean} wether the filter is ready\n         */\n\n    }, {\n        key: 'readyToUpdateFromDependency',\n        value: function readyToUpdateFromDependency() {\n            return this.initCount === 0;\n        }\n\n        /**\n         * Decrease the init count by one, means the filter is one init closer to having all the initial init events fired on it\n         * by its parents\n         */\n\n    }, {\n        key: 'decrementInitCount',\n        value: function decrementInitCount() {\n            this.initCount = Math.max(this.initCount - 1, 0);\n        }\n\n        /**\n         * Tell the uiClass that it needs to render the filter into the page as all of the data needed is ready\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            this.uiElement.render(this.getName(), this.getOptionList(), this.getCurrentId());\n        }\n\n        /**\n         * Return the uiElement that is used to manage the filter in the DOM\n         * @return {FilterInterface} a class implementing the FilterInterface class\n         */\n\n    }, {\n        key: 'getUiElement',\n        value: function getUiElement() {\n            return this.uiElement;\n        }\n\n        /**\n         * Override superclass method and add functionality to update the init count value\n         * \n         * @param {TreeNode} node \n         * @override\n         */\n\n    }, {\n        key: 'setParent',\n        value: function setParent(node) {\n\n            _get(Filter.prototype.__proto__ || Object.getPrototypeOf(Filter.prototype), 'setParent', this).call(this, node);\n            /*\n                For filters with multiple dependencies we only want the initial update event to be called\n                once. Not once for each parent that updates. So we keep a counter about how many invocations\n                we are expecting before we can allow the init event to be fired.\n            */\n            this.initCount = typeof this.initCount === 'undefined' ? 0 : this.parents.length - 1;\n        }\n\n        /**\n         * Save a reference to the options data before it is converted to an Array.<Options>\n         * \n         * @param {object} data \n         */\n\n    }, {\n        key: 'setRawOptionsData',\n        value: function setRawOptionsData(data) {\n            this.rawOptionsData = data;\n        }\n    }]);\n\n    return Filter;\n}(_TreeNode2.TreeNode);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvZmlsdGVyL0ZpbHRlci5qcz9iYjMxIl0sIm5hbWVzIjpbIkZpbHRlciIsImJlZm9yZU9wdGlvblVwZGF0ZSIsIm9wdGlvbnMiLCJkZWNpZGVEZWZhdWx0IiwidmFsdWUiLCJkZWNpZGVGaWx0ZXJFbmFibGVkU3RhdGUiLCJ1aUNsYXNzIiwiTmF0aXZlU2VsZWN0RmlsdGVyIiwid3JhcHBlckNsYXNzIiwibmFtZSIsIm1lc3NhZ2UiLCJjb25zb2xlIiwid2FybiIsIkRJU0FCTEVfV0hFTl9WQUxVRSIsImRlcGVuZGFudHNVcGRhdGVkIiwiZ2V0Q3VycmVudE9wdGlvbiIsImZpbHRlcnMiLCJmQ291bnQiLCJsZW5ndGgiLCJmaWx0ZXIiLCJnZXRTdGF0ZSIsIndpbmRvdyIsImZ5bHRlciIsIkZJTFRFUl9TVEFURSIsIkVSUk9SIiwiaXNEaXNhYmxlZCIsImNvbmZpZyIsInNldFN0YXRlIiwiQlVJTERJTkciLCJERUZBVUxUX0NPTkZJRyIsIm1pZGRsZVdhcmVzIiwiREVGQVVMVF9NSURETEVXQVJFUyIsInVpRWxlbWVudCIsInNldFNlbGVjdGVkQ2FsbGJhY2siLCJvblNlbGVjdCIsImJpbmQiLCJzZXR1cENvbnRhaW5lciIsIm9wdGlvbkxpc3QiLCJMT0FESU5HIiwic3RhdGUiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3cmFwcGVyIiwiYXBwZW5kQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRDb250YWluZXIiLCJnZXRPcHRpb25zRGF0YSIsInRoZW4iLCJvbk9wdGlvblNlbGVjdGVkIiwiaWQiLCJzZXRDdXJyZW50SWQiLCJvcHRpb24iLCJfZ2V0T3B0aW9uRm9yVmFsdWUiLCJnZXRDdXJyZW50SWQiLCJmaWx0ZXJOYW1lIiwiZ2V0TmFtZSIsImdldE9wdGlvbkxpc3QiLCJ4IiwidG9TdHJpbmciLCJ1cmwiLCJwYXJlbnRzIiwiZ2V0UGFyZW50cyIsInJlZHVjZSIsInVybFN0cmluZyIsInBhcmVudCIsInJlcGxhY2UiLCJpbml0aWF0aW5nRmlsdGVycyIsImRhdGFSZXN1bHQiLCJkYXRhIiwiZGF0YUZldGNoSW1wbGVtZW50YXRpb24iLCJfYnVpbGRBUElVcmwiLCJBcnJheSIsIlByb21pc2UiLCJyZXNvbHZlIiwiYW55RGlzYWJsZWQiLCJESVNBQkxFRCIsIl9nZXREYXRhUHJvbWlzZSIsInNldFJhd09wdGlvbnNEYXRhIiwic2V0T3B0aW9uTGlzdCIsInJlbmRlciIsIklETEUiLCJjYXRjaCIsImVycm9yIiwiZGVwZW5kc09uIiwiYW55RXJyb3IiLCJyZWplY3QiLCJFcnJvciIsImxpc3QiLCJkZWZhdWx0VmFsIiwic2V0VmFsdWUiLCJjdXJyZW50SWQiLCJzZXRMb2FkaW5nU3RhdGUiLCJyZW1vdmVMb2FkaW5nU3RhdGUiLCJzZXRFcnJvclN0YXRlIiwic2V0RGlzYWJsZWRTdGF0ZSIsImluaXRDb3VudCIsIk1hdGgiLCJtYXgiLCJub2RlIiwicmF3T3B0aW9uc0RhdGEiLCJUcmVlTm9kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUE7Ozs7Ozs7O0FBUUE7Ozs7Ozs7O0FBUUE7Ozs7Ozs7Ozs7OztBQVlBOzs7Ozs7Ozs7O0FBVUE7Ozs7OztJQU1hQSxNLFdBQUFBLE07Ozs7Ozs7QUFFVDs7Ozs7OzhDQU02QjtBQUN6QixtQkFBTztBQUNIQyxvQ0FBb0I7QUFBQSwyQkFBV0MsT0FBWDtBQUFBLGlCQURqQjtBQUVIQywrQkFBZTtBQUFBLDJCQUFXRCxRQUFTLENBQVQsRUFBYUUsS0FBeEI7QUFBQSxpQkFGWjtBQUdIQywwQ0FBMEI7QUFBQSwyQkFBb0IsSUFBcEI7QUFBQTtBQUh2QixhQUFQO0FBS0g7O0FBRUQ7Ozs7Ozs7Ozt5Q0FNd0I7QUFDcEIsbUJBQU87QUFDSEMseUJBQVNDLGdDQUROO0FBRUhDLDhCQUFjO0FBRlgsYUFBUDtBQUlIOztBQUVEOzs7Ozs7Ozs7NkJBTWNDLEksRUFBTUMsTyxFQUFVO0FBQzFCQyxvQkFBUUMsSUFBUixjQUEwQkgsSUFBMUIsV0FBc0NDLE9BQXRDO0FBQ0g7O0FBRUQ7Ozs7Ozs7O2dEQUsrQjtBQUMzQixtQkFBTztBQUNIRyxvQ0FBb0IsNEJBQVdULEtBQVgsRUFBbUI7O0FBRW5DLDJCQUFPLFVBQVdVLGlCQUFYLEVBQStCO0FBQ2xDLDRCQUFLQSxrQkFBbUIsQ0FBbkIsRUFBdUJDLGdCQUF2QixHQUEwQ1gsS0FBMUMsS0FBb0RBLEtBQXpELEVBQWlFO0FBQzdELG1DQUFPLEtBQVA7QUFDSDtBQUNELCtCQUFPLElBQVA7QUFDSCxxQkFMRDtBQU9IO0FBVkUsYUFBUDtBQVlIOztBQUVEOzs7Ozs7Ozs7aUNBTWlCWSxPLEVBQVU7QUFDdkIsaUJBQUssSUFBSUMsU0FBUyxDQUFsQixFQUFzQkEsU0FBU0QsUUFBUUUsTUFBdkMsRUFBK0NELFFBQS9DLEVBQTBEO0FBQ3RELG9CQUFNRSxTQUFTSCxRQUFTQyxNQUFULENBQWY7QUFDQSxvQkFBSUUsT0FBT0MsUUFBUCxPQUFzQkMsT0FBT0MsTUFBUCxDQUFjQyxZQUFkLENBQTJCQyxLQUFyRCxFQUE2RDtBQUN6RCwyQkFBTyxJQUFQO0FBQ0g7QUFDSjs7QUFFRCxtQkFBTyxLQUFQO0FBQ0g7O0FBRUQ7Ozs7Ozs7OztvQ0FNb0JSLE8sRUFBVTtBQUMxQixpQkFBSyxJQUFJQyxTQUFTLENBQWxCLEVBQXNCQSxTQUFTRCxRQUFRRSxNQUF2QyxFQUErQ0QsUUFBL0MsRUFBMEQ7QUFDdEQsb0JBQU1FLFNBQVNILFFBQVNDLE1BQVQsQ0FBZjtBQUNBLG9CQUFJRSxPQUFPTSxVQUFQLEVBQUosRUFBMEI7QUFDdEIsMkJBQU8sSUFBUDtBQUNIO0FBQ0o7O0FBRUQsbUJBQU8sS0FBUDtBQUNIOztBQUVEOzs7Ozs7OztBQUtBLG9CQUFhQyxNQUFiLEVBQXNCO0FBQUE7O0FBQUE7O0FBR2xCLGNBQUtDLFFBQUwsQ0FBZUosbUJBQWFLLFFBQTVCO0FBQ0EsY0FBS0YsTUFBTCxnQkFDTzFCLE9BQU82QixjQUFQLEVBRFAsRUFFT0gsTUFGUDtBQUlBLGNBQUtBLE1BQUwsQ0FBWUksV0FBWixnQkFDTzlCLE9BQU8rQixtQkFBUCxFQURQLEVBRU8sTUFBS0wsTUFBTCxDQUFZSSxXQUZuQjtBQUlBLGNBQUtFLFNBQUwsR0FBaUIsSUFBSSxNQUFLTixNQUFMLENBQVlwQixPQUFoQixFQUFqQjtBQUNBLGNBQUswQixTQUFMLENBQWVDLG1CQUFmLENBQW9DLE1BQUtDLFFBQUwsQ0FBY0MsSUFBZCxPQUFwQztBQUNBLGNBQUtDLGNBQUw7QUFDQSxjQUFLQyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0EsY0FBS1YsUUFBTCxDQUFlSixtQkFBYWUsT0FBNUI7QUFoQmtCO0FBaUJyQjs7QUFFRDs7Ozs7Ozs7O2lDQUtVQyxLLEVBQVE7QUFDZCxpQkFBS0EsS0FBTCxHQUFhQSxLQUFiO0FBQ0g7O0FBRUQ7Ozs7Ozt5Q0FHaUI7O0FBRWIsaUJBQUtDLFNBQUwsR0FBaUJDLFNBQVNDLGFBQVQsQ0FBd0IsS0FBeEIsQ0FBakI7QUFDQSxpQkFBS2hCLE1BQUwsQ0FBWWlCLE9BQVosQ0FBb0JDLFdBQXBCLENBQWlDLEtBQUtKLFNBQXRDO0FBQ0EsaUJBQUtBLFNBQUwsQ0FBZUssU0FBZixDQUF5QkMsR0FBekIsQ0FBOEIsS0FBS3BCLE1BQUwsQ0FBWWxCLFlBQTFDO0FBQ0EsaUJBQUt3QixTQUFMLENBQWVlLFlBQWYsQ0FBNkIsS0FBS1AsU0FBbEM7QUFDSDs7QUFFRDs7Ozs7Ozs7K0JBS087QUFBQTs7QUFDSCxtQkFBTyxLQUFLUSxjQUFMLEdBQ0ZDLElBREUsQ0FDSSxZQUFNO0FBQ1QsdUJBQU8sT0FBS3ZCLE1BQUwsQ0FBWXdCLGdCQUFaLENBQThCLE1BQTlCLENBQVA7QUFDSCxhQUhFLENBQVA7QUFLSDs7QUFFRDs7Ozs7Ozs7O2lDQU1VQyxFLEVBQUs7QUFDWCxpQkFBS0MsWUFBTCxDQUFtQkQsRUFBbkI7QUFDQSxtQkFBTyxLQUFLekIsTUFBTCxDQUFZd0IsZ0JBQVosQ0FBOEIsSUFBOUIsQ0FBUDtBQUNIOztBQUVEOzs7Ozs7OzsyQ0FLbUI7O0FBRWYsZ0JBQU1HLFNBQVMsS0FBS0Msa0JBQUwsQ0FBeUIsS0FBS0MsWUFBTCxFQUF6QixDQUFmOztBQUVBO0FBQ0lDLDRCQUFZLEtBQUtDLE9BQUwsRUFEaEI7QUFFSWxCLHVCQUFPLEtBQUtuQixRQUFMO0FBRlgsZUFHT2lDLE1BSFA7QUFLSDs7QUFFRDs7Ozs7Ozs7OzJDQU1vQmpELEssRUFBUTs7QUFFeEIsZ0JBQUtBLFVBQVUsS0FBZixFQUF1QjtBQUNuQix1QkFBTyxFQUFQO0FBQ0g7O0FBRUQsZ0JBQU1GLFVBQVUsS0FBS3dELGFBQUwsRUFBaEI7O0FBRUEsaUJBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJekQsUUFBUWdCLE1BQTVCLEVBQW9DeUMsR0FBcEMsRUFBMEM7QUFDdEMsb0JBQU1OLFNBQVNuRCxRQUFTeUQsQ0FBVCxDQUFmOztBQUVBLG9CQUFJTixPQUFPakQsS0FBUCxDQUFhd0QsUUFBYixPQUE0QnhELE1BQU13RCxRQUFOLEVBQWhDLEVBQW1EO0FBQy9DLDJCQUFPUCxNQUFQO0FBQ0g7QUFDSjs7QUFFRCxtQkFBTyxFQUFQO0FBQ0g7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQ0FlY1EsRyxFQUFNOztBQUVoQixnQkFBTUMsVUFBVSxLQUFLQyxVQUFMLEVBQWhCO0FBQ0EsZ0JBQUssQ0FBQ0QsUUFBUTVDLE1BQWQsRUFBdUI7QUFDbkIsdUJBQU8yQyxHQUFQO0FBQ0g7O0FBRUQsbUJBQU9DLFFBQVFFLE1BQVIsQ0FBZ0IsVUFBRUMsU0FBRixFQUFhQyxNQUFiLEVBQXlCO0FBQzVDLG9CQUFNQyxpQkFBZ0JELE9BQU9ULE9BQVAsRUFBaEIsT0FBTjtBQUNBLHVCQUFPUSxVQUFVRSxPQUFWLENBQW1CQSxPQUFuQixFQUE0QkQsT0FBT25ELGdCQUFQLEdBQTBCWCxLQUF0RCxDQUFQO0FBQ0gsYUFITSxFQUdKeUQsR0FISSxDQUFQO0FBSUg7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt3Q0FlaUJPLGlCLEVBQW9CO0FBQ2pDLGdCQUFNQyxhQUFhLEtBQUszQyxNQUFMLENBQVk0QyxJQUFaLENBQWtCRixpQkFBbEIsQ0FBbkI7O0FBRUEsMkJBQWdCQyxVQUFoQix5Q0FBZ0JBLFVBQWhCOztBQUVJLHFCQUFLLFFBQUw7QUFDSSwyQkFBTyxLQUFLM0MsTUFBTCxDQUFZNkMsdUJBQVosQ0FBcUMsS0FBS0MsWUFBTCxDQUFtQkgsVUFBbkIsQ0FBckMsQ0FBUDtBQUNBO0FBQ0oscUJBQUssUUFBTDtBQUNJLHdCQUFLQSxzQkFBc0JJLEtBQTNCLEVBQW1DO0FBQy9CLCtCQUFPQyxRQUFRQyxPQUFSLENBQWlCTixVQUFqQixDQUFQO0FBQ0g7O0FBRUQsd0JBQUtBLHNCQUFzQkssT0FBM0IsRUFBcUM7QUFDakMsK0JBQU9MLFVBQVA7QUFDSDs7QUFFRGhELDJCQUFPQyxNQUFQLENBQWN0QixNQUFkLENBQXFCWSxJQUFyQixDQUEyQixLQUFLNkMsT0FBTCxFQUEzQixFQUEyQyxxRUFBM0M7QUFDQSwyQkFBT2lCLFFBQVFDLE9BQVIsQ0FBaUIsRUFBakIsQ0FBUDtBQUNKO0FBQ0l0RCwyQkFBT0MsTUFBUCxDQUFjdEIsTUFBZCxDQUFxQlksSUFBckIsQ0FBMkIsS0FBSzZDLE9BQUwsRUFBM0IsRUFBMkMscUVBQTNDO0FBQ0EsMkJBQU9pQixRQUFRQyxPQUFSLENBQWlCLEVBQWpCLENBQVA7O0FBbEJSO0FBc0JIOztBQUVEOzs7Ozs7Ozs7dUNBTWdCUCxpQixFQUFvQjtBQUFBOztBQUVoQyxnQkFBS0Esc0JBQ0UvQyxPQUFPQyxNQUFQLENBQWN0QixNQUFkLENBQXFCNEUsV0FBckIsQ0FBa0NSLGlCQUFsQyxFQUFzRDtBQUF0RCxlQUNJLENBQUMsS0FBSzFDLE1BQUwsQ0FBWUksV0FBWixDQUF3QnpCLHdCQUF4QixDQUFrRCtELGlCQUFsRCxDQUZQLENBQUwsRUFFc0Y7QUFBRTtBQUNwRixxQkFBS2hCLFlBQUwsQ0FBbUIsS0FBbkI7QUFDQSxxQkFBS3pCLFFBQUwsQ0FBZU4sT0FBT0MsTUFBUCxDQUFjQyxZQUFkLENBQTJCc0QsUUFBMUM7QUFDQSx1QkFBT0gsUUFBUUMsT0FBUixFQUFQO0FBQ0g7O0FBRUQsaUJBQUtoRCxRQUFMLENBQWVOLE9BQU9DLE1BQVAsQ0FBY0MsWUFBZCxDQUEyQmUsT0FBMUM7QUFDQSxtQkFBTyxLQUFLd0MsZUFBTCxDQUFzQlYsaUJBQXRCLEVBQ0ZuQixJQURFLENBQ0ksZ0JBQVE7QUFDWCx1QkFBSzhCLGlCQUFMLENBQXdCVCxJQUF4QjtBQUNBLHVCQUFPLE9BQUs1QyxNQUFMLENBQVlJLFdBQVosQ0FBd0I3QixrQkFBeEIsQ0FBNENxRSxJQUE1QyxDQUFQO0FBQ0gsYUFKRSxFQUtGckIsSUFMRSxDQUtJLG1CQUFXO0FBQ2QsdUJBQUsrQixhQUFMLENBQW9COUUsT0FBcEI7QUFDQSxvQkFBS0EsV0FBV0EsUUFBUWdCLE1BQXhCLEVBQWlDO0FBQzdCLDJCQUFLa0MsWUFBTCxDQUFtQixPQUFLMUIsTUFBTCxDQUFZSSxXQUFaLENBQXdCM0IsYUFBeEIsQ0FBdUMsT0FBS3VELGFBQUwsRUFBdkMsQ0FBbkI7QUFDQSwyQkFBS3VCLE1BQUw7QUFDQSwyQkFBS3RELFFBQUwsQ0FBZU4sT0FBT0MsTUFBUCxDQUFjQyxZQUFkLENBQTJCMkQsSUFBMUM7QUFDSCxpQkFKRCxNQUlPO0FBQ0gsMkJBQUt2RCxRQUFMLENBQWVOLE9BQU9DLE1BQVAsQ0FBY0MsWUFBZCxDQUEyQnNELFFBQTFDO0FBQ0g7QUFFSixhQWZFLEVBZ0JGTSxLQWhCRSxDQWdCSyxpQkFBUztBQUNibkYsdUJBQU9ZLElBQVAsQ0FBYSxPQUFLNkMsT0FBTCxFQUFiLEVBQTZCMkIsTUFBTXhCLFFBQU4sRUFBN0I7QUFDQSx1QkFBS2pDLFFBQUwsQ0FBZU4sT0FBT0MsTUFBUCxDQUFjQyxZQUFkLENBQTJCQyxLQUExQztBQUNILGFBbkJFLENBQVA7QUFvQkg7O0FBRUQ7Ozs7Ozs7O2tDQUtVO0FBQ04sbUJBQU8sS0FBS0UsTUFBTCxDQUFZakIsSUFBbkI7QUFDSDs7QUFFRDs7Ozs7Ozs7MENBS2tCO0FBQ2QsbUJBQU8sS0FBS2lCLE1BQUwsQ0FBWTJELFNBQVosSUFBeUIsRUFBaEM7QUFDSDs7QUFFRDs7Ozs7Ozs7cUNBS2E7QUFDVCxtQkFBTyxLQUFLakUsUUFBTCxPQUFvQkcsbUJBQWFzRCxRQUF4QztBQUNIOztBQUVEOzs7Ozs7Ozs7OzRDQU9xQjdELE8sRUFBVTs7QUFFM0IsZ0JBQUtoQixPQUFPc0YsUUFBUCxDQUFpQnRFLE9BQWpCLENBQUwsRUFBa0M7QUFDOUIscUJBQUtXLFFBQUwsQ0FBZU4sT0FBT0MsTUFBUCxDQUFjQyxZQUFkLENBQTJCQyxLQUExQztBQUNBLHVCQUFPa0QsUUFBUWEsTUFBUixDQUFnQixJQUFJQyxLQUFKLENBQVcsMkRBQVgsQ0FBaEIsQ0FBUDtBQUNIOztBQUVELG1CQUFPLEtBQUt4QyxjQUFMLENBQXFCaEMsT0FBckIsQ0FBUDtBQUNIOztBQUVEOzs7Ozs7OztzQ0FLZ0J5RSxJLEVBQU87QUFDbkIsaUJBQUtwRCxVQUFMLEdBQWtCb0QsSUFBbEI7QUFDSDs7QUFFRDs7Ozs7Ozs7d0NBS2lCO0FBQ2IsbUJBQU8sS0FBS3BELFVBQVo7QUFDSDs7QUFFRDs7Ozs7Ozs7O2dDQU1ROztBQUVKLGdCQUFNcUQsYUFBYSxLQUFLaEUsTUFBTCxDQUFZSSxXQUFaLENBQXdCM0IsYUFBeEIsQ0FBdUMsS0FBS3VELGFBQUwsRUFBdkMsQ0FBbkI7QUFDQSxpQkFBSzFCLFNBQUwsQ0FBZTJELFFBQWYsQ0FBeUJELFVBQXpCO0FBQ0EsbUJBQU8sS0FBS3hELFFBQUwsQ0FBZXdELFVBQWYsQ0FBUDtBQUNIOztBQUVEOzs7Ozs7OztxQ0FLY3ZDLEUsRUFBSztBQUNmLGlCQUFLeUMsU0FBTCxHQUFpQnpDLEVBQWpCO0FBQ0g7O0FBRUQ7Ozs7Ozs7O3VDQUtlO0FBQ1gsbUJBQU8sS0FBS3lDLFNBQUwsSUFBa0IsS0FBekI7QUFDSDs7QUFFRDs7Ozs7Ozs7aUNBS1VyRCxLLEVBQVE7QUFDZCxpQkFBS0EsS0FBTCxHQUFhQSxLQUFiOztBQUVBLG9CQUFRLEtBQUtBLEtBQWI7QUFDSSxxQkFBS2hCLG1CQUFhZSxPQUFsQjtBQUNJLHlCQUFLTixTQUFMLENBQWU2RCxlQUFmLENBQWdDLEtBQUtwQyxPQUFMLEVBQWhDO0FBQ0E7QUFDSixxQkFBS2xDLG1CQUFhQyxLQUFsQjtBQUNJLHlCQUFLUSxTQUFMLENBQWU4RCxrQkFBZixDQUFtQyxLQUFLckMsT0FBTCxFQUFuQztBQUNBLHlCQUFLekIsU0FBTCxDQUFlK0QsYUFBZixDQUE4QixLQUFLdEMsT0FBTCxFQUE5QjtBQUNBO0FBQ0oscUJBQUtsQyxtQkFBYTJELElBQWxCO0FBQ0kseUJBQUtsRCxTQUFMLENBQWU4RCxrQkFBZixDQUFtQyxLQUFLckMsT0FBTCxFQUFuQztBQUNBO0FBQ0oscUJBQUtsQyxtQkFBYXNELFFBQWxCO0FBQ0kseUJBQUs3QyxTQUFMLENBQWVnRSxnQkFBZixDQUFpQyxLQUFLdkMsT0FBTCxFQUFqQztBQUNBO0FBYlI7QUFlSDs7QUFFRDs7Ozs7Ozs7bUNBS1c7QUFDUCxtQkFBTyxLQUFLbEIsS0FBWjtBQUNIOztBQUVEOzs7Ozs7OztzREFLOEI7QUFDMUIsbUJBQU8sS0FBSzBELFNBQUwsS0FBbUIsQ0FBMUI7QUFDSDs7QUFFRDs7Ozs7Ozs2Q0FJcUI7QUFDakIsaUJBQUtBLFNBQUwsR0FBaUJDLEtBQUtDLEdBQUwsQ0FBVSxLQUFLRixTQUFMLEdBQWlCLENBQTNCLEVBQThCLENBQTlCLENBQWpCO0FBQ0g7O0FBRUQ7Ozs7OztpQ0FHVTtBQUNOLGlCQUFLakUsU0FBTCxDQUFlaUQsTUFBZixDQUF1QixLQUFLeEIsT0FBTCxFQUF2QixFQUF1QyxLQUFLQyxhQUFMLEVBQXZDLEVBQTZELEtBQUtILFlBQUwsRUFBN0Q7QUFDSDs7QUFFRDs7Ozs7Ozt1Q0FJZTtBQUNYLG1CQUFPLEtBQUt2QixTQUFaO0FBQ0g7O0FBRUQ7Ozs7Ozs7OztrQ0FNV29FLEksRUFBTzs7QUFFZCxzSEFBaUJBLElBQWpCO0FBQ0E7Ozs7O0FBS0EsaUJBQUtILFNBQUwsR0FBaUIsT0FBTyxLQUFLQSxTQUFaLEtBQTBCLFdBQTFCLEdBQXdDLENBQXhDLEdBQTRDLEtBQUtuQyxPQUFMLENBQWE1QyxNQUFiLEdBQXNCLENBQW5GO0FBQ0g7O0FBRUQ7Ozs7Ozs7OzBDQUttQm9ELEksRUFBTztBQUN0QixpQkFBSytCLGNBQUwsR0FBc0IvQixJQUF0QjtBQUNIOzs7O0VBOWV1QmdDLG1CIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmVlTm9kZSB9IGZyb20gJy4uL3RyZWUvVHJlZU5vZGUuanMnO1xuaW1wb3J0IHsgTmF0aXZlU2VsZWN0RmlsdGVyIH0gZnJvbSAnLi9OYXRpdmVTZWxlY3QuanMnO1xuaW1wb3J0IHsgRklMVEVSX1NUQVRFIH0gZnJvbSAnLi4vZW51bS9FbnVtLmpzJztcblxuLyoqXG4gKiBNaWRkbGV3YXJlcyB0byB1c2Ugd2hlbiB0aGVyZSBpcyBubyBtaWRkbGV3YXJlcyBwcm92aWRlZCBpbiBmaWx0ZXIgY29uZmlnXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNaWRkbGV3YXJlc1xuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYmVmb3JlT3B0aW9uVXBkYXRlIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciB0aGUgZmlsdGVyIGhhcyBzdWNjZXNzZnVsbHkgZmV0Y2hlZCBkYXRhLCBwYXNzZWQgdGVoIGRhdGEgYW5kIHNob3VsZCByZXR1cm4gYSBzZXQgb2Ygb3B0aW9ucyB0byByZW5kZXJcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGRlY2lkZURlZmF1bHQgZnVuY3Rpb24gdGFodCBpcyBwYXNzZWQgdGVoc2V0IG9mIG9wdGlvbnMgYWRuIHNob3VsZCByZXR1cm4gYW4gaWQgb2YgYW4gb3B0aW9uIHRvIHNldCBhcyBkZWZhdWx0XG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBkZWNpZGVGaWx0ZXJFbmFibGVkU3RhdGUgcGFzc2VkIGEgZmlsdGVyIHRoYXQgY2F1c2VkIGFuIHVwZGF0ZSBldmVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gb2Ygd2V0aGVyIHRoZSBmaWx0ZXIgaXMgZW5hYmxlZFxuICovXG5cbi8qKlxuICogVHlwZSB0aGF0IGRlZmluZXMgYSBzaW5nbGUgZmlsdGVyIG9wdGlvbiwgdGhpcyBzaG91bGQgYmUgdGhlIGZvcm1hdCByZXR1cm5lZCBieSB0aGUgYmVmb3JlT3B0aW9uVXBkYXRlIGZ1bmN0aW9uXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBuYW1lIG9wdGlvbnMgZGlzcGxheSBuYW1lXG4gKiBAcHJvcGVydHkge1N0cmluZ30gdmFsdWUgdGhlIHZhbHVlIGZvciB0aGUgb3B0aW9uc1xuICogQHByb3BlcnR5IHtPYmplY3R9IGV4dHJhIGV4dHJhIGRhdGEgYXR0YWNoZWQgdG8gdGhlIG9wdGlvbnNcbiAqL1xuXG4vKipcbiAqIERlZmF1bHQgZmlsdGVyIGNvbmZpZyB0byB1c2Ugd2hlbiBubyBmaWx0ZXIgY29uZmlnIHBhc3NlZFxuICogQHR5cGVkZWYge09iamVjdH0gRmlsdGVyQ29uZmlnXG4gKiBAcHJvcGVydHkge1N0cmluZ30gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZmlsdGVyXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBkYXRhIGEgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGRhdGEgZ3JhYmJpbmcgYmVoYXZpb3VyLCByZXR1cm5zIGEgc3RyaW5nLCBhcnJheSBvZiBPcHRpb25zIG9yIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBBcnJheSBvZiBPcHRpb25zXG4gKiBAcHJvcGVydHkge0ZpbHRlckludGVyZmFjZX0gdWlDbGFzcyB0aGUgY2xhc3MgdG8gdXNlIHRvIHJlbmRlciB0aGUgZmlsdGVyLCBtdXN0IGV4dGVuZHMgdGhlIEZpbHRlckludGVyZmFjZSBjbGFzc1xuICogQHByb3BlcnR5IHtTdHJpbmd9IHdyYXBwZXJDbGFzcyBjbGFzcyB0aGF0IGdldHMgYXBwbGllZCBhcm91bmQgdGhlIHdob2xlIGZpbHRlclxuICogQHByb3BlcnR5IHtNaWRkbGV3YXJlc30gbWlkZGxlV2FyZXMgc2V0IG9mIG1pZGRsZXdhcmVzIHRvIHVzZSBpbiB0aGlzIGZpbHRlclxuICogQHByb3BlcnR5IHtBcnJheS48U3RyaW5nPn0gZGVwZW5kc09uIHRoZSBzZXQgb2YgZmlsdGVycyB0aGF0IHdpbGwgY2F1c2UgdGhpcyBvbmUgdG8gdXBkYXRlXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSB3cmFwcGVyIHRoZSB3cmFwcGVyIGVsZW1lbnQgd2hlcmUgdGhlIGZpbHRlciBzaG91bGQgYmUgYXBwZW5kZWQsIHNldCBieSB0aGUgZmlsdGVyIHNldCBhbmQgc2hvdWxkbnQgYmUgb3ZlcnJpZGRlblxuICovXG5cbi8qKlxuICogT2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIGZpbHRlcnMgY3VycmVudCBzdGF0ZSBhbmQgc2VsZWN0ZWQgb3B0aW9uXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDdXJyZW50RmlsdGVyVmFsdWVcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBmaWx0ZXJOYW1lIHRoZSBuYW1lIG9mIHRoZSBmaWx0ZXJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbbmFtZV0gdGhlIG5hbWUgb2YgdGhlIGN1cnJldG4gb3B0aW9uXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW3ZhbHVlXSB0aGUgdmFsdWUgb2YgdGhlIGN1cnJlbnQgc2VsY3RlZCBvcHRpb25cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbZXh0cmFdIGV4dHJhIGRhdGEgYXR0YWNoZWQgdG8gdGhlIG9wdGlvblxuICogQHByb3BlcnR5IHtGaWx0ZXJTdGF0ZX0gc3RhdGUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGZpbHRlclxuICovXG5cbi8qKlxuICogRklsdGVyIGNsYXNzIHRvIGhhbmRsZSBpbnRlcmFjdGlvbnMgYmV0d2VlbiB0aGUgZmlsdGVyIHNldCBhbmQgdGhlIHVpIGVsZW1lbnQgdGhhdCBpcyBpbXBsbWVudGVkXG4gKiBieSB0aGUgdXNlciBvciB0aGUgZGVmYXVsdCBmaWx0ZXIgdWkgY2xhc3NcbiAqXG4gKiBAZXh0ZW5kcyBUcmVlTm9kZVxuICovXG5leHBvcnQgY2xhc3MgRmlsdGVyIGV4dGVuZHMgVHJlZU5vZGUge1xuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IHNldCBvZiBtaWRkbGV3YXJlcyBmb3IgYSBmaWx0ZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge01pZGRsZXdhcmVzfSB0aGUgbWlkZGxld2FyZXMgdG8gdXNlIG9mIG5vbmUgYWxyZWFkeSBzZXQgaW4gZmlsdGVyIGNvbmZpZ1xuICAgICAqIEBzdGF0aWNcbiAgICAgKi9cbiAgICBzdGF0aWMgREVGQVVMVF9NSURETEVXQVJFUygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZU9wdGlvblVwZGF0ZTogb3B0aW9ucyA9PiBvcHRpb25zLFxuICAgICAgICAgICAgZGVjaWRlRGVmYXVsdDogb3B0aW9ucyA9PiBvcHRpb25zWyAwIF0udmFsdWUsXG4gICAgICAgICAgICBkZWNpZGVGaWx0ZXJFbmFibGVkU3RhdGU6IGRlcGVuZGFudFVwZGF0ZWQgPT4gdHJ1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkZWZhdWx0IGZpbHRlciBjb25maWdcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0ZpbHRlckNvbmZpZ30gdGhlIGZpbHRlciBjb25maWdcbiAgICAgKiBAc3RhdGljXG4gICAgICovXG4gICAgc3RhdGljIERFRkFVTFRfQ09ORklHKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdWlDbGFzczogTmF0aXZlU2VsZWN0RmlsdGVyLFxuICAgICAgICAgICAgd3JhcHBlckNsYXNzOiAnZmlsdGVyJ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgd2FybmluZyBpbnRvIHRoZSBjb25zb2xlLCBhdXRvbWF0aWNhbGx5IGFkZCB0aGlzIGZpbHRlcnMgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSAgICB0aGUgbmFtZSBvZiB0aGUgZmlsdGVyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBtZXNzYWdlIHRoZSB3YXJuaW5nIG1lc3NhZ2VcbiAgICAgKiBAc3RhdGljXG4gICAgICovXG4gICAgc3RhdGljIHdhcm4gKCBuYW1lLCBtZXNzYWdlICkge1xuICAgICAgICBjb25zb2xlLndhcm4oIGBGaWx0ZXIgKCR7IG5hbWUgfSk6ICR7IG1lc3NhZ2UgfWAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBzZXQgb2YgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCBpbiBtaWRkbGV3YXJlIGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gc2V0IG9mIHV0aWxpdHkgZnVuY3Rpb25zXG4gICAgICogQHN0YXRpY1xuICAgICAqL1xuICAgIHN0YXRpYyBGSUxURVJfVVRJTF9GVU5DVElPTlMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBESVNBQkxFX1dIRU5fVkFMVUU6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCBkZXBlbmRhbnRzVXBkYXRlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkZXBlbmRhbnRzVXBkYXRlZFsgMCBdLmdldEN1cnJlbnRPcHRpb24oKS52YWx1ZSA9PT0gdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhbnkgZmlsdGVyIGluIHRoZSBzZXQgaGFzIGFuIGVycm9yIHN0YXRlXG4gICAgICogXG4gICAgICogQHBhcmFtIHtBcnJheS48RmlsdGVyPn0gZmlsdGVyc1xuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHdldGhlciBhbnkgZmlsdGVyIGlzIGluIGVycm9yIHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIGFueUVycm9yKCBmaWx0ZXJzICkge1xuICAgICAgICBmb3IoIGxldCBmQ291bnQgPSAwIDsgZkNvdW50IDwgZmlsdGVycy5sZW5ndGg7IGZDb3VudCsrICkge1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gZmlsdGVyc1sgZkNvdW50IF07XG4gICAgICAgICAgICBpZiggZmlsdGVyLmdldFN0YXRlKCkgPT09IHdpbmRvdy5meWx0ZXIuRklMVEVSX1NUQVRFLkVSUk9SICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhbnkgZmlsdGVyIGluIHRoZSBzZXQgaGFzIGEgZGlzYWJsZWQgc3RhdGVcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxGaWx0ZXI+fSBmaWx0ZXJzXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gd2V0aGVyIGFueSBmaWx0ZXIgaXMgaW4gZGlzYWJsZWQgc3RhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgYW55RGlzYWJsZWQoIGZpbHRlcnMgKSB7XG4gICAgICAgIGZvciggbGV0IGZDb3VudCA9IDAgOyBmQ291bnQgPCBmaWx0ZXJzLmxlbmd0aDsgZkNvdW50KysgKSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJzWyBmQ291bnQgXTtcbiAgICAgICAgICAgIGlmKCBmaWx0ZXIuaXNEaXNhYmxlZCgpICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgZmlsdGVyIGNsYXNzIGNyZWF0ZXMgZmlsdGVyIGFuZCBzZXRzIHN0YXRlIHRvIGxvYWRpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RmlsdGVyQ29uZmlnfSBjb25maWcgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBmaWx0ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciggY29uZmlnICkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoIEZJTFRFUl9TVEFURS5CVUlMRElORyApO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLkZpbHRlci5ERUZBVUxUX0NPTkZJRygpLFxuICAgICAgICAgICAgLi4uY29uZmlnXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29uZmlnLm1pZGRsZVdhcmVzID0ge1xuICAgICAgICAgICAgLi4uRmlsdGVyLkRFRkFVTFRfTUlERExFV0FSRVMoKSxcbiAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1pZGRsZVdhcmVzXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aUVsZW1lbnQgPSBuZXcgdGhpcy5jb25maWcudWlDbGFzcygpO1xuICAgICAgICB0aGlzLnVpRWxlbWVudC5zZXRTZWxlY3RlZENhbGxiYWNrKCB0aGlzLm9uU2VsZWN0LmJpbmQoIHRoaXMgKSApO1xuICAgICAgICB0aGlzLnNldHVwQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMub3B0aW9uTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLnNldFN0YXRlKCBGSUxURVJfU1RBVEUuTE9BRElORyApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgdGhlIGZpbHRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtGaWx0ZXJTdGF0ZX0gc3RhdGUgdGhlIGZpbHRlciBzdGF0ZVxuICAgICAqL1xuICAgIHNldFN0YXRlKCBzdGF0ZSApIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIGNvbnRhaW5lciB0aGF0IHRoZSB1aSBlbGVtZW50IHdpbGwgcmVuZGVyIGl0cyBjb250ZW50cyBpbnRvXG4gICAgICovXG4gICAgc2V0dXBDb250YWluZXIoKSB7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xuICAgICAgICB0aGlzLmNvbmZpZy53cmFwcGVyLmFwcGVuZENoaWxkKCB0aGlzLmNvbnRhaW5lciApO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCB0aGlzLmNvbmZpZy53cmFwcGVyQ2xhc3MgKTtcbiAgICAgICAgdGhpcy51aUVsZW1lbnQuc2V0Q29udGFpbmVyKCB0aGlzLmNvbnRhaW5lciApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIG9ubHkgY2FsbGVkIGZvciByb290IGZpbHRlcnMsIGNhbGxlZCBvbmNlIG9uIHRoZSBzZXQgdXAgb2YgdGhlIGZpbHRlclxuICAgICAqXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gZmlsdGVyIGRhdGEgaGFzIGJlZW4gZmV0Y2hlZFxuICAgICAqL1xuICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbnNEYXRhKClcbiAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLm9uT3B0aW9uU2VsZWN0ZWQoIHRoaXMgKTtcbiAgICAgICAgICAgIH0gKVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIGJ5IHRoZSB1aUNsYXNzIHdoZW4gYW4gaXRlbSBoYXMgYmVlbiBzZWxlY3RlZCBieSB0aGUgdXNlclxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBpZCB0aGUgaWQgb2YgdGhlIHNlbGVjdGVkIGl0ZW1cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZmlsdGVyc2V0IGhhcyBmaW5pc2hlZCBpdHMgdXBkYXRlcyByZWxhdGVkIHRvIHRoaXMgY2hhbmdlXG4gICAgICovXG4gICAgb25TZWxlY3QoIGlkICkge1xuICAgICAgICB0aGlzLnNldEN1cnJlbnRJZCggaWQgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLm9uT3B0aW9uU2VsZWN0ZWQoIHRoaXMgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZmlsdGVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDdXJyZW50RmlsdGVyVmFsdWV9IHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBmaWx0ZXJcbiAgICAgKi9cbiAgICBnZXRDdXJyZW50T3B0aW9uKCkge1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuX2dldE9wdGlvbkZvclZhbHVlKCB0aGlzLmdldEN1cnJlbnRJZCgpICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbHRlck5hbWU6IHRoaXMuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0U3RhdGUoKSxcbiAgICAgICAgICAgIC4uLm9wdGlvblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSB2YWx1ZSBmZXRjaCBhbiBvcHRpb24gZnJvbSB0aGUgbGlzdFxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB2YWx1ZSB0aGUgdmFsdWUgb2Ygb3B0aW9uIHRvIGZpbmRcbiAgICAgKiBAcmV0dXJuIHtPcHRpb258T2JqZWN0fSB0aGUgb3B0aW9uIG9yIGFuIGVtcHR5IG9iamVjdFxuICAgICAqL1xuICAgIF9nZXRPcHRpb25Gb3JWYWx1ZSggdmFsdWUgKSB7XG5cbiAgICAgICAgaWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5nZXRPcHRpb25MaXN0KCk7XG5cbiAgICAgICAgZm9yKCBsZXQgeCA9IDA7IHggPCBvcHRpb25zLmxlbmd0aDsgeCsrICkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gb3B0aW9uc1sgeCBdO1xuXG4gICAgICAgICAgICBpZiggb3B0aW9uLnZhbHVlLnRvU3RyaW5nKCkgPT09IHZhbHVlLnRvU3RyaW5nKCkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBjb25maWcuZGF0YSBmdW5jdGlvbiByZXR1cm5zIGEgc3RyaW5nIHRoaXMgaXMgdXNlZCB0byBtYWtlIGEgbmV0d29yayBjYWxsLiBZb3UgY2FuIGFsc28gdXNlXG4gICAgICogZm9ybWF0IHN0cmluZ3Mgd2l0aCBwYXJlbnQgZmlsdGVyIHZhbHVlcyBoZXJlXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5Vc2luZyBmb3JtYXQgcGFyYW1ldGVycyBpbiBhIGRhdGEgdXJsPC9jYXB0aW9uPlxuICAgICAqIC8vIFRoZSB7e1NvbWVGaWx0ZXJ9fSB2YWx1ZSB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoYXQgZmlsdGVyXG4gICAgICogLy8gVGhlIGZpbHRlciB1c2VkIG11c3QgYmUgYSBwYXJlbnQgb2YgdGhpcyBmaWx0ZXJcbiAgICAgKiB7XG4gICAgICogIGRlcGVuZHNPbjogWyAnU29tZUZpbHRlcicgXVxuICAgICAqICBkYXRhOiAoKSA9PiAnaHR0cDovL3d3dy5teWFwaS5jb20vZW5kcG9pbnQve3tzb21lRmlsdGVyfX0vZGF0YSdcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHVybCB1cmwgZnJvbSB0aGUgY29uZmlnLmRhdGEgZnVuY3Rpb25cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1cmwgd2l0aCBhbnkgZm9ybWF0IHN0cmluZ3MgZXZhbHVhdGVkXG4gICAgICovXG4gICAgX2J1aWxkQVBJVXJsKCB1cmwgKSB7XG5cbiAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cygpO1xuICAgICAgICBpZiAoICFwYXJlbnRzLmxlbmd0aCApIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHBhcmVudHMucmVkdWNlKCAoIHVybFN0cmluZywgcGFyZW50ICkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVwbGFjZSA9IGB7eyR7IHBhcmVudC5nZXROYW1lKCkgfX19YDtcbiAgICAgICAgICAgIHJldHVybiB1cmxTdHJpbmcucmVwbGFjZSggcmVwbGFjZSwgcGFyZW50LmdldEN1cnJlbnRPcHRpb24oKS52YWx1ZSApXG4gICAgICAgIH0sIHVybCApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBjb25maWcuZGF0YSBmdW5jdGlvbiBjYW4gcmV0dXJuIGEgYXJyYXksIHByb21pc2Ugb3Igc3RyaW5nLCBoZXJlIHdlIGFic3RyYWN0IG91dCB0aGlzIGJlaGF2aW91ciBzbyB3aGF0ZXZlclxuICAgICAqIGlzIHNwZWNpZmllZCBpbiB0aGUgY29uZmlnIGNhbiBiZSBmZXRjaGVkIGFzIGEgcHJvbWlzZSB0aGF0IGV2ZW50dWFsbHkgcmVzb2x2ZXMgd2l0aCBkYXRhLlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgPGNhcHRpb24+RGlmZmVyZW50IHdheXMgb2Ygc3BlY2lmeWluZyB0aGUgY29uZmlnIGRhdGEgcHJvcGVydHk8L2NhcHRpb24+XG4gICAgICpcbiAgICAgKiB7XG4gICAgICogIGRhdGE6IHVwZGF0aW5nRmlsdGVyID0+ICdodHRwOi8vd3d3Lm15YXBpLi4uJyxcbiAgICAgKiAgZGF0YTogdXBkYXRpbmdGaWx0ZXIgPT4gWyB7IG5hbWUsIHZhbHVlIH0uLi4gXSxcbiAgICAgKiAgZGF0YTogdXBkYXRpbmdGaWx0ZXIgPT4gbmV3IFByb21pc2UoLi4uKVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0FycmF5LjxGaWx0ZXI+fSBpbml0aWF0aW5nRmlsdGVycyB0aGUgZmlsdGVyIHRoYXQgY2F1c2VkIHRoZSB1cGRhdGVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5LjxPcHRpb24+Pn0gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggZGF0YVxuICAgICAqL1xuICAgIF9nZXREYXRhUHJvbWlzZSggaW5pdGlhdGluZ0ZpbHRlcnMgKSB7XG4gICAgICAgIGNvbnN0IGRhdGFSZXN1bHQgPSB0aGlzLmNvbmZpZy5kYXRhKCBpbml0aWF0aW5nRmlsdGVycyApO1xuXG4gICAgICAgIHN3aXRjaCAoIHR5cGVvZiBkYXRhUmVzdWx0ICkge1xuICAgIFxuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuZGF0YUZldGNoSW1wbGVtZW50YXRpb24oIHRoaXMuX2J1aWxkQVBJVXJsKCBkYXRhUmVzdWx0ICkgKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGFSZXN1bHQgaW5zdGFuY2VvZiBBcnJheSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSggZGF0YVJlc3VsdCApO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIGRhdGFSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgd2luZG93LmZ5bHRlci5GaWx0ZXIud2FybiggdGhpcy5nZXROYW1lKCksICdGaWx0ZXIgZGF0YSBuZWVkcyB0byBiZSBhIGFwaSBlbmRwb2ludCAoc3RyaW5nKSBhbiBhcnJheSBvciBwcm9taXNlJyApO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoIFtdICk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHdpbmRvdy5meWx0ZXIuRmlsdGVyLndhcm4oIHRoaXMuZ2V0TmFtZSgpLCAnRmlsdGVyIGRhdGEgbmVlZHMgdG8gYmUgYSBhcGkgZW5kcG9pbnQgKHN0cmluZykgYW4gYXJyYXkgb3IgcHJvbWlzZScgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBbXSApO1xuICAgIFxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBtYWluIGZ1bmN0aW9uIHRvIGluaXRpbGF0ZSB0aGUgZmV0Y2hpbmcgb2YgZGF0YSBmb3IgdGhlIGZpbHRlclxuICAgICAqXG4gICAgICogQHBhcmFtICB7QXJyYXkuPEZpbHRlcj59IFtpbml0aWF0aW5nRmlsdGVyXSBUaGUgZmlsdGVyIHRoYXQgd2FzIHVwZGF0ZWQgdG8gY2F1c2UgdGhpcyBmaWx0ZXIgdG8gdXBkYXRlXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGRhdGEgZmV0Y2ggYW5kIHJlbmRlciBpcyBjb21wbGV0ZVxuICAgICAqL1xuICAgIGdldE9wdGlvbnNEYXRhKCBpbml0aWF0aW5nRmlsdGVycyApIHtcblxuICAgICAgICBpZiAoIGluaXRpYXRpbmdGaWx0ZXJzICYmIFxuICAgICAgICAgICAgICggd2luZG93LmZ5bHRlci5GaWx0ZXIuYW55RGlzYWJsZWQoIGluaXRpYXRpbmdGaWx0ZXJzICkgLy8gYW55IHBhcmVudCBpcyBkaXNiYWxlZFxuICAgICAgICAgICAgICAgIHx8ICF0aGlzLmNvbmZpZy5taWRkbGVXYXJlcy5kZWNpZGVGaWx0ZXJFbmFibGVkU3RhdGUoIGluaXRpYXRpbmdGaWx0ZXJzICkgKSApIHsgLy8gbWlkZGxld2FyZSB0ZWxscyB1cyB0byBkaXNhYmxlXG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRJZCggZmFsc2UgKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoIHdpbmRvdy5meWx0ZXIuRklMVEVSX1NUQVRFLkRJU0FCTEVEICk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKCB3aW5kb3cuZnlsdGVyLkZJTFRFUl9TVEFURS5MT0FESU5HICk7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXREYXRhUHJvbWlzZSggaW5pdGlhdGluZ0ZpbHRlcnMgKVxuICAgICAgICAgICAgLnRoZW4oIGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmF3T3B0aW9uc0RhdGEoIGRhdGEgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWcubWlkZGxlV2FyZXMuYmVmb3JlT3B0aW9uVXBkYXRlKCBkYXRhICk7XG4gICAgICAgICAgICB9IClcbiAgICAgICAgICAgIC50aGVuKCBvcHRpb25zID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9wdGlvbkxpc3QoIG9wdGlvbnMgKTtcbiAgICAgICAgICAgICAgICBpZiAoIG9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VycmVudElkKCB0aGlzLmNvbmZpZy5taWRkbGVXYXJlcy5kZWNpZGVEZWZhdWx0KCB0aGlzLmdldE9wdGlvbkxpc3QoKSApICk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoIHdpbmRvdy5meWx0ZXIuRklMVEVSX1NUQVRFLklETEUgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKCB3aW5kb3cuZnlsdGVyLkZJTFRFUl9TVEFURS5ESVNBQkxFRCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAuY2F0Y2goIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBGaWx0ZXIud2FybiggdGhpcy5nZXROYW1lKCksIGVycm9yLnRvU3RyaW5nKCkgKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKCB3aW5kb3cuZnlsdGVyLkZJTFRFUl9TVEFURS5FUlJPUiApO1xuICAgICAgICAgICAgfSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbmFtZSBvZiB0aGlzIGZpbHRlclxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfSB0aGUgbmFtZSBvZiB0aGUgZmlsdGVyXG4gICAgICovXG4gICAgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLm5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHRoZSBuYW1lcyBvZiB0aGUgZmlsdGVycyB0aGF0IHRoaXMgZmlsdGVyIGRlcGVuZHMgb25cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxTdHJpbmc+fSB0aGUgZmlsdGVyIG5hbWVzXG4gICAgICovXG4gICAgZ2V0RGVwZW5kZW5jaWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuZGVwZW5kc09uIHx8IFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgZmlsdGVyIGlzIGRpc2FibGVkXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB3ZXRoZXIgdGhpcyBmaWx0ZXIgaXMgY3VycmVudGx5IGRpc2FibGVkXG4gICAgICovXG4gICAgaXNEaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RhdGUoKSA9PT0gRklMVEVSX1NUQVRFLkRJU0FCTEVEO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSBmaWx0ZXIgdGhhdCB0aGlzIGluc3RhbmNlIGlzIGRlcGVuZGVudCBvbiBpcyB1cGRhdGVkLiBUaGlzIGlzIGNhbGxlZCBieSB0aGVcbiAgICAgKiBGaWx0ZXJTZXQgY29kZS4gU2hvdWxkIG5vdCBiZSBpbnZva2VkIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7QXJyYXkuPEZpbHRlcj59IGZpbHRlciBmaWx0ZXIgY2F1c2luZyB0aGUgdXBkYXRlXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhpcyBmaWx0ZXIgaXMgZmluaXNoZWQgZmV0Y2hpbmcgZGF0YVxuICAgICAqL1xuICAgIGRlcGVuZGVuY3lEaWRVcGRhdGUoIGZpbHRlcnMgKSB7XG5cbiAgICAgICAgaWYgKCBGaWx0ZXIuYW55RXJyb3IoIGZpbHRlcnMgKSApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoIHdpbmRvdy5meWx0ZXIuRklMVEVSX1NUQVRFLkVSUk9SICk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoIG5ldyBFcnJvciggJ0ZpbHRlciBjYW5ub3QgYmUgdXBkYXRlZCB3aGVuIHBhcmVudCBpcyBpbiBhbiBlcnJvciBzdGF0ZScgKSApXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uc0RhdGEoIGZpbHRlcnMgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNldCBvZiBvcHRpb25zIHRoYXQgd2lsbCBiZSBkaXNwbGF5ZWQgYnkgdGhlIGZpbHRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheS48T3B0aW9uPn0gbGlzdCBsaXN0IG9mIG9wdGlvbnNcbiAgICAgKi9cbiAgICBzZXRPcHRpb25MaXN0ICggbGlzdCApIHtcbiAgICAgICAgdGhpcy5vcHRpb25MaXN0ID0gbGlzdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgb3B0aW9uIHNldFxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPE9wdGlvbj59IGN1cnJlbnQgb3B0aW9uIHNldFxuICAgICAqL1xuICAgIGdldE9wdGlvbkxpc3QgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25MaXN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCBpbml0aWF0ZSB0aGUgcmVzZXQgb2YgdGhpcyBmaWx0ZXIgYW5kIGFsc28gaXRzIGRlcGVuZGFudHMsIHRoaXMgc2hvdWxkXG4gICAgICogbm90IGJlIGNhbGxlZCBtYW51YWxseSBhbmQgaXMgb25seSBjYWxsZWQgYnkgdGhlIEZpbHRlclNldFxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoaXMgZmlsdGVyIGFuZCBpdHMgY2hpbGRyZW4gaGFzIGJlZW4gcmVzZXRcbiAgICAgKi9cbiAgICByZXNldCgpIHtcblxuICAgICAgICBjb25zdCBkZWZhdWx0VmFsID0gdGhpcy5jb25maWcubWlkZGxlV2FyZXMuZGVjaWRlRGVmYXVsdCggdGhpcy5nZXRPcHRpb25MaXN0KCkgKTtcbiAgICAgICAgdGhpcy51aUVsZW1lbnQuc2V0VmFsdWUoIGRlZmF1bHRWYWwgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub25TZWxlY3QoIGRlZmF1bHRWYWwgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIElEICh2YWx1ZSkgb2YgdGhlIGN1cnJlbnQgb3B0aW9uIHRoYXQgaXMgc2VsZWN0ZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCB0aGUgaWQgdGhhdCBoYXMgYmVlbiBzZWxlY3RlZFxuICAgICAqL1xuICAgIHNldEN1cnJlbnRJZCggaWQgKSB7XG4gICAgICAgIHRoaXMuY3VycmVudElkID0gaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZCBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfGJvb2xlYW59IHRoZSBpZFxuICAgICAqL1xuICAgIGdldEN1cnJlbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudElkIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgdGhpcyBmaWx0ZXIgYW5kIHBlcmZvcm0gYW55IGFzc29jaWF0ZWQgYWN0aW9uc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtGaWx0ZXJTdGF0ZX0gc3RhdGUgc3RhdGUgdG8gc2V0XG4gICAgICovXG4gICAgc2V0U3RhdGUoIHN0YXRlICkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG5cbiAgICAgICAgc3dpdGNoKCB0aGlzLnN0YXRlICkge1xuICAgICAgICAgICAgY2FzZSBGSUxURVJfU1RBVEUuTE9BRElORzpcbiAgICAgICAgICAgICAgICB0aGlzLnVpRWxlbWVudC5zZXRMb2FkaW5nU3RhdGUoIHRoaXMuZ2V0TmFtZSgpICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZJTFRFUl9TVEFURS5FUlJPUjpcbiAgICAgICAgICAgICAgICB0aGlzLnVpRWxlbWVudC5yZW1vdmVMb2FkaW5nU3RhdGUoIHRoaXMuZ2V0TmFtZSgpICk7XG4gICAgICAgICAgICAgICAgdGhpcy51aUVsZW1lbnQuc2V0RXJyb3JTdGF0ZSggdGhpcy5nZXROYW1lKCkgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRklMVEVSX1NUQVRFLklETEU6XG4gICAgICAgICAgICAgICAgdGhpcy51aUVsZW1lbnQucmVtb3ZlTG9hZGluZ1N0YXRlKCB0aGlzLmdldE5hbWUoKSApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGSUxURVJfU1RBVEUuRElTQUJMRUQ6XG4gICAgICAgICAgICAgICAgdGhpcy51aUVsZW1lbnQuc2V0RGlzYWJsZWRTdGF0ZSggdGhpcy5nZXROYW1lKCkgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZmlsdGVyXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtGaWx0ZXJTdGF0ZX0gY3VycmVudCBzdGF0ZVxuICAgICAqL1xuICAgIGdldFN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjaGVja3MgaWYgYWxsIHRoZSBpbml0aWFsIHVwZGF0ZSBldmVudHMgaGF2ZSBiZWVuIGZpcmVkXG4gICAgICogXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gd2V0aGVyIHRoZSBmaWx0ZXIgaXMgcmVhZHlcbiAgICAgKi9cbiAgICByZWFkeVRvVXBkYXRlRnJvbURlcGVuZGVuY3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXRDb3VudCA9PT0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWNyZWFzZSB0aGUgaW5pdCBjb3VudCBieSBvbmUsIG1lYW5zIHRoZSBmaWx0ZXIgaXMgb25lIGluaXQgY2xvc2VyIHRvIGhhdmluZyBhbGwgdGhlIGluaXRpYWwgaW5pdCBldmVudHMgZmlyZWQgb24gaXRcbiAgICAgKiBieSBpdHMgcGFyZW50c1xuICAgICAqL1xuICAgIGRlY3JlbWVudEluaXRDb3VudCgpIHtcbiAgICAgICAgdGhpcy5pbml0Q291bnQgPSBNYXRoLm1heCggdGhpcy5pbml0Q291bnQgLSAxLCAwICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVsbCB0aGUgdWlDbGFzcyB0aGF0IGl0IG5lZWRzIHRvIHJlbmRlciB0aGUgZmlsdGVyIGludG8gdGhlIHBhZ2UgYXMgYWxsIG9mIHRoZSBkYXRhIG5lZWRlZCBpcyByZWFkeVxuICAgICAqL1xuICAgIHJlbmRlciAoKSB7XG4gICAgICAgIHRoaXMudWlFbGVtZW50LnJlbmRlciggdGhpcy5nZXROYW1lKCksIHRoaXMuZ2V0T3B0aW9uTGlzdCgpLCB0aGlzLmdldEN1cnJlbnRJZCgpICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB1aUVsZW1lbnQgdGhhdCBpcyB1c2VkIHRvIG1hbmFnZSB0aGUgZmlsdGVyIGluIHRoZSBET01cbiAgICAgKiBAcmV0dXJuIHtGaWx0ZXJJbnRlcmZhY2V9IGEgY2xhc3MgaW1wbGVtZW50aW5nIHRoZSBGaWx0ZXJJbnRlcmZhY2UgY2xhc3NcbiAgICAgKi9cbiAgICBnZXRVaUVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVpRWxlbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBzdXBlcmNsYXNzIG1ldGhvZCBhbmQgYWRkIGZ1bmN0aW9uYWxpdHkgdG8gdXBkYXRlIHRoZSBpbml0IGNvdW50IHZhbHVlXG4gICAgICogXG4gICAgICogQHBhcmFtIHtUcmVlTm9kZX0gbm9kZSBcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBzZXRQYXJlbnQoIG5vZGUgKSB7XG5cbiAgICAgICAgc3VwZXIuc2V0UGFyZW50KCBub2RlICk7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBGb3IgZmlsdGVycyB3aXRoIG11bHRpcGxlIGRlcGVuZGVuY2llcyB3ZSBvbmx5IHdhbnQgdGhlIGluaXRpYWwgdXBkYXRlIGV2ZW50IHRvIGJlIGNhbGxlZFxuICAgICAgICAgICAgb25jZS4gTm90IG9uY2UgZm9yIGVhY2ggcGFyZW50IHRoYXQgdXBkYXRlcy4gU28gd2Uga2VlcCBhIGNvdW50ZXIgYWJvdXQgaG93IG1hbnkgaW52b2NhdGlvbnNcbiAgICAgICAgICAgIHdlIGFyZSBleHBlY3RpbmcgYmVmb3JlIHdlIGNhbiBhbGxvdyB0aGUgaW5pdCBldmVudCB0byBiZSBmaXJlZC5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0Q291bnQgPSB0eXBlb2YgdGhpcy5pbml0Q291bnQgPT09ICd1bmRlZmluZWQnID8gMCA6IHRoaXMucGFyZW50cy5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNhdmUgYSByZWZlcmVuY2UgdG8gdGhlIG9wdGlvbnMgZGF0YSBiZWZvcmUgaXQgaXMgY29udmVydGVkIHRvIGFuIEFycmF5LjxPcHRpb25zPlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIFxuICAgICAqL1xuICAgIHNldFJhd09wdGlvbnNEYXRhKCBkYXRhICkge1xuICAgICAgICB0aGlzLnJhd09wdGlvbnNEYXRhID0gZGF0YTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saWIvanMvZmlsdGVyL0ZpbHRlci5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Class representing the functions that must be implemented by a custom filter\n * @interface\n */\nvar FilterInterface = exports.FilterInterface = function () {\n  function FilterInterface() {\n    _classCallCheck(this, FilterInterface);\n  }\n\n  /**\n   * This function will be called with a callback function by fylter library code.\n   * You can then store this callback reference and invoke it with the value of the option\n   * that was seldcted when this happens in you rimplementation\n   *\n   * @param {Function} callback the callback function that accepts a single 'value' argument\n   */\n\n\n  _createClass(FilterInterface, [{\n    key: 'setSelectedCallback',\n    value: function setSelectedCallback(callback) {\n      console.warn('setSelectedCallback should be overridden by a implementing class');\n    }\n\n    /**\n     * Your custom implmentation should provide a way to set the value of a filter programatically given\n     * an ID of an option\n     *\n     * @param {String} id the id of the option to set\n     */\n\n  }, {\n    key: 'setValue',\n    value: function setValue(id) {\n      console.warn('setValue should be overridden by a implementing class');\n    }\n\n    /**\n     * The main render function that will be called to add the filter to the DOM\n     *\n     * @param  {String} title the title of the filter\n     * @param  {Array.<Option>} options the set of options to render\n     * @param  {String} defaultOptionValue the ID of the option that is currently selected\n     */\n\n  }, {\n    key: 'render',\n    value: function render(title, options, defaultOptionValue) {\n      console.warn('render should be overridden by a implementing class');\n    }\n\n    /**\n     * Your custom implementation should provide a loading state for the filter this will be invoked when\n     * the filter starts to fetch data\n     *\n     * @param {String} title the title of the filter\n     */\n\n  }, {\n    key: 'setLoadingState',\n    value: function setLoadingState(title) {\n      console.warn('setLoading should be overridden by a implementing class');\n    }\n\n    /**\n     * Remove the loading state from tge filter called by library code when the data has been fetched\n     *\n     * @param {String} title the title of the filter\n     */\n\n  }, {\n    key: 'removeLoadingState',\n    value: function removeLoadingState(title) {\n      console.warn('removeLoading should be overridden by a implementing class');\n    }\n\n    /**\n     * Disable the filter so that the user cannot interact with it\n     *\n     * @param {String} title the title of the filter\n     */\n\n  }, {\n    key: 'setDisabledState',\n    value: function setDisabledState(title) {\n      console.warn('setDisabledState should be overridden by a implementing class');\n    }\n\n    /**\n     * Something has gone wrong with the filter ! display an error state to the user\n     */\n\n  }, {\n    key: 'setErrorState',\n    value: function setErrorState() {\n      console.warn('setErrorState should be overridden by a implementing class');\n    }\n\n    /**\n     * Allows you to keep a reference to the container element and when rendering your custom markup should go into this container\n     * @param {HTMLElement} container the container where the filter should be rendered\n     */\n\n  }, {\n    key: 'setContainer',\n    value: function setContainer(container) {\n      console.warn('setContainer should be overridden by a implementing class');\n    }\n  }]);\n\n  return FilterInterface;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvZmlsdGVyL0ZpbHRlckludGVyZmFjZS5qcz83ZjRlIl0sIm5hbWVzIjpbIkZpbHRlckludGVyZmFjZSIsImNhbGxiYWNrIiwiY29uc29sZSIsIndhcm4iLCJpZCIsInRpdGxlIiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25WYWx1ZSIsImNvbnRhaW5lciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7O0lBSWFBLGUsV0FBQUEsZTtBQUVULDZCQUFjO0FBQUE7QUFBRTs7QUFFaEI7Ozs7Ozs7Ozs7O3dDQU9xQkMsUSxFQUFXO0FBQzVCQyxjQUFRQyxJQUFSLENBQWMsa0VBQWQ7QUFDSDs7QUFFRDs7Ozs7Ozs7OzZCQU1VQyxFLEVBQUs7QUFDWEYsY0FBUUMsSUFBUixDQUFjLHVEQUFkO0FBQ0g7O0FBRUQ7Ozs7Ozs7Ozs7MkJBT1FFLEssRUFBT0MsTyxFQUFTQyxrQixFQUFxQjtBQUN6Q0wsY0FBUUMsSUFBUixDQUFjLHFEQUFkO0FBQ0g7O0FBRUQ7Ozs7Ozs7OztvQ0FNaUJFLEssRUFBUTtBQUNyQkgsY0FBUUMsSUFBUixDQUFjLHlEQUFkO0FBQ0g7O0FBRUQ7Ozs7Ozs7O3VDQUtvQkUsSyxFQUFRO0FBQ3hCSCxjQUFRQyxJQUFSLENBQWMsNERBQWQ7QUFDSDs7QUFFRDs7Ozs7Ozs7cUNBS2tCRSxLLEVBQVE7QUFDdEJILGNBQVFDLElBQVIsQ0FBYywrREFBZDtBQUNIOztBQUVEOzs7Ozs7b0NBR2dCO0FBQ1pELGNBQVFDLElBQVIsQ0FBYyw0REFBZDtBQUNIOztBQUVEOzs7Ozs7O2lDQUljSyxTLEVBQVk7QUFDdEJOLGNBQVFDLElBQVIsQ0FBYywyREFBZDtBQUNIIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgZnVuY3Rpb25zIHRoYXQgbXVzdCBiZSBpbXBsZW1lbnRlZCBieSBhIGN1c3RvbSBmaWx0ZXJcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbHRlckludGVyZmFjZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBjYWxsYmFjayBmdW5jdGlvbiBieSBmeWx0ZXIgbGlicmFyeSBjb2RlLlxuICAgICAqIFlvdSBjYW4gdGhlbiBzdG9yZSB0aGlzIGNhbGxiYWNrIHJlZmVyZW5jZSBhbmQgaW52b2tlIGl0IHdpdGggdGhlIHZhbHVlIG9mIHRoZSBvcHRpb25cbiAgICAgKiB0aGF0IHdhcyBzZWxkY3RlZCB3aGVuIHRoaXMgaGFwcGVucyBpbiB5b3UgcmltcGxlbWVudGF0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGEgc2luZ2xlICd2YWx1ZScgYXJndW1lbnRcbiAgICAgKi9cbiAgICBzZXRTZWxlY3RlZENhbGxiYWNrKCBjYWxsYmFjayApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCAnc2V0U2VsZWN0ZWRDYWxsYmFjayBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSBhIGltcGxlbWVudGluZyBjbGFzcycgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBZb3VyIGN1c3RvbSBpbXBsbWVudGF0aW9uIHNob3VsZCBwcm92aWRlIGEgd2F5IHRvIHNldCB0aGUgdmFsdWUgb2YgYSBmaWx0ZXIgcHJvZ3JhbWF0aWNhbGx5IGdpdmVuXG4gICAgICogYW4gSUQgb2YgYW4gb3B0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgdGhlIGlkIG9mIHRoZSBvcHRpb24gdG8gc2V0XG4gICAgICovXG4gICAgc2V0VmFsdWUoIGlkICkge1xuICAgICAgICBjb25zb2xlLndhcm4oICdzZXRWYWx1ZSBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSBhIGltcGxlbWVudGluZyBjbGFzcycgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFpbiByZW5kZXIgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB0byBhZGQgdGhlIGZpbHRlciB0byB0aGUgRE9NXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHRpdGxlIHRoZSB0aXRsZSBvZiB0aGUgZmlsdGVyXG4gICAgICogQHBhcmFtICB7QXJyYXkuPE9wdGlvbj59IG9wdGlvbnMgdGhlIHNldCBvZiBvcHRpb25zIHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gZGVmYXVsdE9wdGlvblZhbHVlIHRoZSBJRCBvZiB0aGUgb3B0aW9uIHRoYXQgaXMgY3VycmVudGx5IHNlbGVjdGVkXG4gICAgICovXG4gICAgcmVuZGVyKCB0aXRsZSwgb3B0aW9ucywgZGVmYXVsdE9wdGlvblZhbHVlICkge1xuICAgICAgICBjb25zb2xlLndhcm4oICdyZW5kZXIgc2hvdWxkIGJlIG92ZXJyaWRkZW4gYnkgYSBpbXBsZW1lbnRpbmcgY2xhc3MnICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogWW91ciBjdXN0b20gaW1wbGVtZW50YXRpb24gc2hvdWxkIHByb3ZpZGUgYSBsb2FkaW5nIHN0YXRlIGZvciB0aGUgZmlsdGVyIHRoaXMgd2lsbCBiZSBpbnZva2VkIHdoZW5cbiAgICAgKiB0aGUgZmlsdGVyIHN0YXJ0cyB0byBmZXRjaCBkYXRhXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgdGhlIHRpdGxlIG9mIHRoZSBmaWx0ZXJcbiAgICAgKi9cbiAgICBzZXRMb2FkaW5nU3RhdGUoIHRpdGxlICkge1xuICAgICAgICBjb25zb2xlLndhcm4oICdzZXRMb2FkaW5nIHNob3VsZCBiZSBvdmVycmlkZGVuIGJ5IGEgaW1wbGVtZW50aW5nIGNsYXNzJyApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgbG9hZGluZyBzdGF0ZSBmcm9tIHRnZSBmaWx0ZXIgY2FsbGVkIGJ5IGxpYnJhcnkgY29kZSB3aGVuIHRoZSBkYXRhIGhhcyBiZWVuIGZldGNoZWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSB0aGUgdGl0bGUgb2YgdGhlIGZpbHRlclxuICAgICAqL1xuICAgIHJlbW92ZUxvYWRpbmdTdGF0ZSggdGl0bGUgKSB7XG4gICAgICAgIGNvbnNvbGUud2FybiggJ3JlbW92ZUxvYWRpbmcgc2hvdWxkIGJlIG92ZXJyaWRkZW4gYnkgYSBpbXBsZW1lbnRpbmcgY2xhc3MnICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSB0aGUgZmlsdGVyIHNvIHRoYXQgdGhlIHVzZXIgY2Fubm90IGludGVyYWN0IHdpdGggaXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSB0aGUgdGl0bGUgb2YgdGhlIGZpbHRlclxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoIHRpdGxlICkge1xuICAgICAgICBjb25zb2xlLndhcm4oICdzZXREaXNhYmxlZFN0YXRlIHNob3VsZCBiZSBvdmVycmlkZGVuIGJ5IGEgaW1wbGVtZW50aW5nIGNsYXNzJyApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNvbWV0aGluZyBoYXMgZ29uZSB3cm9uZyB3aXRoIHRoZSBmaWx0ZXIgISBkaXNwbGF5IGFuIGVycm9yIHN0YXRlIHRvIHRoZSB1c2VyXG4gICAgICovXG4gICAgc2V0RXJyb3JTdGF0ZSgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCAnc2V0RXJyb3JTdGF0ZSBzaG91bGQgYmUgb3ZlcnJpZGRlbiBieSBhIGltcGxlbWVudGluZyBjbGFzcycgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgeW91IHRvIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5lciBlbGVtZW50IGFuZCB3aGVuIHJlbmRlcmluZyB5b3VyIGN1c3RvbSBtYXJrdXAgc2hvdWxkIGdvIGludG8gdGhpcyBjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgdGhlIGNvbnRhaW5lciB3aGVyZSB0aGUgZmlsdGVyIHNob3VsZCBiZSByZW5kZXJlZFxuICAgICAqL1xuICAgIHNldENvbnRhaW5lciggY29udGFpbmVyICkge1xuICAgICAgICBjb25zb2xlLndhcm4oICdzZXRDb250YWluZXIgc2hvdWxkIGJlIG92ZXJyaWRkZW4gYnkgYSBpbXBsZW1lbnRpbmcgY2xhc3MnICk7XG4gICAgfVxuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saWIvanMvZmlsdGVyL0ZpbHRlckludGVyZmFjZS5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\nexports.FILTER_STATE = exports.FilterInterface = exports.Filter = exports.FilterSet = undefined;\n\nvar _FilterSet = __webpack_require__(4);\n\nvar _Filter = __webpack_require__(1);\n\nvar _FilterInterface = __webpack_require__(2);\n\nvar _Enum = __webpack_require__(0);\n\nexports.FilterSet = _FilterSet.FilterSet;\nexports.Filter = _Filter.Filter;\nexports.FilterInterface = _FilterInterface.FilterInterface;\nexports.FILTER_STATE = _Enum.FILTER_STATE;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvSW5kZXguanM/Y2RlMiJdLCJuYW1lcyI6WyJGaWx0ZXJTZXQiLCJGaWx0ZXIiLCJGaWx0ZXJJbnRlcmZhY2UiLCJGSUxURVJfU1RBVEUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7UUFHSUEsUyxHQUFBQSxvQjtRQUNBQyxNLEdBQUFBLGM7UUFDQUMsZSxHQUFBQSxnQztRQUNBQyxZLEdBQUFBLGtCIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaWx0ZXJTZXQgfSBmcm9tICcuL2ZpbHRlci1zZXQvRmlsdGVyU2V0LmpzJztcbmltcG9ydCB7IEZpbHRlciB9IGZyb20gJy4vZmlsdGVyL0ZpbHRlci5qcyc7XG5pbXBvcnQgeyBGaWx0ZXJJbnRlcmZhY2UgfSBmcm9tICcuL2ZpbHRlci9GaWx0ZXJJbnRlcmZhY2UuanMnO1xuaW1wb3J0IHsgRklMVEVSX1NUQVRFIH0gZnJvbSAnLi9lbnVtL0VudW0uanMnO1xuXG5leHBvcnQge1xuICAgIEZpbHRlclNldCxcbiAgICBGaWx0ZXIsXG4gICAgRmlsdGVySW50ZXJmYWNlLFxuICAgIEZJTFRFUl9TVEFURVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi9qcy9JbmRleC5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.FilterSet = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Filter = __webpack_require__(1);\n\nvar _Request = __webpack_require__(7);\n\nvar _Enum = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * The configuration needed to create a filterset\n * @typedef {Object} FilterSetConfig\n * @property {Array.<FilterConfig>} filters the set of filters to create\n * @property {Function} onUpdate function that is passed a single parameter Array.<C~CurrentFilterValue> when the filter reaches a new state\n * @property {Function} dataFetchImplementation the function that is used to fetch data, takes a URL and must return a promise in your implementation\n */\n\n/**\n * Filter Set clas, this is the main class exported from the library\n */\nvar FilterSet = exports.FilterSet = function () {\n    _createClass(FilterSet, [{\n        key: '_getFilterByName',\n\n\n        /**\n         * Fetch a filter by providing its name\n         *\n         * @param  {String} name    name of the filter\n         * @param  {Array.<Filter>} filters the set of filters\n         * @return {Filter|null} the filter found or null\n         */\n        value: function _getFilterByName(name, filters) {\n            for (var g = 0; g < filters.length; g++) {\n                var filter = filters[g];\n                if (filter.getName() === name) {\n                    return filter;\n                }\n            }\n        }\n\n        /**\n         * Filter dependencies are represented as a tree structure, every filter class extends TreeNode which provides the node behaviour\n         * This function builds that tree.\n         *\n         * @param  {Array.<Filter>} filters the set of filters\n         */\n\n    }, {\n        key: '_buildTree',\n        value: function _buildTree(filters) {\n            var _this = this;\n\n            filters.forEach(function (filter) {\n                var deps = filter.getDependencies();\n                if (deps.length === 0) {\n                    return;\n                }\n\n                deps.forEach(function (depName) {\n                    var depFilter = _this._getFilterByName(depName, filters);\n                    depFilter.addChild(filter);\n                });\n            });\n        }\n\n        /**\n         * We can immediatley determine which filters will be updated when a filter is changed by following its dependency tree\n         * So here we do this and set these filters to loading state while we do any work needed to update them.\n         *\n         * This is done recursivley on children of a given filter\n         *\n         * @param {Filter} filter the filter whose children to set loading\n         */\n\n    }, {\n        key: '_setAffectedFiltersLoading',\n        value: function _setAffectedFiltersLoading(filter) {\n\n            if (!filter.hasChildren()) {\n                return;\n            }\n\n            for (var x = 0; x < filter.getChildren().length; x++) {\n                var child = filter.getChildren()[x];\n                child.setState(_Enum.FILTER_STATE.LOADING);\n                this._setAffectedFiltersLoading(child);\n            }\n        }\n\n        /**\n         * Set all filters in the tree to a particular state\n         *\n         * @param {FilterState} state the state to set\n         */\n\n    }, {\n        key: '_setAllFiltersToState',\n        value: function _setAllFiltersToState(state) {\n\n            this.filters.forEach(function (filter) {\n                filter.setState(state);\n            });\n        }\n    }, {\n        key: '_getAllChildren',\n\n\n        /**\n         * Fetch all the children for a given set of filters\n         *\n         * @param  {Array.<Filter>} filters the filters\n         * @return {Array.<Filter>} the resulting children\n         */\n        value: function _getAllChildren(filters) {\n            return filters.reduce(function (array, filter) {\n                return array.concat(filter.getChildren());\n            }, []);\n        }\n\n        /**\n         * get all children of a set of nodes that are ready to be updated\n         * \n         * @param {Array.<TreeNode>} filters the set of filters\n         */\n\n    }, {\n        key: '_getAllReadyChildren',\n        value: function _getAllReadyChildren(filters) {\n            return filters.reduce(function (array, filter) {\n\n                var filterChildren = filter.getChildren();\n                var readyChildren = [];\n\n                for (var fCount = 0; fCount < filterChildren.length; fCount++) {\n                    var child = filterChildren[fCount];\n                    if (child.readyToUpdateFromDependency()) {\n                        readyChildren.push(child);\n                    } else {\n                        child.decrementInitCount();\n                    }\n                }\n\n                return array.concat(readyChildren);\n            }, []);\n        }\n\n        /**\n         * This is the main update function that is called when a filter is updated, Ite evaluates each\n         * level of the dependency tree in turn and returns a promise to resolve the next level the promise is\n         * resolved when there are no more children to update\n         *\n         * @param  {Array.<Filter>} filters the filters which have children that need to be resolved\n         * @return {Promise} promise that resolves when all updates are complete\n         */\n\n    }, {\n        key: '_updateFilterTree',\n        value: function _updateFilterTree(filters) {\n            var _this2 = this;\n\n            var allChildren = this._getAllReadyChildren(filters);\n\n            if (allChildren.length === 0) {\n                return Promise.resolve();\n            }\n\n            var treeLevelPromises = allChildren.map(function (filterChild) {\n                return filterChild.dependencyDidUpdate(filterChild.getParents());\n            });\n\n            return Promise.all(treeLevelPromises).then(function () {\n                return _this2._updateFilterTree(allChildren);\n            }).catch(function (error) {\n                _this2._catchGenericError(error);\n            });\n        }\n\n        /**\n         * Something went wrong in the filters, show the error in the console and set the filter states to error. The update callback\n         * will not have been called if an error was thrown so make sure this is invoked also\n         *\n         * @param  {Error} error the error thrown\n         */\n\n    }, {\n        key: '_catchGenericError',\n        value: function _catchGenericError(error) {\n            console.warn(error);\n            this._setAllFiltersToState(_Enum.FILTER_STATE.ERROR);\n            this.config.onUpdate(this._getFilterStates());\n        }\n\n        /**\n         * Function that begins the filter updating process\n         *\n         * @param  {Filter} filter The filter that was updated\n         * @return {Promise} promise that resolves when the update is complete, state has been updated and user callback invoked\n         */\n\n    }, {\n        key: '_onFilterUpdated',\n        value: function _onFilterUpdated(filter) {\n            var _this3 = this;\n\n            this._setAffectedFiltersLoading(filter);\n            return this._updateFilterTree([filter]).then(function () {\n                // if the state is initialising\n                if (_this3.getState() !== _Enum.FILTER_SET_STATE.INITIALISING && _this3.getState() !== _Enum.FILTER_SET_STATE.RESETTING) {\n                    _this3.config.onUpdate(_this3._getFilterStates());\n                }\n            });\n        }\n\n        /**\n         * takes in the configs and creates Filter class instances from these\n         *\n         * @param  {Array.<FilterConfig>} filterConfigs the configurations\n         * @return {Array.<Filter>} the constructed instances\n         */\n\n    }, {\n        key: '_buildFilterInstances',\n        value: function _buildFilterInstances(filterConfigs) {\n            var _this4 = this;\n\n            return filterConfigs.map(function (config) {\n                return new _Filter.Filter(_extends({}, config, {\n                    wrapper: _this4.container,\n                    onOptionSelected: _this4._onFilterUpdated.bind(_this4),\n                    dataFetchImplementation: _this4.config.dataFetchImplementation\n                }));\n            });\n        }\n\n        /**\n         * Function that is called only once when the filters are initialising. It will tell all the root filters\n         * to fetch their data and render. The normal dependency behaviour will then handle the rest of the updates\n         */\n\n    }, {\n        key: '_initialiseFilters',\n        value: function _initialiseFilters() {\n            var _this5 = this;\n\n            var rootResolution = this.filters.map(function (filter) {\n                if (filter.isRoot()) {\n                    return filter.init();\n                }\n            });\n\n            Promise.all(rootResolution).then(function () {\n                _this5.setState(_Enum.FILTER_SET_STATE.IDLE);\n                _this5.config.onUpdate(_this5._getFilterStates());\n            });\n        }\n\n        /**\n         * Set the state of the filter set\n         *\n         * @param {FilterSetState} state state to set\n         */\n\n    }, {\n        key: 'setState',\n        value: function setState(state) {\n            this.state = state;\n        }\n\n        /**\n         * Get the current state of the filter\n         *\n         * @return {FilterSetState} th current state\n         */\n\n    }, {\n        key: 'getState',\n        value: function getState() {\n            return this.state;\n        }\n\n        /**\n         * Get the state of each filter\n         *\n         * @return {Array.<CurrentFilterValue>} the curretn states\n         */\n\n    }, {\n        key: '_getFilterStates',\n        value: function _getFilterStates() {\n            return this.filters.map(function (filter) {\n                return filter.getCurrentOption();\n            });\n        }\n\n        /**\n         * Begin the process of resetting the filters to their original value\n         *\n         * @return {Promise} promise that resolves when the filter has been reset\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n            var _this6 = this;\n\n            this.setState(_Enum.FILTER_SET_STATE.RESETTING);\n            var resetPromises = this.filters.map(function (filter) {\n                if (filter.isRoot()) {\n                    return filter.reset();\n                }\n            });\n\n            return Promise.all(resetPromises).then(function () {\n                _this6.setState(_Enum.FILTER_SET_STATE.IDLE);\n                _this6.config.onUpdate(_this6._getFilterStates());\n            }).catch(function (error) {\n                _this6._catchGenericError(error);\n            });\n        }\n\n        /**\n         * Renders neccacary elements into the container\n         */\n\n    }, {\n        key: '_render',\n        value: function _render() {\n            var _this7 = this;\n\n            var button = document.createElement('button');\n            button.innerText = 'Reset';\n            button.onclick = function () {\n                _this7.reset();\n            };\n            button.classList.add('reset');\n            this.container.appendChild(button);\n        }\n\n        /**\n         * Construct the filter set\n         *\n         * @param  {HTMLElement} container container where filters are to be rendered\n         * @param  {FilterSetConfig} config the configuration\n         */\n\n    }], [{\n        key: 'DEFAULT_CONFIG',\n\n\n        /**\n         * Get the default configuration for the filterSet\n         *\n         * @returns {FilterSetConfig} the default config\n         */\n        value: function DEFAULT_CONFIG() {\n            return {\n                filters: [],\n                onUpdate: function onUpdate() {},\n                dataFetchImplementation: function dataFetchImplementation(url) {\n                    return (0, _Request.promiseRequest)(url, 'GET');\n                }\n            };\n        }\n    }]);\n\n    function FilterSet(container, config) {\n        _classCallCheck(this, FilterSet);\n\n        this.setState(_Enum.FILTER_SET_STATE.INITIALISING);\n        this.container = container;\n        this.config = _extends({}, FilterSet.DEFAULT_CONFIG(), config);\n        this.filterTree = null;\n        this.filters = this._buildFilterInstances(config.filters);\n        this._buildTree(this.filters);\n        this._initialiseFilters();\n        this._render();\n    }\n\n    /**\n     * Get the filter instances\n     *\n     * @return {Array.<Filter>} the filters\n     */\n\n\n    _createClass(FilterSet, [{\n        key: 'getInstances',\n        value: function getInstances() {\n            return this.filters;\n        }\n    }]);\n\n    return FilterSet;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvZmlsdGVyLXNldC9GaWx0ZXJTZXQuanM/MjU1MCJdLCJuYW1lcyI6WyJGaWx0ZXJTZXQiLCJuYW1lIiwiZmlsdGVycyIsImciLCJsZW5ndGgiLCJmaWx0ZXIiLCJnZXROYW1lIiwiZm9yRWFjaCIsImRlcHMiLCJnZXREZXBlbmRlbmNpZXMiLCJkZXBGaWx0ZXIiLCJfZ2V0RmlsdGVyQnlOYW1lIiwiZGVwTmFtZSIsImFkZENoaWxkIiwiaGFzQ2hpbGRyZW4iLCJ4IiwiZ2V0Q2hpbGRyZW4iLCJjaGlsZCIsInNldFN0YXRlIiwiRklMVEVSX1NUQVRFIiwiTE9BRElORyIsIl9zZXRBZmZlY3RlZEZpbHRlcnNMb2FkaW5nIiwic3RhdGUiLCJyZWR1Y2UiLCJhcnJheSIsImNvbmNhdCIsImZpbHRlckNoaWxkcmVuIiwicmVhZHlDaGlsZHJlbiIsImZDb3VudCIsInJlYWR5VG9VcGRhdGVGcm9tRGVwZW5kZW5jeSIsInB1c2giLCJkZWNyZW1lbnRJbml0Q291bnQiLCJhbGxDaGlsZHJlbiIsIl9nZXRBbGxSZWFkeUNoaWxkcmVuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0cmVlTGV2ZWxQcm9taXNlcyIsIm1hcCIsImZpbHRlckNoaWxkIiwiZGVwZW5kZW5jeURpZFVwZGF0ZSIsImdldFBhcmVudHMiLCJhbGwiLCJ0aGVuIiwiX3VwZGF0ZUZpbHRlclRyZWUiLCJjYXRjaCIsIl9jYXRjaEdlbmVyaWNFcnJvciIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJfc2V0QWxsRmlsdGVyc1RvU3RhdGUiLCJFUlJPUiIsImNvbmZpZyIsIm9uVXBkYXRlIiwiX2dldEZpbHRlclN0YXRlcyIsImdldFN0YXRlIiwiRklMVEVSX1NFVF9TVEFURSIsIklOSVRJQUxJU0lORyIsIlJFU0VUVElORyIsImZpbHRlckNvbmZpZ3MiLCJGaWx0ZXIiLCJ3cmFwcGVyIiwiY29udGFpbmVyIiwib25PcHRpb25TZWxlY3RlZCIsIl9vbkZpbHRlclVwZGF0ZWQiLCJiaW5kIiwiZGF0YUZldGNoSW1wbGVtZW50YXRpb24iLCJyb290UmVzb2x1dGlvbiIsImlzUm9vdCIsImluaXQiLCJJRExFIiwiZ2V0Q3VycmVudE9wdGlvbiIsInJlc2V0UHJvbWlzZXMiLCJyZXNldCIsImJ1dHRvbiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVyVGV4dCIsIm9uY2xpY2siLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInVybCIsIkRFRkFVTFRfQ09ORklHIiwiZmlsdGVyVHJlZSIsIl9idWlsZEZpbHRlckluc3RhbmNlcyIsIl9idWlsZFRyZWUiLCJfaW5pdGlhbGlzZUZpbHRlcnMiLCJfcmVuZGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7Ozs7Ozs7O0FBUUE7OztJQUdhQSxTLFdBQUFBLFM7Ozs7O0FBaUJUOzs7Ozs7O3lDQU9rQkMsSSxFQUFNQyxPLEVBQVU7QUFDOUIsaUJBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJRCxRQUFRRSxNQUE1QixFQUFvQ0QsR0FBcEMsRUFBMEM7QUFDdEMsb0JBQU1FLFNBQVNILFFBQVNDLENBQVQsQ0FBZjtBQUNBLG9CQUFJRSxPQUFPQyxPQUFQLE9BQXFCTCxJQUF6QixFQUFnQztBQUM1QiwyQkFBT0ksTUFBUDtBQUNIO0FBQ0o7QUFDSjs7QUFFRDs7Ozs7Ozs7O21DQU1ZSCxPLEVBQVU7QUFBQTs7QUFDbEJBLG9CQUFRSyxPQUFSLENBQWlCLGtCQUFVO0FBQ3ZCLG9CQUFNQyxPQUFPSCxPQUFPSSxlQUFQLEVBQWI7QUFDQSxvQkFBS0QsS0FBS0osTUFBTCxLQUFnQixDQUFyQixFQUF5QjtBQUNyQjtBQUNIOztBQUVESSxxQkFBS0QsT0FBTCxDQUFjLG1CQUFXO0FBQ3JCLHdCQUFNRyxZQUFZLE1BQUtDLGdCQUFMLENBQXVCQyxPQUF2QixFQUFnQ1YsT0FBaEMsQ0FBbEI7QUFDQVEsOEJBQVVHLFFBQVYsQ0FBb0JSLE1BQXBCO0FBQ0gsaUJBSEQ7QUFJSCxhQVZEO0FBV0g7O0FBRUQ7Ozs7Ozs7Ozs7O21EQVE0QkEsTSxFQUFTOztBQUVqQyxnQkFBSyxDQUFDQSxPQUFPUyxXQUFQLEVBQU4sRUFBNkI7QUFDekI7QUFDSDs7QUFFRCxpQkFBSyxJQUFJQyxJQUFJLENBQWIsRUFBZ0JBLElBQUlWLE9BQU9XLFdBQVAsR0FBcUJaLE1BQXpDLEVBQWlEVyxHQUFqRCxFQUF1RDtBQUNuRCxvQkFBTUUsUUFBUVosT0FBT1csV0FBUCxHQUFzQkQsQ0FBdEIsQ0FBZDtBQUNBRSxzQkFBTUMsUUFBTixDQUFnQkMsbUJBQWFDLE9BQTdCO0FBQ0EscUJBQUtDLDBCQUFMLENBQWlDSixLQUFqQztBQUNIO0FBQ0o7O0FBRUw7Ozs7Ozs7OzhDQUsyQkssSyxFQUFROztBQUUzQixpQkFBS3BCLE9BQUwsQ0FBYUssT0FBYixDQUFzQixrQkFBVTtBQUM1QkYsdUJBQU9hLFFBQVAsQ0FBaUJJLEtBQWpCO0FBQ0gsYUFGRDtBQUdIOzs7OztBQUVEOzs7Ozs7d0NBTWlCcEIsTyxFQUFVO0FBQ3ZCLG1CQUFPQSxRQUFRcUIsTUFBUixDQUFnQixVQUFFQyxLQUFGLEVBQVNuQixNQUFULEVBQXFCO0FBQ3hDLHVCQUFPbUIsTUFBTUMsTUFBTixDQUFjcEIsT0FBT1csV0FBUCxFQUFkLENBQVA7QUFDSCxhQUZNLEVBRUosRUFGSSxDQUFQO0FBR0g7O0FBR0Q7Ozs7Ozs7OzZDQUtzQmQsTyxFQUFVO0FBQzVCLG1CQUFPQSxRQUFRcUIsTUFBUixDQUFnQixVQUFFQyxLQUFGLEVBQVNuQixNQUFULEVBQXFCOztBQUV4QyxvQkFBTXFCLGlCQUFpQnJCLE9BQU9XLFdBQVAsRUFBdkI7QUFDQSxvQkFBTVcsZ0JBQWdCLEVBQXRCOztBQUVBLHFCQUFNLElBQUlDLFNBQVMsQ0FBbkIsRUFBc0JBLFNBQVNGLGVBQWV0QixNQUE5QyxFQUFzRHdCLFFBQXRELEVBQWlFO0FBQzdELHdCQUFNWCxRQUFRUyxlQUFnQkUsTUFBaEIsQ0FBZDtBQUNBLHdCQUFLWCxNQUFNWSwyQkFBTixFQUFMLEVBQTJDO0FBQ3ZDRixzQ0FBY0csSUFBZCxDQUFvQmIsS0FBcEI7QUFDSCxxQkFGRCxNQUVPO0FBQ0hBLDhCQUFNYyxrQkFBTjtBQUNIO0FBQ0o7O0FBRUQsdUJBQU9QLE1BQU1DLE1BQU4sQ0FBY0UsYUFBZCxDQUFQO0FBQ0gsYUFmTSxFQWVKLEVBZkksQ0FBUDtBQWdCSDs7QUFFRDs7Ozs7Ozs7Ozs7MENBUW1CekIsTyxFQUFVO0FBQUE7O0FBRXpCLGdCQUFNOEIsY0FBYyxLQUFLQyxvQkFBTCxDQUEyQi9CLE9BQTNCLENBQXBCOztBQUVBLGdCQUFJOEIsWUFBWTVCLE1BQVosS0FBdUIsQ0FBM0IsRUFBK0I7QUFDM0IsdUJBQU84QixRQUFRQyxPQUFSLEVBQVA7QUFDSDs7QUFFRCxnQkFBTUMsb0JBQW9CSixZQUFZSyxHQUFaLENBQWlCLHVCQUFlO0FBQ3RELHVCQUFPQyxZQUFZQyxtQkFBWixDQUFpQ0QsWUFBWUUsVUFBWixFQUFqQyxDQUFQO0FBQ0gsYUFGeUIsQ0FBMUI7O0FBSUEsbUJBQU9OLFFBQVFPLEdBQVIsQ0FBYUwsaUJBQWIsRUFDRk0sSUFERSxDQUNJLFlBQU07QUFDVCx1QkFBTyxPQUFLQyxpQkFBTCxDQUF3QlgsV0FBeEIsQ0FBUDtBQUNILGFBSEUsRUFJRlksS0FKRSxDQUlLLGlCQUFTO0FBQ2IsdUJBQUtDLGtCQUFMLENBQXlCQyxLQUF6QjtBQUNILGFBTkUsQ0FBUDtBQU9IOztBQUVEOzs7Ozs7Ozs7MkNBTW9CQSxLLEVBQVE7QUFDeEJDLG9CQUFRQyxJQUFSLENBQWNGLEtBQWQ7QUFDQSxpQkFBS0cscUJBQUwsQ0FBNEI5QixtQkFBYStCLEtBQXpDO0FBQ0EsaUJBQUtDLE1BQUwsQ0FBWUMsUUFBWixDQUFzQixLQUFLQyxnQkFBTCxFQUF0QjtBQUNIOztBQUVEOzs7Ozs7Ozs7eUNBTWtCaEQsTSxFQUFTO0FBQUE7O0FBQ3ZCLGlCQUFLZ0IsMEJBQUwsQ0FBaUNoQixNQUFqQztBQUNBLG1CQUFPLEtBQUtzQyxpQkFBTCxDQUF3QixDQUFFdEMsTUFBRixDQUF4QixFQUNGcUMsSUFERSxDQUNJLFlBQU07QUFDVDtBQUNBLG9CQUFLLE9BQUtZLFFBQUwsT0FBb0JDLHVCQUFpQkMsWUFBckMsSUFBcUQsT0FBS0YsUUFBTCxPQUFvQkMsdUJBQWlCRSxTQUEvRixFQUEyRztBQUN2RywyQkFBS04sTUFBTCxDQUFZQyxRQUFaLENBQXNCLE9BQUtDLGdCQUFMLEVBQXRCO0FBQ0g7QUFDSixhQU5FLENBQVA7QUFPSDs7QUFFRDs7Ozs7Ozs7OzhDQU11QkssYSxFQUFnQjtBQUFBOztBQUVuQyxtQkFBT0EsY0FBY3JCLEdBQWQsQ0FBbUIsa0JBQVU7QUFDaEMsdUJBQU8sSUFBSXNCLGNBQUosY0FDQVIsTUFEQTtBQUVIUyw2QkFBUyxPQUFLQyxTQUZYO0FBR0hDLHNDQUFrQixPQUFLQyxnQkFBTCxDQUFzQkMsSUFBdEIsQ0FBNEIsTUFBNUIsQ0FIZjtBQUlIQyw2Q0FBeUIsT0FBS2QsTUFBTCxDQUFZYztBQUpsQyxtQkFBUDtBQU1ILGFBUE0sQ0FBUDtBQVFIOztBQUVEOzs7Ozs7OzZDQUlzQjtBQUFBOztBQUNsQixnQkFBTUMsaUJBQWlCLEtBQUtoRSxPQUFMLENBQWFtQyxHQUFiLENBQWtCLGtCQUFVO0FBQy9DLG9CQUFJaEMsT0FBTzhELE1BQVAsRUFBSixFQUFzQjtBQUNsQiwyQkFBTzlELE9BQU8rRCxJQUFQLEVBQVA7QUFDSDtBQUNKLGFBSnNCLENBQXZCOztBQU1BbEMsb0JBQVFPLEdBQVIsQ0FBYXlCLGNBQWIsRUFDS3hCLElBREwsQ0FDVyxZQUFNO0FBQ1QsdUJBQUt4QixRQUFMLENBQWVxQyx1QkFBaUJjLElBQWhDO0FBQ0EsdUJBQUtsQixNQUFMLENBQVlDLFFBQVosQ0FBc0IsT0FBS0MsZ0JBQUwsRUFBdEI7QUFDSCxhQUpMO0FBS0g7O0FBRUQ7Ozs7Ozs7O2lDQUtVL0IsSyxFQUFRO0FBQ2QsaUJBQUtBLEtBQUwsR0FBYUEsS0FBYjtBQUNIOztBQUVEOzs7Ozs7OzttQ0FLVztBQUNQLG1CQUFPLEtBQUtBLEtBQVo7QUFDSDs7QUFFRDs7Ozs7Ozs7MkNBS21CO0FBQ2YsbUJBQU8sS0FBS3BCLE9BQUwsQ0FBYW1DLEdBQWIsQ0FBa0Isa0JBQVU7QUFDL0IsdUJBQU9oQyxPQUFPaUUsZ0JBQVAsRUFBUDtBQUNILGFBRk0sQ0FBUDtBQUdIOztBQUVEOzs7Ozs7OztnQ0FLUTtBQUFBOztBQUNKLGlCQUFLcEQsUUFBTCxDQUFlcUMsdUJBQWlCRSxTQUFoQztBQUNBLGdCQUFNYyxnQkFBZ0IsS0FBS3JFLE9BQUwsQ0FBYW1DLEdBQWIsQ0FBa0Isa0JBQVU7QUFDOUMsb0JBQUtoQyxPQUFPOEQsTUFBUCxFQUFMLEVBQXVCO0FBQ25CLDJCQUFPOUQsT0FBT21FLEtBQVAsRUFBUDtBQUNIO0FBQ0osYUFKcUIsQ0FBdEI7O0FBTUEsbUJBQU90QyxRQUFRTyxHQUFSLENBQWE4QixhQUFiLEVBQ0Y3QixJQURFLENBQ0ksWUFBTTtBQUNULHVCQUFLeEIsUUFBTCxDQUFlcUMsdUJBQWlCYyxJQUFoQztBQUNBLHVCQUFLbEIsTUFBTCxDQUFZQyxRQUFaLENBQXNCLE9BQUtDLGdCQUFMLEVBQXRCO0FBQ0gsYUFKRSxFQUtGVCxLQUxFLENBS0ssaUJBQVM7QUFDYix1QkFBS0Msa0JBQUwsQ0FBeUJDLEtBQXpCO0FBQ0gsYUFQRSxDQUFQO0FBUUg7O0FBRUQ7Ozs7OztrQ0FHVTtBQUFBOztBQUNOLGdCQUFNMkIsU0FBU0MsU0FBU0MsYUFBVCxDQUF3QixRQUF4QixDQUFmO0FBQ0FGLG1CQUFPRyxTQUFQLEdBQW1CLE9BQW5CO0FBQ0FILG1CQUFPSSxPQUFQLEdBQWlCLFlBQU07QUFDbkIsdUJBQUtMLEtBQUw7QUFDSCxhQUZEO0FBR0FDLG1CQUFPSyxTQUFQLENBQWlCQyxHQUFqQixDQUFzQixPQUF0QjtBQUNBLGlCQUFLbEIsU0FBTCxDQUFlbUIsV0FBZixDQUE0QlAsTUFBNUI7QUFDSDs7QUFFRDs7Ozs7Ozs7Ozs7QUF4UkE7Ozs7O3lDQUt3QjtBQUNwQixtQkFBTztBQUNIdkUseUJBQVMsRUFETjtBQUVIa0QsMEJBQVUsb0JBQU0sQ0FBRSxDQUZmO0FBR0hhLHlDQUF5QixzQ0FBTztBQUM1QiwyQkFBTyw2QkFBZ0JnQixHQUFoQixFQUFxQixLQUFyQixDQUFQO0FBQ0g7QUFMRSxhQUFQO0FBT0g7OztBQWlSRCx1QkFBYXBCLFNBQWIsRUFBd0JWLE1BQXhCLEVBQWlDO0FBQUE7O0FBQzdCLGFBQUtqQyxRQUFMLENBQWVxQyx1QkFBaUJDLFlBQWhDO0FBQ0EsYUFBS0ssU0FBTCxHQUFpQkEsU0FBakI7QUFDQSxhQUFLVixNQUFMLGdCQUFtQm5ELFVBQVVrRixjQUFWLEVBQW5CLEVBQWtEL0IsTUFBbEQ7QUFDQSxhQUFLZ0MsVUFBTCxHQUFrQixJQUFsQjtBQUNBLGFBQUtqRixPQUFMLEdBQWUsS0FBS2tGLHFCQUFMLENBQTRCakMsT0FBT2pELE9BQW5DLENBQWY7QUFDQSxhQUFLbUYsVUFBTCxDQUFpQixLQUFLbkYsT0FBdEI7QUFDQSxhQUFLb0Ysa0JBQUw7QUFDQSxhQUFLQyxPQUFMO0FBRUg7O0FBRUQ7Ozs7Ozs7Ozt1Q0FLZTtBQUNYLG1CQUFPLEtBQUtyRixPQUFaO0FBQ0giLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpbHRlciB9IGZyb20gJy4uL2ZpbHRlci9GaWx0ZXIuanMnO1xuaW1wb3J0IHsgcHJvbWlzZVJlcXVlc3QgfSBmcm9tICcuLi9uZXR3b3JrL1JlcXVlc3QuanMnO1xuaW1wb3J0IHsgRklMVEVSX1NFVF9TVEFURSwgRklMVEVSX1NUQVRFIH0gZnJvbSAnLi4vZW51bS9FbnVtLmpzJztcblxuLyoqXG4gKiBUaGUgY29uZmlndXJhdGlvbiBuZWVkZWQgdG8gY3JlYXRlIGEgZmlsdGVyc2V0XG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWx0ZXJTZXRDb25maWdcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZpbHRlckNvbmZpZz59IGZpbHRlcnMgdGhlIHNldCBvZiBmaWx0ZXJzIHRvIGNyZWF0ZVxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gb25VcGRhdGUgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWQgYSBzaW5nbGUgcGFyYW1ldGVyIEFycmF5LjxDfkN1cnJlbnRGaWx0ZXJWYWx1ZT4gd2hlbiB0aGUgZmlsdGVyIHJlYWNoZXMgYSBuZXcgc3RhdGVcbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGRhdGFGZXRjaEltcGxlbWVudGF0aW9uIHRoZSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gZmV0Y2ggZGF0YSwgdGFrZXMgYSBVUkwgYW5kIG11c3QgcmV0dXJuIGEgcHJvbWlzZSBpbiB5b3VyIGltcGxlbWVudGF0aW9uXG4gKi9cblxuLyoqXG4gKiBGaWx0ZXIgU2V0IGNsYXMsIHRoaXMgaXMgdGhlIG1haW4gY2xhc3MgZXhwb3J0ZWQgZnJvbSB0aGUgbGlicmFyeVxuICovXG5leHBvcnQgY2xhc3MgRmlsdGVyU2V0IHtcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIGZvciB0aGUgZmlsdGVyU2V0XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7RmlsdGVyU2V0Q29uZmlnfSB0aGUgZGVmYXVsdCBjb25maWdcbiAgICAgKi9cbiAgICBzdGF0aWMgREVGQVVMVF9DT05GSUcoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWx0ZXJzOiBbXSxcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7fSxcbiAgICAgICAgICAgIGRhdGFGZXRjaEltcGxlbWVudGF0aW9uOiB1cmwgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlUmVxdWVzdCggdXJsLCAnR0VUJyApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2ggYSBmaWx0ZXIgYnkgcHJvdmlkaW5nIGl0cyBuYW1lXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgICAgbmFtZSBvZiB0aGUgZmlsdGVyXG4gICAgICogQHBhcmFtICB7QXJyYXkuPEZpbHRlcj59IGZpbHRlcnMgdGhlIHNldCBvZiBmaWx0ZXJzXG4gICAgICogQHJldHVybiB7RmlsdGVyfG51bGx9IHRoZSBmaWx0ZXIgZm91bmQgb3IgbnVsbFxuICAgICAqL1xuICAgIF9nZXRGaWx0ZXJCeU5hbWUoIG5hbWUsIGZpbHRlcnMgKSB7XG4gICAgICAgIGZvciggbGV0IGcgPSAwOyBnIDwgZmlsdGVycy5sZW5ndGg7IGcrKyApIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IGZpbHRlcnNbIGcgXTtcbiAgICAgICAgICAgIGlmKCBmaWx0ZXIuZ2V0TmFtZSgpID09PSBuYW1lICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgZGVwZW5kZW5jaWVzIGFyZSByZXByZXNlbnRlZCBhcyBhIHRyZWUgc3RydWN0dXJlLCBldmVyeSBmaWx0ZXIgY2xhc3MgZXh0ZW5kcyBUcmVlTm9kZSB3aGljaCBwcm92aWRlcyB0aGUgbm9kZSBiZWhhdmlvdXJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGJ1aWxkcyB0aGF0IHRyZWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtBcnJheS48RmlsdGVyPn0gZmlsdGVycyB0aGUgc2V0IG9mIGZpbHRlcnNcbiAgICAgKi9cbiAgICBfYnVpbGRUcmVlKCBmaWx0ZXJzICkge1xuICAgICAgICBmaWx0ZXJzLmZvckVhY2goIGZpbHRlciA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZXBzID0gZmlsdGVyLmdldERlcGVuZGVuY2llcygpO1xuICAgICAgICAgICAgaWYgKCBkZXBzLmxlbmd0aCA9PT0gMCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlcHMuZm9yRWFjaCggZGVwTmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwRmlsdGVyID0gdGhpcy5fZ2V0RmlsdGVyQnlOYW1lKCBkZXBOYW1lLCBmaWx0ZXJzICk7XG4gICAgICAgICAgICAgICAgZGVwRmlsdGVyLmFkZENoaWxkKCBmaWx0ZXIgKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdlIGNhbiBpbW1lZGlhdGxleSBkZXRlcm1pbmUgd2hpY2ggZmlsdGVycyB3aWxsIGJlIHVwZGF0ZWQgd2hlbiBhIGZpbHRlciBpcyBjaGFuZ2VkIGJ5IGZvbGxvd2luZyBpdHMgZGVwZW5kZW5jeSB0cmVlXG4gICAgICogU28gaGVyZSB3ZSBkbyB0aGlzIGFuZCBzZXQgdGhlc2UgZmlsdGVycyB0byBsb2FkaW5nIHN0YXRlIHdoaWxlIHdlIGRvIGFueSB3b3JrIG5lZWRlZCB0byB1cGRhdGUgdGhlbS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZG9uZSByZWN1cnNpdmxleSBvbiBjaGlsZHJlbiBvZiBhIGdpdmVuIGZpbHRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtGaWx0ZXJ9IGZpbHRlciB0aGUgZmlsdGVyIHdob3NlIGNoaWxkcmVuIHRvIHNldCBsb2FkaW5nXG4gICAgICovXG4gICAgX3NldEFmZmVjdGVkRmlsdGVyc0xvYWRpbmcoIGZpbHRlciApIHtcblxuICAgICAgICBpZiAoICFmaWx0ZXIuaGFzQ2hpbGRyZW4oKSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciggbGV0IHggPSAwOyB4IDwgZmlsdGVyLmdldENoaWxkcmVuKCkubGVuZ3RoOyB4KysgKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IGZpbHRlci5nZXRDaGlsZHJlbigpWyB4IF07XG4gICAgICAgICAgICBjaGlsZC5zZXRTdGF0ZSggRklMVEVSX1NUQVRFLkxPQURJTkcgKTtcbiAgICAgICAgICAgIHRoaXMuX3NldEFmZmVjdGVkRmlsdGVyc0xvYWRpbmcoIGNoaWxkICk7XG4gICAgICAgIH1cbiAgICB9XG5cbi8qKlxuICogU2V0IGFsbCBmaWx0ZXJzIGluIHRoZSB0cmVlIHRvIGEgcGFydGljdWxhciBzdGF0ZVxuICpcbiAqIEBwYXJhbSB7RmlsdGVyU3RhdGV9IHN0YXRlIHRoZSBzdGF0ZSB0byBzZXRcbiAqL1xuICAgIF9zZXRBbGxGaWx0ZXJzVG9TdGF0ZSggc3RhdGUgKSB7XG5cbiAgICAgICAgdGhpcy5maWx0ZXJzLmZvckVhY2goIGZpbHRlciA9PiB7XG4gICAgICAgICAgICBmaWx0ZXIuc2V0U3RhdGUoIHN0YXRlICk7XG4gICAgICAgIH0gKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2ggYWxsIHRoZSBjaGlsZHJlbiBmb3IgYSBnaXZlbiBzZXQgb2YgZmlsdGVyc1xuICAgICAqXG4gICAgICogQHBhcmFtICB7QXJyYXkuPEZpbHRlcj59IGZpbHRlcnMgdGhlIGZpbHRlcnNcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48RmlsdGVyPn0gdGhlIHJlc3VsdGluZyBjaGlsZHJlblxuICAgICAqL1xuICAgIF9nZXRBbGxDaGlsZHJlbiggZmlsdGVycyApIHtcbiAgICAgICAgcmV0dXJuIGZpbHRlcnMucmVkdWNlKCAoIGFycmF5LCBmaWx0ZXIgKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXkuY29uY2F0KCBmaWx0ZXIuZ2V0Q2hpbGRyZW4oKSApO1xuICAgICAgICB9LCBbXSApO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogZ2V0IGFsbCBjaGlsZHJlbiBvZiBhIHNldCBvZiBub2RlcyB0aGF0IGFyZSByZWFkeSB0byBiZSB1cGRhdGVkXG4gICAgICogXG4gICAgICogQHBhcmFtIHtBcnJheS48VHJlZU5vZGU+fSBmaWx0ZXJzIHRoZSBzZXQgb2YgZmlsdGVyc1xuICAgICAqL1xuICAgIF9nZXRBbGxSZWFkeUNoaWxkcmVuKCBmaWx0ZXJzICkge1xuICAgICAgICByZXR1cm4gZmlsdGVycy5yZWR1Y2UoICggYXJyYXksIGZpbHRlciApID0+IHtcblxuICAgICAgICAgICAgY29uc3QgZmlsdGVyQ2hpbGRyZW4gPSBmaWx0ZXIuZ2V0Q2hpbGRyZW4oKTtcbiAgICAgICAgICAgIGNvbnN0IHJlYWR5Q2hpbGRyZW4gPSBbXTtcbiAgICBcbiAgICAgICAgICAgIGZvciAoIGxldCBmQ291bnQgPSAwOyBmQ291bnQgPCBmaWx0ZXJDaGlsZHJlbi5sZW5ndGg7IGZDb3VudCsrICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gZmlsdGVyQ2hpbGRyZW5bIGZDb3VudCBdO1xuICAgICAgICAgICAgICAgIGlmICggY2hpbGQucmVhZHlUb1VwZGF0ZUZyb21EZXBlbmRlbmN5KCkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWR5Q2hpbGRyZW4ucHVzaCggY2hpbGQgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5kZWNyZW1lbnRJbml0Q291bnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYXJyYXkuY29uY2F0KCByZWFkeUNoaWxkcmVuICk7XG4gICAgICAgIH0sIFtdICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgbWFpbiB1cGRhdGUgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIGZpbHRlciBpcyB1cGRhdGVkLCBJdGUgZXZhbHVhdGVzIGVhY2hcbiAgICAgKiBsZXZlbCBvZiB0aGUgZGVwZW5kZW5jeSB0cmVlIGluIHR1cm4gYW5kIHJldHVybnMgYSBwcm9taXNlIHRvIHJlc29sdmUgdGhlIG5leHQgbGV2ZWwgdGhlIHByb21pc2UgaXNcbiAgICAgKiByZXNvbHZlZCB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIGNoaWxkcmVuIHRvIHVwZGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtICB7QXJyYXkuPEZpbHRlcj59IGZpbHRlcnMgdGhlIGZpbHRlcnMgd2hpY2ggaGF2ZSBjaGlsZHJlbiB0aGF0IG5lZWQgdG8gYmUgcmVzb2x2ZWRcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgdXBkYXRlcyBhcmUgY29tcGxldGVcbiAgICAgKi9cbiAgICBfdXBkYXRlRmlsdGVyVHJlZSggZmlsdGVycyApIHtcblxuICAgICAgICBjb25zdCBhbGxDaGlsZHJlbiA9IHRoaXMuX2dldEFsbFJlYWR5Q2hpbGRyZW4oIGZpbHRlcnMgKTtcblxuICAgICAgICBpZiggYWxsQ2hpbGRyZW4ubGVuZ3RoID09PSAwICkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHRyZWVMZXZlbFByb21pc2VzID0gYWxsQ2hpbGRyZW4ubWFwKCBmaWx0ZXJDaGlsZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyQ2hpbGQuZGVwZW5kZW5jeURpZFVwZGF0ZSggZmlsdGVyQ2hpbGQuZ2V0UGFyZW50cygpICk7XG4gICAgICAgIH0gKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKCB0cmVlTGV2ZWxQcm9taXNlcyApXG4gICAgICAgICAgICAudGhlbiggKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVGaWx0ZXJUcmVlKCBhbGxDaGlsZHJlbiApO1xuICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAuY2F0Y2goIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYXRjaEdlbmVyaWNFcnJvciggZXJyb3IgKTtcbiAgICAgICAgICAgIH0gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTb21ldGhpbmcgd2VudCB3cm9uZyBpbiB0aGUgZmlsdGVycywgc2hvdyB0aGUgZXJyb3IgaW4gdGhlIGNvbnNvbGUgYW5kIHNldCB0aGUgZmlsdGVyIHN0YXRlcyB0byBlcnJvci4gVGhlIHVwZGF0ZSBjYWxsYmFja1xuICAgICAqIHdpbGwgbm90IGhhdmUgYmVlbiBjYWxsZWQgaWYgYW4gZXJyb3Igd2FzIHRocm93biBzbyBtYWtlIHN1cmUgdGhpcyBpcyBpbnZva2VkIGFsc29cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0Vycm9yfSBlcnJvciB0aGUgZXJyb3IgdGhyb3duXG4gICAgICovXG4gICAgX2NhdGNoR2VuZXJpY0Vycm9yKCBlcnJvciApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCBlcnJvciApO1xuICAgICAgICB0aGlzLl9zZXRBbGxGaWx0ZXJzVG9TdGF0ZSggRklMVEVSX1NUQVRFLkVSUk9SICk7XG4gICAgICAgIHRoaXMuY29uZmlnLm9uVXBkYXRlKCB0aGlzLl9nZXRGaWx0ZXJTdGF0ZXMoKSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgYmVnaW5zIHRoZSBmaWx0ZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAqXG4gICAgICogQHBhcmFtICB7RmlsdGVyfSBmaWx0ZXIgVGhlIGZpbHRlciB0aGF0IHdhcyB1cGRhdGVkXG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHVwZGF0ZSBpcyBjb21wbGV0ZSwgc3RhdGUgaGFzIGJlZW4gdXBkYXRlZCBhbmQgdXNlciBjYWxsYmFjayBpbnZva2VkXG4gICAgICovXG4gICAgX29uRmlsdGVyVXBkYXRlZCggZmlsdGVyICkge1xuICAgICAgICB0aGlzLl9zZXRBZmZlY3RlZEZpbHRlcnNMb2FkaW5nKCBmaWx0ZXIgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUZpbHRlclRyZWUoIFsgZmlsdGVyIF0gKVxuICAgICAgICAgICAgLnRoZW4oICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgc3RhdGUgaXMgaW5pdGlhbGlzaW5nXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLmdldFN0YXRlKCkgIT09IEZJTFRFUl9TRVRfU1RBVEUuSU5JVElBTElTSU5HICYmIHRoaXMuZ2V0U3RhdGUoKSAhPT0gRklMVEVSX1NFVF9TVEFURS5SRVNFVFRJTkcgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uVXBkYXRlKCB0aGlzLl9nZXRGaWx0ZXJTdGF0ZXMoKSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRha2VzIGluIHRoZSBjb25maWdzIGFuZCBjcmVhdGVzIEZpbHRlciBjbGFzcyBpbnN0YW5jZXMgZnJvbSB0aGVzZVxuICAgICAqXG4gICAgICogQHBhcmFtICB7QXJyYXkuPEZpbHRlckNvbmZpZz59IGZpbHRlckNvbmZpZ3MgdGhlIGNvbmZpZ3VyYXRpb25zXG4gICAgICogQHJldHVybiB7QXJyYXkuPEZpbHRlcj59IHRoZSBjb25zdHJ1Y3RlZCBpbnN0YW5jZXNcbiAgICAgKi9cbiAgICBfYnVpbGRGaWx0ZXJJbnN0YW5jZXMoIGZpbHRlckNvbmZpZ3MgKSB7XG5cbiAgICAgICAgcmV0dXJuIGZpbHRlckNvbmZpZ3MubWFwKCBjb25maWcgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWx0ZXIoIHtcbiAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdGhpcy5jb250YWluZXIsXG4gICAgICAgICAgICAgICAgb25PcHRpb25TZWxlY3RlZDogdGhpcy5fb25GaWx0ZXJVcGRhdGVkLmJpbmQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICBkYXRhRmV0Y2hJbXBsZW1lbnRhdGlvbjogdGhpcy5jb25maWcuZGF0YUZldGNoSW1wbGVtZW50YXRpb25cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIG9ubHkgb25jZSB3aGVuIHRoZSBmaWx0ZXJzIGFyZSBpbml0aWFsaXNpbmcuIEl0IHdpbGwgdGVsbCBhbGwgdGhlIHJvb3QgZmlsdGVyc1xuICAgICAqIHRvIGZldGNoIHRoZWlyIGRhdGEgYW5kIHJlbmRlci4gVGhlIG5vcm1hbCBkZXBlbmRlbmN5IGJlaGF2aW91ciB3aWxsIHRoZW4gaGFuZGxlIHRoZSByZXN0IG9mIHRoZSB1cGRhdGVzXG4gICAgICovXG4gICAgX2luaXRpYWxpc2VGaWx0ZXJzICgpIHtcbiAgICAgICAgY29uc3Qgcm9vdFJlc29sdXRpb24gPSB0aGlzLmZpbHRlcnMubWFwKCBmaWx0ZXIgPT4ge1xuICAgICAgICAgICAgaWYoIGZpbHRlci5pc1Jvb3QoKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIFByb21pc2UuYWxsKCByb290UmVzb2x1dGlvbiApXG4gICAgICAgICAgICAudGhlbiggKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoIEZJTFRFUl9TRVRfU1RBVEUuSURMRSApO1xuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm9uVXBkYXRlKCB0aGlzLl9nZXRGaWx0ZXJTdGF0ZXMoKSApO1xuICAgICAgICAgICAgfSApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzdGF0ZSBvZiB0aGUgZmlsdGVyIHNldFxuICAgICAqXG4gICAgICogQHBhcmFtIHtGaWx0ZXJTZXRTdGF0ZX0gc3RhdGUgc3RhdGUgdG8gc2V0XG4gICAgICovXG4gICAgc2V0U3RhdGUoIHN0YXRlICkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBmaWx0ZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0ZpbHRlclNldFN0YXRlfSB0aCBjdXJyZW50IHN0YXRlXG4gICAgICovXG4gICAgZ2V0U3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3RhdGUgb2YgZWFjaCBmaWx0ZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxDdXJyZW50RmlsdGVyVmFsdWU+fSB0aGUgY3VycmV0biBzdGF0ZXNcbiAgICAgKi9cbiAgICBfZ2V0RmlsdGVyU3RhdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLm1hcCggZmlsdGVyID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIuZ2V0Q3VycmVudE9wdGlvbigpO1xuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmVnaW4gdGhlIHByb2Nlc3Mgb2YgcmVzZXR0aW5nIHRoZSBmaWx0ZXJzIHRvIHRoZWlyIG9yaWdpbmFsIHZhbHVlXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZmlsdGVyIGhhcyBiZWVuIHJlc2V0XG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoIEZJTFRFUl9TRVRfU1RBVEUuUkVTRVRUSU5HICk7XG4gICAgICAgIGNvbnN0IHJlc2V0UHJvbWlzZXMgPSB0aGlzLmZpbHRlcnMubWFwKCBmaWx0ZXIgPT4ge1xuICAgICAgICAgICAgaWYgKCBmaWx0ZXIuaXNSb290KCkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5yZXNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKCByZXNldFByb21pc2VzIClcbiAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSggRklMVEVSX1NFVF9TVEFURS5JRExFICk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcub25VcGRhdGUoIHRoaXMuX2dldEZpbHRlclN0YXRlcygpICk7XG4gICAgICAgICAgICB9IClcbiAgICAgICAgICAgIC5jYXRjaCggZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhdGNoR2VuZXJpY0Vycm9yKCBlcnJvciApO1xuICAgICAgICAgICAgfSApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyBuZWNjYWNhcnkgZWxlbWVudHMgaW50byB0aGUgY29udGFpbmVyXG4gICAgICovXG4gICAgX3JlbmRlcigpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2J1dHRvbicgKTtcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9ICdSZXNldCc7XG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCAncmVzZXQnICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKCBidXR0b24gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgdGhlIGZpbHRlciBzZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSBjb250YWluZXIgY29udGFpbmVyIHdoZXJlIGZpbHRlcnMgYXJlIHRvIGJlIHJlbmRlcmVkXG4gICAgICogQHBhcmFtICB7RmlsdGVyU2V0Q29uZmlnfSBjb25maWcgdGhlIGNvbmZpZ3VyYXRpb25cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciggY29udGFpbmVyLCBjb25maWcgKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoIEZJTFRFUl9TRVRfU1RBVEUuSU5JVElBTElTSU5HICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHsgLi4uRmlsdGVyU2V0LkRFRkFVTFRfQ09ORklHKCksIC4uLmNvbmZpZyB9O1xuICAgICAgICB0aGlzLmZpbHRlclRyZWUgPSBudWxsO1xuICAgICAgICB0aGlzLmZpbHRlcnMgPSB0aGlzLl9idWlsZEZpbHRlckluc3RhbmNlcyggY29uZmlnLmZpbHRlcnMgKTtcbiAgICAgICAgdGhpcy5fYnVpbGRUcmVlKCB0aGlzLmZpbHRlcnMgKTtcbiAgICAgICAgdGhpcy5faW5pdGlhbGlzZUZpbHRlcnMoKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpbHRlciBpbnN0YW5jZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxGaWx0ZXI+fSB0aGUgZmlsdGVyc1xuICAgICAqL1xuICAgIGdldEluc3RhbmNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saWIvanMvZmlsdGVyLXNldC9GaWx0ZXJTZXQuanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Class the describes a simple node in a treew data structure. Each filter is modeled as a element in a tree and this\n * is how the dependencies are modeled and evaluated, dependencies are represented as a parent child relationship.\n * Here we provide helper methods for evalutaing these relationships.\n */\nvar TreeNode = exports.TreeNode = function () {\n\n    /**\n     * initialise the tree node with no parent and no children\n     */\n    function TreeNode() {\n        _classCallCheck(this, TreeNode);\n\n        this.parent = null;\n        this.children = [];\n    }\n\n    /**\n     * Is a given node a child of this node?\n     *\n     * @param  {TreeNode}  node the node to check\n     * @return {Boolean} if the given node is a child of a parent\n     */\n\n\n    _createClass(TreeNode, [{\n        key: 'hasChild',\n        value: function hasChild(node) {\n\n            return this.children.indexOf(node) > -1;\n        }\n\n        /**\n         * Check wether the given node is the parent of this node\n         *\n         * @param  {TreeNode}  node node to check\n         * @return {Boolean} wether the given node is a preant of this node\n         */\n\n    }, {\n        key: 'parentIs',\n        value: function parentIs(node) {\n            if (!this.parents) {\n                return false;\n            }\n\n            return this.parents.indexOf(node) > -1;\n        }\n\n        /**\n         * Add a TreeNode as a child of this node and set it as parent value\n         *\n         * @param {TreeNode} node the node to add as a child\n         */\n\n    }, {\n        key: 'addChild',\n        value: function addChild(node) {\n\n            if (this.hasChild(node)) {\n                throw new Error('Attempted to add a child that already exists');\n                return;\n            }\n\n            if (this.parentIs(node)) {\n                throw new Error('Attempted to create a cyclic dependency, adding a child that is already the parent');\n                return;\n            }\n\n            this.children.push(node);\n            node.setParent(this);\n        }\n\n        /**\n         * Wether the node has any children at the moment\n         *\n         * @return {Boolean} wether the node has any children\n         */\n\n    }, {\n        key: 'hasChildren',\n        value: function hasChildren() {\n            return this.children.length > 0;\n        }\n\n        /**\n         * Add a given node as a parent of this node\n         *\n         * @param {TreeNode} node the parent to set\n         */\n\n    }, {\n        key: 'setParent',\n        value: function setParent(node) {\n\n            this.parents = this.parents || [];\n\n            if (this.hasChild(node)) {\n                throw new Error('Attempted to create a cyclic dependency, adding a parent that is already a child');\n                return;\n            }\n\n            if (this.parentIs(node)) {\n                throw new Error('Attempted to set a parent that is already the parent');\n                return;\n            }\n\n            this.parents.push(node);\n        }\n\n        /**\n         * A root node is a node with no parents, i.e. this node is dependant on no others\n         *\n         * @return {Boolean} Wether the node is a child\n         */\n\n    }, {\n        key: 'isRoot',\n        value: function isRoot() {\n            return !this.parents;\n        }\n\n        /**\n         * Get all the children of this node\n         *\n         * @return {Array.<TreeNode>} the children\n         */\n\n    }, {\n        key: 'getChildren',\n        value: function getChildren() {\n            return this.children;\n        }\n\n        /**\n         * Get the current parents\n         *\n         * @return {Array.<TreeNode>} the parent or empty array\n         */\n\n    }, {\n        key: 'getParents',\n        value: function getParents() {\n            return this.parents || [];\n        }\n    }]);\n\n    return TreeNode;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvdHJlZS9UcmVlTm9kZS5qcz9lOTU2Il0sIm5hbWVzIjpbIlRyZWVOb2RlIiwicGFyZW50IiwiY2hpbGRyZW4iLCJub2RlIiwiaW5kZXhPZiIsInBhcmVudHMiLCJoYXNDaGlsZCIsIkVycm9yIiwicGFyZW50SXMiLCJwdXNoIiwic2V0UGFyZW50IiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7O0lBS2FBLFEsV0FBQUEsUTs7QUFFVDs7O0FBR0Esd0JBQWM7QUFBQTs7QUFDVixhQUFLQyxNQUFMLEdBQWMsSUFBZDtBQUNBLGFBQUtDLFFBQUwsR0FBZ0IsRUFBaEI7QUFDSDs7QUFFRDs7Ozs7Ozs7OztpQ0FNVUMsSSxFQUFPOztBQUViLG1CQUFPLEtBQUtELFFBQUwsQ0FBY0UsT0FBZCxDQUF1QkQsSUFBdkIsSUFBZ0MsQ0FBQyxDQUF4QztBQUNIOztBQUVEOzs7Ozs7Ozs7aUNBTVVBLEksRUFBTztBQUNiLGdCQUFLLENBQUMsS0FBS0UsT0FBWCxFQUFxQjtBQUNqQix1QkFBTyxLQUFQO0FBQ0g7O0FBRUQsbUJBQU8sS0FBS0EsT0FBTCxDQUFhRCxPQUFiLENBQXNCRCxJQUF0QixJQUErQixDQUFDLENBQXZDO0FBQ0g7O0FBRUQ7Ozs7Ozs7O2lDQUtXQSxJLEVBQU87O0FBRWQsZ0JBQUssS0FBS0csUUFBTCxDQUFlSCxJQUFmLENBQUwsRUFBNkI7QUFDekIsc0JBQU0sSUFBSUksS0FBSixDQUFXLDhDQUFYLENBQU47QUFDQTtBQUNIOztBQUVELGdCQUFLLEtBQUtDLFFBQUwsQ0FBZUwsSUFBZixDQUFMLEVBQTZCO0FBQ3pCLHNCQUFNLElBQUlJLEtBQUosQ0FBVyxvRkFBWCxDQUFOO0FBQ0E7QUFDSDs7QUFFRCxpQkFBS0wsUUFBTCxDQUFjTyxJQUFkLENBQW9CTixJQUFwQjtBQUNBQSxpQkFBS08sU0FBTCxDQUFnQixJQUFoQjtBQUNIOztBQUVEOzs7Ozs7OztzQ0FLYztBQUNWLG1CQUFPLEtBQUtSLFFBQUwsQ0FBY1MsTUFBZCxHQUF1QixDQUE5QjtBQUNIOztBQUVEOzs7Ozs7OztrQ0FLWVIsSSxFQUFPOztBQUVmLGlCQUFLRSxPQUFMLEdBQWUsS0FBS0EsT0FBTCxJQUFnQixFQUEvQjs7QUFFQSxnQkFBSyxLQUFLQyxRQUFMLENBQWVILElBQWYsQ0FBTCxFQUE2QjtBQUN6QixzQkFBTSxJQUFJSSxLQUFKLENBQVcsa0ZBQVgsQ0FBTjtBQUNBO0FBQ0g7O0FBRUQsZ0JBQUssS0FBS0MsUUFBTCxDQUFlTCxJQUFmLENBQUwsRUFBNkI7QUFDekIsc0JBQU0sSUFBSUksS0FBSixDQUFXLHNEQUFYLENBQU47QUFDQTtBQUNIOztBQUVELGlCQUFLRixPQUFMLENBQWFJLElBQWIsQ0FBbUJOLElBQW5CO0FBQ0g7O0FBRUQ7Ozs7Ozs7O2lDQUtVO0FBQ04sbUJBQU8sQ0FBQyxLQUFLRSxPQUFiO0FBQ0g7O0FBRUQ7Ozs7Ozs7O3NDQUtlO0FBQ1gsbUJBQU8sS0FBS0gsUUFBWjtBQUNIOztBQUVEOzs7Ozs7OztxQ0FLYTtBQUNULG1CQUFPLEtBQUtHLE9BQUwsSUFBZ0IsRUFBdkI7QUFDSCIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDbGFzcyB0aGUgZGVzY3JpYmVzIGEgc2ltcGxlIG5vZGUgaW4gYSB0cmVldyBkYXRhIHN0cnVjdHVyZS4gRWFjaCBmaWx0ZXIgaXMgbW9kZWxlZCBhcyBhIGVsZW1lbnQgaW4gYSB0cmVlIGFuZCB0aGlzXG4gKiBpcyBob3cgdGhlIGRlcGVuZGVuY2llcyBhcmUgbW9kZWxlZCBhbmQgZXZhbHVhdGVkLCBkZXBlbmRlbmNpZXMgYXJlIHJlcHJlc2VudGVkIGFzIGEgcGFyZW50IGNoaWxkIHJlbGF0aW9uc2hpcC5cbiAqIEhlcmUgd2UgcHJvdmlkZSBoZWxwZXIgbWV0aG9kcyBmb3IgZXZhbHV0YWluZyB0aGVzZSByZWxhdGlvbnNoaXBzLlxuICovXG5leHBvcnQgY2xhc3MgVHJlZU5vZGUge1xuXG4gICAgLyoqXG4gICAgICogaW5pdGlhbGlzZSB0aGUgdHJlZSBub2RlIHdpdGggbm8gcGFyZW50IGFuZCBubyBjaGlsZHJlblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJcyBhIGdpdmVuIG5vZGUgYSBjaGlsZCBvZiB0aGlzIG5vZGU/XG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtUcmVlTm9kZX0gIG5vZGUgdGhlIG5vZGUgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBpZiB0aGUgZ2l2ZW4gbm9kZSBpcyBhIGNoaWxkIG9mIGEgcGFyZW50XG4gICAgICovXG4gICAgaGFzQ2hpbGQoIG5vZGUgKSB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uaW5kZXhPZiggbm9kZSApID4gLTE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2V0aGVyIHRoZSBnaXZlbiBub2RlIGlzIHRoZSBwYXJlbnQgb2YgdGhpcyBub2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtUcmVlTm9kZX0gIG5vZGUgbm9kZSB0byBjaGVja1xuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHdldGhlciB0aGUgZ2l2ZW4gbm9kZSBpcyBhIHByZWFudCBvZiB0aGlzIG5vZGVcbiAgICAgKi9cbiAgICBwYXJlbnRJcyggbm9kZSApIHtcbiAgICAgICAgaWYgKCAhdGhpcy5wYXJlbnRzICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRzLmluZGV4T2YoIG5vZGUgKSA+IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIFRyZWVOb2RlIGFzIGEgY2hpbGQgb2YgdGhpcyBub2RlIGFuZCBzZXQgaXQgYXMgcGFyZW50IHZhbHVlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyZWVOb2RlfSBub2RlIHRoZSBub2RlIHRvIGFkZCBhcyBhIGNoaWxkXG4gICAgICovXG4gICAgYWRkQ2hpbGQgKCBub2RlICkge1xuXG4gICAgICAgIGlmICggdGhpcy5oYXNDaGlsZCggbm9kZSApICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnQXR0ZW1wdGVkIHRvIGFkZCBhIGNoaWxkIHRoYXQgYWxyZWFkeSBleGlzdHMnICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIHRoaXMucGFyZW50SXMoIG5vZGUgKSApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ0F0dGVtcHRlZCB0byBjcmVhdGUgYSBjeWNsaWMgZGVwZW5kZW5jeSwgYWRkaW5nIGEgY2hpbGQgdGhhdCBpcyBhbHJlYWR5IHRoZSBwYXJlbnQnICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goIG5vZGUgKTtcbiAgICAgICAgbm9kZS5zZXRQYXJlbnQoIHRoaXMgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXZXRoZXIgdGhlIG5vZGUgaGFzIGFueSBjaGlsZHJlbiBhdCB0aGUgbW9tZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB3ZXRoZXIgdGhlIG5vZGUgaGFzIGFueSBjaGlsZHJlblxuICAgICAqL1xuICAgIGhhc0NoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIGdpdmVuIG5vZGUgYXMgYSBwYXJlbnQgb2YgdGhpcyBub2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyZWVOb2RlfSBub2RlIHRoZSBwYXJlbnQgdG8gc2V0XG4gICAgICovXG4gICAgc2V0UGFyZW50ICggbm9kZSApIHtcblxuICAgICAgICB0aGlzLnBhcmVudHMgPSB0aGlzLnBhcmVudHMgfHwgW107XG5cbiAgICAgICAgaWYgKCB0aGlzLmhhc0NoaWxkKCBub2RlICkgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdBdHRlbXB0ZWQgdG8gY3JlYXRlIGEgY3ljbGljIGRlcGVuZGVuY3ksIGFkZGluZyBhIHBhcmVudCB0aGF0IGlzIGFscmVhZHkgYSBjaGlsZCcgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoIHRoaXMucGFyZW50SXMoIG5vZGUgKSApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ0F0dGVtcHRlZCB0byBzZXQgYSBwYXJlbnQgdGhhdCBpcyBhbHJlYWR5IHRoZSBwYXJlbnQnICk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5wYXJlbnRzLnB1c2goIG5vZGUgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHJvb3Qgbm9kZSBpcyBhIG5vZGUgd2l0aCBubyBwYXJlbnRzLCBpLmUuIHRoaXMgbm9kZSBpcyBkZXBlbmRhbnQgb24gbm8gb3RoZXJzXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBXZXRoZXIgdGhlIG5vZGUgaXMgYSBjaGlsZFxuICAgICAqL1xuICAgIGlzUm9vdCAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5wYXJlbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZVxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPFRyZWVOb2RlPn0gdGhlIGNoaWxkcmVuXG4gICAgICovXG4gICAgZ2V0Q2hpbGRyZW4gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcGFyZW50c1xuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPFRyZWVOb2RlPn0gdGhlIHBhcmVudCBvciBlbXB0eSBhcnJheVxuICAgICAqL1xuICAgIGdldFBhcmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudHMgfHwgW107XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGliL2pzL3RyZWUvVHJlZU5vZGUuanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.NativeSelectFilter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _FilterInterface2 = __webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * An example implementation of a custom filter dropdown\n * @implements FilterInterface\n */\nvar NativeSelectFilter = exports.NativeSelectFilter = function (_FilterInterface) {\n    _inherits(NativeSelectFilter, _FilterInterface);\n\n    function NativeSelectFilter() {\n        _classCallCheck(this, NativeSelectFilter);\n\n        return _possibleConstructorReturn(this, (NativeSelectFilter.__proto__ || Object.getPrototypeOf(NativeSelectFilter)).call(this));\n    }\n\n    /**\n     * Save a reference to the callback passed by library code\n     *\n     * @param {Function} callback the callback function that accepts a single 'value' argument\n     * @override\n     */\n\n\n    _createClass(NativeSelectFilter, [{\n        key: 'setSelectedCallback',\n        value: function setSelectedCallback(callback) {\n\n            this.callback = callback;\n        }\n\n        /**\n         * Set a specific value on the select dropdown\n         *\n         * @param {String} id the id of the option to set\n         * @override\n         */\n\n    }, {\n        key: 'setValue',\n        value: function setValue(id) {\n            var select = this.container.querySelector('select');\n\n            if (!select) {\n                return;\n            }\n\n            select.value = id;\n        }\n\n        /**\n         * Callback for when the select dropdown changes its value\n         */\n\n    }, {\n        key: 'onSelect',\n        value: function onSelect() {\n\n            var select = this.container.querySelector('select');\n\n            if (select && select.getBoundingClientRect().width > this.container.getBoundingClientRect().width) {\n                this.container.classList.add('filter--overflow');\n            } else {\n                this.container.classList.remove('filter--overflow');\n            }\n\n            this.callback(select.value);\n        }\n\n        /**\n         * The main render function that will be called to add the filter to the DOM\n         *\n         * @param  {String} title the title of the filter\n         * @param  {Array.<Option>} options the set of options to render\n         * @param  {String} defaultOptionValue the ID of the option that is currently selected\n         * @override\n         */\n\n    }, {\n        key: 'render',\n        value: function render(title, options, defaultOptionValue) {\n\n            this.container.innerHTML = '';\n            var elements = this.createSelectElement(title, options, defaultOptionValue);\n            this.container.appendChild(elements.label);\n            this.container.appendChild(elements.select);\n            this.container.appendChild(elements.indicator);\n            elements.select.onchange = this.onSelect.bind(this);\n        }\n\n        /**\n         * Create a select element in memory\n         *\n         * @param  {String} name the title of the filter\n         * @param  {Array.<Option>} options the set of options to render\n         * @param  {String} defaultValue the ID of the option that is currently selected\n         * @return {Object} object containing a select element, label and a indicator element which is colored depending on state\n         */\n\n    }, {\n        key: 'createSelectElement',\n        value: function createSelectElement(name, options, defaultValue) {\n            var _this2 = this;\n\n            var select = document.createElement('select');\n            var label = document.createElement('label');\n            var indicator = document.createElement('div');\n\n            select.id = name;\n            label.for = name;\n            label.innerText = name;\n            select.classList.add('filter__select');\n            label.classList.add('filter__label');\n            indicator.classList.add('filter__indicator');\n\n            options.forEach(function (option) {\n                var optionEl = _this2.createOptionElement(option);\n                if (option.value === defaultValue) {\n                    optionEl.selected = 'true';\n                }\n                select.appendChild(optionEl);\n            });\n\n            return { label: label, select: select, indicator: indicator };\n        }\n\n        /**\n         * Create a select dropdown <option> element in memory\n         *\n         * @param  {Option} option the option to create\n         * @return {HTMLElement} the <option> element\n         */\n\n    }, {\n        key: 'createOptionElement',\n        value: function createOptionElement(option) {\n\n            var optionEl = document.createElement('option');\n            optionEl.value = option.value;\n            optionEl.innerText = option.name;\n            if (option.default) {\n                optionEl.selected = true;\n            }\n\n            return optionEl;\n        }\n\n        /**\n         * Set the select into a loading state while it fetches data\n         * @param {String} title title of the element\n         */\n\n    }, {\n        key: 'setLoadingState',\n        value: function setLoadingState(title) {\n            this.render(title, [{ name: 'Loading', value: '-1' }], '-1');\n            this.container.classList.remove('filter--disabled');\n            this.container.classList.add('filter--loading');\n        }\n\n        /**\n         * Get rid of the loading class\n         *\n         * @param {String} title title of the element\n         */\n\n    }, {\n        key: 'removeLoadingState',\n        value: function removeLoadingState(title) {\n            this.container.classList.remove('filter--loading');\n        }\n\n        /**\n         * make sure the user cannot interact with the filter\n         *\n         * @param {String} title title of the element\n         */\n\n    }, {\n        key: 'setDisabledState',\n        value: function setDisabledState(title) {\n            this.render(title, [{ name: 'Disabled', value: 'disabled' }], 'disabled');\n            this.container.classList.add('filter--disabled');\n            this.container.classList.remove('filter--loading');\n        }\n\n        /**\n         * Set the filter into a error state as something has gone wrong\n         */\n\n    }, {\n        key: 'setErrorState',\n        value: function setErrorState(title) {\n            this.render(title, [{ name: 'Error', value: '-1' }], '-1');\n        }\n\n        /**\n         * Set the container so it can be used to render the filter into later\n         *\n         * @param {HTMLElement} container the filter container\n         */\n\n    }, {\n        key: 'setContainer',\n        value: function setContainer(container) {\n            this.container = container;\n        }\n    }]);\n\n    return NativeSelectFilter;\n}(_FilterInterface2.FilterInterface);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvZmlsdGVyL05hdGl2ZVNlbGVjdC5qcz9jNzkyIl0sIm5hbWVzIjpbIk5hdGl2ZVNlbGVjdEZpbHRlciIsImNhbGxiYWNrIiwiaWQiLCJzZWxlY3QiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwidmFsdWUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInRpdGxlIiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25WYWx1ZSIsImlubmVySFRNTCIsImVsZW1lbnRzIiwiY3JlYXRlU2VsZWN0RWxlbWVudCIsImFwcGVuZENoaWxkIiwibGFiZWwiLCJpbmRpY2F0b3IiLCJvbmNoYW5nZSIsIm9uU2VsZWN0IiwiYmluZCIsIm5hbWUiLCJkZWZhdWx0VmFsdWUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJmb3IiLCJpbm5lclRleHQiLCJmb3JFYWNoIiwib3B0aW9uRWwiLCJjcmVhdGVPcHRpb25FbGVtZW50Iiwib3B0aW9uIiwic2VsZWN0ZWQiLCJkZWZhdWx0IiwicmVuZGVyIiwiRmlsdGVySW50ZXJmYWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7QUFFQTs7OztJQUlhQSxrQixXQUFBQSxrQjs7O0FBRVQsa0NBQWM7QUFBQTs7QUFBQTtBQUViOztBQUVEOzs7Ozs7Ozs7OzRDQU1xQkMsUSxFQUFXOztBQUU1QixpQkFBS0EsUUFBTCxHQUFnQkEsUUFBaEI7QUFDSDs7QUFFRDs7Ozs7Ozs7O2lDQU1VQyxFLEVBQUs7QUFDWCxnQkFBTUMsU0FBUyxLQUFLQyxTQUFMLENBQWVDLGFBQWYsQ0FBOEIsUUFBOUIsQ0FBZjs7QUFFQSxnQkFBSyxDQUFDRixNQUFOLEVBQWU7QUFDWDtBQUNIOztBQUVEQSxtQkFBT0csS0FBUCxHQUFlSixFQUFmO0FBQ0g7O0FBRUQ7Ozs7OzttQ0FHVzs7QUFFUCxnQkFBTUMsU0FBUyxLQUFLQyxTQUFMLENBQWVDLGFBQWYsQ0FBOEIsUUFBOUIsQ0FBZjs7QUFFQSxnQkFBSUYsVUFBVUEsT0FBT0kscUJBQVAsR0FBK0JDLEtBQS9CLEdBQXVDLEtBQUtKLFNBQUwsQ0FBZUcscUJBQWYsR0FBdUNDLEtBQTVGLEVBQW9HO0FBQ2hHLHFCQUFLSixTQUFMLENBQWVLLFNBQWYsQ0FBeUJDLEdBQXpCLENBQThCLGtCQUE5QjtBQUNILGFBRkQsTUFFTztBQUNILHFCQUFLTixTQUFMLENBQWVLLFNBQWYsQ0FBeUJFLE1BQXpCLENBQWlDLGtCQUFqQztBQUNIOztBQUVELGlCQUFLVixRQUFMLENBQWVFLE9BQU9HLEtBQXRCO0FBQ0g7O0FBRUQ7Ozs7Ozs7Ozs7OytCQVFRTSxLLEVBQU9DLE8sRUFBU0Msa0IsRUFBcUI7O0FBRXpDLGlCQUFLVixTQUFMLENBQWVXLFNBQWYsR0FBMkIsRUFBM0I7QUFDQSxnQkFBTUMsV0FBVyxLQUFLQyxtQkFBTCxDQUEwQkwsS0FBMUIsRUFBaUNDLE9BQWpDLEVBQTBDQyxrQkFBMUMsQ0FBakI7QUFDQSxpQkFBS1YsU0FBTCxDQUFlYyxXQUFmLENBQTRCRixTQUFTRyxLQUFyQztBQUNBLGlCQUFLZixTQUFMLENBQWVjLFdBQWYsQ0FBNEJGLFNBQVNiLE1BQXJDO0FBQ0EsaUJBQUtDLFNBQUwsQ0FBZWMsV0FBZixDQUE0QkYsU0FBU0ksU0FBckM7QUFDQUoscUJBQVNiLE1BQVQsQ0FBZ0JrQixRQUFoQixHQUEyQixLQUFLQyxRQUFMLENBQWNDLElBQWQsQ0FBb0IsSUFBcEIsQ0FBM0I7QUFFSDs7QUFFRDs7Ozs7Ozs7Ozs7NENBUXFCQyxJLEVBQU1YLE8sRUFBU1ksWSxFQUFlO0FBQUE7O0FBRS9DLGdCQUFNdEIsU0FBU3VCLFNBQVNDLGFBQVQsQ0FBd0IsUUFBeEIsQ0FBZjtBQUNBLGdCQUFNUixRQUFRTyxTQUFTQyxhQUFULENBQXdCLE9BQXhCLENBQWQ7QUFDQSxnQkFBTVAsWUFBWU0sU0FBU0MsYUFBVCxDQUF3QixLQUF4QixDQUFsQjs7QUFFQXhCLG1CQUFPRCxFQUFQLEdBQVlzQixJQUFaO0FBQ0FMLGtCQUFNUyxHQUFOLEdBQVlKLElBQVo7QUFDQUwsa0JBQU1VLFNBQU4sR0FBa0JMLElBQWxCO0FBQ0FyQixtQkFBT00sU0FBUCxDQUFpQkMsR0FBakIsQ0FBc0IsZ0JBQXRCO0FBQ0FTLGtCQUFNVixTQUFOLENBQWdCQyxHQUFoQixDQUFxQixlQUFyQjtBQUNBVSxzQkFBVVgsU0FBVixDQUFvQkMsR0FBcEIsQ0FBeUIsbUJBQXpCOztBQUdBRyxvQkFBUWlCLE9BQVIsQ0FBaUIsa0JBQVU7QUFDdkIsb0JBQU1DLFdBQVcsT0FBS0MsbUJBQUwsQ0FBMEJDLE1BQTFCLENBQWpCO0FBQ0Esb0JBQUtBLE9BQU8zQixLQUFQLEtBQWlCbUIsWUFBdEIsRUFBcUM7QUFDakNNLDZCQUFTRyxRQUFULEdBQW9CLE1BQXBCO0FBQ0g7QUFDRC9CLHVCQUFPZSxXQUFQLENBQW9CYSxRQUFwQjtBQUNILGFBTkQ7O0FBUUEsbUJBQU8sRUFBRVosWUFBRixFQUFTaEIsY0FBVCxFQUFpQmlCLG9CQUFqQixFQUFQO0FBQ0g7O0FBRUQ7Ozs7Ozs7Ozs0Q0FNcUJhLE0sRUFBUzs7QUFFMUIsZ0JBQU1GLFdBQVdMLFNBQVNDLGFBQVQsQ0FBd0IsUUFBeEIsQ0FBakI7QUFDQUkscUJBQVN6QixLQUFULEdBQWlCMkIsT0FBTzNCLEtBQXhCO0FBQ0F5QixxQkFBU0YsU0FBVCxHQUFxQkksT0FBT1QsSUFBNUI7QUFDQSxnQkFBSVMsT0FBT0UsT0FBWCxFQUFxQjtBQUNqQkoseUJBQVNHLFFBQVQsR0FBb0IsSUFBcEI7QUFDSDs7QUFFRCxtQkFBT0gsUUFBUDtBQUNIOztBQUVEOzs7Ozs7O3dDQUlpQm5CLEssRUFBUTtBQUNyQixpQkFBS3dCLE1BQUwsQ0FBYXhCLEtBQWIsRUFBb0IsQ0FBRSxFQUFFWSxNQUFNLFNBQVIsRUFBbUJsQixPQUFPLElBQTFCLEVBQUYsQ0FBcEIsRUFBMEQsSUFBMUQ7QUFDQSxpQkFBS0YsU0FBTCxDQUFlSyxTQUFmLENBQXlCRSxNQUF6QixDQUFpQyxrQkFBakM7QUFDQSxpQkFBS1AsU0FBTCxDQUFlSyxTQUFmLENBQXlCQyxHQUF6QixDQUE4QixpQkFBOUI7QUFDSDs7QUFFRDs7Ozs7Ozs7MkNBS29CRSxLLEVBQVE7QUFDeEIsaUJBQUtSLFNBQUwsQ0FBZUssU0FBZixDQUF5QkUsTUFBekIsQ0FBaUMsaUJBQWpDO0FBQ0g7O0FBRUQ7Ozs7Ozs7O3lDQUtrQkMsSyxFQUFRO0FBQ3RCLGlCQUFLd0IsTUFBTCxDQUFheEIsS0FBYixFQUFvQixDQUFFLEVBQUVZLE1BQU0sVUFBUixFQUFvQmxCLE9BQU8sVUFBM0IsRUFBRixDQUFwQixFQUFpRSxVQUFqRTtBQUNBLGlCQUFLRixTQUFMLENBQWVLLFNBQWYsQ0FBeUJDLEdBQXpCLENBQThCLGtCQUE5QjtBQUNBLGlCQUFLTixTQUFMLENBQWVLLFNBQWYsQ0FBeUJFLE1BQXpCLENBQWlDLGlCQUFqQztBQUNIOztBQUVEOzs7Ozs7c0NBR2VDLEssRUFBUTtBQUNuQixpQkFBS3dCLE1BQUwsQ0FBYXhCLEtBQWIsRUFBb0IsQ0FBRSxFQUFFWSxNQUFNLE9BQVIsRUFBaUJsQixPQUFPLElBQXhCLEVBQUYsQ0FBcEIsRUFBd0QsSUFBeEQ7QUFDSDs7QUFFRDs7Ozs7Ozs7cUNBS2NGLFMsRUFBWTtBQUN0QixpQkFBS0EsU0FBTCxHQUFpQkEsU0FBakI7QUFDSDs7OztFQW5LbUNpQyxpQyIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmlsdGVySW50ZXJmYWNlIH0gZnJvbSAnLi9GaWx0ZXJJbnRlcmZhY2UuanMnO1xuXG4vKipcbiAqIEFuIGV4YW1wbGUgaW1wbGVtZW50YXRpb24gb2YgYSBjdXN0b20gZmlsdGVyIGRyb3Bkb3duXG4gKiBAaW1wbGVtZW50cyBGaWx0ZXJJbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIE5hdGl2ZVNlbGVjdEZpbHRlciBleHRlbmRzIEZpbHRlckludGVyZmFjZSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBjYWxsYmFjayBwYXNzZWQgYnkgbGlicmFyeSBjb2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGEgc2luZ2xlICd2YWx1ZScgYXJndW1lbnRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBzZXRTZWxlY3RlZENhbGxiYWNrKCBjYWxsYmFjayApIHtcblxuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGEgc3BlY2lmaWMgdmFsdWUgb24gdGhlIHNlbGVjdCBkcm9wZG93blxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIHRoZSBpZCBvZiB0aGUgb3B0aW9uIHRvIHNldFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHNldFZhbHVlKCBpZCApIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvciggJ3NlbGVjdCcgKTtcblxuICAgICAgICBpZiAoICFzZWxlY3QgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3QudmFsdWUgPSBpZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBmb3Igd2hlbiB0aGUgc2VsZWN0IGRyb3Bkb3duIGNoYW5nZXMgaXRzIHZhbHVlXG4gICAgICovXG4gICAgb25TZWxlY3QoKSB7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvciggJ3NlbGVjdCcgKTtcblxuICAgICAgICBpZiggc2VsZWN0ICYmIHNlbGVjdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IHRoaXMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ2ZpbHRlci0tb3ZlcmZsb3cnICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCAnZmlsdGVyLS1vdmVyZmxvdycgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsbGJhY2soIHNlbGVjdC52YWx1ZSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtYWluIHJlbmRlciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHRvIGFkZCB0aGUgZmlsdGVyIHRvIHRoZSBET01cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdGl0bGUgdGhlIHRpdGxlIG9mIHRoZSBmaWx0ZXJcbiAgICAgKiBAcGFyYW0gIHtBcnJheS48T3B0aW9uPn0gb3B0aW9ucyB0aGUgc2V0IG9mIG9wdGlvbnMgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBkZWZhdWx0T3B0aW9uVmFsdWUgdGhlIElEIG9mIHRoZSBvcHRpb24gdGhhdCBpcyBjdXJyZW50bHkgc2VsZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICByZW5kZXIoIHRpdGxlLCBvcHRpb25zLCBkZWZhdWx0T3B0aW9uVmFsdWUgKSB7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5jcmVhdGVTZWxlY3RFbGVtZW50KCB0aXRsZSwgb3B0aW9ucywgZGVmYXVsdE9wdGlvblZhbHVlICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKCBlbGVtZW50cy5sYWJlbCApO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCggZWxlbWVudHMuc2VsZWN0ICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKCBlbGVtZW50cy5pbmRpY2F0b3IgKTtcbiAgICAgICAgZWxlbWVudHMuc2VsZWN0Lm9uY2hhbmdlID0gdGhpcy5vblNlbGVjdC5iaW5kKCB0aGlzICk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzZWxlY3QgZWxlbWVudCBpbiBtZW1vcnlcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSB0aGUgdGl0bGUgb2YgdGhlIGZpbHRlclxuICAgICAqIEBwYXJhbSAge0FycmF5LjxPcHRpb24+fSBvcHRpb25zIHRoZSBzZXQgb2Ygb3B0aW9ucyB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGRlZmF1bHRWYWx1ZSB0aGUgSUQgb2YgdGhlIG9wdGlvbiB0aGF0IGlzIGN1cnJlbnRseSBzZWxlY3RlZFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gb2JqZWN0IGNvbnRhaW5pbmcgYSBzZWxlY3QgZWxlbWVudCwgbGFiZWwgYW5kIGEgaW5kaWNhdG9yIGVsZW1lbnQgd2hpY2ggaXMgY29sb3JlZCBkZXBlbmRpbmcgb24gc3RhdGVcbiAgICAgKi9cbiAgICBjcmVhdGVTZWxlY3RFbGVtZW50KCBuYW1lLCBvcHRpb25zLCBkZWZhdWx0VmFsdWUgKSB7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3NlbGVjdCcgKTtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnbGFiZWwnICk7XG4gICAgICAgIGNvbnN0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG5cbiAgICAgICAgc2VsZWN0LmlkID0gbmFtZTtcbiAgICAgICAgbGFiZWwuZm9yID0gbmFtZTtcbiAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gbmFtZTtcbiAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoICdmaWx0ZXJfX3NlbGVjdCcgKTtcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZCggJ2ZpbHRlcl9fbGFiZWwnICk7XG4gICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCAnZmlsdGVyX19pbmRpY2F0b3InICk7XG5cblxuICAgICAgICBvcHRpb25zLmZvckVhY2goIG9wdGlvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25FbCA9IHRoaXMuY3JlYXRlT3B0aW9uRWxlbWVudCggb3B0aW9uICk7XG4gICAgICAgICAgICBpZiAoIG9wdGlvbi52YWx1ZSA9PT0gZGVmYXVsdFZhbHVlICkge1xuICAgICAgICAgICAgICAgIG9wdGlvbkVsLnNlbGVjdGVkID0gJ3RydWUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKCBvcHRpb25FbCApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgcmV0dXJuIHsgbGFiZWwsIHNlbGVjdCwgaW5kaWNhdG9yIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2VsZWN0IGRyb3Bkb3duIDxvcHRpb24+IGVsZW1lbnQgaW4gbWVtb3J5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPcHRpb259IG9wdGlvbiB0aGUgb3B0aW9uIHRvIGNyZWF0ZVxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSB0aGUgPG9wdGlvbj4gZWxlbWVudFxuICAgICAqL1xuICAgIGNyZWF0ZU9wdGlvbkVsZW1lbnQoIG9wdGlvbiApIHtcblxuICAgICAgICBjb25zdCBvcHRpb25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdvcHRpb24nICk7XG4gICAgICAgIG9wdGlvbkVsLnZhbHVlID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICBvcHRpb25FbC5pbm5lclRleHQgPSBvcHRpb24ubmFtZTtcbiAgICAgICAgaWYoIG9wdGlvbi5kZWZhdWx0ICkge1xuICAgICAgICAgICAgb3B0aW9uRWwuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbkVsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2VsZWN0IGludG8gYSBsb2FkaW5nIHN0YXRlIHdoaWxlIGl0IGZldGNoZXMgZGF0YVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSB0aXRsZSBvZiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIHNldExvYWRpbmdTdGF0ZSggdGl0bGUgKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCB0aXRsZSwgWyB7IG5hbWU6ICdMb2FkaW5nJywgdmFsdWU6ICctMScgfSBdLCAnLTEnICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICdmaWx0ZXItLWRpc2FibGVkJyApO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAnZmlsdGVyLS1sb2FkaW5nJyApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCByaWQgb2YgdGhlIGxvYWRpbmcgY2xhc3NcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSB0aXRsZSBvZiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIHJlbW92ZUxvYWRpbmdTdGF0ZSggdGl0bGUgKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICdmaWx0ZXItLWxvYWRpbmcnICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbWFrZSBzdXJlIHRoZSB1c2VyIGNhbm5vdCBpbnRlcmFjdCB3aXRoIHRoZSBmaWx0ZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSB0aXRsZSBvZiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoIHRpdGxlICkge1xuICAgICAgICB0aGlzLnJlbmRlciggdGl0bGUsIFsgeyBuYW1lOiAnRGlzYWJsZWQnLCB2YWx1ZTogJ2Rpc2FibGVkJyB9IF0sICdkaXNhYmxlZCcgKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ2ZpbHRlci0tZGlzYWJsZWQnICk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICdmaWx0ZXItLWxvYWRpbmcnICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBmaWx0ZXIgaW50byBhIGVycm9yIHN0YXRlIGFzIHNvbWV0aGluZyBoYXMgZ29uZSB3cm9uZ1xuICAgICAqL1xuICAgIHNldEVycm9yU3RhdGUoIHRpdGxlICkge1xuICAgICAgICB0aGlzLnJlbmRlciggdGl0bGUsIFsgeyBuYW1lOiAnRXJyb3InLCB2YWx1ZTogJy0xJyB9IF0sICctMScgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbnRhaW5lciBzbyBpdCBjYW4gYmUgdXNlZCB0byByZW5kZXIgdGhlIGZpbHRlciBpbnRvIGxhdGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgdGhlIGZpbHRlciBjb250YWluZXJcbiAgICAgKi9cbiAgICBzZXRDb250YWluZXIoIGNvbnRhaW5lciApIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGliL2pzL2ZpbHRlci9OYXRpdmVTZWxlY3QuanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.promiseRequest = undefined;\n\nvar _parameterError = __webpack_require__(8);\n\n/**\n * Very simple in-built data request functionality for filters. You can override this with your own data\n * fetching layer.\n *\n * @param {String} url The URL to call to fetch data\n * @param {String} method get\n * @return {Promise} promise that resolves with data or rejects with error\n */\nvar promiseRequest = exports.promiseRequest = function promiseRequest() {\n    var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _parameterError.parameterError)('Url must be provided to make request');\n    var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GET';\n\n\n    return new Promise(function (resolve, reject) {\n\n        var xhttp = new XMLHttpRequest();\n        xhttp.addEventListener('load', function (evt) {\n\n            console.log(xhttp.status);\n\n            if (xhttp.status < 400 && xhttp.status > 0) {\n                try {\n                    return resolve({\n                        data: JSON.parse(xhttp.responseText)\n                    });\n                } catch (e) {\n                    return reject(e);\n                }\n            }\n\n            return reject('Non 200+ response from API');\n        });\n\n        xhttp.addEventListener('error', reject);\n        xhttp.addEventListener('abort', reject);\n        xhttp.open(\"GET\", url, true);\n        xhttp.send();\n    });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvbmV0d29yay9SZXF1ZXN0LmpzPzM1YWIiXSwibmFtZXMiOlsicHJvbWlzZVJlcXVlc3QiLCJ1cmwiLCJtZXRob2QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJlIiwib3BlbiIsInNlbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7Ozs7Ozs7QUFRTyxJQUFNQSwwQ0FBaUIsU0FBakJBLGNBQWlCLEdBQTJGO0FBQUEsUUFBakZDLEdBQWlGLHVFQUEzRSxvQ0FBZ0Isc0NBQWhCLENBQTJFO0FBQUEsUUFBakJDLE1BQWlCLHVFQUFSLEtBQVE7OztBQUVySCxXQUFPLElBQUlDLE9BQUosQ0FBYSxVQUFFQyxPQUFGLEVBQVdDLE1BQVgsRUFBdUI7O0FBRXZDLFlBQUlDLFFBQVEsSUFBSUMsY0FBSixFQUFaO0FBQ0FELGNBQU1FLGdCQUFOLENBQXdCLE1BQXhCLEVBQWdDLGVBQU87O0FBRW5DQyxvQkFBUUMsR0FBUixDQUFhSixNQUFNSyxNQUFuQjs7QUFFQSxnQkFBS0wsTUFBTUssTUFBTixHQUFlLEdBQWYsSUFBc0JMLE1BQU1LLE1BQU4sR0FBZSxDQUExQyxFQUE4QztBQUMxQyxvQkFBSTtBQUNBLDJCQUFPUCxRQUFTO0FBQ1pRLDhCQUFNQyxLQUFLQyxLQUFMLENBQVlSLE1BQU1TLFlBQWxCO0FBRE0scUJBQVQsQ0FBUDtBQUdILGlCQUpELENBSUUsT0FBUUMsQ0FBUixFQUFZO0FBQ1YsMkJBQU9YLE9BQVFXLENBQVIsQ0FBUDtBQUNIO0FBQ0o7O0FBRUQsbUJBQU9YLE9BQVEsNEJBQVIsQ0FBUDtBQUVILFNBaEJEOztBQWtCQUMsY0FBTUUsZ0JBQU4sQ0FBd0IsT0FBeEIsRUFBaUNILE1BQWpDO0FBQ0FDLGNBQU1FLGdCQUFOLENBQXdCLE9BQXhCLEVBQWlDSCxNQUFqQztBQUNBQyxjQUFNVyxJQUFOLENBQVcsS0FBWCxFQUFrQmhCLEdBQWxCLEVBQXVCLElBQXZCO0FBQ0FLLGNBQU1ZLElBQU47QUFFSCxLQTFCTSxDQUFQO0FBMkJILENBN0JNIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJhbWV0ZXJFcnJvciB9IGZyb20gJy4uL3V0aWwvcGFyYW1ldGVyRXJyb3IuanMnO1xuXG4vKipcbiAqIFZlcnkgc2ltcGxlIGluLWJ1aWx0IGRhdGEgcmVxdWVzdCBmdW5jdGlvbmFsaXR5IGZvciBmaWx0ZXJzLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgd2l0aCB5b3VyIG93biBkYXRhXG4gKiBmZXRjaGluZyBsYXllci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gY2FsbCB0byBmZXRjaCBkYXRhXG4gKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIGdldFxuICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggZGF0YSBvciByZWplY3RzIHdpdGggZXJyb3JcbiAqL1xuZXhwb3J0IGNvbnN0IHByb21pc2VSZXF1ZXN0ID0gZnVuY3Rpb24oIHVybCA9IHBhcmFtZXRlckVycm9yKCAnVXJsIG11c3QgYmUgcHJvdmlkZWQgdG8gbWFrZSByZXF1ZXN0JyApLCBtZXRob2QgPSAnR0VUJyApIHtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLCByZWplY3QgKSA9PiB7XG5cbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhodHRwLmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgZXZ0ID0+IHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coIHhodHRwLnN0YXR1cyApO1xuXG4gICAgICAgICAgICBpZiAoIHhodHRwLnN0YXR1cyA8IDQwMCAmJiB4aHR0cC5zdGF0dXMgPiAwICkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnBhcnNlKCB4aHR0cC5yZXNwb25zZVRleHQgKVxuICAgICAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCggZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCggJ05vbiAyMDArIHJlc3BvbnNlIGZyb20gQVBJJyApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICB4aHR0cC5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCByZWplY3QgKVxuICAgICAgICB4aHR0cC5hZGRFdmVudExpc3RlbmVyKCAnYWJvcnQnLCByZWplY3QgKVxuICAgICAgICB4aHR0cC5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHhodHRwLnNlbmQoKTtcblxuICAgIH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpYi9qcy9uZXR3b3JrL1JlcXVlc3QuanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n")},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n/**\n * Throw an error when a parameter is wrongly missed out from the function call\n * @param  {String} message message to display in error\n * @throws {Error}\n */\nvar parameterError = exports.parameterError = function parameterError(message) {\n  throw new Error("Parameter Error " + message);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvanMvdXRpbC9wYXJhbWV0ZXJFcnJvci5qcz83YzI3Il0sIm5hbWVzIjpbInBhcmFtZXRlckVycm9yIiwibWVzc2FnZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7OztBQUtPLElBQU1BLDBDQUFpQixTQUFqQkEsY0FBaUIsQ0FBVUMsT0FBVixFQUFvQjtBQUM5QyxRQUFNLElBQUlDLEtBQUosc0JBQStCRCxPQUEvQixDQUFOO0FBQ0gsQ0FGTSIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaHJvdyBhbiBlcnJvciB3aGVuIGEgcGFyYW1ldGVyIGlzIHdyb25nbHkgbWlzc2VkIG91dCBmcm9tIHRoZSBmdW5jdGlvbiBjYWxsXG4gKiBAcGFyYW0gIHtTdHJpbmd9IG1lc3NhZ2UgbWVzc2FnZSB0byBkaXNwbGF5IGluIGVycm9yXG4gKiBAdGhyb3dzIHtFcnJvcn1cbiAqL1xuZXhwb3J0IGNvbnN0IHBhcmFtZXRlckVycm9yID0gZnVuY3Rpb24oIG1lc3NhZ2UgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCBgUGFyYW1ldGVyIEVycm9yICR7IG1lc3NhZ2UgfWAgKTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saWIvanMvdXRpbC9wYXJhbWV0ZXJFcnJvci5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n')}]);!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.clipboard=t():e.clipboard=t()}("undefined"!=typeof self?self:this,function(){return i={},r.m=n=[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(a,s,o,l){return new(o||(o=Promise))(function(e,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new o(function(e){e(t.value)}).then(n,i)}r((l=l.apply(a,s||[])).next())})},r=this&&this.__generator||function(n,i){var r,a,s,e,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,a=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){o.label=t[1];break}if(6===t[0]&&o.label<s[1]){o.label=s[1],s=t;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(t);break}s[2]&&o.ops.pop(),o.trys.pop();continue}t=i.call(n,o)}catch(e){t=[6,e],a=0}finally{r=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.DT=a.DT;var s=function(e){},o=!0,l=function(){(console.warn||console.log).apply(console,arguments)}.bind("[clipboard-polyfill]"),u="text/plain";function c(e){s=e}function d(){o=!1,a.suppressDTWarnings()}function h(n){return i(this,void 0,void 0,function(){var t;return r(this,function(e){if(o&&!n.getData(u)&&l("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),T()){if(function(e){var t=n.getData(u);if(void 0===t)throw"No `text/plain` value was specified.";return window.clipboardData.setData("Text",t)}())return[2];throw"Copying failed, possibly because the user rejected it."}if(I(n))return s("regular execCopy worked"),[2];if(-1<navigator.userAgent.indexOf("Edge"))return s('UA "Edge" => assuming success'),[2];if(C(document.body,n))return s("copyUsingTempSelection worked"),[2];if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var n=C(t,e);return document.body.removeChild(t),n}(n))return s("copyUsingTempElem worked"),[2];if(void 0!==(t=n.getData(u))&&function(e){s("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var n=t;t.attachShadow&&(s("Using shadow DOM."),n=t.attachShadow({mode:"open"}));var i=document.createElement("span");i.innerText=e,n.appendChild(i),document.body.appendChild(t),_(i);var r=document.execCommand("copy");return B(),document.body.removeChild(t),r}(t))return s("copyTextUsingDOM worked"),[2];throw"Copy command failed."})})}function f(t){return i(this,void 0,void 0,function(){return r(this,function(e){return navigator.clipboard&&navigator.clipboard.writeText?(s("Using `navigator.clipboard.writeText()`."),[2,navigator.clipboard.writeText(t)]):[2,h(A(t))]})})}function g(){return i(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return t=A,[4,p()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})}function p(){return i(this,void 0,void 0,function(){return r(this,function(e){if(navigator.clipboard&&navigator.clipboard.readText)return s("Using `navigator.clipboard.readText()`."),[2,navigator.clipboard.readText()];if(T())return s("Reading text using IE strategy."),[2,function(){return i(this,void 0,void 0,function(){var t;return r(this,function(e){if(""===(t=window.clipboardData.getData("Text")))throw"Empty clipboard or could not read plain text from clipboard";return[2,t]})})}()];throw"Read is not supported in your browser."})})}t.setDebugLog=c,t.suppressWarnings=d,t.write=h,t.writeText=f,t.read=g,t.readText=p;var m=!1;function y(){m||(o&&l('The deprecated default object of `clipboard-polyfill` was called. Please switch to `import * as clipboard from "clipboard-polyfill"` and see https://github.com/lgarron/clipboard-polyfill/issues/101 for more info.'),m=!0)}var v=function(){function e(){}return e.setDebugLog=function(e){return y(),c(e)},e.suppressWarnings=function(){return y(),d()},e.write=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return y(),[2,h(t)]})})},e.writeText=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return y(),[2,f(t)]})})},e.read=function(){return i(this,void 0,void 0,function(){return r(this,function(e){return y(),[2,g()]})})},e.readText=function(){return i(this,void 0,void 0,function(){return r(this,function(e){return y(),[2,p()]})})},e.DT=a.DT,e}();t.default=v;var b=function(){this.success=!1};function I(e){var t=new b,n=function(i,e,r){s("listener called"),i.success=!0,e.forEach(function(e,t){var n=r.clipboardData;n.setData(t,e),t===u&&n.getData(t)!=e&&(s("setting text/plain failed"),i.success=!1)}),r.preventDefault()}.bind(this,t,e);document.addEventListener("copy",n);try{document.execCommand("copy")}finally{document.removeEventListener("copy",n)}return t.success}function C(e,t){_(e);var n=I(t);return B(),n}function _(e){var t=document.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}function B(){var e=document.getSelection();e&&e.removeAllRanges()}function A(e){var t=new a.DT;return t.setData(u,e),t}function T(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["text/plain","text/html"],r=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),a=!0;t.suppressDTWarnings=function(){a=!1};var s=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){a&&-1===i.indexOf(e)&&r("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}();t.DT=s}],r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0);function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,function(v,d){"use strict";v=v&&v.hasOwnProperty("default")?v.default:v,d=d&&d.hasOwnProperty("default")?d.default:d;var u=[],h=function t(n){function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r("log",a,t)}var r,o,l,a="info";return o=n,r=function(e,t,n){var i=l.levels[t],r=new RegExp("^("+i+")$");if("log"!==e&&n.unshift(e.toUpperCase()+":"),n.unshift(o+":"),u){u.push([].concat(n));var a=u.length-1e3;u.splice(0,0<a?a:0)}if(v.console){var s=v.console[e];s||"debug"!==e||(s=v.console.info||v.console.log),s&&i&&r.test(e)&&s[Array.isArray(n)?"apply":"call"](v.console,n)}},(l=i).createLogger=function(e){return t(n+": "+e)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},i.level=function(e){if("string"==typeof e){if(!i.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');a=e}return a},(i.history=function(){return u?[].concat(u):[]}).filter=function(t){return(u||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},i.history.clear=function(){u&&(u.length=0)},i.history.disable=function(){null!==u&&(u.length=0,u=null)},i.history.enable=function(){null===u&&(u=[])},i.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("error",a,t)},i.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("warn",a,t)},i.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("debug",a,t)},i}("VIDEOJS"),f=h.createLogger;function e(e,t){return e(t={exports:{}},t.exports),t.exports}var r=e(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.apply(this,arguments)}e.exports=t}),t=Object.prototype.toString,a=function(e){return o(e)?Object.keys(e):[]};function s(t,n){a(t).forEach(function(e){return n(t[e],e)})}function g(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Object.assign?r.apply(void 0,[n].concat(t)):(t.forEach(function(e){e&&s(e,function(e,t){n[t]=e})}),n)}function o(e){return!!e&&"object"==typeof e}function l(e){return o(e)&&"[object Object]"===t.call(e)&&e.constructor===Object}function i(e,t){if(!e||!t)return"";if("function"!=typeof v.getComputedStyle)return"";var n=v.getComputedStyle(e);return n?n.getPropertyValue(t)||n[t]:""}function c(e){return"string"==typeof e&&Boolean(e.trim())}function n(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function p(){return d===v.document}function m(e){return o(e)&&1===e.nodeType}function y(){try{return v.parent!==v.self}catch(e){return!0}}function b(i){return function(e,t){if(!c(e))return d[i](null);c(t)&&(t=d.querySelector(t));var n=m(t)?t:d;return n[i]&&n[i](e)}}function I(e,n,t,i){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===t&&(t={});var r=d.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(h.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),r.setAttribute(e,t)):"textContent"===e?C(r,t):r[e]!==t&&(r[e]=t)}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),i&&N(r,i),r}function C(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function _(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function B(e,t){return n(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function A(e,t){return e.classList?e.classList.add(t):B(e,t)||(e.className=(e.className+" "+t).trim()),e}function T(e,t){return e.classList?e.classList.remove(t):(n(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function S(e,t,n){var i=B(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?A(e,t):T(e,t),e}function U(n,i){Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function F(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,i=n.length-1;0<=i;i--){var r=n[i].name,a=n[i].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function k(e,t){return e.getAttribute(t)}function w(e,t,n){e.setAttribute(t,n)}function x(e,t){e.removeAttribute(t)}function E(){d.body.focus(),d.onselectstart=function(){return!1}}function Q(){d.onselectstart=function(){return!0}}function G(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(i(e,"height"))),n.width||(n.width=parseFloat(i(e,"width"))),n}}function R(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=d.documentElement,i=d.body,r=n.clientLeft||i.clientLeft||0,a=v.pageXOffset||i.scrollLeft,s=t.left+a-r,o=n.clientTop||i.clientTop||0,l=v.pageYOffset||i.scrollTop,u=t.top+l-o;return{left:Math.round(s),top:Math.round(u)}}function L(e,t){var n={},i=R(e),r=e.offsetWidth,a=e.offsetHeight,s=i.top,o=i.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-l+a)/a)),n.x=Math.max(0,Math.min(1,(u-o)/r)),n}function V(e){return o(e)&&3===e.nodeType}function Z(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function O(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),m(e)||V(e)?e:"string"==typeof e&&/\S/.test(e)?d.createTextNode(e):void 0}).filter(function(e){return e})}function N(t,e){return O(e).forEach(function(e){return t.appendChild(e)}),t}function W(e,t){return N(Z(e),t)}function D(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var X,P=b("querySelector"),M=b("querySelectorAll"),H=Object.freeze({isReal:p,isEl:m,isInFrame:y,createEl:I,textContent:C,prependTo:_,hasClass:B,addClass:A,removeClass:T,toggleClass:S,setAttributes:U,getAttributes:F,getAttribute:k,setAttribute:w,removeAttribute:x,blockTextSelection:E,unblockTextSelection:Q,getBoundingClientRect:G,findPosition:R,getPointerPosition:L,isTextNode:V,emptyEl:Z,normalizeContent:O,appendContent:N,insertContent:W,isSingleLeftClick:D,$:P,$$:M}),Y=!1,j=function(){if(p()&&!1!==X.options.autoSetup){var e=Array.prototype.slice.call(d.getElementsByTagName("video")),t=Array.prototype.slice.call(d.getElementsByTagName("audio")),n=Array.prototype.slice.call(d.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&0<i.length)for(var r=0,a=i.length;r<a;r++){var s=i[r];if(!s||!s.getAttribute){z(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&X(s)}else Y||z(1)}};function z(e,t){t&&(X=t),v.setTimeout(j,e)}function J(){Y=!0,v.removeEventListener("load",J)}function q(e){var t=d.createElement("style");return t.className=e,t}function K(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}p()&&("complete"===d.readyState?J():v.addEventListener("load",J));var $,ee=3;function te(){return ee++}v.WeakMap||($=function(){function e(){this.vdata="vdata"+Math.floor(v.performance&&v.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||te();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];h("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var ne,ie=v.WeakMap?new WeakMap:new $;function re(e,t){if(ie.has(e)){var n=ie.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&ie.delete(e)}}function ae(t,n,e,i){e.forEach(function(e){t(n,e,i)})}function se(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var i=e||v.event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||d),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=d.documentElement,s=d.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var oe=function(){if("boolean"!=typeof ne){ne=!1;try{var e=Object.defineProperty({},"passive",{get:function(){ne=!0}});v.addEventListener("test",null,e),v.removeEventListener("test",null,e)}catch(e){}}return ne},le=["touchstart","touchmove"];function ue(s,e,t){if(Array.isArray(e))return ae(ue,s,e,t);ie.has(s)||ie.set(s,{});var o=ie.get(s);if(o.handlers||(o.handlers={}),o.handlers[e]||(o.handlers[e]=[]),t.guid||(t.guid=te()),o.handlers[e].push(t),o.dispatcher||(o.disabled=!1,o.dispatcher=function(e,t){if(!o.disabled){e=se(e);var n=o.handlers[e.type];if(n)for(var i=n.slice(0),r=0,a=i.length;r<a&&!e.isImmediatePropagationStopped();r++)try{i[r].call(s,e,t)}catch(e){h.error(e)}}}),1===o.handlers[e].length)if(s.addEventListener){var n=!1;oe()&&-1<le.indexOf(e)&&(n={passive:!0}),s.addEventListener(e,o.dispatcher,n)}else s.attachEvent&&s.attachEvent("on"+e,o.dispatcher)}function ce(e,t,n){if(ie.has(e)){var i=ie.get(e);if(i.handlers){if(Array.isArray(t))return ae(ce,e,t,n);var r=function(e,t){i.handlers[t]=[],re(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);re(e,t)}else r(e,t)}else for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(e,o)}}}function de(e,t,n){var i=ie.has(e)?ie.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=se(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)de.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){ie.has(t.target)||ie.set(t.target,{});var a=ie.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function he(e,t,n){if(Array.isArray(t))return ae(he,e,t,n);function i(){ce(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||te(),ue(e,t,i)}function fe(e,t,n){function i(){ce(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||te(),ue(e,t,i)}function ge(e,t,n){t.guid||(t.guid=te());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i}function pe(t,n){var i=v.performance.now();return function(){var e=v.performance.now();n<=e-i&&(t.apply(void 0,arguments),i=e)}}function me(){}var ye,ve=Object.freeze({fixEvent:se,on:ue,off:ce,trigger:de,one:he,any:fe});function be(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function Ie(e){if(!e.nodeName&&!Te(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function Ce(e){if(!be(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function _e(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function Be(e,t){var n,i,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return r=a?(n=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(n=t[0],i=t[1],t[2]),Ie(n),Ce(i),_e(r),{isTargetingSelf:a,target:n,type:i,listener:r=ge(e,r)}}function Ae(e,t,n,i){Ie(e),e.nodeName?ve[t](e,n,i):e[t](n,i)}me.prototype.allowedEvents_={},me.prototype.addEventListener=me.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},ue(this,e,t),this.addEventListener=n},me.prototype.removeEventListener=me.prototype.off=function(e,t){ce(this,e,t)},me.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},he(this,e,t),this.addEventListener=n},me.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},fe(this,e,t),this.addEventListener=n},me.prototype.dispatchEvent=me.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=se(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),de(this,e)},me.prototype.queueTrigger=function(e){var t=this;ye=ye||new Map;var n=e.type||e,i=ye.get(this);i||(i=new Map,ye.set(this,i));var r=i.get(n);i.delete(n),v.clearTimeout(r);var a=v.setTimeout(function(){0===i.size&&(i=null,ye.delete(t)),t.trigger(e)},0);i.set(n,a)};var Te=function(t){return t instanceof me||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},Se={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Be(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(Ae(s,"on",o,l),!a){var u=function(){return e.off(s,o,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Ae(this,"on","dispose",u),Ae(s,"on","dispose",c)}},one:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Be(this,t),a=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;if(a)Ae(s,"one",o,l);else{var u=function e(){r.off(s,o,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];l.apply(null,n)};u.guid=l.guid,Ae(s,"one",o,u)}},any:function(){for(var r=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Be(this,t),a=i.isTargetingSelf,s=i.target,o=i.type,l=i.listener;if(a)Ae(s,"any",o,l);else{var u=function e(){r.off(s,o,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];l.apply(null,n)};u.guid=l.guid,Ae(s,"any",o,u)}},off:function(e,t,n){if(!e||be(e))ce(this.eventBusEl_,e,t);else{var i=e,r=t;Ie(i),Ce(r),_e(n),n=ge(this,n),this.off("dispose",n),i.nodeName?(ce(i,r,n),ce(i,"dispose",n)):Te(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){return de(this.eventBusEl_,e,t)}};function Ue(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=I("span",{className:"vjs-event-bus"});return g(e,Se),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),v.setTimeout(function(){e.eventBusEl_=null},0)}),e}var Fe={state:{},setState:function(e){var n,i=this;return"function"==typeof e&&(e=e()),s(e,function(e,t){i.state[t]!==e&&((n=n||{})[t]={from:i.state[t],to:e}),i.state[t]=e}),n&&Te(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function ke(e,t){return g(e,Fe),e.state=g({},e.state,t),"function"==typeof e.handleStateChanged&&Te(e)&&e.on("statechanged",e.handleStateChanged),e}function we(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function xe(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function Ee(){for(var n={},e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(e){e&&s(e,function(e,t){l(e)?(l(n[t])||(n[t]={}),n[t]=Ee(n[t],e)):n[t]=e})}),n}var Qe=function(){function l(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ee({},this.options_),t=this.options_=Ee(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+te()}var r;this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&Ue(this,{eventBusKey:this.el_?"el_":null}),ke(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},v.Set||(r=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}()),this.setTimeoutIds_=v.Set?new Set:new r,this.setIntervalIds_=v.Set?new Set:new r,this.rafIds_=v.Set?new Set:new r,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var e=l.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ie.has(this.el_)&&ie.delete(this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(e){return e&&(this.options_=Ee(this.options_,e)),this.options_},e.el=function(){return this.el_},e.createEl=function(e,t,n){return I(e,t,n)},e.localize=function(e,r,t){void 0===t&&(t=e);var n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[n],s=n&&n.split("-")[0],o=i&&i[s],l=t;return a&&a[e]?l=a[e]:o&&o[e]&&(l=o[e]),r&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var n=r[t-1],i=n;return void 0===n&&(i=e),i})),l},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(e){return this.childIndex_[e]},e.getChild=function(e){if(e)return this.childNameIndex_[e]},e.addChild=function(e,t,n){var i,r;if(void 0===t&&(t={}),void 0===n&&(n=this.children_.length),"string"==typeof e){r=xe(e);var a=t.componentClass||r;t.name=r;var s=l.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(r=r||i.name&&xe(i.name()))&&(this.childNameIndex_[r]=i,this.childNameIndex_[we(r)]=i),"function"==typeof i.el&&i.el()){var o=null;this.children_[n+1]&&this.children_[n+1].el_&&(o=this.children_[n+1].el_),this.contentEl().insertBefore(i.el(),o)}return i},e.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[xe(e.name())]=null,this.childNameIndex_[we(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.initChildren=function(){var r=this,i=this.options_.children;if(i){var e,a=this.options_,n=l.getComponent("Tech");(e=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,n;return n="string"==typeof e?i[t=e]||r.options_[t]||{}:(t=e.name,e),{name:t,opts:n}}).filter(function(e){var t=l.getComponent(e.opts.componentClass||xe(e.name));return t&&!n.isTech(t)}).forEach(function(e){var t=e.name,n=e.opts;if(void 0!==a[t]&&(n=a[t]),!1!==n){!0===n&&(n={}),n.playerOptions=r.options_.playerOptions;var i=r.addChild(t,n);i&&(r[t]=i)}})}},e.buildCSSClass=function(){return""},e.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.$=function(e,t){return P(e,t||this.contentEl())},e.$$=function(e,t){return M(e,t||this.contentEl())},e.hasClass=function(e){return B(this.el_,e)},e.addClass=function(e){A(this.el_,e)},e.removeClass=function(e){T(this.el_,e)},e.toggleClass=function(e,t){S(this.el_,e,t)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(e){return k(this.el_,e)},e.setAttribute=function(e,t){w(this.el_,e,t)},e.removeAttribute=function(e){x(this.el_,e)},e.width=function(e,t){return this.dimension("width",e,t)},e.height=function(e,t){return this.dimension("height",e,t)},e.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+xe(e)],10)},e.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=i(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+xe(e);t=this.el_[n]}return t},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},e.handleKeyPress=function(e){this.handleKeyDown(e)},e.emitTapEvents=function(){var i,t=0,r=null;function e(){i=!1}this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=v.performance.now(),i=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)i=!1;else if(r){var t=e.touches[0].pageX-r.pageX,n=e.touches[0].pageY-r.pageY;10<Math.sqrt(t*t+n*n)&&(i=!1)}}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===i&&v.performance.now()-t<200&&(e.preventDefault(),this.trigger("tap"))})},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,n=ge(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){n(),this.clearInterval(t),t=this.setInterval(n,250)});var e=function(e){n(),this.clearInterval(t)};this.on("touchmove",n),this.on("touchend",e),this.on("touchcancel",e)}},e.setTimeout=function(e,t){var n,i=this;return e=ge(this,e),this.clearTimersOnDispose_(),n=v.setTimeout(function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n},e.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),v.clearTimeout(e)),e},e.setInterval=function(e,t){e=ge(this,e),this.clearTimersOnDispose_();var n=v.setInterval(e,t);return this.setIntervalIds_.add(n),n},e.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),v.clearInterval(e)),e},e.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=ge(this,e),t=v.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},e.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),v.cancelAnimationFrame(e)),e):this.clearTimeout(e)},e.clearTimersOnDispose_=function(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],n=e[1];i[t].forEach(i[n],i)}),i.clearingTimersOnDispose_=!1}))},l.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n=l.getComponent("Tech"),i=n&&n.isTech(t),r=l===t||l.prototype.isPrototypeOf(t.prototype);if(i||!r)throw new Error('Illegal component, "'+e+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=xe(e),l.components_||(l.components_={});var a=l.getComponent("Player");if("Player"===e&&a&&a.players){var s=a.players,o=Object.keys(s);if(s&&0<o.length&&o.map(function(e){return s[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return l.components_[e]=t,l.components_[we(e)]=t},l.getComponent=function(e){if(e&&l.components_)return l.components_[e]},l}();Qe.prototype.supportsRaf_="function"==typeof v.requestAnimationFrame&&"function"==typeof v.cancelAnimationFrame,Qe.registerComponent("Component",Qe);var Ge,Re,Le,Ve,Ze=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},Oe=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t},Ne=v.navigator&&v.navigator.userAgent||"",We=/AppleWebKit\/([\d.]+)/i.exec(Ne),De=We?parseFloat(We.pop()):null,Xe=/iPod/i.test(Ne),Pe=(Ge=Ne.match(/OS (\d+)_/i))&&Ge[1]?Ge[1]:null,Me=/Android/i.test(Ne),He=function(){var e=Ne.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Ye=Me&&He<5&&De<537,je=/Firefox/i.test(Ne),ze=/Edge/i.test(Ne),Je=!ze&&(/Chrome/i.test(Ne)||/CriOS/i.test(Ne)),qe=(Re=Ne.match(/(Chrome|CriOS)\/(\d+)/))&&Re[2]?parseFloat(Re[2]):null,Ke=(!(Ve=(Le=/MSIE\s(\d+)\.\d/.exec(Ne))&&parseFloat(Le[1]))&&/Trident\/7.0/i.test(Ne)&&/rv:11.0/.test(Ne)&&(Ve=11),Ve),$e=/Safari/i.test(Ne)&&!Je&&!Me&&!ze,et=/Windows/i.test(Ne),tt=p()&&("ontouchstart"in v||v.navigator.maxTouchPoints||v.DocumentTouch&&v.document instanceof v.DocumentTouch),nt=/iPad/i.test(Ne)||$e&&tt&&!/iPhone/i.test(Ne),it=/iPhone/i.test(Ne)&&!nt,rt=it||nt||Xe,at=($e||rt)&&!Je,st=Object.freeze({IS_IPOD:Xe,IOS_VERSION:Pe,IS_ANDROID:Me,ANDROID_VERSION:He,IS_NATIVE_ANDROID:Ye,IS_FIREFOX:je,IS_EDGE:ze,IS_CHROME:Je,CHROME_VERSION:qe,IE_VERSION:Ke,IS_SAFARI:$e,IS_WINDOWS:et,TOUCH_ENABLED:tt,IS_IPAD:nt,IS_IPHONE:it,IS_IOS:rt,IS_ANY_SAFARI:at});function ot(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function lt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ot.bind(null,"start",0,e),end:ot.bind(null,"end",1,e)}}function ut(e,t){return Array.isArray(e)?lt(e):void 0===e||void 0===t?lt():lt([[e,t]])}function ct(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=ut(0,0));for(var a=0;a<e.length;a++)n=e.start(a),t<(i=e.end(a))&&(i=t),r+=i-n;return r/t}for(var dt,ht={prefixed:!0},ft=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],gt=ft[0],pt=0;pt<ft.length;pt++)if(ft[pt][1]in d){dt=ft[pt];break}if(dt){for(var mt=0;mt<dt.length;mt++)ht[gt[mt]]=dt[mt];ht.prefixed=dt[0]!==gt[0]}function yt(e){if(e instanceof yt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:o(e)&&("number"==typeof e.code&&(this.code=e.code),g(this,e)),this.message||(this.message=yt.defaultMessages[this.code]||"")}yt.prototype.code=0,yt.prototype.message="",yt.prototype.status=null,yt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],yt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var vt=0;vt<yt.errorTypes.length;vt++)yt[yt.errorTypes[vt]]=vt,yt.prototype[yt.errorTypes[vt]]=vt;function bt(e){return null!=e&&"function"==typeof e.then}function It(e){bt(e)&&e.then(null,function(e){})}function Ct(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,n){return i[t]&&(e[t]=i[t]),e},{cues:i.cues&&Array.prototype.map.call(i.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}var _t=e(function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var n,i=String(e);return(n=r[i.toLowerCase()])?n:(n=a[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var i;if(i=r[t.toLowerCase()])return i===n;if(i=a[t.toLowerCase()])return i===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=t.names=t.title={};for(i in r)s[r[i]]=i;for(var o in a)r[o]=a[o]}),Bt=(_t.code,_t.codes,_t.aliases,_t.names,_t.title,"vjs-modal-dialog"),At=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=I("div",{className:Bt+"-content"},{role:"document"}),n.descEl_=I("p",{className:Bt+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),C(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function(){return Bt+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),W(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},t.empty=function(){this.trigger("beforemodalempty"),Z(this.contentEl()),this.trigger("modalempty")},t.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.conditionalFocus_=function(){var e=d.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(e){if(e.stopPropagation(),_t.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(_t.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}d.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},t.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof v.HTMLAnchorElement||e instanceof v.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof v.HTMLInputElement||e instanceof v.HTMLSelectElement||e instanceof v.HTMLTextAreaElement||e instanceof v.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof v.HTMLIFrameElement||e instanceof v.HTMLObjectElement||e instanceof v.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},e}(Qe);At.prototype.options_={pauseOnOpen:!0,temporary:!0},Qe.registerComponent("ModalDialog",At);var Tt=function(i){function e(e){var t;void 0===e&&(e=[]),(t=i.call(this)||this).tracks_=[],Object.defineProperty(Ze(t),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<e.length;n++)t.addTrack(e[n]);return t}Oe(e,i);var t=e.prototype;return t.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},t.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},t.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(me);for(var St in Tt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Tt.prototype.allowedEvents_)Tt.prototype["on"+St]=null;function Ut(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function Ft(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function kt(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=d.createElement("a");n.href=e;var i,r=""===n.host&&"file:"!==n.protocol;r&&((i=d.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),d.body.appendChild(i));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=v.location.protocol),r&&d.body.removeChild(i),a}function wt(e){if(!e.match(/^https?:\/\//)){var t=d.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}function xt(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""}function Et(e,t){void 0===t&&(t=v.location);var n=kt(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host}var Qt=function(i){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].enabled){Ut(e,e[n]);break}return(t=i.call(this,e)||this).changing_=!1,t}Oe(e,i);var t=e.prototype;return t.addTrack=function(e){var t=this;e.enabled&&Ut(this,e),i.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Ut(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},t.removeTrack=function(e){i.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Tt),Gt=function(i){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].selected){Ft(e,e[n]);break}return(t=i.call(this,e)||this).changing_=!1,Object.defineProperty(Ze(t),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),t}Oe(e,i);var t=e.prototype;return t.addTrack=function(e){var t=this;e.selected&&Ft(this,e),i.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,Ft(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},t.removeTrack=function(e){i.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Tt),Rt=function(n){function e(){return n.apply(this,arguments)||this}Oe(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this;n.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Tt),Lt=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Vt=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(e){var t=this.length||0,n=0,i=e.length;function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<i)for(n=t;n<i;n++)r.call(this,n)},e.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(),Zt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ot={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Nt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Wt={disabled:"disabled",hidden:"hidden",showing:"showing"},Dt=function(a){function e(e){var t;function n(e){Object.defineProperty(Ze(t),e,{get:function(){return i[e]},set:function(){}})}void 0===e&&(e={}),t=a.call(this)||this;var i={id:e.id||"vjs_track_"+te(),kind:e.kind||"",label:e.label||"",language:e.language||""};for(var r in i)n(r);return t}return Oe(e,a),e}(me),Xt=Object.freeze({parseUrl:kt,getAbsoluteURL:wt,getFileExtension:xt,isCrossOrigin:Et}),Pt=function(e){var t=Mt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Mt=Object.prototype.toString,Ht=function(e){var r={};return e&&e.trim().split("\n").forEach(function(e){var t=e.indexOf(":"),n=e.slice(0,t).trim().toLowerCase(),i=e.slice(t+1).trim();void 0===r[n]?r[n]=i:Array.isArray(r[n])?r[n].push(i):r[n]=[r[n],i]}),r},Yt=Jt,jt=Jt;function zt(e,t,n){var i=e;return Pt(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function Jt(e,t,n){return qt(t=zt(e,t,n))}function qt(i){if(void 0===i.callback)throw new Error("callback argument missing");var r=!1,a=function(e,t,n){r||(r=!0,i.callback(e,t,n))};function t(e){return clearTimeout(o),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,p)}function e(){if(!s){var e;clearTimeout(o),e=i.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var t=p,n=null;return 0!==e?(t={body:function(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),g)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(t.headers=Ht(l.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),a(n,t,t.body)}}var n,s,o,l=i.xhr||null,u=(l=l||(i.cors||i.useXDR?new Jt.XDomainRequest:new Jt.XMLHttpRequest)).url=i.uri||i.url,c=l.method=i.method||"GET",d=i.body||i.data,h=l.headers=i.headers||{},f=!!i.sync,g=!1,p={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:l};if("json"in i&&!1!==i.json&&(g=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===i.json?d:i.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(e,0)},l.onload=e,l.onerror=t,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=t,l.open(c,u,!f,i.username,i.password),f||(l.withCredentials=!!i.withCredentials),!f&&0<i.timeout&&(o=setTimeout(function(){if(!s){s=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},i.timeout)),l.setRequestHeader)for(n in h)h.hasOwnProperty(n)&&l.setRequestHeader(n,h[n]);else if(i.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(l.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(l),l.send(d||null),l}function Kt(e,t){var n=new v.WebVTT.Parser(v,v.vttjs,v.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<i.length&&(v.console&&v.console.groupCollapsed&&v.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(e){return h.error(e)}),v.console&&v.console.groupEnd&&v.console.groupEnd()),n.flush()}function $t(e,i){var t={uri:e},n=Et(e);n&&(t.cors=n),Yt(t,ge(this,function(e,t,n){if(e)return h.error(e,t);i.loaded_=!0,"function"!=typeof v.WebVTT?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return Kt(n,i);h.error("vttjs failed to load, stopping trying to process "+i.src)}):Kt(n,i)}))}Jt.XMLHttpRequest=v.XMLHttpRequest||function(){},Jt.XDomainRequest="withCredentials"in new Jt.XMLHttpRequest?Jt.XMLHttpRequest:v.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(i){Jt["delete"===i?"del":i]=function(e,t,n){return(t=zt(e,t,n)).method=i.toUpperCase(),qt(t)}}),Yt.default=jt;var en=function(u){function e(e){var t;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Ee(e,{kind:Nt[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=Wt[n.mode]||"disabled",r=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden"),(t=u.call(this,n)||this).tech_=n.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks;var a=new Vt(t.cues_),s=new Vt(t.activeCues_),o=!1,l=ge(Ze(t),function(){this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==i&&t.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),Object.defineProperties(Ze(t),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return i},set:function(e){var t=this;Wt[e]&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||$t(this.src,this),"disabled"!==i?this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),n.src?(t.src=n.src,t.preload_||(t.loaded_=!0),(t.preload_||r||"subtitles"!==n.kind&&"captions"!==n.kind)&&$t(t.src,Ze(t))):t.loaded_=!0,t}Oe(e,u);var t=e.prototype;return t.addCue=function(e){var t=e;if(v.vttjs&&!(e instanceof v.vttjs.VTTCue)){for(var n in t=new v.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},e}(Dt);en.prototype.allowedEvents_={cuechange:"cuechange"};var tn=function(r){function e(e){var t;void 0===e&&(e={});var n=Ee(e,{kind:Ot[e.kind]||""});t=r.call(this,n)||this;var i=!1;return Object.defineProperty(Ze(t),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(t.enabled=n.enabled),t.loaded_=!0,t}return Oe(e,r),e}(Dt),nn=function(r){function e(e){var t;void 0===e&&(e={});var n=Ee(e,{kind:Zt[e.kind]||""});t=r.call(this,n)||this;var i=!1;return Object.defineProperty(Ze(t),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return Oe(e,r),e}(Dt),rn=function(r){function e(e){var t,n;void 0===e&&(e={}),t=r.call(this)||this;var i=new en(e);return t.kind=i.kind,t.src=i.src,t.srclang=i.language,t.label=i.label,t.default=i.default,Object.defineProperties(Ze(t),{readyState:{get:function(){return n}},track:{get:function(){return i}}}),n=0,i.addEventListener("loadeddata",function(){n=2,t.trigger({type:"load",target:Ze(t)})}),t}return Oe(e,r),e}(me);rn.prototype.allowedEvents_={load:"load"},rn.NONE=0,rn.LOADING=1,rn.LOADED=2,rn.ERROR=3;var an={audio:{ListClass:Qt,TrackClass:tn,capitalName:"Audio"},video:{ListClass:Gt,TrackClass:nn,capitalName:"Video"},text:{ListClass:Rt,TrackClass:en,capitalName:"Text"}};Object.keys(an).forEach(function(e){an[e].getterName=e+"Tracks",an[e].privateName=e+"Tracks_"});var sn={remoteText:{ListClass:Rt,TrackClass:en,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Lt,TrackClass:rn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},on=r({},an,sn);sn.names=Object.keys(sn),an.names=Object.keys(an),on.names=[].concat(sn.names).concat(an.names);var ln=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return un.prototype=e,new un};function un(){}function cn(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function dn(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function hn(){this.values=ln(null)}function fn(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);2===s.length&&t(s[0],s[1])}}function gn(t,e,s){var n=t;function i(){var e=dn(t);if(null===e)throw new cn(cn.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}if(r(),e.startTime=i(),r(),"--\x3e"!==t.substr(0,3))throw new cn(cn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),r(),e.endTime=i(),r(),function(e,t){var a=new hn;fn(e,function(e,t){switch(e){case"region":for(var n=s.length-1;0<=n;n--)if(s[n].id===t){a.set(e,s[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),r=i[0];a.integer(e,r),a.percent(e,r)&&a.set("snapToLines",!1),a.alt(e,r,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start","center","end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start","center","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical","");try{t.line=a.get("line","auto")}catch(e){}t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100);try{t.align=a.get("align","center")}catch(e){t.align=a.get("align","middle")}try{t.position=a.get("position","auto")}catch(e){t.position=a.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=a.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(t,e)}((cn.prototype=ln(Error.prototype)).constructor=cn).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},hn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var pn=d.createElement("textarea"),mn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},yn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},vn={v:"title",lang:"lang"},bn={rt:"ruby"};function In(a,n){function e(){if(!n)return null;var e,t=n.match(/^([^<]*)(<[^>]*>?)?/);return e=t[1]?t[1]:t[2],n=n.substr(e.length),e}function t(e,t){var n=mn[e];if(!n)return null;var i=a.document.createElement(n),r=vn[e];return r&&t&&(i[r]=t.trim()),i}for(var i,r,s,o,l=a.document.createElement("div"),u=l,c=[];null!==(i=e());)if("<"!==i[0])u.appendChild(a.document.createTextNode((r=i,pn.innerHTML=r,r=pn.textContent,pn.textContent="",r)));else{if("/"===i[1]){c.length&&c[c.length-1]===i.substr(2).replace(">","")&&(c.pop(),u=u.parentNode);continue}var d,h=dn(i.substr(1,i.length-2));if(h){d=a.document.createProcessingInstruction("timestamp",h),u.appendChild(d);continue}var f=i.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f)continue;if(!(d=t(f[1],f[3])))continue;if(s=u,bn[(o=d).localName]&&bn[o.localName]!==s.localName)continue;if(f[2]){var g=f[2].split(".");g.forEach(function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(yn.hasOwnProperty(n)){var i=t?"background-color":"color",r=yn[n];d.style[i]=r}}),d.className=g.join(" ")}c.push(f[1]),u.appendChild(d),u=d}return l}var Cn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function _n(e){for(var t=0;t<Cn.length;t++){var n=Cn[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function Bn(){}function An(e,t,n){Bn.call(this),this.cue=t,this.cueDiv=In(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?i[e.length=0]:n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(t,e);n=a(t);)for(var i=0;i<n.length;i++)if(_n(n.charCodeAt(i)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Tn(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function Sn(e,t,o,l){var n=new Tn(t),i=t.cue,r=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(i),a=[];if(i.snapToLines){var s;switch(i.vertical){case"":a=["+y","-y"],s="height";break;case"rl":a=["+x","-x"],s="width";break;case"lr":a=["-x","+x"],s="width"}var u=n.lineHeight,c=u*Math.round(r),d=o[s]+u,h=a[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),r<0&&(c+=""===i.vertical?o.height:o.width,a=a.reverse()),n.move(h,c)}else{var f=n.lineHeight/o.height*100;switch(i.lineAlign){case"center":r-=f/2;break;case"end":r-=f}switch(i.vertical){case"":t.applyStyles({top:t.formatStyle(r,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(r,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(r,"%")})}a=["+y","-x","+x","-y"],n=new Tn(t)}var g=function(e,t){for(var n,i=new Tn(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(o,t[a])||e.within(o)&&e.overlapsAny(l);)e.move(t[a]);if(e.within(o))return e;var s=e.intersectPercentage(o);s<r&&(n=new Tn(e),r=s),e=new Tn(i)}return n||i}(n,a);t.move(g.toCSSCompatValues(o))}function Un(){}Bn.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Bn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(An.prototype=ln(Bn.prototype)).constructor=An,Tn.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Tn.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Tn.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Tn.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Tn.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Tn.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Tn.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Tn.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},Un.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Un.convertCueToDOMTree=function(e,t){return e&&t?In(e,t):null},Un.processCues=function(i,r,e){if(!i||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=i.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",e.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(r)){var s=[],o=Tn.getSimpleBoxPosition(a),l={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var e,t,n=0;n<r.length;n++)t=r[n],e=new An(i,t,l),a.appendChild(e.div),Sn(0,e,o,s),t.displayState=e.div,s.push(Tn.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)a.appendChild(r[t].displayState)},(Un.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof cn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,a=this;function n(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),n}e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var r=(i=n()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new cn(cn.Errors.BadSignature);a.state="HEADER"}for(var s=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(s?s=!1:i=n(),a.state){case"HEADER":/:/.test(i)?(t=i).match(/X-TIMESTAMP-MAP/)?fn(t,function(e,t){switch(e){case"X-TIMESTAMP-MAP":n=t,i=new hn,fn(n,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",dn(t))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}var n,i},/=/):fn(t,function(e,t){switch(e){case"Region":!function(e){var r=new hn;if(fn(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new hn;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new(a.vttjs.VTTRegion||a.window.VTTRegion);t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),a.onregion&&a.onregion(t),a.regionList.push({id:r.get("id"),region:t})}}(t)}},/:/):i||(a.state="ID");continue;case"NOTE":i||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){a.state="NOTE";break}if(!i)continue;a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,"");try{a.cue.align="center"}catch(e){a.cue.align="middle"}if(a.state="CUE",-1===i.indexOf("--\x3e")){a.cue.id=i;continue}case"CUE":try{gn(i,a.cue,a.regionList)}catch(e){a.reportOrThrowError(e),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(s=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(a.state="ID");continue}}}catch(e){a.reportOrThrowError(e),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new cn(cn.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Fn=Un,kn={"":1,lr:1,rl:1},wn={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function xn(e){return"string"==typeof e&&!!wn[e.toLowerCase()]&&e.toLowerCase()}function En(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,s=t,o=n,l=null,u="",c=!0,d="auto",h="start",f="auto",g="auto",p=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t,n="string"==typeof(t=e)&&!!kn[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=xn(e);t&&(h=t,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return f},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=xn(e);t&&(g=t,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");p=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(e){var t=xn(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=t,this.hasBeenReset=!0}}}),this.displayState=void 0}En.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Qn=En,Gn={"":!0,up:!0};function Rn(e){return"number"==typeof e&&0<=e&&e<=100}function Ln(){var t=100,n=3,i=0,r=100,a=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Rn(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!Rn(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!Rn(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!Rn(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!Rn(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t,n="string"==typeof(t=e)&&!!Gn[t.toLowerCase()]&&t.toLowerCase();!1===n||(o=n)}}})}var Vn=e(function(e){var t=e.exports={WebVTT:Fn,VTTCue:Qn,VTTRegion:Ln};v.vttjs=t,v.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=v.VTTCue,a=v.VTTRegion;t.shim=function(){v.VTTCue=n,v.VTTRegion=i},t.restore=function(){v.VTTCue=r,v.VTTRegion=a},v.VTTCue||t.shim()});Vn.WebVTT,Vn.VTTCue,Vn.VTTRegion;var Zn=function(t){function n(n,e){var i;return void 0===n&&(n={}),void 0===e&&(e=function(){}),n.reportTouchActivity=!1,(i=t.call(this,null,n,e)||this).hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),on.names.forEach(function(e){var t=on[e];n&&n[t.getterName]&&(i[t.privateName]=n[t.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==n.preloadTextTracks,i.autoRemoteTextTracks_=new on.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Oe(n,t);var e=n.prototype;return e.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},e.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ge(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},e.onDurationChange=function(e){this.duration_=this.duration()},e.buffered=function(){return ut(0,0)},e.bufferedPercent=function(){return ct(this.buffered(),this.duration_)},e.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function(){this.clearTracks(an.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],n=t.length;n--;){var i=t[n];"text"===e&&r.removeRemoteTextTrack(i),t.removeTrack(i)}})},e.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},e.reset=function(){},e.error=function(e){return void 0!==e&&(this.error_=new yt(e),this.trigger("error")),this.error_},e.played=function(){return this.hasStarted_?ut(0,0):ut()},e.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function(){var r=this;an.names.forEach(function(e){function t(){r.trigger(e+"trackchange")}var n=an[e],i=r[n.getterName]();i.addEventListener("removetrack",t),i.addEventListener("addtrack",t),r.on("dispose",function(){i.removeEventListener("removetrack",t),i.removeEventListener("addtrack",t)})})},e.addWebVttScript_=function(){var e=this;if(!v.WebVTT)if(d.body.contains(this.el())){if(!this.options_["vtt.js"]&&l(Vn)&&0<Object.keys(Vn).length)return void this.trigger("vttjsloaded");var t=d.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),v.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},e.emulateTextTracks=function(){function t(e){return i.addTrack(e.track)}function n(e){return i.removeTrack(e.track)}var e=this,i=this.textTracks(),r=this.remoteTextTracks();function a(){return e.trigger("texttrackchange")}function s(){a();for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}r.on("addtrack",t),r.on("removetrack",n),this.addWebVttScript_(),s(),i.addEventListener("change",s),i.addEventListener("addtrack",s),i.addEventListener("removetrack",s),this.on("dispose",function(){r.off("addtrack",t),r.off("removetrack",n),i.removeEventListener("change",s),i.removeEventListener("addtrack",s),i.removeEventListener("removetrack",s);for(var e=0;e<i.length;e++)i[e].removeEventListener("cuechange",a)})},e.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var s=new on.text.TrackClass(r);return a.addTrack(s),s}(this,e,t,n)},e.createRemoteTextTrack=function(e){var t=Ee(e,{tech:this});return new sn.remoteTextEl.TrackClass(t)},e.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(h.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)}),i},e.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},e.getVideoPlaybackQuality=function(){return{}},e.requestPictureInPicture=function(){var e=this.options_.Promise||v.Promise;if(e)return e.reject()},e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},n.canPlayType=function(){return""},n.canPlaySource=function(e,t){return n.canPlayType(e.type)},n.isTech=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=xe(e),n.techs_[e]=t,n.techs_[we(e)]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t},n.getTech=function(e){if(e)return n.techs_&&n.techs_[e]?n.techs_[e]:(e=xe(e),v&&v.videojs&&v.videojs[e]?(h.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),v.videojs[e]):void 0)},n}(Qe);on.names.forEach(function(e){var t=on[e];Zn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Zn.prototype.featuresVolumeControl=!0,Zn.prototype.featuresMuteControl=!0,Zn.prototype.featuresFullscreenResize=!1,Zn.prototype.featuresPlaybackRate=!1,Zn.prototype.featuresProgressEvents=!1,Zn.prototype.featuresSourceset=!1,Zn.prototype.featuresTimeupdateEvents=!1,Zn.prototype.featuresNativeTextTracks=!1,Zn.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var n=r.sourceHandlers;n=n||(r.sourceHandlers=[]),void 0===t&&(t=n.length),n.splice(t,0,e)},r.canPlayType=function(e){for(var t,n=r.sourceHandlers||[],i=0;i<n.length;i++)if(t=n[i].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var n=r.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(e,t))return n[i];return null},r.canPlaySource=function(e,t){var n=r.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:h.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Qe.registerComponent("Tech",Zn),Zn.registerTech("Tech",Zn),Zn.defaultTechOrder_=[];var On={},Nn={},Wn={};function Dn(e,t,n){e.setTimeout(function(){return function n(i,e,r,a,s,o){void 0===i&&(i={}),void 0===e&&(e=[]),void 0===s&&(s=[]),void 0===o&&(o=!1);var t=e,l=t[0],u=t.slice(1);if("string"==typeof l)n(i,On[l],r,a,s,o);else if(l){var c=function(e,t){var n=Nn[e.id()],i=null;if(null==n)return i=t(e),Nn[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],s=a[0],o=a[1];s===t&&(i=o)}return null===i&&(i=t(e),n.push([t,i])),i}(a,l);if(!c.setSource)return s.push(c),n(i,u,r,a,s,o);c.setSource(g({},i),function(e,t){if(e)return n(i,u,r,a,s,o);s.push(c),n(t,i.type===t.type?u:On[t.type],r,a,s,o)})}else u.length?n(i,u,r,a,s,o):o?r(i,s):n(i,On["*"],r,a,s,!0)}(t,On[t.type],n,e)},1)}function Xn(e,t,n,i){void 0===i&&(i=null);var r="call"+xe(n),a=e.reduce(Yn(r),i),s=a===Wn,o=s?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,o,s),o}var Pn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Mn={setCurrentTime:1,setMuted:1,setVolume:1},Hn={play:1,pause:1};function Yn(n){return function(e,t){return e===Wn?Wn:t[n]?t[n](e):e}}function jn(e){void 0===e&&(e="");var t=xt(e);return zn[t.toLowerCase()]||""}var zn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Jn(e){if(!e.type){var t=jn(e.src);t&&(e.type=t)}return e}var qn=function(u){function e(e,t,n){var i,r=Ee({createEl:!1},t);if(i=u.call(this,e,r,n)||this,t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var a=0,s=t.playerOptions.techOrder;a<s.length;a++){var o=xe(s[a]),l=Zn.getTech(o);if(o||(l=Qe.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}return i}return Oe(e,u),e}(Qe);Qe.registerComponent("MediaLoader",qn);var Kn=function(r){function e(e,t){var n;return(n=r.call(this,e,t)||this).emitTapEvents(),n.enable(),n}Oe(e,r);var t=e.prototype;return t.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&h.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=g({role:"button"},n),this.tabIndex_=t.tabIndex;var i=r.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(i),i},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(e){return this.controlTextEl_=I("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,C(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},t.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(e){_t.isEventKey(e,"Space")||_t.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,e)},e}(Qe);Qe.registerComponent("ClickableComponent",Kn);var $n=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update(),e.on("posterchange",ge(Ze(n),n.update)),n}Oe(e,i);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update),i.prototype.dispose.call(this)},t.createEl=function(){return I("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.handleClick=function(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?It(this.player_.play()):this.player_.pause())},e}(Kn);Qe.registerComponent("PosterImage",$n);var ei="#222",ti={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ni(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function ii(e,t,n){try{e.style[t]=n}catch(e){return}}var ri=function(a){function e(n,e,t){var i;i=a.call(this,n,e,t)||this;var r=ge(Ze(i),i.updateDisplay);return n.on("loadstart",ge(Ze(i),i.toggleDisplay)),n.on("texttrackchange",r),n.on("loadedmetadata",ge(Ze(i),i.preselectTrack)),n.ready(ge(Ze(i),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",r),n.on("playerresize",r),v.addEventListener("orientationchange",r),n.on("dispose",function(){return v.removeEventListener("orientationchange",r)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),i}Oe(e,a);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in i?n=o.kind===a.kind?o:n||o:a&&!a.enabled?t=e=n=null:o.default&&("descriptions"!==o.kind||e?o.kind in i&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof v.WebVTT&&v.WebVTT.processCues(v,[],this.el_)},t.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,s=null,o=e.length;o--;){var l=e[o];"showing"===l.mode&&("descriptions"===l.kind?a=l:s=l)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},t.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r=n[i];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&ii(a.firstChild,"color",ni(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ii(a.firstChild,"backgroundColor",ni(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ii(a,"backgroundColor",ni(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+ei:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+ei:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+ei:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+ei)),t.fontPercent&&1!==t.fontPercent){var s=v.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=ti[t.fontFamily])}}},t.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof v.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);v.WebVTT.processCues(v,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var l=s.activeCues[o].displayState;A(l,"vjs-text-track-cue"),A(l,"vjs-text-track-cue-"+(s.language?s.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},e}(Qe);Qe.registerComponent("TextTrackDisplay",ri);var ai=function(r){function e(){return r.apply(this,arguments)||this}return Oe(e,r),e.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=I("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),i=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i},e}(Qe);Qe.registerComponent("LoadingSpinner",ai);var si=function(t){function e(){return t.apply(this,arguments)||this}Oe(e,t);var n=e.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=g({type:"button"},n);var i=Qe.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(i),i},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return h.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),Qe.prototype.addChild.call(this,e,t)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(e){_t.isEventKey(e,"Space")||_t.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(Kn);Qe.registerComponent("Button",si);var oi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return It(t),void(!this.player_.tech(!0)||(Ke||ze)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var a=function(){return r.focus()};bt(t)?t.then(a,function(){}):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},t.handleKeyDown=function(e){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,e)},t.handleMouseDown=function(e){this.mouseused_=!0},e}(si);oi.prototype.controlText_="Play Video",Qe.registerComponent("BigPlayButton",oi);var li=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).controlText(t&&t.controlText||n.localize("Close")),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(e){_t.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,e)},e}(si);Qe.registerComponent("CloseButton",li);var ui=function(i){function e(e,t){var n;return void 0===t&&(t={}),n=i.call(this,e,t)||this,t.replay=void 0===t.replay||t.replay,n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),t.replay&&n.on(e,"ended",n.handleEnded),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(si);function ci(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(r=i=n="-"),(r=0<r||0<s?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)}ui.prototype.controlText_="Play",Qe.registerComponent("PlayToggle",ui);var di=ci;function hi(e,t){return void 0===t&&(t=e),di(e,t)}var fi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,["timeupdate","ended"],n.updateContent),n.updateTextNode_(),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){var e=this.buildCSSClass(),t=i.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=I("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t},t.dispose=function(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},t.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=hi(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestAnimationFrame(function(){if(t.contentEl_){var e=t.textNode_;t.textNode_=d.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}}))},t.updateContent=function(e){},e}(Qe);fi.prototype.labelText_="Time",fi.prototype.controlText_="Time",Qe.registerComponent("TimeDisplay",fi);var gi=function(e){function t(){return e.apply(this,arguments)||this}Oe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(fi);gi.prototype.labelText_="Current Time",gi.prototype.controlText_="Current Time",Qe.registerComponent("CurrentTimeDisplay",gi);var pi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"durationchange",n.updateContent),n.on(e,"loadstart",n.updateContent),n.on(e,"loadedmetadata",n.updateContent),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},e}(fi);pi.prototype.labelText_="Duration",pi.prototype.controlText_="Duration",Qe.registerComponent("DurationDisplay",pi);var mi=function(e){function t(){return e.apply(this,arguments)||this}return Oe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(Qe);Qe.registerComponent("TimeDivider",mi);var yi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"durationchange",n.updateContent),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var e=i.prototype.createEl.call(this);return e.insertBefore(I("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},e}(fi);yi.prototype.labelText_="Remaining Time",yi.prototype.controlText_="Remaining Time",Qe.registerComponent("RemainingTimeDisplay",yi);var vi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=I("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.dispose=function(){this.contentEl_=null,i.prototype.dispose.call(this)},t.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},e}(Qe);Qe.registerComponent("LiveDisplay",vi);var bi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){var e=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=I("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,i.prototype.dispose.call(this)},e}(si);function Ii(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}bi.prototype.controlText_="Seek to live, currently playing live",Qe.registerComponent("SeekToLive",bi);var Ci=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}Oe(e,i);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t.className=t.className+" vjs-slider",t=g({tabIndex:0},t),n=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),i.prototype.createEl.call(this,e,t,n)},t.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Je||e.preventDefault(),E(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.handleMouseMove=function(e){},t.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Q(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.update=function(){var t=this;if(this.el_&&this.bar){var n=this.getProgress();return n===this.progress_||(this.progress_=n,this.requestAnimationFrame(function(){var e=t.vertical()?"height":"width";t.bar.el().style[e]=(100*n).toFixed(2)+"%"})),n}},t.getProgress=function(){return Number(Ii(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(e){var t=L(this.el_,e);return this.vertical()?t.y:t.x},t.handleKeyDown=function(e){_t.isEventKey(e,"Left")||_t.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):_t.isEventKey(e,"Right")||_t.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,e)},t.handleClick=function(e){e.stopPropagation(),e.preventDefault()},t.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Qe);function _i(e,t){return Ii(e/t*100,0,100).toFixed(2)+"%"}Qe.registerComponent("Slider",Ci);var Bi=function(r){function e(e,t){var n;return(n=r.call(this,e,t)||this).partEls_=[],n.on(e,"progress",n.update),n}Oe(e,r);var t=e.prototype;return t.createEl=function(){var e=r.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),t=I("span",{className:"vjs-control-text"}),n=I("span",{textContent:this.localize("Loaded")}),i=d.createTextNode(": ");return this.percentageEl_=I("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,r.prototype.dispose.call(this)},t.update=function(e){var d=this;this.requestAnimationFrame(function(){var e=d.player_.liveTracker,t=d.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():d.player_.duration(),i=d.player_.bufferedEnd(),r=d.partEls_,a=_i(i,n);d.percent_!==a&&(d.el_.style.width=a,C(d.percentageEl_,a),d.percent_=a);for(var s=0;s<t.length;s++){var o=t.start(s),l=t.end(s),u=r[s];u||(u=d.el_.appendChild(I()),r[s]=u),u.dataset.start===o&&u.dataset.end===l||(u.dataset.start=o,u.dataset.end=l,u.style.left=_i(o,i),u.style.width=_i(l-o,i))}for(var c=r.length;c>t.length;c--)d.el_.removeChild(r[c-1]);r.length=t.length})},e}(Qe);Qe.registerComponent("LoadProgressBar",Bi);var Ai=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=pe(ge(Ze(n),n.update),30),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(e,t,n){var i=G(this.el_),r=G(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=i.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px",this.write(n)}},t.write=function(e){C(this.el_,e)},t.updateTime=function(r,a,s,o){var l=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e,t=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var n=l.player_.liveTracker.liveWindow(),i=n-a*n;e=(i<1?"":"-")+hi(i,n)}else e=hi(s,t);l.update(r,a,e),o&&o()})},e}(Qe);Qe.registerComponent("TimeTooltip",Ai);var Ti=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=pe(ge(Ze(n),n.update),30),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},e}(Qe);Ti.prototype.options_={children:[]},rt||Me||Ti.prototype.options_.children.push("timeTooltip"),Qe.registerComponent("PlayProgressBar",Ti);var Si=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=pe(ge(Ze(n),n.update),30),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,function(){n.el_.style.left=e.width*t+"px"})},e}(Qe);Si.prototype.options_={children:["timeTooltip"]},Qe.registerComponent("MouseTimeDisplay",Si);var Ui=function(a){function e(e,t){var n;return(n=a.call(this,e,t)||this).setEventHandlers_(),n}Oe(e,a);var t=e.prototype;return t.setEventHandlers_=function(){this.update_=ge(this,this.update),this.update=pe(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in d&&"visibilityState"in d&&this.on(d,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(e){d.hidden?this.disableInterval_(e):(this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},t.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(e){var i=this,r=a.prototype.update.call(this);return this.requestAnimationFrame(function(){var e=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),t=i.player_.liveTracker,n=i.player_.duration();t&&t.isLive()&&(n=i.player_.liveTracker.liveCurrentTime()),i.percent_!==r&&(i.el_.setAttribute("aria-valuenow",(100*r).toFixed(2)),i.percent_=r),i.currentTime_===e&&i.duration_===n||(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[hi(e,n),hi(n,n)],"{1} of {2}")),i.currentTime_=e,i.duration_=n),i.bar&&i.bar.update(G(i.el()),i.getProgress())}),r},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},t.handleMouseDown=function(e){D(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function(e){if(D(e)){var t,n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){var r=i.seekableStart(),a=i.liveCurrentTime();if(a<=(t=r+n*i.liveWindow())&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},t.enable=function(){a.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){a.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){a.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?It(this.player_.play()):this.update_()},t.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(e){if(_t.isEventKey(e,"Space")||_t.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(_t.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(0);else if(_t.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(_t(e))){e.preventDefault(),e.stopPropagation();var t=10*(_t.codes[_t(e)]-_t.codes[0])/100;this.player_.currentTime(this.player_.duration()*t)}else _t.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):_t.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,e)},e}(Ci);Ui.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},rt||Me||Ui.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Qe.registerComponent("SeekBar",Ui);var Fi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).handleMouseMove=pe(ge(Ze(n),n.handleMouseMove),30),n.throttledHandleMouseSeek=pe(ge(Ze(n),n.handleMouseSeek),30),n.enable(),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),a=G(r),s=L(r,e).x;s=Ii(0,1,s),i&&i.update(a,s),n&&n.update(a,t.getProgress())}}},t.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.enabled=function(){return this.enabled_},t.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e}(Qe);Fi.prototype.options_={children:["seekBar"]},Qe.registerComponent("ProgressControl",Fi);var ki=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],n.handlePictureInPictureChange),d.pictureInPictureEnabled||n.disable(),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},t.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},t.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(si);ki.prototype.controlText_="Picture-in-Picture",Qe.registerComponent("PictureInPictureToggle",ki);var wi=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"fullscreenchange",n.handleFullscreenChange),!1===d[e.fsApi_.fullscreenEnabled]&&n.disable(),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(si);wi.prototype.controlText_="Fullscreen",Qe.registerComponent("FullscreenToggle",wi);var xi=function(e){function t(){return e.apply(this,arguments)||this}return Oe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Qe);Qe.registerComponent("VolumeLevel",xi);var Ei=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(e){D(e)&&i.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){D(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},e}(Ci);Ei.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Ei.prototype.playerEvent="volumechange",Qe.registerComponent("VolumeBar",Ei);var Qi=function(a){function e(e,t){var n,i,r;return void 0===t&&(t={}),t.vertical=t.vertical||!1,void 0!==t.volumeBar&&!l(t.volumeBar)||(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),n=a.call(this,e,t)||this,i=Ze(n),(r=e).tech_&&!r.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.throttledHandleMouseMove=pe(ge(Ze(n),n.handleMouseMove),30),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Oe(e,a);var t=e.prototype;return t.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},e}(Qe);Qi.prototype.options_={children:["volumeBar"]},Qe.registerComponent("VolumeControl",Qi);var Gi=function(a){function e(e,t){var n,i,r;return n=a.call(this,e,t)||this,i=Ze(n),(r=e).tech_&&!r.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){r.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),n.on(e,["loadstart","volumechange"],n.update),n}Oe(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},t.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(e){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var e=this.player_.volume(),t=3;rt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)T(this.el_,"vjs-vol-"+n);A(this.el_,"vjs-vol-"+t)},t.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(si);Gi.prototype.controlText_="Mute",Qe.registerComponent("MuteToggle",Gi);var Ri=function(i){function e(e,t){var n;return void 0===t&&(t={}),void 0!==t.inline?t.inline=t.inline:t.inline=!0,void 0!==t.volumeControl&&!l(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(n=i.call(this,e,t)||this).on(e,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Oe(e,i);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t.dispose=function(){this.handleMouseOut(),i.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(e){_t.isEventKey(e,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(e){this.addClass("vjs-hover"),ue(d,"keyup",ge(this,this.handleKeyPress))},t.handleMouseOut=function(e){this.removeClass("vjs-hover"),ce(d,"keyup",ge(this,this.handleKeyPress))},t.handleKeyPress=function(e){_t.isEventKey(e,"Esc")&&this.handleMouseOut()},e}(Qe);Ri.prototype.options_={children:["muteToggle","volumeControl"]},Qe.registerComponent("VolumePanel",Ri);var Li=function(i){function e(e,t){var n;return n=i.call(this,e,t)||this,t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=ge(Ze(n),n.handleBlur),n.boundHandleTapClick_=ge(Ze(n),n.handleTapClick),n}Oe(e,i);var t=e.prototype;return t.addEventListenerForItem=function(e){e instanceof Qe&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(e){e instanceof Qe&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),i.prototype.removeChild.call(this,e)},t.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},t.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=I(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ue(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},t.handleBlur=function(e){var t=e.relatedTarget||d.activeElement;if(!this.children().some(function(e){return e.el()===t})){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},t.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var n=e.filter(function(e){return e.el()===t.target})[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},t.handleKeyDown=function(e){_t.isEventKey(e,"Left")||_t.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(_t.isEventKey(e,"Right")||_t.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},t.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},e}(Qe);Qe.registerComponent("Menu",Li);var Vi=function(r){function e(e,t){var n;void 0===t&&(t={}),(n=r.call(this,e,t)||this).menuButton_=new si(e,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var i=si.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+i,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"keydown",n.handleKeyDown),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),ue(d,"keyup",ge(Ze(n),n.handleMenuKeyUp))}),n.on("mouseleave",n.handleMouseLeave),n.on("keydown",n.handleSubmenuKeyDown),n}Oe(e,r);var t=e.prototype;return t.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function(){var e=new Li(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=I("li",{className:"vjs-menu-title",innerHTML:xe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new Qe(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+si.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},t.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(e){this.removeClass("vjs-hover"),ce(d,"keyup",ge(this,this.handleMenuKeyUp))},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(e){_t.isEventKey(e,"Esc")||_t.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),_t.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(_t.isEventKey(e,"Up")||_t.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(e){(_t.isEventKey(e,"Esc")||_t.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},t.handleSubmenuKeyDown=function(e){(_t.isEventKey(e,"Esc")||_t.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),_t.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),rt&&y())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Qe);Qe.registerComponent("MenuButton",Vi);var Zi=function(a){function e(e,t){var n,i=t.tracks;if((n=a.call(this,e,t)||this).items.length<=1&&n.hide(),!i)return Ze(n);var r=ge(Ze(n),n.update);return i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),n.player_.on("ready",r),n.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}),n}return Oe(e,a),e}(Vi);Qe.registerComponent("TrackButton",Zi);var Oi=["Tab","Esc","Up","Down","Right","Left"],Ni=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).selectable=t.selectable,n.isSelected_=t.selected||!1,n.multiSelectable=t.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}Oe(e,i);var t=e.prototype;return t.createEl=function(e,t,n){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),n)},t.handleKeyDown=function(t){Oi.some(function(e){return _t.isEventKey(t,e)})||i.prototype.handleKeyDown.call(this,t)},t.handleClick=function(e){this.selected(!0)},t.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Kn);Qe.registerComponent("MenuItem",Ni);var Wi=function(l){function e(e,t){var i,n,r=t.track,a=e.textTracks();function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Ze(i),t)}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(Ze(i),t)}return t.label=r.label||r.language||"Unknown",t.selected="showing"===r.mode,(i=l.call(this,e,t)||this).track=r,i.kinds=(t.kinds||[t.kind||i.track.kind]).filter(Boolean),e.on(["loadstart","texttrackchange"],s),a.addEventListener("change",s),a.addEventListener("selectedlanguagechange",o),i.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),a.removeEventListener("change",s),a.removeEventListener("selectedlanguagechange",o)}),void 0===a.onchange&&i.on(["tap","click"],function(){if("object"!=typeof v.Event)try{n=new v.Event("change")}catch(e){}n||(n=d.createEvent("Event")).initEvent("change",!0,!0),a.dispatchEvent(n)}),i.handleTracksChange(),i}Oe(e,l);var t=e.prototype;return t.handleClick=function(e){var t=this.track,n=this.player_.textTracks();if(l.prototype.handleClick.call(this,e),n)for(var i=0;i<n.length;i++){var r=n[i];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},t.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,l.prototype.dispose.call(this)},e}(Ni);Qe.registerComponent("TextTrackMenuItem",Wi);var Di=function(n){function e(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,n.call(this,e,t)||this}Oe(e,n);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},t.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Wi);Qe.registerComponent("OffTextTrackMenuItem",Di);var Xi=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.textTracks(),n.call(this,e,t)||this}return Oe(e,n),e.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Wi),this.label_&&(n=this.label_+" off"),e.push(new Di(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(-1<this.kinds_.indexOf(a.kind)){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},e}(Zi);Qe.registerComponent("TextTrackButton",Xi);var Pi=function(s){function e(e,t){var n,i=t.track,r=t.cue,a=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=a&&a<r.endTime,(n=s.call(this,e,t)||this).track=i,n.cue=r,i.addEventListener("cuechange",ge(Ze(n),n.update)),n}Oe(e,s);var t=e.prototype;return t.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},e}(Ni);Qe.registerComponent("ChaptersTrackMenuItem",Pi);var Mi=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},t.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},t.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(xe(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},t.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new Pi(this.player_,{track:this.track_,cue:r});e.push(a)}return e},e}(Xi);Mi.prototype.kind_="chapters",Mi.prototype.controlText_="Chapters",Qe.registerComponent("ChaptersButton",Mi);var Hi=function(s){function e(e,t,n){var i;i=s.call(this,e,t,n)||this;var r=e.textTracks(),a=ge(Ze(i),i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}Oe(e,s);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},e}(Xi);Hi.prototype.kind_="descriptions",Hi.prototype.controlText_="Descriptions",Qe.registerComponent("DescriptionsButton",Hi);var Yi=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},e}(Xi);Yi.prototype.kind_="subtitles",Yi.prototype.controlText_="Subtitles",Qe.registerComponent("SubtitlesButton",Yi);var ji=function(i){function e(e,t){var n;return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(n=i.call(this,e,t)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}return Oe(e,i),e.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},e}(Wi);Qe.registerComponent("CaptionSettingsMenuItem",ji);var zi=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new ji(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,e)},e}(Xi);zi.prototype.kind_="captions",zi.prototype.controlText_="Captions",Qe.registerComponent("CaptionsButton",zi);var Ji=function(r){function e(){return r.apply(this,arguments)||this}return Oe(e,r),e.prototype.createEl=function(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",r.prototype.createEl.call(this,e,g({innerHTML:i},t),n)},e}(Wi);Qe.registerComponent("SubsCapsMenuItem",Ji);var qi=function(i){function e(e,t){var n;return void 0===t&&(t={}),(n=i.call(this,e,t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(xe(n.label_)),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new ji(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,e,Ji)},e}(Xi);qi.prototype.kinds_=["captions","subtitles"],qi.prototype.controlText_="Subtitles",Qe.registerComponent("SubsCapsButton",qi);var Ki=function(s){function e(e,t){var i,n=t.track,r=e.audioTracks();function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Ze(i),t)}return t.label=n.label||n.language||"Unknown",t.selected=n.enabled,(i=s.call(this,e,t)||this).track=n,i.addClass("vjs-"+n.kind+"-menu-item"),r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}Oe(e,s);var t=e.prototype;return t.createEl=function(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",s.prototype.createEl.call(this,e,g({innerHTML:i},t),n)},t.handleClick=function(e){var t=this.player_.audioTracks();s.prototype.handleClick.call(this,e);for(var n=0;n<t.length;n++){var i=t[n];i.enabled=i===this.track}},t.handleTracksChange=function(e){this.selected(this.track.enabled)},e}(Ni);Qe.registerComponent("AudioTrackMenuItem",Ki);var $i=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.audioTracks(),n.call(this,e,t)||this}Oe(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new Ki(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},e}(Zi);$i.prototype.controlText_="Audio Track",Qe.registerComponent("AudioTrackButton",$i);var er=function(a){function e(e,t){var n,i=t.rate,r=parseFloat(i,10);return t.label=i,t.selected=1===r,t.selectable=!0,t.multiSelectable=!1,(n=a.call(this,e,t)||this).label=i,n.rate=r,n.on(e,"ratechange",n.update),n}Oe(e,a);var t=e.prototype;return t.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(e){this.selected(this.player().playbackRate()===this.rate)},e}(Ni);er.prototype.contentElType="button",Qe.registerComponent("PlaybackRateMenuItem",er);var tr=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}Oe(e,i);var t=e.prototype;return t.createEl=function(){var e=i.prototype.createEl.call(this);return this.labelEl_=I("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function(){this.labelEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},t.createMenu=function(){var e=new Li(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new er(this.player(),{rate:t[n]+"x"}));return e},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>t){i=n[r];break}this.player().playbackRate(i)},t.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},t.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Vi);tr.prototype.controlText_="Playback Rate",Qe.registerComponent("PlaybackRateMenuButton",tr);var nr=function(e){function t(){return e.apply(this,arguments)||this}Oe(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Qe);Qe.registerComponent("Spacer",nr);var ir=function(t){function e(){return t.apply(this,arguments)||this}Oe(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},e}(nr);Qe.registerComponent("CustomControlSpacer",ir);var rr=function(e){function t(){return e.apply(this,arguments)||this}return Oe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Qe);rr.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in d&&rr.prototype.options_.children.splice(rr.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Qe.registerComponent("ControlBar",rr);var ar=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"error",n.open),n}Oe(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},t.content=function(){var e=this.player().error();return e?this.localize(e.message):""},e}(At);ar.prototype.options_=r({},At.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Qe.registerComponent("ErrorDisplay",ar);var sr="vjs-text-track-settings",or=["#000","Black"],lr=["#00F","Blue"],ur=["#0FF","Cyan"],cr=["#0F0","Green"],dr=["#F0F","Magenta"],hr=["#F00","Red"],fr=["#FFF","White"],gr=["#FF0","Yellow"],pr=["1","Opaque"],mr=["0.5","Semi-Transparent"],yr=["0","Transparent"],vr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[or,fr,hr,cr,lr,gr,dr,ur]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[pr,mr,yr]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[fr,or,hr,cr,lr,gr,dr,ur]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[pr,mr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[yr,mr,pr]}};function br(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}vr.windowColor.options=vr.backgroundColor.options;var Ir=function(i){function e(e,t){var n;return t.temporary=!1,(n=i.call(this,e,t)||this).updateDisplay=ge(Ze(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=I("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===t.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),s(vr,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}Oe(e,i);var t=e.prototype;return t.dispose=function(){this.endDialog=null,i.prototype.dispose.call(this)},t.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=vr[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return I("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return I("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return I("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var l,e,u=this;return void 0===(e={})&&(e=0),a(l=vr).reduce(function(e,t){return n=e,i=l[t],r=t,s=u.$(i.selector),o=i.parser,void 0!==(a=br(s.options[s.options.selectedIndex].value,o))&&(n[r]=a),n;var n,i,r,a,s,o},e)},t.setValues=function(n){var i=this;s(vr,function(e,t){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(br(e.options[i].value,n)===t){e.selectedIndex=i;break}}(i.$(e.selector),n[t],e.parser)})},t.setDefaults=function(){var n=this;s(vr,function(e){var t=e.hasOwnProperty("default")?e.default:0;n.$(e.selector).selectedIndex=t})},t.restoreSettings=function(){var e;try{e=JSON.parse(v.localStorage.getItem(sr))}catch(e){h.warn(e)}e&&this.setValues(e)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?v.localStorage.setItem(sr,JSON.stringify(e)):v.localStorage.removeItem(sr)}catch(e){h.warn(e)}}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},e}(At);Qe.registerComponent("TextTrackSettings",Ir);var Cr=function(a){function e(e,t){var n,i=t.ResizeObserver||v.ResizeObserver;null===t.ResizeObserver&&(i=!1);var r=Ee({createEl:!i,reportTouchActivity:!1},t);return(n=a.call(this,e,r)||this).ResizeObserver=t.ResizeObserver||v.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(i,e,t,r){var a;function n(){var e=this,t=arguments,n=function(){n=a=null,i.apply(e,t)};r.clearTimeout(a),a=r.setTimeout(n,100)}return void 0===r&&(r=v),n.cancel=function(){r.clearTimeout(a),a=null},n}(function(){n.resizeHandler()},0,0,Ze(n)),i?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(e.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var e=n.debouncedHandler_,t=n.unloadListener_=function(){ce(this,"resize",e),ce(this,"unload",t),t=null};ue(n.el_.contentWindow,"unload",t),ue(n.el_.contentWindow,"resize",e)}},n.one("load",n.loadListener_)),n}Oe(e,a);var t=e.prototype;return t.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},t.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},e}(Qe);Qe.registerComponent("ResizeManager",Cr);var _r=function(r){function e(e,t){var n,i=Ee({createEl:!1},t);return(n=r.call(this,e,i)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),Ke&&"hidden"in d&&"visibilityState"in d&&n.on(d,"visibilitychange",n.handleVisibilityChange),n}Oe(e,r);var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(d.hidden?this.stopTracking():this.startTracking())},t.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),n=2*this.seekableIncrement_+.07;return e!==1/0&&t<=e-n},t.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e,t,n,i=this.player_.seekable();if(i&&i.length){var r=this.seekableEnd();r!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(r-this.lastSeekEnd_)),3<this.seekableIncrementList_.length&&(this.seekableIncrement_=(e=this.seekableIncrementList_,t=Math.floor(e.length/2),n=[].concat(e).sort(function(e,t){return e-t}),e.length%2!=0?n[t]:(n[t-1]+n[t])/2))),this.pastSeekEnd_=0,this.lastSeekEnd_=r,this.trigger("seekableendchange")),this.pastSeekEnd()>1.5*this.seekableIncrement_?this.pastSeekEnd_=0:this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},t.startTracking=function(){var e=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},t.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},t.stopTracking=function(){this.isTracking()&&this.reset_()},t.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},t.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},t.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){return this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},t.dispose=function(){this.stopTracking(),r.prototype.dispose.call(this)},e}(Qe);function Br(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)}function Ar(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n}function Tr(a){var s=a.el();if(!s.resetSourceWatch_){var t={},e=Ar([a.el(),v.HTMLMediaElement.prototype,v.Element.prototype,Fr],"innerHTML"),n=function(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(s,t);return Br(a),i}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=n(t[e]))}),Object.defineProperty(s,"innerHTML",Ee(e,{set:n(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},a.one("sourceset",s.resetSourceWatch_)}}function Sr(t,n,i,e){function r(e){return Object.defineProperty(t,n,{value:e,enumerable:!0,writable:!0})}void 0===e&&(e=!0);var a={configurable:!0,enumerable:!0,get:function(){var e=i();return r(e),e}};return e&&(a.set=r),Object.defineProperty(t,n,a)}Qe.registerComponent("LiveTracker",_r);var Ur,Fr=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=d.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=d.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",v.Element.prototype.appendChild.call(this,n),this.innerHTML}}),kr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?wt(v.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return v.Element.prototype.setAttribute.call(this,"src",e),e}}),wr=function(c){function o(e,t){var n;n=c.call(this,e,t)||this;var i=e.source,r=!1;if(i&&(n.el_.currentSrc!==i.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(i):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,s=a.length,o=[];s--;){var l=a[s];"track"===l.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),r||n.el_.hasAttribute("crossorigin")||!Et(l.src)||(r=!0)):o.push(l))}for(var u=0;u<o.length;u++)n.el_.removeChild(o[u])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&r&&h.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(tt||it||Ye)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}Oe(o,c);var e=o.prototype;return e.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),o.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},e.setupSourcesetHandling_=function(){!function(i){if(i.featuresSourceset){var r=i.el();if(!r.resetSourceset_){var n=Ar([i.el(),v.HTMLMediaElement.prototype,kr],"src"),a=r.setAttribute,t=r.load;Object.defineProperty(r,"src",Ee(n,{set:function(e){var t=n.set.call(r,e);return i.triggerSourceset(r.src),t}})),r.setAttribute=function(e,t){var n=a.call(r,e,t);return/src/i.test(e)&&i.triggerSourceset(r.src),n},r.load=function(){var e=t.call(r);return Br(i)||(i.triggerSourceset(""),Tr(i)),e},r.currentSrc?i.triggerSourceset(r.currentSrc):Br(i)||Tr(i),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=t,r.setAttribute=a,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}}(this)},e.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){n=[];for(var e=0;e<i.length;e++){var t=i[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}}var n,i=this.textTracks();function r(){for(var e=0;e<n.length;e++){var t=n[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}i.removeEventListener("change",r)}e(),i.addEventListener("change",e),this.on("dispose",function(){return i.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",e),i.removeEventListener("change",r),i.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",e),i.addEventListener("change",e),i.removeEventListener("change",r)})},e.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},e.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function(e){var i=this,t=an[e],r=this.el()[t.getterName],a=this[t.getterName]();if(this["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener){var s={change:function(e){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}},n=function(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,i=0;i<r.length;i++)if(r[i]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(t){var n=s[t];r.addEventListener(t,n),i.on("dispose",function(e){return r.removeEventListener(t,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return i.off("loadstart",n)})}},e.proxyNativeTracks_=function(){var t=this;an.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},e.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),o.disposeMediaElement(e),e=t}else{e=d.createElement("video");var n=Ee({},this.options_.tag&&F(this.options_.tag));tt&&!0===this.options_.nativeControlsForTouch||delete n.controls,U(e,g(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&w(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],r=0;r<i.length;r++){var a=i[r],s=this.options_[a];void 0!==s&&(s?w(e,a,a):x(e,a),e[a]=s)}return e},e.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},e.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){h(e,"Video is not ready. (Video.js)")}},e.duration=function(){var t=this;return this.el_.duration===1/0&&Me&&Je&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},e.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=v.navigator&&v.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},e.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},e.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},e.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},e.reset=function(){o.resetMediaElement(this.el_)},e.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function(e){this.el_.controls=!!e},e.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):c.prototype.addTextTrack.call(this,e,t,n)},e.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,e);var t=d.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},e.addRemoteTextTrack=function(e,t){var n=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},e.removeRemoteTextTrack=function(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},e.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),v.performance&&"function"==typeof v.performance.now?e.creationTime=v.performance.now():v.performance&&v.performance.timing&&"number"==typeof v.performance.timing.navigationStart&&(e.creationTime=v.Date.now()-v.performance.timing.navigationStart),e},o}(Zn);Sr(wr,"TEST_VID",function(){if(p()){var e=d.createElement("video"),t=d.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),wr.isSupported=function(){try{wr.TEST_VID.volume=.5}catch(e){return!1}return!(!wr.TEST_VID||!wr.TEST_VID.canPlayType)},wr.canPlayType=function(e){return wr.TEST_VID.canPlayType(e)},wr.canPlaySource=function(e,t){return wr.canPlayType(e.type)},wr.canControlVolume=function(){try{var e=wr.TEST_VID.volume;return wr.TEST_VID.volume=e/2+.1,e!==wr.TEST_VID.volume}catch(e){return!1}},wr.canMuteVolume=function(){try{var e=wr.TEST_VID.muted;return wr.TEST_VID.muted=!e,wr.TEST_VID.muted?w(wr.TEST_VID,"muted","muted"):x(wr.TEST_VID,"muted"),e!==wr.TEST_VID.muted}catch(e){return!1}},wr.canControlPlaybackRate=function(){if(Me&&Je&&qe<58)return!1;try{var e=wr.TEST_VID.playbackRate;return wr.TEST_VID.playbackRate=e/2+.1,e!==wr.TEST_VID.playbackRate}catch(e){return!1}},wr.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(d.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},wr.supportsNativeTextTracks=function(){return at||rt&&Je},wr.supportsNativeVideoTracks=function(){return!(!wr.TEST_VID||!wr.TEST_VID.videoTracks)},wr.supportsNativeAudioTracks=function(){return!(!wr.TEST_VID||!wr.TEST_VID.audioTracks)},wr.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],n=e[1];Sr(wr.prototype,t,function(){return wr[n]()},!0)}),wr.prototype.movingMediaElementInDOM=!rt,wr.prototype.featuresFullscreenResize=!0,wr.prototype.featuresProgressEvents=!0,wr.prototype.featuresTimeupdateEvents=!0,wr.patchCanPlayType=function(){4<=He&&!je&&!Je&&(Ur=wr.TEST_VID&&wr.TEST_VID.constructor.prototype.canPlayType,wr.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Ur.call(this,e)})},wr.unpatchCanPlayType=function(){var e=wr.TEST_VID.constructor.prototype.canPlayType;return Ur&&(wr.TEST_VID.constructor.prototype.canPlayType=Ur),e},wr.patchCanPlayType(),wr.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},wr.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){wr.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){wr.prototype["set"+xe(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){wr.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){wr.prototype["set"+xe(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){wr.prototype[e]=function(){return this.el_[e]()}}),Zn.withSourceHandlers(wr),wr.nativeSourceHandler={},wr.nativeSourceHandler.canPlayType=function(e){try{return wr.TEST_VID.canPlayType(e)}catch(e){return""}},wr.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return wr.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=xt(e.src);return wr.nativeSourceHandler.canPlayType("video/"+n)}return""},wr.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},wr.nativeSourceHandler.dispose=function(){},wr.registerSourceHandler(wr.nativeSourceHandler),Zn.registerTech("Html5",wr);var xr=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Er={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qr=["tiny","xsmall","small","medium","large","xlarge","huge"],Gr={};Qr.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Gr[e]="vjs-layout-"+t});var Rr={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Lr=function(c){function u(e,t,n){var i;if(e.id=e.id||t.id||"vjs_video_"+te(),(t=g(u.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&r.getAttribute&&(t.language=r.getAttribute("lang"))}else for(var a=e;a&&1===a.nodeType;){if(F(a).hasOwnProperty("lang")){t.language=a.getAttribute("lang");break}a=a.parentNode}if((i=c.call(this,null,t,n)||this).boundDocumentFullscreenChange_=ge(Ze(i),i.documentFullscreenChange_),i.boundFullWindowOnEscKey_=ge(Ze(i),i.fullWindowOnEscKey),i.isFullscreen_=!1,i.log=f(i.id_),i.fsApi_=ht,i.isPosterFromTech_=!1,i.queuedCallbacks_=[],i.isReady_=!1,i.hasStarted_=!1,i.userActive_=!1,!i.options_||!i.options_.techOrder||!i.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(i.tag=e,i.tagAttributes=e&&F(e),i.language(i.options_.language),t.languages){var s={};Object.getOwnPropertyNames(t.languages).forEach(function(e){s[e.toLowerCase()]=t.languages[e]}),i.languages_=s}else i.languages_=u.prototype.options_.languages;i.resetCache_(),i.poster_=t.poster||"",i.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),i.changingSrc_=!1,i.playCallbacks_=[],i.playTerminatedQueue_=[],e.hasAttribute("autoplay")?i.autoplay(!0):i.autoplay(i.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof i[e])throw new Error('plugin "'+e+'" does not exist')}),i.scrubbing_=!1,i.el_=i.createEl(),Ue(Ze(i),{eventBusKey:"el_"}),i.fsApi_.requestFullscreen&&(ue(d,i.fsApi_.fullscreenchange,i.boundDocumentFullscreenChange_),i.on(i.fsApi_.fullscreenchange,i.boundDocumentFullscreenChange_)),i.fluid_&&i.on("playerreset",i.updateStyleEl_);var o=Ee(i.options_);t.plugins&&Object.keys(t.plugins).forEach(function(e){i[e](t.plugins[e])}),i.options_.playerOptions=o,i.middleware_=[],i.initChildren(),i.isAudio("audio"===e.nodeName.toLowerCase()),i.controls()?i.addClass("vjs-controls-enabled"):i.addClass("vjs-controls-disabled"),i.el_.setAttribute("role","region"),i.isAudio()?i.el_.setAttribute("aria-label",i.localize("Audio Player")):i.el_.setAttribute("aria-label",i.localize("Video Player")),i.isAudio()&&i.addClass("vjs-audio"),i.flexNotSupported_()&&i.addClass("vjs-no-flex"),tt&&i.addClass("vjs-touch-enabled"),rt||i.addClass("vjs-workinghover"),u.players[i.id_]=Ze(i);var l="7.7.5".split(".")[0];return i.addClass("vjs-v"+l),i.userActive(!0),i.reportUserActivity(),i.one("play",i.listenForUserActivity_),i.on("stageclick",i.handleStageClick_),i.on("keydown",i.handleKeyDown),i.breakpoints(i.options_.breakpoints),i.responsive(i.options_.responsive),i}Oe(u,c);var e=u.prototype;return e.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),ce(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ce(d,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),u.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Nn[this.id()]=null,on.names.forEach(function(e){var t=on[e],n=i[t.getterName]();n&&n.off&&n.off()}),c.prototype.dispose.call(this)},e.createEl=function(){var t,n=this.tag,e=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=n.parentNode:i||(t=this.el_=c.prototype.createEl.call(this,"div"));var r=F(n);if(i){for(t=this.el_=n,n=this.tag=d.createElement("video");t.children.length;)n.appendChild(t.firstChild);B(t,"video-js")||A(t,"video-js"),t.appendChild(n),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{n[e]=t[e]}catch(e){}})}if(n.setAttribute("tabindex","-1"),r.tabindex="-1",(Ke||Je&&et)&&(n.setAttribute("role","application"),r.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(e){i&&"class"===e||t.setAttribute(e,r[e]),i&&n.setAttribute(e,r[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==v.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=q("vjs-styles-dimensions");var a=P(".vjs-styles-defaults"),s=P("head");s.insertBefore(this.styleEl_,a?a.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=n.getElementsByTagName("a"),l=0;l<o.length;l++){var u=o.item(l);A(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!e&&n.parentNode.insertBefore(t,n),_(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t},e.width=function(e){return this.dimension("width",e)},e.height=function(e){return this.dimension("height",e)},e.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?h.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},e.fluid=function(e){if(void 0===e)return!!this.fluid_;var t;this.fluid_=!!e,Te(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Te(t=function(){this.on("playerreset",this.updateStyleEl_)})?(void 0)():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(void 0))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function(){if(!0!==v.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),K(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=a&&(o.width=a),0<=s&&(o.height=s))}},e.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=xe(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Zn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};on.names.forEach(function(e){var t=on[e];a[t.getterName]=n[t.privateName]}),g(a,this.options_[i]),g(a,this.options_[r]),g(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var s,o,l=Zn.getTech(e);if(!l)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new l(a),this.tech_.ready(ge(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],o=this.tech_,s.forEach(function(e){var t=o.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),o.textTracks(),xr.forEach(function(e){n.on(n.tech_,e,n["handleTech"+xe(e)+"_"])}),Object.keys(Er).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Er[t]+"_"].bind(n),event:e}):n["handleTech"+Er[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||_(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function(){var e,t,n,i=this;on.names.forEach(function(e){var t=on[e];i[t.privateName]=i[t.getterName]()}),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=Ct(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(Ct))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function(e){return void 0===e&&h.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},e.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},e.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.manualAutoplay_=function(t){var i=this;if(this.tech_&&"string"==typeof t){var e,n=function(){var e=i.muted();function t(){i.muted(e)}i.muted(!0),i.playTerminatedQueue_.push(t);var n=i.play();if(bt(n))return n.catch(t)};if("any"===t&&!0!==this.muted()?bt(e=this.play())&&(e=e.catch(n)):e="muted"===t&&!0!==this.muted()?n():this.play(),bt(e))return e.then(function(){i.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){i.trigger({type:"autoplay-failure",autoplay:t})})}},e.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return jn(t)}(this,t)),this.cache_.source=Ee({},e,{src:t,type:n});for(var i=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=F(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},e.handleTechSourceset_=function(e){var n=this;if(!this.changingSrc_){var t=function(e){return n.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===i)||(t=function(){})),t(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var t=n.techGet("currentSrc");n.lastSource_.tech=t,n.updateSourceCaches_(t)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},e.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime();this.on("timeupdate",function e(){n!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",e))})},e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function(){this.options_.starttime&&(h.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function(e){D(e)&&this.controls_&&(this.paused()?It(this.play()):this.pause())},e.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},e.handleTechTap_=function(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function(e){e.preventDefault()},e.handleStageClick_=function(){this.reportUserActivity()},e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),i=d[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},e.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen)},e.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},e.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},e.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},e.handleTechError_=function(){var e=this.tech_.error();this.error(e)},e.handleTechTextData_=function(e,t){var n=null;1<arguments.length&&(n=t),this.trigger("textdata",n)},e.getCache=function(){return this.cache_},e.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},e.techCall_=function(r,a){this.ready(function(){if(r in Mn)return e=this.middleware_,t=this.tech_,i=a,t[n=r](e.reduce(Yn(n),i));var e,t,n,i;if(r in Hn)return Xn(this.middleware_,this.tech_,r,a);try{this.tech_&&this.tech_[r](a)}catch(e){throw h(e),e}},!0)},e.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Pn)return e=this.middleware_,n=this.tech_,i=t,e.reduceRight(Yn(i),n[i]());if(t in Hn)return Xn(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw h("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw h("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw h(e),e}}var e,n,i},e.play=function(){var t=this,e=this.options_.Promise||v.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.play_=function(e){var t=this;void 0===e&&(e=It),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!at&&!rt||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},e.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},e.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},e.pause=function(){this.techCall_("pause")},e.paused=function(){return!1!==this.techGet_("paused")},e.played=function(){return this.techGet_("played")||ut(0,0)},e.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=ut(0,0)),e},e.bufferedPercent=function(){return ct(this.buffered(),this.duration())},e.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},e.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},e.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},e.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},e.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()},e.requestFullscreen=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),i}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},e.exitFullscreen=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=d[this.fsApi_.exitFullscreen]();return t&&t.then(function(){return e.isFullscreen(!1)}),t}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},e.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=d.documentElement.style.overflow,ue(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow="hidden",A(d.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function(e){_t.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,ce(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow=this.docOrigOverflow,T(d.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},e.requestPictureInPicture=function(){if("pictureInPictureEnabled"in d)return this.techGet_("requestPictureInPicture")},e.exitPictureInPicture=function(){if("pictureInPictureEnabled"in d)return d.exitPictureInPicture()},e.handleKeyDown=function(e){var t,n,i=this.options_.userActions;i&&i.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),!t.isContentEditable&&("input"===n?-1!==["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1===["textarea"].indexOf(n))&&("function"==typeof i.hotkeys?i.hotkeys.call(this,e):this.handleHotkeys(e)))},e.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=void 0===n?function(e){return _t.isEventKey(e,"f")}:n,r=t.muteKey,a=void 0===r?function(e){return _t.isEventKey(e,"m")}:r,s=t.playPauseKey,o=void 0===s?function(e){return _t.isEventKey(e,"k")||_t.isEventKey(e,"Space")}:s;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var l=Qe.getComponent("FullscreenToggle");!1!==d[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),Qe.getComponent("MuteToggle").prototype.handleClick.call(this,e)):o.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Qe.getComponent("PlayToggle").prototype.handleClick.call(this,e))},e.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Zn.getTech(r);if(a=a||Qe.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else h.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function(e){function t(e,n,i){var r;return e.some(function(t){return n.some(function(e){if(r=i(t,e))return!0})}),r}function n(e,t){var n=e[0];if(e[1].canPlaySource(t,r.options_[n.toLowerCase()]))return{source:t,tech:n}}var i,r=this,a=this.options_.techOrder.map(function(e){return[e,Zn.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(h.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,a,(i=n,function(e,t){return i(t,e)})):t(a,e,n))||!1},e.src=function(e){var r=this;if(void 0===e)return this.cache_.src||"";var a=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):o(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[Jn({src:e})]:o(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Jn(e)]:[];return e}(e);a.length?(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),Dn(this,a[0],function(e,t){if(r.middleware_=t,r.cache_.sources=a,r.updateSourceCaches_(e),r.src_(e))return 1<a.length?r.src(a.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());var n,i;n=t,i=r.tech_,n.forEach(function(e){return e.setTech&&e.setTech(i)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,xe(t)===xe(n)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){i.changingSrc_=!1})),!1)},e.load=function(){this.techCall_("load")},e.reset=function(){var e=this,t=this.options_.Promise||v.Promise;this.paused()||!t?this.doReset_():It(this.play().then(function(){return e.doReset_()}))},e.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Te(this)&&this.trigger("playerreset")},e.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},e.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},e.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},e.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},e.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},e.currentSource=function(){return this.cache_.source||{}},e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},e.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},e.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},e.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&4===e.code){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new yt(e),this.addClass("vjs-error"),h.error("(CODE:"+this.error_.code+" "+yt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},e.reportUserActivity=function(e){this.userActivity_=!0},e.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function(){function e(e){r(),this.clearInterval(t)}var t,n,i,r=ge(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===i||(n=e.screenX,i=e.screenY,r())}),this.on("mouseup",e),this.on("mouseleave",e);var a,s=this.getChild("controlBar");!s||rt||Me||(s.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},e.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},e.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},e.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},e.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},e.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t=t||e,this.tech_)return this.tech_.removeRemoteTextTrack(t)},e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},e.languages=function(){return Ee(u.prototype.options_.languages,this.languages_)},e.toJSON=function(){var e=Ee(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=Ee(i)).player=void 0,e.tracks[n]=i}return e},e.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new At(this,t);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Qr.length;n++){var i=Qr[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Gr[e]),this.addClass(Gr[i]),this.breakpoint_=i;break}}},e.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},e.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=g({},Rr,e),this.updateCurrentBreakpoint_()),g(this.breakpoints_)},e.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=function(){return Gr[this.breakpoint_]||""},e.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Ee(e);var i=this.cache_.media,r=i.artwork,a=i.poster,s=i.src,o=i.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:jn(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&&o.forEach(function(e){return n.addRemoteTextTrack(e,!1)}),this.ready(t)}},e.getMedia=function(){if(this.cache_.media)return Ee(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:jn(t.poster)}]),t},u.getTagSettings=function(e){var t={sources:[],tracks:[]},n=F(e),i=n["data-setup"];if(B(e,"vjs-fill")&&(n.fill=!0),B(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]}(i||"{}"),a=r[0],s=r[1];a&&h.error(a),g(n,s)}if(g(t,n),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var c=o[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(F(c)):"track"===d&&t.tracks.push(F(c))}return t},e.flexNotSupported_=function(){var e=d.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},u}(Qe);on.names.forEach(function(e){var t=on[e];Lr.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Lr.players={};var Vr=v.navigator;function Zr(e){return Yr.hasOwnProperty(e)}function Or(e){return Zr(e)?Yr[e]:void 0}function Nr(e,t){e[Hr]=e[Hr]||{},e[Hr][t]=!0}function Wr(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)}function Dr(r,a){return a.prototype.name=r,function(){Wr(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Pr(a,[this].concat(t));return this[r]=function(){return i},Wr(this,i.getEventHash()),i}}Lr.prototype.options_={techOrder:Zn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Vr&&(Vr.languages&&Vr.languages[0]||Vr.userLanguage||Vr.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Lr.prototype[e]=function(){return this.techGet_(e)}}),xr.forEach(function(e){Lr.prototype["handleTech"+xe(e)+"_"]=function(){return this.trigger(e)}}),Qe.registerComponent("Player",Lr);var Xr=e(function(n){function i(e,t){return n.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}n.exports=i}),Pr=e(function(i){function r(e,t,n){return function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?i.exports=r=Reflect.construct:i.exports=r=function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Xr(r,n.prototype),r},r.apply(null,arguments)}i.exports=r}),Mr="plugin",Hr="activePlugins_",Yr={},jr=function(){function n(e){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,Ue(this),delete this.trigger,ke(this,this.constructor.defaultState),Nr(e,this.name),this.dispose=ge(this,this.dispose),e.on("dispose",this.dispose)}var e=n.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.trigger=function(e,t){return void 0===t&&(t={}),de(this.eventBusEl_,e,this.getEventHash(t))},e.handleStateChanged=function(e){},e.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Hr][e]=!1,this.player=this.state=null,t[e]=Dr(e,Yr[e])},n.isBasic=function(e){var t="string"==typeof e?Or(e):e;return"function"==typeof t&&!n.prototype.isPrototypeOf(t.prototype)},n.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Zr(e))h.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Lr.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");return Yr[e]=t,e!==Mr&&(n.isBasic(t)?Lr.prototype[e]=function(t,n){function i(){Wr(this,{name:t,plugin:n,instance:null},!0);var e=n.apply(this,arguments);return Nr(this,t),Wr(this,{name:t,plugin:n,instance:e}),e}return Object.keys(n).forEach(function(e){i[e]=n[e]}),i}(e,t):Lr.prototype[e]=Dr(e,t)),t},n.deregisterPlugin=function(e){if(e===Mr)throw new Error("Cannot de-register base plugin.");Zr(e)&&(delete Yr[e],delete Lr.prototype[e])},n.getPlugins=function(e){var n;return void 0===e&&(e=Object.keys(Yr)),e.forEach(function(e){var t=Or(e);t&&((n=n||{})[e]=t)}),n},n.getPluginVersion=function(e){var t=Or(e);return t&&t.VERSION||""},n}();jr.getPlugin=Or,jr.BASE_PLUGIN_NAME=Mr,jr.registerPlugin(Mr,jr),Lr.prototype.usingPlugin=function(e){return!!this[Hr]&&!0===this[Hr][e]},Lr.prototype.hasPlugin=function(e){return!!Zr(e)};var zr=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Jr(e,n,t){var i=Jr.getPlayer(e);if(i)return n&&h.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var r="string"==typeof e?P("#"+zr(e)):e;if(!m(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||h.warn("The element supplied is not included in the DOM"),n=n||{},Jr.hooks("beforesetup").forEach(function(e){var t=e(r,Ee(n));o(t)&&!Array.isArray(t)?n=Ee(n,t):h.error("please return an object in beforesetup hooks")});var a=Qe.getComponent("Player");return i=new a(r,n,t),Jr.hooks("setup").forEach(function(e){return e(i)}),i}if(Jr.hooks_={},Jr.hooks=function(e,t){return Jr.hooks_[e]=Jr.hooks_[e]||[],t&&(Jr.hooks_[e]=Jr.hooks_[e].concat(t)),Jr.hooks_[e]},Jr.hook=function(e,t){Jr.hooks(e,t)},Jr.hookOnce=function(n,e){Jr.hooks(n,[].concat(e).map(function(t){return function e(){return Jr.removeHook(n,e),t.apply(void 0,arguments)}}))},Jr.removeHook=function(e,t){var n=Jr.hooks(e).indexOf(t);return!(n<=-1||(Jr.hooks_[e]=Jr.hooks_[e].slice(),Jr.hooks_[e].splice(n,1),0))},!0!==v.VIDEOJS_NO_DYNAMIC_STYLE&&p()){var qr=P(".vjs-styles-defaults");if(!qr){qr=q("vjs-styles-defaults");var Kr=P("head");Kr&&Kr.insertBefore(qr,Kr.firstChild),K(qr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}z(1,Jr),Jr.VERSION="7.7.5",Jr.options=Lr.prototype.options_,Jr.getPlayers=function(){return Lr.players},Jr.getPlayer=function(e){var t,n=Lr.players;if("string"==typeof e){var i=zr(e),r=n[i];if(r)return r;t=P("#"+i)}else t=e;if(m(t)){var a=t,s=a.player,o=a.playerId;if(s||n[o])return s||n[o]}},Jr.getAllPlayers=function(){return Object.keys(Lr.players).map(function(e){return Lr.players[e]}).filter(Boolean)},Jr.players=Lr.players,Jr.getComponent=Qe.getComponent,Jr.registerComponent=function(e,t){Zn.isTech(t)&&h.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Qe.registerComponent.call(Qe,e,t)},Jr.getTech=Zn.getTech,Jr.registerTech=Zn.registerTech,Jr.use=function(e,t){On[e]=On[e]||[],On[e].push(t)},Object.defineProperty(Jr,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Jr.middleware,"TERMINATOR",{value:Wn,writeable:!1,enumerable:!0}),Jr.browser=st,Jr.TOUCH_ENABLED=tt,Jr.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xr(e,t)}(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},Jr.mergeOptions=Ee,Jr.bind=ge,Jr.registerPlugin=jr.registerPlugin,Jr.deregisterPlugin=jr.deregisterPlugin,Jr.plugin=function(e,t){return h.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),jr.registerPlugin(e,t)},Jr.getPlugins=jr.getPlugins,Jr.getPlugin=jr.getPlugin,Jr.getPluginVersion=jr.getPluginVersion,Jr.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Jr.options.languages=Ee(Jr.options.languages,((n={})[e]=t,n)),Jr.options.languages[e]},Jr.log=h,Jr.createLogger=f,Jr.createTimeRange=Jr.createTimeRanges=ut,Jr.formatTime=hi,Jr.setFormatTime=function(e){di=e},Jr.resetFormatTime=function(){di=ci},Jr.parseUrl=kt,Jr.isCrossOrigin=Et,Jr.EventTarget=me,Jr.on=ue,Jr.one=he,Jr.off=ce,Jr.trigger=de,Jr.xhr=Yt,Jr.TextTrack=en,Jr.AudioTrack=tn,Jr.VideoTrack=nn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Jr[e]=function(){return h.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),H[e].apply(null,arguments)}}),Jr.computedStyle=i,Jr.dom=H,Jr.url=Xt,Jr.defineLazyProperty=Sr;var $r=e(function(e,t){var n,c,i,r,d;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=d.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(u)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d});function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ta(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function na(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i}var ia=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},t.trigger=function(e,t){var n,i,r,a=this.listeners[e];if(a)if(2===arguments.length)for(i=a.length,n=0;n<i;++n)a[n].call(this,t);else for(r=Array.prototype.slice.call(arguments,1),i=a.length,n=0;n<i;++n)a[n].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),ra=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return ta(e,t),e.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},e}(ia),aa=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}ta(e,t);var n=e.prototype;return n.push=function(i){var l,u,c=this;0!==(i=i.trim()).length&&("#"===i[0]?this.tagMappers.reduce(function(e,t){var n=t(i);return n===i?e:e.concat([n])},[i]).forEach(function(e){for(var t=0;t<c.customParsers.length;t++)if(c.customParsers[t].call(c,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),l=/^#EXTM3U/.exec(e))c.trigger("data",{type:"tag",tagType:"m3u"});else{if(l=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return u={type:"tag",tagType:"inf"},l[1]&&(u.duration=parseFloat(l[1])),l[2]&&(u.title=l[2]),void c.trigger("data",u);if(l=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"targetduration"},l[1]&&(u.duration=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"totalduration"},l[1]&&(u.duration=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"version"},l[1]&&(u.version=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return u={type:"tag",tagType:"media-sequence"},l[1]&&(u.number=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return u={type:"tag",tagType:"discontinuity-sequence"},l[1]&&(u.number=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return u={type:"tag",tagType:"playlist-type"},l[1]&&(u.playlistType=l[1]),void c.trigger("data",u);if(l=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"byterange"},l[1]&&(u.length=parseInt(l[1],10)),l[2]&&(u.offset=parseInt(l[2],10)),void c.trigger("data",u);if(l=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return u={type:"tag",tagType:"allow-cache"},l[1]&&(u.allowed=!/NO/.test(l[1])),void c.trigger("data",u);if(l=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(u={type:"tag",tagType:"map"},l[1]){var n=na(l[1]);if(n.URI&&(u.uri=n.URI),n.BYTERANGE){var i=n.BYTERANGE.split("@"),r=i[0],a=i[1];u.byterange={},r&&(u.byterange.length=parseInt(r,10)),a&&(u.byterange.offset=parseInt(a,10))}}c.trigger("data",u)}else if(l=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(u={type:"tag",tagType:"stream-inf"},l[1]){if(u.attributes=na(l[1]),u.attributes.RESOLUTION){var s=u.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),u.attributes.RESOLUTION=o}u.attributes.BANDWIDTH&&(u.attributes.BANDWIDTH=parseInt(u.attributes.BANDWIDTH,10)),u.attributes["PROGRAM-ID"]&&(u.attributes["PROGRAM-ID"]=parseInt(u.attributes["PROGRAM-ID"],10))}c.trigger("data",u)}else{if(l=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return u={type:"tag",tagType:"media"},l[1]&&(u.attributes=na(l[1])),void c.trigger("data",u);if(l=/^#EXT-X-ENDLIST/.exec(e))c.trigger("data",{type:"tag",tagType:"endlist"});else if(l=/^#EXT-X-DISCONTINUITY/.exec(e))c.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(l=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return u={type:"tag",tagType:"program-date-time"},l[1]&&(u.dateTimeString=l[1],u.dateTimeObject=new Date(l[1])),void c.trigger("data",u);if(l=/^#EXT-X-KEY:?(.*)$/.exec(e))return u={type:"tag",tagType:"key"},l[1]&&(u.attributes=na(l[1]),u.attributes.IV&&("0x"===u.attributes.IV.substring(0,2).toLowerCase()&&(u.attributes.IV=u.attributes.IV.substring(2)),u.attributes.IV=u.attributes.IV.match(/.{8}/g),u.attributes.IV[0]=parseInt(u.attributes.IV[0],16),u.attributes.IV[1]=parseInt(u.attributes.IV[1],16),u.attributes.IV[2]=parseInt(u.attributes.IV[2],16),u.attributes.IV[3]=parseInt(u.attributes.IV[3],16),u.attributes.IV=new Uint32Array(u.attributes.IV))),void c.trigger("data",u);if(l=/^#EXT-X-START:?(.*)$/.exec(e))return u={type:"tag",tagType:"start"},l[1]&&(u.attributes=na(l[1]),u.attributes["TIME-OFFSET"]=parseFloat(u.attributes["TIME-OFFSET"]),u.attributes.PRECISE=/YES/.test(u.attributes.PRECISE)),void c.trigger("data",u);if(l=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return u={type:"tag",tagType:"cue-out-cont"},l[1]?u.data=l[1]:u.data="",void c.trigger("data",u);if(l=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return u={type:"tag",tagType:"cue-out"},l[1]?u.data=l[1]:u.data="",void c.trigger("data",u);if(l=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return u={type:"tag",tagType:"cue-in"},l[1]?u.data=l[1]:u.data="",void c.trigger("data",u);c.trigger("data",{type:"tag",data:e.slice(4)})}}}else c.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:i}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0})},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push(function(e){return t.test(e)?n(e):e})},e}(ia);function sa(e){return!!e&&"object"==typeof e}function oa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(t,n){return Object.keys(n).forEach(function(e){Array.isArray(t[e])&&Array.isArray(n[e])?t[e]=t[e].concat(n[e]):sa(t[e])&&sa(n[e])?t[e]=oa(t[e],n[e]):t[e]=n[e]}),t},{})}function la(e){return e.reduce(function(e,t){return e.concat(t)},[])}function ua(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}var ca=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new ra,e.parseStream=new aa,e.lineStream.pipe(e.parseStream);var r,a,s=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),o=[],l={},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var n,i;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((l.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((l.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(l.duration=t.duration),0===t.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:function(e){for(var t=v.atob(e||""),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(a.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else a=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){r={},t.uri&&(r.uri=t.uri),t.byterange&&(r.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(l.attributes||(l.attributes={}),ea(l.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},n=e[t.attributes["GROUP-ID"]],(i={default:/yes/i.test(t.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(i.language=t.attributes.LANGUAGE),t.attributes.URI&&(i.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(i.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(i.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(i.forced=/yes/i.test(t.attributes.FORCED)),n[t.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),l.dateTimeString=t.dateTimeString,l.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){l.cueOut=t.data},"cue-out-cont":function(){l.cueOutCont=t.data},"cue-in":function(){l.cueIn=t.data}}[t.tagType]||function(){}).call(s)},uri:function(){l.uri=t.uri,o.push(l),!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),a&&(l.key=a),l.timeline=c,r&&(l.map=r),l={}},comment:function(){},custom:function(){t.segment?(l.custom=l.custom||{},l.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(s)}),e}ta(e,t);var n=e.prototype;return n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},e}(ia),da="INVALID_NUMBER_OF_PERIOD",ha="DASH_EMPTY_MANIFEST",fa="DASH_INVALID_XML",ga="NO_BASE_URL",pa="SEGMENT_TIME_UNSPECIFIED";function ma(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Na.buildAbsoluteURL(v.location.href,e)),Na.buildAbsoluteURL(e,t))}function ya(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,r=void 0===i?"":i,a=e.range,s=void 0===a?"":a,o=e.indexRange,l=void 0===o?"":o,u={uri:r,resolvedUri:ma(n||"",r)};if(s||l){var c=(s||l).split("-"),d=parseInt(c[0],10),h=parseInt(c[1],10);u.byterange={length:h-d+1,offset:d}}return u}function va(e){var o,t=e.type,n=void 0===t?"static":t,i=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,l=Wa[n](e),u=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(l.start,l.end).map((o=e,function(e,t){var n=o.duration,i=o.timescale,r=void 0===i?1:i,a=o.periodIndex,s=o.startNumber;return{number:(void 0===s?1:s)+e,duration:n/r,timeline:a,time:t*n}}));if("static"===n){var c=u.length-1;u[c].duration=s-i/a*c}return u}function ba(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.timescale,s=void 0===a?1:a,o=e.indexRange,l=void 0===o?"":o,u=e.duration;if(!t)throw new Error(ga);var c=ya({baseUrl:t,source:i.sourceURL,range:i.range}),d=ya({baseUrl:t,source:t,indexRange:l});if(d.map=c,u){var h=va(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/s,d.timeline=0);return d.number=0,[d]}function Ia(e,t,n){for(var i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,l=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),c=[],d=o+t.firstOffset,h=0;h<u.length;h++){var f=t.references[h],g=f.referencedSize,p=ba({baseUrl:n,timescale:l,timeline:a,periodIndex:a,duration:f.subsegmentDuration,sourceDuration:r,indexRange:d+"-"+(d+g-1)})[0];i&&(p.map=i),c.push(p),d+=g}return e.segments=c,e}function Ca(e){return(t=e.reduce(function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");return e[i]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):e[i]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){return e.discontinuityStarts=e.segments.reduce(function(e,t,n){return t.discontinuity&&e.push(n),e},[]),e});var t}function _a(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var i=e[n];if(i.sidx){var r=i.sidx.uri+"-"+(o=(s=i.sidx.byterange).offset+s.length-1,s.offset+"-"+o),a=t[r]&&t[r].sidx;i.sidx&&a&&Ia(i,a,i.sidx.resolvedUri)}}var s,o;return e}function Ba(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),r&&(a.sidx=r),a}function Aa(e,t){for(var n,i,r,a,s,o,l,u,c,d,h,f,g=e.type,p=void 0===g?"static":g,m=e.minimumUpdatePeriod,y=void 0===m?0:m,v=e.media,b=void 0===v?"":v,I=e.sourceDuration,C=e.timescale,_=void 0===C?1:C,B=e.startNumber,A=void 0===B?1:B,T=e.periodIndex,S=[],U=-1,F=0;F<t.length;F++){var k=t[F],w=k.d,x=k.r||0,E=k.t||0;U<0&&(U=E),E&&U<E&&(U=E);var Q=void 0;if(x<0){var G=F+1;Q=G===t.length?"dynamic"===p&&0<y&&0<b.indexOf("$Number$")?(i=U,r=w,a=(n=e).NOW,s=n.clientOffset,o=n.availabilityStartTime,u=void 0===(l=n.timescale)?1:l,d=void 0===(c=n.start)?0:c,f=(a+s)/1e3+(void 0===(h=n.minimumUpdatePeriod)?0:h)-(o+d),Math.ceil((f*u-i)/r)):(I*_-U)/w:(t[G].t-U)/w}else Q=x+1;for(var R=A+S.length+Q,L=A+S.length;L<R;)S.push({number:L,duration:w/_,time:U,timeline:T}),U+=w,L++}return S}function Ta(e,t){return e.replace(Da,(a=t,function(e,t,n,i){if("$$"===e)return"$";if(void 0===a[t])return e;var r=""+a[t];return"RepresentationID"===t?r:(i=n?parseInt(i,10):1)<=r.length?r:new Array(i-r.length+1).join("0")+r}));var a}function Sa(n,e){var t,i,r={RepresentationID:n.id,Bandwidth:n.bandwidth||0},a=n.initialization,s=void 0===a?{sourceURL:"",range:""}:a,o=ya({baseUrl:n.baseUrl,source:Ta(s.sourceURL,r),range:s.range});return(t=n,i=e,t.duration||i?t.duration?va(t):Aa(t,i):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(e){r.Number=e.number,r.Time=e.time;var t=Ta(n.media||"",r);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:ma(n.baseUrl||"",t),map:o,number:e.number}})}function Ua(l,e){var t=l.duration,n=l.segmentUrls,i=void 0===n?[]:n;if(!t&&!e||t&&e)throw new Error(pa);var r,a=i.map(function(e){return n=e,i=(t=l).baseUrl,r=t.initialization,s=ya({baseUrl:i,source:(a=void 0===r?{}:r).sourceURL,range:a.range}),(o=ya({baseUrl:i,source:n.media,range:n.mediaRange})).map=s,o;var t,n,i,r,a,s,o});return t&&(r=va(l)),e&&(r=Aa(l,e)),r.map(function(e,t){if(a[t]){var n=a[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}}).filter(function(e){return e})}function Fa(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=Sa,t=oa(i,r.template)):r.base?(n=ba,t=oa(i,r.base)):r.list&&(n=Ua,t=oa(i,r.list));var a={attributes:i};if(!n)return a;var s=n(t,r.timeline);if(t.duration){var o=t,l=o.duration,u=o.timescale,c=void 0===u?1:u;t.duration=l/c}else s.length?t.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a}function ka(e,t){return ua(e.childNodes).filter(function(e){return e.tagName===t})}function wa(e){return e.textContent.trim()}function xa(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(l||0)}function Ea(e){return e&&e.attributes?ua(e.attributes).reduce(function(e,t){var n=Xa[t.name]||Xa.DEFAULT;return e[t.name]=n(t.value),e},{}):{}}var Qa,Ga,Ra,La,Va,Za,Oa,Na=(Ga=Qa={exports:{}},Ra=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,La=/^([^\/?#]*)(.*)$/,Va=/(?:\/|^)\.(?=\/)/g,Za=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,Oa={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=Oa.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=Oa.normalizePath(i.path),Oa.buildURLFromParts(i)}var r=Oa.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=Oa.normalizePath(r.path),Oa.buildURLFromParts(r)):t;var a=Oa.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=La.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;o.path=Oa.normalizePath(u)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?Oa.normalizePath(r.path):r.path),Oa.buildURLFromParts(o)},parseURL:function(e){var t=Ra.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(Va,"");e.length!==(e=e.replace(Za,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},Ga.exports=Oa,Qa.exports),Wa={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/i))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.start,l=void 0===o?0:o,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,f=(t+n)/1e3,g=i+l,p=f+c-g,m=Math.ceil(p*a/s),y=Math.floor((f-g-h)*a/s),v=Math.floor((f-g)*a/s);return{start:Math.max(0,y),end:Math.min(m,v)}}},Da=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Xa={mediaPresentationDuration:function(e){return xa(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return xa(e)},timeShiftBufferDepth:function(e){return xa(e)},start:function(e){return xa(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?xa(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}};function Pa(e,n){return n.length?la(e.map(function(t){return n.map(function(e){return ma(t,wa(e))})})):e}function Ma(e){var t=ka(e,"SegmentTemplate")[0],n=ka(e,"SegmentList")[0],i=n&&ka(n,"SegmentURL").map(function(e){return oa({tag:"SegmentURL"},Ea(e))}),r=ka(e,"SegmentBase")[0],a=n||t,s=a&&ka(a,"SegmentTimeline")[0],o=n||r||t,l=o&&ka(o,"Initialization")[0],u=t&&Ea(t);u&&l?u.initialization=l&&Ea(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:s&&ka(s,"S").map(function(e){return Ea(e)}),list:n&&oa(Ea(n),{segmentUrls:i,initialization:Ea(l)}),base:r&&oa(Ea(r),{initialization:Ea(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c}function Ha(h,f,g){return function(e){var t=Ea(e),n=Pa(f,ka(e,"BaseURL")),i={role:Ea(ka(e,"Role")[0])},r=oa(h,t,i),a=ka(e,"ContentProtection").reduce(function(e,t){var n=Ea(t),i=as[n.schemeIdUri];if(i){e[i]={attributes:n};var r=ka(t,"cenc:pssh")[0];if(r){var a=wa(r),s=a&&function(e){for(var t=v.atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(a);e[i].pssh=s}}return e},{});Object.keys(a).length&&(r=oa(r,{contentProtection:a}));var s,o,l,u=Ma(e),c=ka(e,"Representation"),d=oa(g,u);return la(c.map((s=r,o=n,l=d,function(e){var t=ka(e,"BaseURL"),n=Pa(o,t),i=oa(s,Ea(e)),r=Ma(e);return n.map(function(e){return{segmentInfo:oa(l,r),attributes:oa(i,{baseUrl:e})}})})))}}function Ya(e){if(""===e)throw new Error(ha);var t=(new v.DOMParser).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(fa);return n}function ja(e,t){return void 0===t&&(t={}),function(e,t){var n;if(void 0===t&&(t={}),!e.length)return{};var o,i=e[0].attributes,r=i.sourceDuration,a=i.minimumUpdatePeriod,s=void 0===a?0:a,l=Ca(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(Ba),u=Ca(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),c=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),d={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:r,playlists:_a(l,t),minimumUpdatePeriod:1e3*s};return u.length&&(d.mediaGroups.AUDIO.audio=function(e,h){var f;void 0===h&&(h={});var t=u.reduce(function(e,t){var n,i,r,a,s,o,l=t.attributes.role&&t.attributes.role.value||"",u=t.attributes.lang||"",c="main";if(u){var d=l?" ("+l+")":"";c=t.attributes.lang+d}return e[c]&&e[c].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[c]={language:u,autoselect:!0,default:"main"===l,playlists:_a([(n=t,r=n.attributes,a=n.segments,s=n.sidx,o={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:a,mediaSequence:a.length?a[0].number:1},r.contentProtection&&(o.contentProtection=r.contentProtection),s&&(o.sidx=s),o)],h),uri:""},void 0===f&&"main"===l&&((f=t).default=!0)),e},{});return f||(t[Object.keys(t)[0]].default=!0),t}(0,t)),c.length&&(d.mediaGroups.SUBTITLES.subs=(void 0===(o=t)&&(o={}),c.reduce(function(e,t){var n,i,r,a,s=t.attributes.lang||"text";return e[s]||(e[s]={language:s,default:!1,autoselect:!1,playlists:_a([(n=t,r=n.attributes,a=n.segments,void 0===a&&(a=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration),{attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(r.type||"static"),timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:a,mediaSequence:a.length?a[0].number:1})],o),uri:""}),e},{}))),d}(function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,r=void 0===i?"":i,a=n.NOW,s=void 0===a?Date.now():a,o=n.clientOffset,l=void 0===o?0:o,u=ka(e,"Period");if(!u.length)throw new Error(da);var c,d,h=Ea(e),f=Pa([r],ka(e,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=s,h.clientOffset=l,la(u.map((c=h,d=f,function(e,t){var n=Pa(d,ka(e,"BaseURL")),i=Ea(e),r=parseInt(i.id,10),a=v.isNaN(r)?t:r,s=oa(c,{periodIndex:a}),o=ka(e,"AdaptationSet"),l=Ma(e);return la(o.map(Ha(s,n,l)))})))}(Ya(e),t).map(Fa),t.sidxMapping)}function za(e){return new Date(1e3*e-20828448e5)}function Ja(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function qa(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])}var Ka,$a,es,ts,ns,is,rs,as={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ss=function(e){return e>>>0},os=ss,ls={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Ka(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:qa(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(qa(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:Ka(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Ka(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:qa(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r}(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=za(n.getUint32(i)),i+=8,r.modificationTime=za(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8):(r.creationTime=za(n.getUint32(i)),i+=4,r.modificationTime=za(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4),r.duration=n.getUint32(i),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:Ka(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Ka(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(n.streamDescriptor=Ka(e.subarray(28))[0]),n},moof:function(e){return{boxes:Ka(e)}},moov:function(e){return{boxes:Ka(e)}},mvex:function(e){return{boxes:Ka(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=za(t.getUint32(n)),n+=8,i.modificationTime=za(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8):(i.creationTime=za(t.getUint32(n)),n+=4,i.modificationTime=za(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4),i.duration=t.getUint32(n),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Ka(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Ka(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return ls.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:os(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=os(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=za(t.getUint32(n)),n+=8,i.modificationTime=za(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8):(i.creationTime=za(t.getUint32(n)),n+=4,i.modificationTime=za(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4),i.duration=t.getUint32(n),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function(e){return{boxes:Ka(e)}},trak:function(e){return{boxes:Ka(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:Ja(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=Ja(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},us={inspect:Ka=function(e){for(var t,n,i,r,a,s=0,o=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);s<e.byteLength;)n=t.getUint32(s),i=qa(e.subarray(s+4,s+8)),r=1<n?s+n:e.byteLength,(a=(ls[i]||function(e){return{data:e}})(e.subarray(s+8,r))).size=n,a.type=i,o.push(a),s=r;return o},textify:$a=function(e,t){var a;return t=t||0,a=new Array(2*t+1).join(" "),e.map(function(r,e){return a+r.type+"\n"+Object.keys(r).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=a+"  "+e+": ",n=r[e];if(n instanceof Uint8Array||n instanceof Uint32Array){var i=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return i?1===i.length?t+"<"+i.join("").slice(1)+">":t+"<\n"+i.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >":t+"<>"}return t+JSON.stringify(n,null,2).split("\n").map(function(e,t){return 0===t?e:a+"  "+e}).join("\n")}).join("\n")+(r.boxes?"\n"+$a(r.boxes,t+1):"")}).join("\n")},parseType:qa,findBox:function e(t,n){var i,r,a,s,o,l=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=os(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=qa(t.subarray(i+4,i+8)),s=1<r?i+r:t.byteLength,a===n[0]&&(1===n.length?l.push(t.subarray(i+8,s)):(o=e(t.subarray(i+8,s),n.slice(1))).length&&(l=l.concat(o))),i=s;return l},parseTraf:ls.traf,parseTfdt:ls.tfdt,parseHdlr:ls.hdlr,parseTfhd:ls.tfhd,parseTrun:ls.trun,parseSidx:ls.sidx},cs=ss,ds=function(e){return("00"+e.toString(16)).slice(-2)};function hs(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var n;return!!a[e]&&(n=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,i,r;if(t=a[e])if(2===arguments.length)for(i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=t.length,n=0;n<i;++n)t[n].apply(this,r)}},this.dispose=function(){a={}}}}es=function(e){return us.findBox(e,["moov","trak"]).reduce(function(e,t){var n,i,r,a,s;return(n=us.findBox(t,["tkhd"])[0])?(i=n[0],a=cs(n[r=0===i?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(s=us.findBox(t,["mdia","mdhd"])[0])?(r=0===(i=s[0])?12:20,e[a]=cs(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),e):null):null},{})},ts=function(r,e){var t,n,i;return t=us.findBox(e,["moof","traf"]),n=[].concat.apply([],t.map(function(i){return us.findBox(i,["tfhd"]).map(function(e){var t,n;return t=cs(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),n=r[t]||9e4,(us.findBox(i,["tfdt"]).map(function(e){var t,n;return t=e[0],n=cs(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=cs(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||1/0)/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},ns=function(e,t){var n,i=us.findBox(t,["moof","traf"]),r=0,a=0;if(i&&i.length)for(var s=us.parseTraf(i[0]),o=0;o<s.boxes.length;o++)"tfhd"===s.boxes[o].type?n=s.boxes[o].trackId:"tfdt"===s.boxes[o].type?r=s.boxes[o].baseMediaDecodeTime:"trun"===s.boxes[o].type&&s.boxes[o].samples.length&&(a=s.boxes[o].samples[0].compositionTimeOffset||0);return(r+a)/(e[n]||9e4)},is=function(e){var t=us.findBox(e,["moov","trak"]),o=[];return t.forEach(function(e){var t=us.findBox(e,["mdia","hdlr"]),s=us.findBox(e,["tkhd"]);t.forEach(function(e,t){var n,i,r=us.parseType(e.subarray(8,12)),a=s[t];"vide"===r&&(i=0===(n=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),o.push(i))})}),o},rs=function(e){var t=us.findBox(e,["moov","trak"]),f=[];return t.forEach(function(e){var t,n,i={},r=us.findBox(e,["tkhd"])[0];r&&(n=(t=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0),i.id=0===n?t.getUint32(12):t.getUint32(20));var a=us.findBox(e,["mdia","hdlr"])[0];if(a){var s=us.parseType(a.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var o=us.findBox(e,["mdia","minf","stbl","stsd"])[0];if(o){var l=o.subarray(8);i.codec=us.parseType(l.subarray(4,8));var u,c=us.findBox(l,[i.codec])[0];c&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(u=c.subarray(78),"avcC"===us.parseType(u.subarray(4,8))&&11<u.length?(i.codec+=".",i.codec+=ds(u[9]),i.codec+=ds(u[10]),i.codec+=ds(u[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)&&(u=c.subarray(28),"esds"===us.parseType(u.subarray(4,8))&&20<u.length&&0!==u[19]?(i.codec+="."+ds(u[19]),i.codec+="."+ds(u[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"))}var d=us.findBox(e,["mdia","mdhd"])[0];if(d&&r){var h=0===n?12:20;i.timescale=cs(d[h]<<24|d[1+h]<<16|d[2+h]<<8|d[3+h])}f.push(i)}),f};var fs={findBox:us.findBox,parseType:us.parseType,timescale:es,startTime:ts,compositionStartTime:ns,videoTrackIds:is,tracks:rs};function gs(){gs.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Is(0,0),new Is(0,1),new Is(1,0),new Is(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}hs.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},hs.prototype.push=function(e){this.trigger("data",e)},hs.prototype.flush=function(e){this.trigger("done",e)},hs.prototype.partialFlush=function(e){this.trigger("partialdone",e)},hs.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},hs.prototype.reset=function(e){this.trigger("reset",e)};var ps=hs;function ms(e){return null===e?"":(e=vs[e]||e,String.fromCharCode(e))}function ys(){for(var e=[],t=15;t--;)e.push("");return e}(gs.prototype=new ps).push=function(e){var t,n,i,r;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n}(e.escapedRBSP)).payloadType&&(n=181!==(r=t).payload[0]?null:49!=(r.payload[1]<<8|r.payload[2])?null:"GA94"!==String.fromCharCode(r.payload[3],r.payload[4],r.payload[5],r.payload[6])?null:3!==r.payload[7]?null:r.payload.subarray(8,r.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},gs.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},gs.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},gs.prototype.flush=function(){return this.flushStream("flush")},gs.prototype.partialFlush=function(){return this.flushStream("partialFlush")},gs.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},gs.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},gs.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},gs.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},gs.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var vs={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},bs=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Is=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ys();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ys();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ys()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=ms((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ms((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=bs.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=ms(i),a+=ms(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};function Cs(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null}Is.prototype=new ps,Is.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Is.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ys(),this.nonDisplayed_=ys(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Is.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Is.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Is.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Is.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Is.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Is.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Is.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Is.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Is.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ys(),this.displayed_=ys()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Is.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},Is.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Is.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Is.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Is.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Is.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var _s=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},Bs=gs,As=function(){var t,d,h,f,g,n,i=!1;this.isInitialized=function(){return i},this.init=function(e){t=new Bs,i=!0,n=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/f,e.endTime=e.endPts/f,g.captions.push(e),g.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||h===e[0]&&f===t[h])},this.parse=function(e,t,n){var i,r,a,s,y,o,l,v,u;if(!this.isInitialized())return null;if(!t||!n)return null;if(this.isNewInit(t,n))h=t[0],f=n[h];else if(null===h||!f)return d.push(e),null;for(;0<d.length;){var c=d.shift();this.parse(c,t,n)}return null!==(a=f,i=null===(r=h)?null:{seiNals:(s=e,y=r,o=fs.findBox(s,["moof","traf"]),l=fs.findBox(s,["mdat"]),v={},u=[],l.forEach(function(e,t){var n=o[t];u.push({mdat:e,traf:n})}),u.forEach(function(e){var t,n,i,r,a,s,o,l,u=e.mdat,c=e.traf,d=fs.findBox(c,["tfhd"]),h=us.parseTfhd(d[0]),f=h.trackId,g=fs.findBox(c,["tfdt"]),p=0<g.length?us.parseTfdt(g[0]).baseMediaDecodeTime:0,m=fs.findBox(c,["trun"]);y===f&&0<m.length&&(t=function(e,t,n){var i,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=Cs(r,t);i={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:_s(u),trackId:n},c?(i.pts=c.pts,i.dts=c.dts,s=c):(i.pts=s.pts,i.dts=s.dts),l.push(i)}return l}(u,(n=m,r=p,a=(i=h).defaultSampleDuration||0,s=i.defaultSampleSize||0,o=i.trackId,l=[],n.forEach(function(e){var t=us.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=a),void 0===e.size&&(e.size=s),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration}),l=l.concat(t)}),l),f),v[f]||(v[f]=[]),v[f]=v[f].concat(t))}),v)[r],timescale:a})&&i.seiNals?(this.pushNals(i.seiNals),this.flushStream(),g):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;n?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){g.captions=[],g.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){d=[],f=h=null,g?this.clearParsedCaptions():g={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};function Ts(e){var t=31&e[1];return(t<<=8)|e[2]}function Ss(e){return!!(64&e[1])}function Us(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function Fs(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function ks(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}new ps;var ws={parseType:function(e,t){var n=Ts(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Ss(e),n=4+Us(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Ss(e),i=4+Us(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Ss,parsePesType:function(e,t){switch(t[Ts(e)]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Ss(e))return null;var t=4+Us(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+Us(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Fs(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Fs(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===Fs(31&n[r+3])&&(a=!0),a}},xs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Es={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return xs[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=ks(e.subarray(10,14)));do{if((n=ks(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){var i,r="";for(i=0;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r)))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(s*=4)+(3&a[7])}}t+=10,t+=n}while(t<e.byteLength);return null}},Qs=(function(e){return 9e4*e},function(e,t){return e*t},function(e){return e/9e4},function(e,t){return e/t},function(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}),Gs={};function Rs(e,t,n){for(var i,r,a,s,o=0,l=Vs,u=!1;l<=e.byteLength;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o++,l++;else{switch(i=e.subarray(o,l),Gs.ts.parseType(i,t.pid)){case"pes":r=Gs.ts.parsePesType(i,t.table),a=Gs.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Gs.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)}if(u)break;o+=Vs,l+=Vs}for(o=(l=e.byteLength)-Vs,u=!1;0<=o;)if(71!==e[o]||71!==e[l]&&l!==e.byteLength)o--,l--;else{switch(i=e.subarray(o,l),Gs.ts.parseType(i,t.pid)){case"pes":r=Gs.ts.parsePesType(i,t.table),a=Gs.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Gs.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),u=!0)}if(u)break;o-=Vs,l-=Vs}}function Ls(e,t,n){for(var i,r,a,s,o,l,u,c=0,d=Vs,h=!1,f={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(i=e.subarray(c,d),Gs.ts.parseType(i,t.pid)){case"pes":if(r=Gs.ts.parsePesType(i,t.table),a=Gs.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(s=Gs.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0),!n.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),l=0;f.data.length;)u=f.data.shift(),o.set(u,l),l+=u.byteLength;if(Gs.ts.videoPacketContainsKeyFrame(o)){var g=Gs.ts.parsePesTime(o);g&&(n.firstKeyFrame=g,n.firstKeyFrame.type="video")}f.size=0}f.data.push(i),f.size+=i.byteLength}}if(h&&n.firstKeyFrame)break;c+=Vs,d+=Vs}for(c=(d=e.byteLength)-Vs,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(i=e.subarray(c,d),Gs.ts.parseType(i,t.pid)){case"pes":r=Gs.ts.parsePesType(i,t.table),a=Gs.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=Gs.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0)}if(h)break;c-=Vs,d-=Vs}}Gs.ts=ws,Gs.aac=Es;var Vs=188;function Zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Os(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ns=null,Ws=(Ds.prototype.decrypt=function(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],l=i^s[1],u=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,g=s.length/4-2,p=void 0,m=4,y=this._tables[1],v=y[0],b=y[1],I=y[2],C=y[3],_=y[4];for(p=0;p<g;p++)d=v[o>>>24]^b[l>>16&255]^I[u>>8&255]^C[255&c]^s[m],h=v[l>>>24]^b[u>>16&255]^I[c>>8&255]^C[255&o]^s[m+1],f=v[u>>>24]^b[c>>16&255]^I[o>>8&255]^C[255&l]^s[m+2],c=v[c>>>24]^b[o>>16&255]^I[l>>8&255]^C[255&u]^s[m+3],m+=4,o=d,l=h,u=f;for(p=0;p<4;p++)r[(3&-p)+a]=_[o>>>24]<<24^_[l>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^s[m++],d=o,o=l,l=u,u=c,c=d},Ds);function Ds(e){Zs(this,Ds),Ns=Ns||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,f=void 0,g=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=u[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,g=16843009*l[d=l[c=l[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*l[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=g=g<<24^g>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}(),this._tables=[[Ns[0][0].slice(),Ns[0][1].slice(),Ns[0][2].slice(),Ns[0][3].slice(),Ns[0][4].slice()],[Ns[1][0].slice(),Ns[1][1].slice(),Ns[1][2].slice(),Ns[1][3].slice(),Ns[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=l;t<4*l+28;t++)i=r[t-1],(t%l==0||8===l&&t%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}var Xs=(Ps.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},Ps.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},Ps.prototype.trigger=function(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,a)},Ps.prototype.dispose=function(){this.listeners={}},Ps.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},Ps);function Ps(){Zs(this,Ps),this.listeners={}}var Ms,Hs=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Ys,Ms=Xs),Ys.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},Ys.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Ys);function Ys(){Zs(this,Ys);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Ms.call(this,Xs));return e.jobs=[],e.delay=1,e.timeout_=null,e}function js(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function zs(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new Ws(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,g=void 0,p=void 0;for(o=n[0],l=n[1],u=n[2],c=n[3],p=0;p<i.length;p+=4)d=js(i[p]),h=js(i[p+1]),f=js(i[p+2]),g=js(i[p+3]),r.decrypt(d,h,f,g,s,p),s[p]=js(s[p]^o),s[p+1]=js(s[p+1]^l),s[p+2]=js(s[p+2]^u),s[p+3]=js(s[p+3]^c),o=d,l=h,u=f,c=g;return a}var Js,qs,Ks,$s=(eo.prototype.decryptChunk_=function(t,n,i,r){return function(){var e=zs(t,n,i);r.set(e,t.byteOffset)}},Js=eo,Ks=[{key:"STEP",get:function(){return 32e3}}],(qs=null)&&Os(Js.prototype,qs),Ks&&Os(Js,Ks),eo);function eo(e,t,n,i){Zs(this,eo);var r=eo.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new Hs,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([js(a[o-4]),js(a[o-3]),js(a[o-2]),js(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}function to(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=$r.buildAbsoluteURL(v.location.href,e)),$r.buildAbsoluteURL(e,t))}function no(e,t,n){return e&&n.responseURL&&t!==n.responseURL?n.responseURL:t}function io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ro=function(e,t,n){return t&&ao(e.prototype,t),n&&ao(e,n),e};function ao(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function so(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function oo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function lo(r,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var n in r.mediaGroups[e][t]){var i=r.mediaGroups[e][t][n];a(i,e,t,n)}})}function uo(e,t){var n=po(e,{}),i=n.playlists[t.uri];if(!i)return null;if(i.segments&&t.segments&&i.segments.length===t.segments.length&&i.endList===t.endList&&i.mediaSequence===t.mediaSequence)return null;var r=po(i,t);i.segments&&(r.segments=function(e,t,n){var i=t.slice();n=n||0;for(var r=Math.min(e.length,t.length+n),a=n;a<r;a++)i[a-n]=po(e[a],i[a-n]);return i}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),r.segments.forEach(function(e){var t,n;t=e,n=r.resolvedUri,t.resolvedUri||(t.resolvedUri=to(n,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=to(n,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=to(n,t.map.uri))});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=r);return n.playlists[t.uri]=r,n}function co(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];(e.playlists[n.uri]=n).resolvedUri=to(e.uri,n.uri),n.id=t,n.attributes||(n.attributes={},mo.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function ho(t){lo(t,function(e){e.uri&&(e.resolvedUri=to(t.uri,e.uri))})}function fo(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)}var go=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},po=Jr.mergeOptions,mo=Jr.log,yo=(so(vo,Jr.EventTarget),ro(vo,[{key:"playlistRequestError",value:function(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var i=new ca;this.customTagParsers.forEach(function(e){return i.addParser(e)}),this.customTagMappers.forEach(function(e){return i.addTagMapper(e)}),i.push(e.responseText),i.end(),i.manifest.uri=t,i.manifest.attributes=i.manifest.attributes||{};var r=uo(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(v.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=v.setTimeout(function(){n.trigger("mediaupdatetimeout")},fo(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),v.clearTimeout(this.mediaUpdateTimeout),v.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(n,e){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(v.clearTimeout(this.finalRenditionTimeout),e){var t=n.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=v.setTimeout(this.media.bind(this,n,!1),t)}else{var r=this.state,a=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(a&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(i.request){if(n.resolvedUri=no(i.handleManifestRedirects,n.resolvedUri,t),e)return i.playlistRequestError(i.request,n.uri,r);i.haveMetadata(t,n.uri),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),v.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;v.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=v.setTimeout(function(){return t.load()},i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.srcUrl+".",responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var n=new ca;return i.customTagParsers.forEach(function(e){return n.addParser(e)}),i.customTagMappers.forEach(function(e){return n.addTagMapper(e)}),n.push(t.responseText),n.end(),i.state="HAVE_MASTER",i.srcUrl=no(i.handleManifestRedirects,i.srcUrl,t),n.manifest.uri=i.srcUrl,n.manifest.playlists?(i.master=n.manifest,co(i.master),ho(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(n.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:v.location.href,playlists:[{uri:i.srcUrl,id:0,resolvedUri:i.srcUrl,attributes:{}}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.haveMetadata(t,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),vo);function vo(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};io(this,vo);var i=oo(this,(vo.__proto__||Object.getPrototypeOf(vo)).call(this)),r=n.withCredentials,a=void 0!==r&&r,s=n.handleManifestRedirects,o=void 0!==s&&s;i.srcUrl=e,i.hls_=t,i.withCredentials=a,i.handleManifestRedirects=o;var l=t.options_;if(i.customTagParsers=l&&l.customTagParsers||[],i.customTagMappers=l&&l.customTagMappers||[],!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:to(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))}),i}function bo(e,a,t){var n,i;return void 0===a&&(a=e.mediaSequence+e.segments.length),a<e.mediaSequence?0:(n=function(e,t){var n=0,i=a-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e)).precise?n.result:(i=function(e,t){for(var n=0,i=void 0,r=a-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,void 0!==i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(e)).precise?i.result:n.result+t}function Io(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return v.Infinity}return bo(e,t,n)}function Co(e,t,n){var i=0;if(n<t){var r=[n,t];t=r[0],n=r[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)i+=e.targetDuration;t=0}for(var s=t;s<n;s++)i+=e.segments[s].duration;return i}function _o(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,i=n+2*e.targetDuration;t--&&!(i<=(n+=e.segments[t].duration)););return Math.max(0,t)}function Bo(e,t,n){if(!e||!e.segments)return null;if(e.endList)return Io(e);if(null===t)return null;t=t||0;var i=n?_o(e):e.segments.length;return bo(e,e.mediaSequence+i,t)}function Ao(e){return e-Math.floor(e)==0}function To(e,t){if(Ao(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),a=t*r;if(Ao(a)||i===n)return(a+e)/r}}function So(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function Uo(e){return e.excludeUntil&&e.excludeUntil===1/0}function Fo(e){var t=So(e);return!e.disabled&&!t}function ko(e,t){return t.attributes&&t.attributes[e]}function wo(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Fo(e)&&(e.attributes.BANDWIDTH||0)<n}).length}function xo(){return function e(t,i){t=qo({timeout:45e3},t);var n=e.beforeRequest||Jr.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var r=n(t);r&&(t=r)}var a=Jo(t,function(e,t){var n=a.response;!e&&n&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=n.byteLength||n.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))),i(e,a)}),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}}function Eo(e){var t,n,i={};return e.byterange&&(i.Range=(t=e.byterange,n=t.offset+t.length-1,"bytes="+t.offset+"-"+n)),i}function Qo(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")}function Go(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Ro(n){var i={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i}function Lo(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function Vo(e){return e.resolvedUri}function Zo(e){for(var t=Array.prototype.slice.call(e),n="",i=0;i<t.length/16;i++)n+=t.slice(16*i,16*i+16).map(Qo).join("")+" "+t.slice(16*i,16*i+16).map(Go).join("")+"\n";return n}function Oo(e,t){var n=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Jr.createTimeRanges(n)}function No(e,n){return Oo(e,function(e,t){return e-.1<=n&&n<=t+.1})}function Wo(e,t){return Oo(e,function(e){return t<=e-1/30})}function Do(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")}function Xo(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Po(e,t,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=t&&r.endTime>=e&&n.removeCue(r)}function Mo(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}var Ho=Jr.createTimeRange,Yo=To.bind(null,1),jo=To.bind(null,-1),zo={duration:Io,seekable:function(e,t){var n=t||0,i=Bo(e,t,!0);return null===i?Ho():Ho(n,i)},safeLiveIndex:_o,getMediaInfoForTime:function(e,t,n,i){var r=void 0,a=void 0,s=e.segments.length,o=t-i;if(o<0){if(0<n)for(r=n-1;0<=r;r--)if(a=e.segments[r],0<(o+=jo(a.duration)))return{mediaIndex:r,startTime:i-Co(e,n,r)};return{mediaIndex:0,startTime:t}}if(n<0){for(r=n;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(r=n;r<s;r++)if(a=e.segments[r],(o-=Yo(a.duration))<0)return{mediaIndex:r,startTime:i+Co(e,n,r)};return{mediaIndex:s-1,startTime:t}},isEnabled:Fo,isDisabled:function(e){return e.disabled},isBlacklisted:So,isIncompatible:Uo,playlistEnd:Bo,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:ko,estimateSegmentRequestTime:function(e,t,n,i){var r=3<arguments.length&&void 0!==i?i:0;return ko("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:wo},Jo=Jr.xhr,qo=Jr.mergeOptions,Ko=Object.freeze({createTransferableMessage:Ro,initSegmentId:Lo,segmentKeyId:Vo,hexDump:Zo,tagDump:function(e){return Zo(e.bytes)},textRanges:function(e){var t,n,i="",r=void 0;for(r=0;r<e.length;r++)i+=(n=r,(t=e).start(n)+"-"+t.end(n)+" ");return i}}),$o="undefined"!=typeof window?window:{},el="undefined"==typeof Symbol?"__target":Symbol(),tl="application/javascript",nl=$o.BlobBuilder||$o.WebKitBlobBuilder||$o.MozBlobBuilder||$o.MSBlobBuilder,il=$o.URL||$o.webkitURL||il&&il.msURL,rl=$o.Worker;function al(r,a){return function(e){var t=this;if(!a)return new rl(r);if(rl&&!e){var n=ul(a.toString().replace(/^function.+?{/,"").slice(0,-1));return this[el]=new rl(n),function(e,t){if(e&&t){var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&il.revokeObjectURL(e.objURL),n.call(e)}}}(this[el],n),this[el]}var i={postMessage:function(e){t.onmessage&&setTimeout(function(){t.onmessage({data:e,target:i})})}};a.call(i),this.postMessage=function(e){setTimeout(function(){i.onmessage({data:e,target:t})})},this.isThisThread=!0}}if(rl){var sl,ol=ul("self.onmessage = function () {}"),ll=new Uint8Array(1);try{(sl=new rl(ol)).postMessage(ll,[ll.buffer])}catch(e){rl=null}finally{il.revokeObjectURL(ol),sl&&sl.terminate()}}function ul(t){try{return il.createObjectURL(new Blob([t],{type:tl}))}catch(e){var n=new nl;return n.append(t),il.createObjectURL(n.getBlob(type))}}function cl(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}function dl(e){var t,n=0<arguments.length&&void 0!==e?e:"",i={codecCount:0};return i.codecCount=n.split(",").length,i.codecCount=i.codecCount||2,(t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(n))&&(i.videoCodec=t[2],i.videoObjectTypeIndicator=t[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(n),i.audioProfile=i.audioProfile&&i.audioProfile[2],i}function hl(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'}function fl(e){var r={type:"",parameters:{}},t=e.trim().split(";");return r.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var n=t[0].replace(/"/g,"").trim(),i=t[1].replace(/"/g,"").trim();r.parameters[n]=i}}),r}function gl(e){return/mp4a\.\d+.\d+/i.test(e)}function pl(e){return/avc1\.[\da-f]+/i.test(e)}var ml=new al("./transmuxer-worker.worker.js",function(e,t){var tt=this;!function(){function e(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var n;return!!a[e]&&(n=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,i,r;if(t=a[e])if(2===arguments.length)for(i=t.length,n=0;n<i;++n)t[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=t.length,n=0;n<i;++n)t[n].apply(this,r)}},this.dispose=function(){a={}}}}e.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var u,t,n,h,r,i,a,f,s,o,l,c,d,g,p,m,y,v,b,I,C,_,B,A,T,S,U,F,k,w,x,E,Q,G,R,L,V,Z,O,N,W=e,D=Math.pow(2,32)-1;function X(e){for(var t=[];e--;)t.push(0);return t}function P(){P.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new he(0,0),new he(0,1),new he(1,0),new he(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}!function(){var e;if(_={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in _)_.hasOwnProperty(e)&&(_[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);B=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),T=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),A=new Uint8Array([0,0,0,1]),S=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),U=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),F={video:S,audio:U},x=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),w=new Uint8Array([0,0,0,0,0,0,0,0]),E=new Uint8Array([0,0,0,0,0,0,0,0]),Q=E,G=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=E,k=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),u=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},t=function(){return u(_.dinf,u(_.dref,x))},n=function(e){return u(_.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},p=function(e){return u(_.hdlr,F[e])},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),u(_.mdhd,t)},d=function(e){return u(_.mdia,g(e),p(e.type),i(e))},r=function(e){return u(_.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},i=function(e){return u(_.minf,"video"===e.type?u(_.vmhd,k):u(_.smhd,w),t(),y(e))},a=function(e,t){for(var n=[],i=t.length;i--;)n[i]=b(t[i]);return u.apply(null,[_.moof,r(e)].concat(n))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=l(e[t]);return u.apply(null,[_.moov,o(4294967295)].concat(n).concat(s(e)))},s=function(e){for(var t=e.length,n=[];t--;)n[t]=I(e[t]);return u.apply(null,[_.mvex].concat(n))},o=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(_.mvhd,t)},m=function(e){var t,n,i=e.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return u(_.sdtp,r)},y=function(e){return u(_.stbl,v(e),u(_.stts,R),u(_.stsc,Q),u(_.stsz,G),u(_.stco,E))},v=function(e){return u(_.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?L(e):V(e))},L=function(e){var t,n,i=e.sps||[],r=e.pps||[],a=[],s=[];for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));for(t=0;t<r.length;t++)s.push((65280&r[t].byteLength)>>>8),s.push(255&r[t].byteLength),s=s.concat(Array.prototype.slice.call(r[t]));if(n=[_.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(_.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],a,[r.length],s))),u(_.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var o=e.sarRatio[0],l=e.sarRatio[1];n.push(u(_.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return u.apply(null,n)},V=function(e){return u(_.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))},c=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return u(_.tkhd,t)},b=function(e){var t,n,i,r,a,s;return t=u(_.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(1+D)),s=Math.floor(e.baseMediaDecodeTime%(1+D)),n=u(_.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(i=C(e,92),u(_.traf,t,n,i)):(r=m(e),i=C(e,r.length+92),u(_.traf,t,n,i,r))},l=function(e){return e.duration=e.duration||4294967295,u(_.trak,c(e),d(e))},I=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),u(_.trex,t)},N=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},O=function(e,t){var n,i,r,a;for(t+=20+16*(i=e.samples||[]).length,n=N(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return u(_.trun,new Uint8Array(n))},Z=function(e,t){var n,i,r,a;for(t+=20+8*(i=e.samples||[]).length,n=N(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return u(_.trun,new Uint8Array(n))},C=function(e,t){return"audio"===e.type?Z(e,t):O(e,t)},h=function(){return u(_.ftyp,B,A,B,T)};var M,H,Y,j,z,J=function(e){return u(_.mdat,e)},q=a,K=[33,16,5,32,164,27],$=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ee={96e3:[K,[227,64],X(154),[56]],88200:[K,[231],X(170),[56]],64e3:[K,[248,192],X(240),[56]],48e3:[K,[255,192],X(268),[55,148,128],X(54),[112]],44100:[K,[255,192],X(268),[55,163,128],X(84),[112]],32e3:[K,[255,192],X(268),[55,234],X(226),[112]],24e3:[K,[255,192],X(268),[55,255,128],X(268),[111,112],X(126),[224]],16e3:[K,[255,192],X(268),[55,255,128],X(268),[111,255],X(269),[223,108],X(195),[1,192]],12e3:[$,X(268),[3,127,248],X(268),[6,255,240],X(268),[13,255,224],X(268),[27,253,128],X(259),[56]],11025:[$,X(268),[3,127,248],X(268),[6,255,240],X(268),[13,255,224],X(268),[27,255,192],X(268),[55,175,128],X(108),[112]],8e3:[$,X(268),[3,121,16],X(47),[7]]},te=(M=ee,Object.keys(M).reduce(function(e,t){return e[t]=new Uint8Array(M[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),ne=(H=function(e){return 9e4*e},Y=function(e,t){return e*t},j=function(e){return e/9e4},z=function(e,t){return e/t},function(e,t){return H(z(e,t))}),ie=function(e,t,n){return j(n?e:e-t)},re=function(e,t,n,i){var r,a,s,o,l,u,c,d=0,h=0,f=0;if(t.length&&(r=ne(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),n&&i&&(d=r-Math.max(n,i),f=(h=Math.floor(d/a))*a),!(h<1||45e3<f))){for(s=(s=te[e.samplerate])||t[0].data,o=0;o<h;o++)l=t[0],t.splice(0,0,{data:s,dts:l.dts-a,pts:l.pts-a});e.baseMediaDecodeTime-=Math.floor((u=f,c=e.samplerate,Y(j(u),c)))}},ae=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},se=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},oe=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))};function le(e){return null===e?"":(e=ce[e]||e,String.fromCharCode(e))}function ue(){for(var e=[],t=15;t--;)e.push("");return e}(P.prototype=new W).push=function(e){var t,n,i,r;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n}(e.escapedRBSP)).payloadType&&(n=181!==(r=t).payload[0]?null:49!=(r.payload[1]<<8|r.payload[2])?null:"GA94"!==String.fromCharCode(r.payload[3],r.payload[4],r.payload[5],r.payload[6])?null:3!==r.payload[7]?null:r.payload.subarray(8,r.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},P.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},P.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},P.prototype.flush=function(){return this.flushStream("flush")},P.prototype.partialFlush=function(){return this.flushStream("partialFlush")},P.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},P.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},P.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},P.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},P.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var ce={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},de=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],he=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ue();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ue();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ue()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=le((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=le((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=de.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=le(i),a+=le(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};function fe(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function ge(e){var t,n;ge.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=fe(e.dts,n),e.pts=fe(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}he.prototype=new W,he.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},he.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ue(),this.nonDisplayed_=ue(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},he.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},he.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},he.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},he.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},he.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},he.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},he.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},he.prototype.isNormalChar=function(e){return 32<=e&&e<=127},he.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ue(),this.displayed_=ue()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},he.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},he.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},he.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},he.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},he.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},he.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var pe={CaptionStream:P,Cea608Stream:he},me={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function ye(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}function ve(e,t,n){return decodeURIComponent(ye(e,t,n))}function be(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}ge.prototype=new W;var Ie,Ce=ge,_e={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ve(e.data,1,t),e.value=ve(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ve(e.data,1,t),e.url=ve(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(ye(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Ie=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(Ie.prototype.init.call(this),this.dispatchType=me.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,i,r,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug;else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=be(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)t.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();n=10,64&t.data[5]&&(n+=4,n+=be(t.data.subarray(10,14)),u-=be(t.data.subarray(16,20)));do{if((i=be(t.data.subarray(n+4,n+8)))<1)return;if((r={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=r.id,_e[r.id]&&(_e[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var s=r.data,o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;o*=4,o+=3&s[7],r.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),n+=10,n+=i}while(n<u);this.trigger("data",t)}}}).prototype=new W;var Be,Ae,Te,Se=Ie,Ue=Ce;(Be=function(){var r=new Uint8Array(188),a=0;Be.prototype.init.call(this),this.push=function(e){var t,n=0,i=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;i<t.byteLength;)71!==t[n]||71!==t[i]?(n++,i++):(this.trigger("data",t.subarray(n,i)),n+=188,i+=188);n<t.byteLength&&(r.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){a=0,this.trigger("reset")}}).prototype=new W,(Ae=function(){var i,r,a,s;Ae.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=void 0,i=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?r(e.subarray(n),t):a(e.subarray(n),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},a=function(e,t){var n,i;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var r=e[i],a=(31&e[i+1])<<8|e[i+2];r===me.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=a:r===me.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=a:r===me.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][a]=r),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",i(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",i(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=me.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=me.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new W,Ae.STREAM_TYPES={h264:27,adts:15},(Te=function(){function i(e,t,n){var i,r,a,s,o,l=new Uint8Array(e.size),u={type:t},c=0,d=0;if(e.data.length&&!(e.size<9)){for(u.trackId=e.data[0].pid,c=0;c<e.data.length;c++)r=e.data[c],l.set(r.data,d),d+=r.data.byteLength;a=l,(s=u).packetLength=6+(a[4]<<8|a[5]),s.dataAlignmentIndicator=0!=(4&a[6]),192&(o=a[7])&&(s.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,s.pts*=4,s.pts+=(6&a[13])>>>1,s.dts=s.pts,64&o&&(s.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,s.dts*=4,s.dts+=(6&a[18])>>>1)),s.data=a.subarray(9+a[8]),i="video"===t||u.packetLength<=e.size,(n||i)&&(e.size=0,e.data.length=0),i&&h.trigger("data",u)}}var t,h=this,r={data:[],size:0},a={data:[],size:0},s={data:[],size:0};Te.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case me.H264_STREAM_TYPE:case me.H264_STREAM_TYPE:e=r,t="video";break;case me.ADTS_STREAM_TYPE:e=a,t="audio";break;case me.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&i(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=n.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),h.trigger("data",e)}})[n.type]()},this.reset=function(){r.size=0,r.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){i(r,"video"),i(a,"audio"),i(s,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new W;var Fe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Be,TransportParseStream:Ae,ElementaryStream:Te,TimestampRolloverStream:Ue,CaptionStream:pe.CaptionStream,Cea608Stream:pe.Cea608Stream,MetadataStream:Se};for(var ke in me)me.hasOwnProperty(ke)&&(Fe[ke]=me[ke]);var we,xe=Fe,Ee=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(we=function(l){var u,c=0;we.prototype.init.call(this),this.push=function(e){var t,n,i,r,a,s,o=0;if(l||(c=0),"audio"===e.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),u.set(e.data,r.byteLength)):u=e.data;o+5<u.length;)if(255===u[o]&&240==(246&u[o+1])){if(n=2*(1&~u[o+1]),t=(3&u[o+3])<<11|u[o+4]<<3|(224&u[o+5])>>5,s=9e4*(a=1024*(1+(3&u[o+6])))/Ee[(60&u[o+2])>>>2],i=o+t,u.byteLength<i)return;if(this.trigger("data",{pts:e.pts+c*s,dts:e.dts+c*s,sampleCount:a,audioobjecttype:1+(u[o+2]>>>6&3),channelcount:(1&u[o+2])<<2|(192&u[o+3])>>>6,samplerate:Ee[(60&u[o+2])>>>2],samplingfrequencyindex:(60&u[o+2])>>>2,samplesize:16,data:u.subarray(o+7+n,i)}),c++,u.byteLength===i)return void(u=void 0);u=u.subarray(i)}else o++},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){u=void 0,this.trigger("reset")},this.endTimeline=function(){u=void 0,this.trigger("endedtimeline")}}).prototype=new W;var Qe,Ge,Re,Le=we,Ve=function(i){var r=i.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=i.byteLength-r,t=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");t.set(i.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),n=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Ge=function(){var i,r,a=0;Ge.prototype.init.call(this),this.push=function(e){for(var t,n=(r=r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),t):e.data).byteLength;a<n-3;a++)if(1===r[a+2]){i=a+5;break}for(;i<n;)switch(r[i]){case 0:if(0!==r[i-1]){i+=2;break}if(0!==r[i-2]){i++;break}for(a+3!==i-2&&this.trigger("data",r.subarray(a+3,i-2));1!==r[++i]&&i<n;);a=i-2,i+=3;break;case 1:if(0!==r[i-1]||0!==r[i-2]){i+=3;break}this.trigger("data",r.subarray(a+3,i-2)),a=i-2,i+=3;break;default:i+=3}r=r.subarray(a),i-=a,a=0},this.reset=function(){r=null,a=0,this.trigger("reset")},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(a+3)),r=null,a=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new W,Re={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Qe=function(){var n,i,r,a,s,o,b,t=new Ge;Qe.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(i=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:i,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),t.on("partialdone",function(){n.trigger("partialdone")}),t.on("reset",function(){n.trigger("reset")}),t.on("endedtimeline",function(){n.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},b=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},s=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},o=function(e){var t,n,i,r,a,s,o,l,u,c,d,h,f,g=0,p=0,m=0,y=0,v=1;if(n=(t=new Ve(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Re[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)t.readBoolean()&&b(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),o=t.readUnsignedExpGolomb(),f=0;f<o;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(v=h[0]/h[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*g-2*p)*v),height:(2-c)*(u+1)*16-2*m-2*y,sarRatio:h}}}).prototype=new W;var Ze,Oe={H264Stream:Qe,NalByteStream:Ge};function Ne(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function We(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}}(Ze=function(){var g=new Uint8Array,p=0;Ze.prototype.init.call(this),this.setTimestamp=function(e){p=e},this.push=function(e){var t,n,i,r,a,s,o,l,u,c,d,h=0,f=0;for(g.length?(r=g.length,(g=new Uint8Array(e.byteLength+r)).set(g.subarray(0,r)),g.set(e,r)):g=e;3<=g.length-f;)if(g[f]!=="I".charCodeAt(0)||g[f+1]!=="D".charCodeAt(0)||g[f+2]!=="3".charCodeAt(0))if(255!=(255&g[f])||240!=(240&g[f+1]))f++;else{if(g.length-f<7)break;if(f+(void 0,c=(224&(l=g)[(u=f)+5])>>5,d=l[u+4]<<3,h=6144&l[u+3]|d|c)>g.length)break;i={type:"audio",data:g.subarray(f,f+h),pts:p,dts:p},this.trigger("data",i),f+=h}else{if(g.length-f<10)break;if(f+(void 0,o=(a=g)[(s=f)+6]<<21|a[s+7]<<14|a[s+8]<<7|a[s+9],h=(16&a[s+5])>>4?20+o:10+o)>g.length)break;n={type:"timed-metadata",data:g.subarray(f,f+h)},this.trigger("data",n),f+=h}t=g.length-f,g=0<t?g.subarray(f):new Uint8Array},this.reset=function(){g=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){g=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new W;var De,Xe,Pe,Me,He=Ze,Ye=Oe.H264Stream,je=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ze=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Je=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];(Xe=function(l,u){var c=[],d=0,h=0,f=0,g=1/0;u=u||{},Xe.prototype.init.call(this),this.push=function(t){oe(l,t),l&&ze.forEach(function(e){l[e]=t[e]}),c.push(t)},this.setEarliestDts=function(e){h=e-l.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){g=e},this.setAudioAppendStart=function(e){f=e},this.flush=function(){var e,t,n,i,r,a,s,o;0!==c.length&&(a=c,o=h,e=(s=l).minSegmentDts>=o?a:(s.minSegmentDts=1/0,a.filter(function(e){return e.dts>=o&&(s.minSegmentDts=Math.min(s.minSegmentDts,e.dts),s.minSegmentPts=s.minSegmentDts,!0)})),l.baseMediaDecodeTime=se(l,u.keepOriginalTimestamps),re(l,e,f,g),l.samples=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i}(e),n=J(function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}(e)),c=[],t=q(d,[l]),i=new Uint8Array(t.byteLength+n.byteLength),d++,i.set(t),i.set(n,t.byteLength),ae(l),r=Math.ceil(9216e4/l.samplerate),e.length&&this.trigger("timingInfo",{start:e[0].dts,end:e[0].dts+e.length*r}),this.trigger("data",{track:l,boxes:i})),this.trigger("done","AudioSegmentStream")},this.reset=function(){ae(l),c=[],this.trigger("reset")}}).prototype=new W,(De=function(d,h){var t,n,f=0,g=[],p=[];h=h||{},De.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(e){oe(d,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,d.sps=[e.data],Je.forEach(function(e){d[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,d.pps=[e.data]),g.push(e)},this.flush=function(){for(var e,t,n,i,r,a,s,o=0;g.length&&"access_unit_delimiter_rbsp"!==g[0].nalUnitType;)g.shift();if(0===g.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if((t=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r}(function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r}(g)))[0][0].keyFrame||((e=this.getGopForFusion_(g[0],d))?(o=e.duration,t.unshift(e),t.byteLength+=e.byteLength,t.nalCount+=e.nalCount,t.pts=e.pts,t.dts=e.dts,t.duration+=e.duration):(!(u=t)[0][0].keyFrame&&1<u.length&&(c=u.shift(),u.byteLength-=c.byteLength,u.nalCount-=c.nalCount,u[0][0].dts=c.dts,u[0][0].pts=c.pts,u[0][0].duration+=c.duration),t=u)),p.length){var l;if(!(l=h.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t)))return this.gopCache_.unshift({gop:t.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ae(d),t=l}var u,c;oe(d,t),d.samples=function(e,t){var n,i,r,a,s,o,l,u,c=t||0,d=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s=a[i],c+=(o=s,l=c,u=void 0,u={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}},u.dataOffset=l,u.compositionTimeOffset=o.pts-o.dts,u.duration=o.duration,u.size=4*o.length,u.size+=o.byteLength,o.keyFrame&&(u.flags.dependsOn=2,u.flags.isNonSyncSample=0),r=u).size,d.push(r);return d}(t),i=J(function(e){var t,n,i,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c}(t)),d.baseMediaDecodeTime=se(d,h.keepOriginalTimestamps),this.trigger("processedGopsInfo",t.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),a=t[0],s=t[t.length-1],this.trigger("segmentTimingInfo",We(d.baseMediaDecodeTime,a.dts,a.pts,s.dts+s.duration,s.pts+s.duration,o)),this.trigger("timingInfo",{start:t[0].dts,end:t[t.length-1].dts+t[t.length-1].duration}),this.gopCache_.unshift({gop:t.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),n=q(f,[d]),r=new Uint8Array(n.byteLength+i.byteLength),f++,r.set(n),r.set(i,n.byteLength),this.trigger("data",{track:d,boxes:r}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,p.length=0,this.trigger("reset")},this.resetStream_=function(){ae(d),n=t=void 0},this.getGopForFusion_=function(e){var t,n,i,r,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,d.pps&&Ne(d.pps[0],r.pps[0])&&d.sps&&Ne(d.sps[0],r.sps[0])&&(i.dts<d.timelineStartInfo.dts||-1e4<=(t=e.dts-i.dts-i.duration)&&t<=45e3&&(!n||t<s)&&(n=r,s=t));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,o,l;for(a=e.byteLength,s=e.nalCount,o=e.duration,t=n=0;t<p.length&&n<e.length&&(i=p[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,o-=r.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=o,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,o;for(t=p.length-1,n=e.length-1,a=null,s=!1;0<=t&&0<=n;){if(i=p[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===p.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(o=s?n:a))return e;var l=e.slice(o),u=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){p=e}}).prototype=new W,(Me=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Me.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new W,Me.prototype.flush=function(e){var t,n,i,r,a,s,o,l,u=0,c={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,Je.forEach(function(e){c.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,ze.forEach(function(e){c.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?c.type=this.pendingTracks[0].type:c.type="combined",this.emittedTracks+=this.pendingTracks.length,a=this.pendingTracks,l=o=s=void 0,o=h(),l=f(a),(s=new Uint8Array(o.byteLength+l.byteLength)).set(o),s.set(l,o.byteLength),i=s,c.initSegment=new Uint8Array(i.byteLength),c.initSegment.set(i),c.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)c.data.set(this.pendingBoxes[r],u),u+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=ie(t.startPts,d,this.keepOriginalTimestamps),t.endTime=ie(t.endPts,d,this.keepOriginalTimestamps),c.captionStreams[t.stream]=!0,c.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=ie(n.pts,d,this.keepOriginalTimestamps),c.metadata.push(n);for(c.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",c),r=0;r<c.captions.length;r++)t=c.captions[r],this.trigger("caption",t);for(r=0;r<c.metadata.length;r++)n=c.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Me.prototype.setRemux=function(e){this.remuxTracks=e},(Pe=function(i){var r,a,s=this,n=!0;Pe.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new xe.MetadataStream,t.aacStream=new He,t.audioTimestampRolloverStream=new xe.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new xe.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Le,t.coalesceStream=new Me(i,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new Xe(a,i),t.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new xe.MetadataStream,n.packetStream=new xe.TransportPacketStream,n.parseStream=new xe.TransportParseStream,n.elementaryStream=new xe.ElementaryStream,n.timestampRolloverStream=new xe.TimestampRolloverStream,n.adtsStream=new Le,n.h264Stream=new Ye,n.captionStream=new xe.CaptionStream,n.coalesceStream=new Me(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream).pipe(n.timestampRolloverStream),n.timestampRolloverStream.pipe(n.h264Stream),n.timestampRolloverStream.pipe(n.adtsStream),n.timestampRolloverStream.pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new De(r,i),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"videoSegmentTimingInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Xe(a,i),n.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("id3Frame",function(e){e.dispatchType=n.metadataStream.dispatchType,s.trigger("id3Frame",e)}),n.coalesceStream.on("caption",this.trigger.bind(this,"caption")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,ae(a),i.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=e),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,ae(r),t.captionStream.reset(),i.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=e)),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;i.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=je(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new W;var qe={Transmuxer:Pe,VideoSegmentStream:De,AudioSegmentStream:Xe,AUDIO_PROPERTIES:ze,VIDEO_PROPERTIES:Je,generateVideoSegmentTimingInfo:We};function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $e=(Ke(et.prototype,[{key:"init",value:function(){var i,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new qe.Transmuxer(this.options),i=this.self,(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,i.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){i.postMessage({action:"caption",data:e})}),e.on("done",function(e){i.postMessage({action:"done"})}),e.on("gopInfo",function(e){i.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),et);function et(e,t){!function(e,t){if(!(e instanceof et))throw new TypeError("Cannot call a class as a function")}(this),this.options=t||{},this.self=e,this.init()}new function(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new $e(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new $e(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(tt)}()}),yl={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},vl=(so(bl,Jr.EventTarget),ro(bl,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,n){var i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/9e4,presentation:e.start.pts/9e4},end:{decode:e.end.dts/9e4,presentation:e.end.pts/9e4},baseMediaDecodeTime:e.baseMediaDecodeTime/9e4};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var i=this,r=["audio","video"];r.forEach(function(t){if(i[t+"Codec_"]&&!i[t+"Buffer_"]){var n=null;if(i.mediaSource_[t+"Buffer_"])(n=i.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+i[t+"Codec_"]+'"';n=function(e,t){var n=e.addSourceBuffer(t),i=Object.create(null);function r(t){"function"==typeof n[t]?i[t]=function(){return n[t].apply(n,arguments)}:void 0===i[t]&&Object.defineProperty(i,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})}for(var a in i.updating=!1,i.realBuffer_=n)r(a);return i}(i.mediaSource_.nativeMediaSource_,e),i.mediaSource_[t+"Buffer_"]=n}i[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!i.audioDisabled_)return"updateend"===e&&(i[t+"Buffer_"].updating=!1),r.every(function(e){return!("audio"!==e||!i.audioDisabled_)||t===e||!i[e+"Buffer_"]||!i[e+"Buffer_"].updating})?i.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,n){if(null==t||!e.length)return[];var i=Math.ceil(9e4*(t-n+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),a=Math.ceil(9e4*(n-i)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Po(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Po(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),function(e,t,n){var r=v.WebKitDataCue||v.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var a=Mo(e.mediaSource_.duration);if(n.forEach(function(e){var i=e.cueTime+this.timestampOffset;!("number"!=typeof i||v.isNaN(i)||i<0)&&i<1/0&&e.frames.forEach(function(e){var t,n=new r(i,i,e.value||e.url||e.data||"");n.frame=e,n.value=e,t=n,Object.defineProperties(t.frame,{id:{get:function(){return Jr.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return Jr.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return Jr.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),this.metadataTrack_.addCue(n)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var i=e.metadataTrack_.cues,s=[],o=0;o<i.length;o++)i[o]&&s.push(i[o]);var l=s.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),u=Object.keys(l).sort(function(e,t){return Number(e)-Number(t)});u.forEach(function(e,t){var n=l[e],i=Number(u[t+1])||a;n.forEach(function(e){e.endTime=i})})}}}(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,i=void 0;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach(function(e){i.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(i)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),bl);function bl(e,t){io(this,bl);var n=oo(this,(bl.__proto__||Object.getPrototypeOf(bl)).call(this,Jr.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=t,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Jr.browser.IE_VERSION;var i={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){gl(e)?n.audioCodec_=e:pl(e)&&(n.videoCodec_=e)}),n.transmuxer_=new ml,n.transmuxer_.postMessage({action:"init",options:i}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){return function(e,t,n){var i=null,r=null,a=0,s=[],o=[];if(!e&&!t)return Jr.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Jr.createTimeRange();for(var l=e.buffered,u=t.buffered,c=l.length;c--;)s.push({time:l.start(c),type:"start"}),s.push({time:l.end(c),type:"end"});for(c=u.length;c--;)s.push({time:u.start(c),type:"start"}),s.push({time:u.end(c),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),c=0;c<s.length;c++)"start"===s[c].type?2==++a&&(i=s[c].time):"end"===s[c].type&&1==--a&&(r=s[c].time),null!==i&&null!==r&&(o.push([i,r]),r=i=null);return Jr.createTimeRanges(o)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}var Il=(so(Cl,Jr.EventTarget),ro(Cl,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=fl(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=(i=cl(i=n.parameters.codecs.split(","))).filter(function(e){return gl(e)||pl(e)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new vl(this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),Cl);function Cl(){io(this,Cl);var a=oo(this,(Cl.__proto__||Object.getPrototypeOf(Cl)).call(this)),e=void 0;for(e in a.nativeMediaSource_=new v.MediaSource,a.nativeMediaSource_)e in Cl.prototype||"function"!=typeof a.nativeMediaSource_[e]||(a[e]=a.nativeMediaSource_[e].bind(a.nativeMediaSource_));return a.duration_=NaN,Object.defineProperty(a,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(a,"seekable",{get:function(){return this.duration_===1/0?Jr.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),a.sourceBuffers=[],a.activeSourceBuffers_=[],a.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var n=!1,i=!0,t=0;t<a.player_.audioTracks().length;t++){var r=a.player_.audioTracks()[t];if(r.enabled&&"main"!==r.kind){i=!(n=!0);break}}a.sourceBuffers.forEach(function(e,t){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=n;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,i=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=t?i:!i,e.audioDisabled_))return;a.activeSourceBuffers_.push(e)})},a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},a.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},a.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},a),a.on("sourceopen",function(e){var t=d.querySelector('[src="'+a.url_+'"]');t&&(a.player_=Jr(t.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)))}),a.on("sourceended",function(e){for(var t=Mo(a.duration),n=0;n<a.sourceBuffers.length;n++){var i=a.sourceBuffers[n],r=i.metadataTrack_&&i.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),a.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),a}var _l=0;function Bl(e,t){var n=Jr.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})}function Al(){return!!v.MediaSource&&!!v.MediaSource.isTypeSupported&&v.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function Tl(){if(this.MediaSource={open:Bl,supportsNativeMediaSources:Al},Al())return new Il;throw new Error("Cannot use create a virtual MediaSource for this video")}Jr.mediaSources={},Tl.open=Bl,Tl.supportsNativeMediaSources=Al;var Sl={createObjectURL:function(e){var t=void 0;return e instanceof Il?(t=v.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof Il?(t="blob:vjs-media-source/"+_l,_l++,Jr.mediaSources[t]=e,t):(t=v.URL.createObjectURL(e),e.url_=t)}};function Ul(e,t){for(var s=void 0,o=xl(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var i=uo(o,t.playlists[n]);i?o=i:s=!0}return lo(t,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r=e.playlists[0].uri,a=uo(o,e.playlists[0]);a&&((o=a).mediaGroups[t][n][i].playlists[0]=o.playlists[r],s=!1)}}),s?null:o}function Fl(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t}function kl(e,t){var n,i,r={};for(var a in e){var s=e[a].sidx;if(s){var o=Fl(s);if(!t[o])break;n=t[o].sidxInfo,i=s,(Boolean(!n.map&&!i.map)||Boolean(n.map&&i.map&&n.map.byterange.offset===i.map.byterange.offset&&n.map.byterange.length===i.map.byterange.length))&&n.uri===i.uri&&n.byterange.offset===i.byterange.offset&&n.byterange.length===i.byterange.length&&(r[o]=t[o])}}return r}function wl(e,t,n,i,r){var a={uri:no(i.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return n(Jr.mergeOptions(a,{responseType:"arraybuffer",headers:Eo(a)}),r)}Jr.MediaSource=Tl,Jr.URL=Sl;var xl=Jr.mergeOptions,El=(so(Ql,Jr.EventTarget),ro(Ql,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},v.clearTimeout(this.minimumUpdatePeriodTimeout_),v.clearTimeout(this.mediaRequest_),v.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(r,a,s,o){var l=this;return function(e,t){if(l.request){if(l.request=null,e)return l.error={status:t.status,message:"DASH playlist request error at URL: "+r.uri,response:t.response,code:2},s&&(l.state=s),l.trigger("error"),o(a,null);var n=new Uint8Array(t.response),i=us.parseSidx(n.subarray(8));return o(a,i)}}}},{key:"media",value:function(n){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var e=!this.media_||n.uri!==this.media_.uri;if(e&&this.loadedPlaylists_[n.uri]&&this.loadedPlaylists_[n.uri].endList)return this.state="HAVE_METADATA",this.media_=n,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e)if(this.media_&&this.trigger("mediachanging"),n.sidx){var t=void 0,a=void 0;a=this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.sidxMapping_):(t=this.master,this.sidxMapping_);var s=Fl(n.sidx);a[s]={sidxInfo:n.sidx},this.request=wl(n.sidx,n,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(n,t,r,function(e,t){if(!e||!t)throw new Error("failed to request sidx");a[s].sidx=t,i.haveMetadata({startingState:r,playlist:e.playlists[n.uri]})}))}else this.mediaRequest_=v.setTimeout(this.haveMetadata.bind(this,{startingState:r,playlist:n}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.uri]=n,this.mediaRequest_=null,this.refreshMedia_(n.uri),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),v.clearTimeout(this.mediaUpdateTimeout),v.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;v.clearTimeout(this.mediaUpdateTimeout),v.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=v.setTimeout(function(){return t.load()},i)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=ja(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var e=0;e<a.playlists.length;e++){var t="placeholder-uri-"+e;a.playlists[e].uri=t,a.playlists[t]=a.playlists[e]}return lo(a,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r="placeholder-uri-"+t+"-"+n+"-"+i;e.playlists[0].uri=r,a.playlists[r]=e.playlists[0]}}),co(a),ho(a),a}},{key:"start",value:function(){var n=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=v.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?n.masterLoaded_=Date.parse(t.responseHeaders.date):n.masterLoaded_=Date.now(),n.srcUrl=no(n.handleManifestRedirects,n.srcUrl,t),n.syncClientServerClock_(n.onClientServerClockSync_.bind(n))}})}},{key:"syncClientServerClock_",value:function(i){var r,a=this,s=(r=this.masterXml_,function(e){var t=ka(Ya(r),"UTCTiming")[0];if(!t)return null;var n=Ea(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}());return null===s?(this.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===s.method?(this.clientOffset_=s.value-Date.now(),i()):void(this.request=this.hls_.xhr({uri:to(this.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(e,t){if(a.request){if(e)return a.clientOffset_=a.masterLoaded_-Date.now(),i();var n;n="HEAD"===s.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):a.masterLoaded_:Date.parse(t.responseText),a.clientOffset_=n-Date.now(),i()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=v.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var f=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(f.request){if(f.request=null,e)return f.error={status:t.status,message:"DASH playlist request error at URL: "+f.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===f.state&&(f.started=!1),f.trigger("error");f.masterXml_=t.responseText,f.sidxMapping_=(o=f.masterXml_,l=f.srcUrl,u=f.clientOffset_,c=f.sidxMapping_,d=ja(o,{manifestUri:l,clientOffset:u}),h=kl(d.playlists,c),lo(d,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r=e.playlists;h=xl(h,kl(r,c))}}),h);var n=f.parseMasterXml(),i=Ul(f.master,n),r=f.media().sidx;if(i)if(r){var a=Fl(r);if(!f.sidxMapping_[a]){var s=f.media();f.request=wl(s.sidx,s,f.hls_.xhr,{handleManifestRedirects:f.handleManifestRedirects},f.sidxRequestFinished_(s,n,f.state,function(e,t){if(!e||!t)throw new Error("failed to request sidx on minimumUpdatePeriod");f.sidxMapping_[a].sidx=t,f.minimumUpdatePeriodTimeout_=v.setTimeout(function(){f.trigger("minimumUpdatePeriod")},f.master.minimumUpdatePeriod),f.refreshMedia_(f.media().uri)}))}}else f.master=i;f.minimumUpdatePeriodTimeout_=v.setTimeout(function(){f.trigger("minimumUpdatePeriod")},f.master.minimumUpdatePeriod)}var o,l,u,c,d,h})}},{key:"refreshMedia_",value:function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media uri");var n,i=void 0;n=this.masterPlaylistLoader_?(i=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(i=this.master,this.parseMasterXml());var r=Ul(i,n);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[e]):(this.media_=n.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=v.setTimeout(function(){t.trigger("mediaupdatetimeout")},fo(this.media(),!!r))),this.trigger("loadedplaylist")}}]),Ql);function Ql(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];io(this,Ql);var r=oo(this,(Ql.__proto__||Object.getPrototypeOf(Ql)).call(this)),a=n.withCredentials,s=void 0!==a&&a,o=n.handleManifestRedirects,l=void 0!==o&&o;if(r.hls_=t,r.withCredentials=s,r.handleManifestRedirects=l,!e)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_(r.media().uri)}),r.state="HAVE_NOTHING",r.loadedPlaylists_={},"string"==typeof e?(r.srcUrl=e,r.sidxMapping_={},oo(r)):(r.setupChildLoader(i,e),r)}function Gl(e){return Jr.log.debug?Jr.log.debug.bind(Jr,"VHS:",e+" >"):function(){}}function Rl(){}var Ll=(ro(Vl,[{key:"createSourceBuffer_",value:function(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.sourceBuffer_.removing=!1,t.logger_("buffered ["+Do(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Jr.createTimeRanges()}},{key:"remove",value:function(e,t,n){var i=this,r=2<arguments.length&&void 0!==n?n:Rl;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.removing=!0,i.sourceBuffer_.remove(e,t)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Rl}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){function e(){t.sourceBuffer_&&"open"===t.mediaSource.readyState&&t.sourceBuffer_.abort(),t.sourceBuffer_.removeEventListener("updateend",e)}var t=this;this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",e):e()}}]),Vl);function Vl(e,t,n,i){io(this,Vl),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=n,this.mimeType_=t,this.logger_=Gl("SourceUpdater["+n+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,i)):this.createSourceBuffer_(t,i)}function Zl(e){e.forEach(function(e){e.abort()})}function Ol(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Yl,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:jl,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Hl,xhr:t}:null}function Nl(e,t,n,i,r,a,s){var o,l,u,c,d,h,f,g,p,m,y=[],v=(o=y,l=n,u=s,c=0,d=!1,function(e,t){if(!d)return e?(d=!0,Zl(o),u(e,t)):(c+=1)===o.length?(t.endOfAllRequests=Date.now(),t.encryptedBytes?(r=t,a=u,(i=l).addEventListener("message",function e(t){if(t.data.source===r.requestId){i.removeEventListener("message",e);var n=t.data.decrypted;return r.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength),a(null,r)}}),n=r.key.bytes.slice?r.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.key.bytes)),void i.postMessage(Ro({source:r.requestId,encrypted:r.encryptedBytes,key:n,iv:r.key.iv}),[r.encryptedBytes.buffer,n.buffer])):u(null,t)):void 0;var i,r,a,n});if(r.key&&!r.key.bytes){var b=e(Jr.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),(h=r,f=v,function(e,t){var n=t.response,i=Ol(e,t);if(i)return f(i,h);if(16!==n.byteLength)return f({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Hl,xhr:t},h);var r=new DataView(n);return h.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),f(null,h)}));y.push(b)}if(r.map&&!r.map.bytes){var I=e(Jr.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Eo(r.map)}),(g=r,p=i,m=v,function(e,t){var n=t.response,i=Ol(e,t);return i?m(i,g):0===n.byteLength?m({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Hl,xhr:t},g):(g.map.bytes=new Uint8Array(t.response),p&&!p.isInitialized()&&p.init(),g.map.timescales=fs.timescale(g.map.bytes),g.map.videoTrackIds=fs.videoTrackIds(g.map.bytes),m(null,g))}));y.push(I)}var C,_,B,A,T,S=e(Jr.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Eo(r)}),(C=r,_=i,B=v,function(e,t){var n,i=t.response,r=Ol(e,t),a=void 0;return r?B(r,C):0===i.byteLength?B({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Hl,xhr:t},C):(C.stats={bandwidth:(n=t).bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0},C.key?C.encryptedBytes=new Uint8Array(t.response):C.bytes=new Uint8Array(t.response),_&&C.map&&C.map.bytes&&(_.isInitialized()||_.init(),(a=_.parse(C.bytes,C.map.videoTrackIds,C.map.timescales))&&a.captions&&(C.captionStreams=a.captionStreams,C.fmp4Captions=a.captions)),B(null,C))}));return S.addEventListener("progress",(A=r,T=a,function(e){return A.stats=Jr.mergeOptions(A.stats,(n=(t=e).target,(i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0}).bytesReceived=t.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i)),!A.stats.firstBytesReceivedAt&&A.stats.bytesReceived&&(A.stats.firstBytesReceivedAt=Date.now()),T(e,A);var t,n,i})),y.push(S),function(){return Zl(y)}}function Wl(e,t){var n;return e&&(n=v.getComputedStyle(e))?n[t]:""}function Dl(e,i){var r=e.slice();e.sort(function(e,t){var n=i(e,t);return 0===n?r.indexOf(e)-r.indexOf(t):n})}function Xl(e,t){var n=void 0,i=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||v.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i||v.Number.MAX_VALUE)}function Pl(e){return"number"==typeof e&&isFinite(e)}var Ml={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Hl=2,Yl=-101,jl=-102,zl=(so(Jl,Jr.EventTarget),ro(Jl,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Jr.createTimeRanges()}},{key:"initSegment",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var i=Lo(e),r=this.initSegments_[i];return n&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"segmentKey",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var i=Vo(e),r=this.keyCache_[i];this.cacheEncryptionKeys_&&n&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Ll(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(e){var i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var a=null;if(i&&(i.id?a=i.id:i.uri&&(a=i.uri)),this.logger_("playlist update ["+a+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var s=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),r&&(r.mediaIndex-=s,0<=r.mediaIndex&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(v.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),Po(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)Po(e,t,this.inbandTextTracks_[i])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&v.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=v.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&v.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=v.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():e.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(r,e){return function(e,t,n){if(!e||!t)return!1;var i=r===e.segments.length;return e.endList&&"open"===t.readyState&&i}(1<arguments.length&&void 0!==e?e:this.playlist_,this.mediaSource_)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,n,i,r,a){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!i&&1<=l)return null;if(null===a)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n)return t.segments[n],o=s,this.generateSegmentInfo_(t,n+1,o,!1);if(this.fetchAtBuffer_){var u=zo.getMediaInfoForTime(t,s,a.segmentIndex,a.time);n=u.mediaIndex,o=u.startTime}else{var c=zo.getMediaInfoForTime(t,r,a.segmentIndex,a.time);n=c.mediaIndex,o=c.startTime}return this.generateSegmentInfo_(t,n,o,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,i){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=zo.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t,n){var i=2<arguments.length&&void 0!==n?n:1;return((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var s=function(e){var n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,t=e.master.playlists.filter(function(e){return!zo.isIncompatible(e)}),u=t.filter(zo.isEnabled);u.length||(u=t.filter(function(e){return!zo.isDisabled(e)}));var c=u.filter(zo.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:zo.estimateSegmentRequestTime(a,i,e)*t-s}}),d=c.filter(function(e){return e.rebufferingImpact<=0});return Dl(d,function(e,t){return Xl(t.playlist,e.playlist)}),d.length?d[0]:(Dl(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,l=.5;return a<=1/30&&(l=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||o<l||(this.bandwidth=s.playlist.attributes.BANDWIDTH*Ml.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Nl(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t,n,i,r,a=(t=this.seekable_(),n=this.currentTime_(),i=this.playlist_.targetDuration||10,r=t.length&&0<t.start(0)&&t.start(0)<n?t.start(0):n-30,Math.min(r,n-i));0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=i}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===jl?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Yl?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(function(e,t,n){for(var i in n)if(!e[i]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(i);e[i]=r||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var r=e.inbandTextTracks,t=e.captionArray,a=e.timestampOffset;if(t){var s=window.WebKitDataCue||window.VTTCue;t.forEach(function(e){var t=e.stream,n=e.startTime,i=e.endTime;r[t]&&(n+=a,i+=a,r[t].addCue(new s(n,i,e.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e,t,n,i,r,a,s,o,l,u,c,d,h,f,g=this;if(this.pendingSegment_){var p=this.pendingSegment_,m=p.segment,y=this.syncController_.probeSegmentInfo(p);void 0===this.startingMedia_&&y&&(y.containsAudio||y.containsVideo)&&(this.startingMedia_={containsAudio:y.containsAudio,containsVideo:y.containsVideo});var v=(d=this.loaderType_,h=this.startingMedia_,f=y,"main"===d&&h&&f?f.containsAudio||f.containsVideo?h.containsVideo&&!f.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!h.containsVideo&&f.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(v)return this.error({message:v,blacklistDuration:1/0}),void this.trigger("error");if(p.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==p.timestampOffset&&p.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(y&&y.segmentTimestampInfo){var b=y.segmentTimestampInfo[0].ptsTime,I=y.segmentTimestampInfo[0].dtsTime;p.timestampOffset-=b-I}this.sourceUpdater_.timestampOffset(p.timestampOffset),this.trigger("timestampoffset")}var C=this.syncController_.mappingForTimeline(p.timeline);if(null!==C&&this.trigger({type:"segmenttimemapping",mapping:C}),this.state="APPENDING",m.map){var _=Lo(m.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==_){var B=this.initSegment(m.map);this.sourceUpdater_.appendBuffer({bytes:B.bytes},function(){g.activeInitSegmentId_=_})}}p.byteLength=p.bytes.byteLength,"number"==typeof m.start&&"number"==typeof m.end?this.mediaSecondsLoaded+=m.end-m.start:this.mediaSecondsLoaded+=m.duration,this.logger_((t=(e=p).segment,n=t.start,i=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,l=void 0===o?[]:o,u=e.mediaIndex,c=e.timeline,["appending ["+u+"] of ["+a+", "+(a+l.length)+"] from playlist ["+s+"]","["+n+" => "+i+"] in timeline ["+c+"]"].join(" "))),this.sourceUpdater_.appendBuffer({bytes:p.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,p.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(Pl(n)&&Pl(i)){Po(n,i,this.segmentMetadataTrack_);var r=v.WebKitDataCue||v.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:i},s=new r(n,i,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),Jl);function Jl(e){io(this,Jl);var t=oo(this,(Jl.__proto__||Object.getPrototypeOf(Jl)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new As:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Gl("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}function ql(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}var Kl=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),$l=(so(eu,zl),ro(eu,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Jr.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Jr.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!e)return null;var i=Lo(e),r=this.initSegments_[i];if(n&&!r&&e.bytes){var a=Kl.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(Kl,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){Po(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,n=e.segment;if("function"!=typeof v.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var i=void 0,r=function(){t.subtitlesTrack_.tech_.off("vttjsloaded",i),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")};return i=function(){t.subtitlesTrack_.tech_.off("vttjserror",r),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",r)}n.requested=!0;try{this.parseVTTCues_(e)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var e=void 0,n=!1;"function"==typeof v.TextDecoder?e=new v.TextDecoder("utf8"):(e=v.WebVTT.StringDecoder(),n=!0);var i=new v.WebVTT.Parser(v,v.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){return t.timestampmap=e},i.onparsingerror=function(e){Jr.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;n&&(r=ql(r)),i.parse(r)}var a=t.bytes;n&&(a=ql(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-i.duration)}}}else i.empty=!0}}]),eu);function eu(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};io(this,eu);var n=oo(this,(eu.__proto__||Object.getPrototypeOf(eu)).call(this,e,t));return n.mediaSource_=null,n.subtitlesTrack_=null,n}function tu(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}var nu=function(e,t){var n;return(n=Gs.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(Gs.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=Gs.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=Gs.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Gs.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=Gs.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var l=9e4/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(e):function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=Vs;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),Gs.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=Gs.ts.parsePat(n));break;case"pmt":t.table||(t.table=Gs.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=Vs,r+=Vs}}(e,t),t.table)if(t.table.hasOwnProperty(i))switch(t.table[i]){case 27:n.video=[],Ls(e,t,n),0===n.video.length&&delete n.video;break;case 15:n.audio=[],Rs(e,t,n),0===n.audio.length&&delete n.audio}return n}(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Qs(e.dts,n),e.pts=Qs(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=Qs(e.dts,i),e.pts=Qs(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Qs(r.dts,i),r.pts=Qs(r.pts,i),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(n,t),n):null},iu=[{name:"VOD",run:function(e,t,n,i,r){return n===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==o&&(0===d||o<d))break;o=d,s={time:c,segmentIndex:l}}}return s}},{name:"Segment",run:function(e,t,n,i,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===i&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==o&&o<c)break;(!s||null===o||c<=o)&&(o=c,s={time:u.start,segmentIndex:l})}}return s}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var l=t.discontinuityStarts[o],u=t.discontinuitySequence+o+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!a||null===s||d<=s)&&(s=d,a={time:c.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],ru=(so(au,Jr.EventTarget),ro(au,[{key:"getSyncPoint",value:function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<i.segmentIndex&&(i.time*=-1),Math.abs(i.time+Co(e,i.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,i){for(var r=[],a=0;a<iu.length;a++){var s=iu[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var i=e.segments[n];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t,n=e.segment,i=e.playlist;return(t=n.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,t)&&(this.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:n.start})),t}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=fs.timescale(t.map.bytes),i=fs.compositionStartTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=nu(e.bytes,this.inspectCache_),n=void 0,i=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:n,end:i,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var l;l=s<0?n.start-Co(t,e.mediaIndex,r):n.end+Co(t,e.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:o}}}}}]),au);function au(){io(this,au);var e=oo(this,(au.__proto__||Object.getPrototypeOf(au)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Gl("SyncController"),e}function su(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function ou(e,t){(t.activePlaylistLoader=e).load()}var lu=new al("./decrypter-worker.worker.js",function(e,t){var n,c,m,i,r,l,s;function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e){d(this,h),c=c||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,f=void 0,g=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=u[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,g=16843009*l[d=l[c=l[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*l[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=g=g<<24^g>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}(),this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=l;t<4*l+28;t++)i=r[t-1],(t%l==0||8===l&&t%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%l==0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}function o(){d(this,o),this.listeners={}}function u(){d(this,u);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,i));return e.jobs=[],e.delay=1,e.timeout_=null,e}function y(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function f(e,t,n,i){d(this,f);var r=f.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([y(a[o-4]),y(a[o-3]),y(a[o-2]),y(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))})}n=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},c=null,h.prototype.decrypt=function(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],l=i^s[1],u=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,g=s.length/4-2,p=void 0,m=4,y=this._tables[1],v=y[0],b=y[1],I=y[2],C=y[3],_=y[4];for(p=0;p<g;p++)d=v[o>>>24]^b[l>>16&255]^I[u>>8&255]^C[255&c]^s[m],h=v[l>>>24]^b[u>>16&255]^I[c>>8&255]^C[255&o]^s[m+1],f=v[u>>>24]^b[c>>16&255]^I[o>>8&255]^C[255&l]^s[m+2],c=v[c>>>24]^b[o>>16&255]^I[l>>8&255]^C[255&u]^s[m+3],m+=4,o=d,l=h,u=f;for(p=0;p<4;p++)r[(3&-p)+a]=_[o>>>24]<<24^_[l>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^s[m++],d=o,o=l,l=u,u=c,c=d},m=h,o.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},o.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},o.prototype.trigger=function(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,a)},o.prototype.dispose=function(){this.listeners={}},o.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}(u,r=i=o),u.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},u.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},l=u,f.prototype.decryptChunk_=function(t,n,i,r){return function(){var e=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new m(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,g=void 0,p=void 0;for(o=n[0],l=n[1],u=n[2],c=n[3],p=0;p<i.length;p+=4)d=y(i[p]),h=y(i[p+1]),f=y(i[p+2]),g=y(i[p+3]),r.decrypt(d,h,f,g,s,p),s[p]=y(s[p]^o),s[p+1]=y(s[p+1]^l),s[p+2]=y(s[p+2]^u),s[p+3]=y(s[p+3]^c),o=d,l=h,u=f,c=g;return a}(t,n,i);r.set(e,t.byteOffset)}},n(f,null,[{key:"STEP",get:function(){return 32e3}}]),s=f,new function(a){a.onmessage=function(e){var r=e.data,t=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),n=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),i=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new s(t,n,i,function(e,t){var n,i;a.postMessage((n={source:r.source,decrypted:t},i={},Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i),[t.buffer])})}}(this)}),uu={AUDIO:function(l,u){return function(){var e=u.segmentLoaders[l],t=u.mediaTypes[l],n=u.blacklistCurrentPlaylist;su(e,t);var i=t.activeTrack(),r=t.activeGroup(),a=(r.filter(function(e){return e.default})[0]||r[0]).id,s=t.tracks[a];if(i!==s){for(var o in Jr.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[o].enabled=t.tracks[o]===s;t.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(i,r){return function(){var e=r.segmentLoaders[i],t=r.mediaTypes[i];Jr.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),su(e,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}},cu={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",uu[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",uu[e](e,n))}},du={AUDIO:function(e,t){var n,i,r=t.hls,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,d=u.tracks,h=t.masterPlaylistLoader;for(var f in l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{default:{default:!0}}}),l[e])for(var g in c[f]||(c[f]=[]),l[e][f]){var p,m=l[e][f][g];if(p=m.resolvedUri?new yo(m.resolvedUri,r,o):m.playlists&&"dash"===a?new El(m.playlists[0],r,o,h):null,m=Jr.mergeOptions({id:g,playlistLoader:p},m),cu[e](e,m.playlistLoader,t),c[f].push(m),void 0===d[g]){var y=new Jr.AudioTrack({id:g,kind:(n=m,i=void 0,i=n.default?"main":"alternative",n.characteristics&&0<=n.characteristics.indexOf("public.accessibility.describes-video")&&(i="main-desc"),i),enabled:!1,language:m.language,default:m.default,label:g});d[g]=y}}s.on("error",uu[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.hls,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var f in u[h]||(u[h]=[]),o[e][h])if(!o[e][h][f].forced){var g=o[e][h][f],p=void 0;if("hls"===r?p=new yo(g.resolvedUri,i,s):"dash"===r&&(p=new El(g.playlists[0],i,s,d)),g=Jr.mergeOptions({id:f,playlistLoader:p},g),cu[e](e,g.playlistLoader,t),u[h].push(g),void 0===c[f]){var m=n.addRemoteTextTrack({id:f,kind:"subtitles",default:g.default&&g.autoselect,language:g.language,label:f},!1).track;c[f]=m}}a.on("error",uu[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var l in a[o]||(a[o]=[]),i[e][o]){var u=i[e][o][l];if(u.instreamId.match(/CC\d/)&&(a[o].push(Jr.mergeOptions({id:l},u)),void 0===s[l])){var c=n.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;s[l]=c}}}},hu={AUDIO:function(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}},fu=void 0,gu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],pu=(so(mu,Jr.EventTarget),ro(mu,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;wo(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,e.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load()),function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){du[e](e,t)});var n=t.mediaTypes,e=t.masterPlaylistLoader,i=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){var o,l,u,c,a,s;n[e].activeGroup=(a=e,s=t,function(t){var e=s.masterPlaylistLoader,n=s.mediaTypes[a].groups,i=e.media();if(!i)return null;var r=null;return i.attributes[a]&&(r=n[i.attributes[a]]),r=r||n.main,void 0===t?r:null===t?null:r.filter(function(e){return e.id===t.id})[0]||null}),n[e].activeTrack=hu[e](e,t),n[e].onGroupChanged=(u=e,c=t,function(){var e=c.segmentLoaders,t=e[u],n=e.main,i=c.mediaTypes[u],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;su(t,i),a&&(a.playlistLoader?(t.resyncLoader(),ou(a.playlistLoader,i)):s&&n.resetEverything())}),n[e].onTrackChanged=(o=e,l=t,function(){var e=l.segmentLoaders,t=e[o],n=e.main,i=l.mediaTypes[o],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;su(t,i),a&&(a.playlistLoader?(s!==a.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),ou(a.playlistLoader,i)):n.resetEverything())})});var a=n.AUDIO.activeGroup(),s=(a.filter(function(e){return e.default})[0]||a[0]).id;function o(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})}for(var l in n.AUDIO.tracks[s].enabled=!0,n.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return n[e].onGroupChanged()})}),i.audioTracks().addEventListener("change",o),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",function(){i.audioTracks().removeEventListener("change",o),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[l])}({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,hls:i.hls_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),e);try{i.setupSourceBuffers_()}catch(e){return Jr.log.warn("Failed to create SourceBuffers",e),i.mediaSource.endOfStream("decode")}i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=i.masterPlaylistLoader_.media();if(!e){i.excludeUnsupportedVariants_();var t=void 0;return i.enableLowInitialPlaylist&&(t=i.selectInitialPlaylist()),t=t||i.selectPlaylist(),i.initialMedia_=t,void i.masterPlaylistLoader_.media(i.initialMedia_)}if(i.useCueTags_&&i.updateAdCues_(e),i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.updateDuration(),i.tech_.paused()||(i.mainSegmentLoader_.load(),i.audioSegmentLoader_&&i.audioSegmentLoader_.load()),!e.endList){var n=function(){var e=i.seekable();0!==e.length&&i.mediaSource.addSeekableRange_(e.start(0),e.end(0))};i.duration()!==1/0?i.tech_.one("durationchange",function e(){i.duration()===1/0?n():i.tech_.one("durationchange",e)}):n()}}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=i.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;wo(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=t,i.mainSegmentLoader_.playlist(e,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=i.masterPlaylistLoader_.media();i.stuckAtPlaylistEnd_(e)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),i.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a])n.AUDIO[a][s].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),fu.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),fu.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(n.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist(),t=a.masterPlaylistLoader_.media(),n=a.tech_.buffered(),i=n.length?n.end(n.length-1)-a.tech_.currentTime():0,r=a.bufferLowWaterLine();(!t.endList||a.duration()<Ml.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r<=i)&&a.masterPlaylistLoader_.media(e),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){Jr.browser.IE_VERSION||Jr.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Jr.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Jr.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){Jr.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=fu.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=.1;var a=r.end(r.length-1);return a-i<=.1&&n-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(e,t){var n,i=0<arguments.length&&void 0!==e?e:{},r=t,a=void 0;if(a=i.playlist||this.masterPlaylistLoader_.media(),r=r||i.blacklistDuration||this.blacklistDuration,!a){this.error=i;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var s=1===this.masterPlaylistLoader_.master.playlists.filter(Fo).length,o=this.masterPlaylistLoader_.master.playlists;return 1===o.length?(Jr.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(s&&(Jr.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),o.forEach(function(e){e.excludeUntil!==1/0&&delete e.excludeUntil}),this.tech_.trigger("retryplaylist")),a.excludeUntil=Date.now()+1e3*r,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),Jr.log.warn("Problem encountered with the current HLS playlist."+(i.message?" "+i.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n,s))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=No(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:fu.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==i&&0!==(e=fu.Playlist.seekable(n,i)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=fu.Playlist.seekable(n,i)).length)return}var r=void 0,a=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Jr.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+Do(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){function e(){t.logger_("Setting duration from "+t.mediaSource.duration+" => "+i);try{t.mediaSource.duration=i}catch(e){Jr.log.warn("Failed to set media source duration",e)}t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)}var t=this,n=this.mediaSource.duration,i=fu.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();0<r.length&&(i=Math.max(i,r.end(r.length-1))),n!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var i=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=i.mediaTypes_[e].groups;for(var n in t)t[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=function(e,t){var n,i,r=(i=t).segments&&i.segments.length&&i.segments[0].map?"mp4":"mp2t",a=(n=t.attributes||{}).CODECS?dl(n.CODECS):yl,s=t.attributes||{},o=!0,l=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&s.AUDIO){var u=e.mediaGroups.AUDIO[s.AUDIO];if(u)for(var c in o=!(l=!0),u)if(!u[c].uri&&!u[c].playlists){o=!0;break}}l&&!a.audioProfile&&(o||(a.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return dl(r.playlists[0].attributes.CODECS).audioProfile}return null}(e,s.AUDIO)),a.audioProfile||(Jr.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),a.audioProfile=yl.audioProfile));var d={};a.videoCodec&&(d.video=""+a.videoCodec+a.videoObjectTypeIndicator),a.audioProfile&&(d.audio="mp4a.40."+a.audioProfile);var h=hl("audio",r,[d.audio]),f=hl("video",r,[d.video]),g=hl("video",r,[d.video,d.audio]);return l?!o&&d.video?[f,h]:o||d.video?[g,h]:[h,h]:d.video?[g]:[h]}(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Jr.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&v.MediaSource&&v.MediaSource.isTypeSupported&&!v.MediaSource.isTypeSupported('video/mp4; codecs="'+e.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return cl([e])[0]})+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var n=2,i=null,t=void 0;e.attributes.CODECS&&(t=dl(e.attributes.CODECS),i=t.videoCodec,n=t.codecCount),this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};e.attributes.CODECS&&(t=dl(e.attributes.CODECS)),t.codecCount!==n&&(e.excludeUntil=1/0),t.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){var i=2<arguments.length&&void 0!==n?n:0;if(e.segments)for(var r=i,a=void 0,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a=a||tu(t,r+o.duration/2)){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&((a=new v.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),t.addCue(a)),"cueOutCont"in o){var l,u,c=o.cueOutCont.split("/").map(parseFloat),d=go(c,2);l=d[0],u=d[1],(a=new v.VTTCue(r,r+o.duration,"")).adStartTime=r-l,a.adEndTime=a.adStartTime+u,t.addCue(a)}r+=o.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Ml.GOAL_BUFFER_LENGTH,n=Ml.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Ml.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Ml.BUFFER_LOW_WATER_LINE,n=Ml.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Ml.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,i)}}]),mu);function mu(e){io(this,mu);var t,n=oo(this,(mu.__proto__||Object.getPrototypeOf(mu)).call(this)),i=e.url,r=e.handleManifestRedirects,a=e.withCredentials,s=e.tech,o=e.bandwidth,l=e.externHls,u=e.useCueTags,c=e.blacklistDuration,d=e.enableLowInitialPlaylist,h=e.sourceType,f=e.seekTo,g=e.cacheEncryptionKeys;if(!i)throw new Error("A non-empty playlist URL is required");fu=l,n.withCredentials=a,n.tech_=s,n.hls_=s.hls,n.seekTo_=f,n.sourceType_=h,n.useCueTags_=u,n.blacklistDuration=c,n.enableLowInitialPlaylist=d,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:a,handleManifestRedirects:r,timeout:null},n.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Rl,activeTrack:Rl,onGroupChanged:Rl,onTrackChanged:Rl}}),t),n.mediaSource=new Jr.MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_.bind(n)),n.seekable_=Jr.createTimeRanges(),n.hasPlayed_=function(){return!1},n.syncController_=new ru(e),n.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new lu,n.inbandTextTracks_={};var p={hls:n.hls_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:o,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:g};return n.masterPlaylistLoader_="dash"===n.sourceType_?new El(i,n.hls_,n.requestOptions_):new yo(i,n.hls_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new zl(Jr.mergeOptions(p,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new zl(Jr.mergeOptions(p,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new $l(Jr.mergeOptions(p,{loaderType:"vtt"}),e),n.setupSegmentLoaderListeners_(),gu.forEach(function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(n,e)}),n.logger_=Gl("MPC"),n.masterPlaylistLoader_.load(),n}function yu(e,t,n){io(this,yu);var r,a,s,i=e.masterPlaylistController_,o=i[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(i);if(t.attributes.RESOLUTION){var l=t.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=n,this.enabled=(r=e.playlists,a=t.uri,s=o,function(e){var t=r.master.playlists[a],n=Uo(t),i=Fo(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})}var vu=["seeking","seeked","pause","playing","error"],bu=(ro(Iu,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&v.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=v.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;return this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+.1),void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+Do(e)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=No(this.tech_.buffered(),e);return t.length&&e+3<=t.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=Wo(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,n,i){var r=3<arguments.length&&void 0!==i&&i;if(!e.length)return!1;var a=e.end(e.length-1)+.1;return!n.endList&&r&&(a=e.end(e.length-1)+3*n.targetDuration),a<t}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=Wo(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.seekTo(i.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return Jr.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return Jr.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null}}]),Iu);function Iu(e){var t=this;function n(){return t.monitorCurrentTime_()}function i(){return t.techWaiting_()}function r(){return t.cancelTimer_()}function a(){return t.fixesBadSeeks_()}io(this,Iu),this.tech_=e.tech,this.seekable=e.seekable,this.seekTo=e.seekTo,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Gl("PlaybackWatcher"),this.logger_("initialize"),this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(vu,r),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",i),t.tech_.off(vu,r),t.tech_.off("canplay",n),t.checkCurrentTimeTimeout_&&v.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}function Cu(e){!function t(n,e){var i=0,r=0,a=Jr.mergeOptions(_u,e);function s(){r&&n.currentTime(r)}function o(e){null!=e&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(e),n.trigger({type:"usage",name:"hls-error-reload"}),n.play())}function l(){if(Date.now()-i<1e3*a.errorInterval)n.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return i=Date.now(),a.getSource.call(n,o);Jr.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function u(){n.off("loadedmetadata",s),n.off("error",l),n.off("dispose",u)}n.ready(function(){n.trigger({type:"usage",name:"hls-error-reload-initialized"})}),n.on("error",l),n.on("dispose",u),n.reloadSourceOnError=function(e){u(),t(n,e)}}(this,e)}var _u={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};Jr.use("*",function(t){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(e){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(e),e},play:function(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.tech_.currentTime())}}});var Bu={PlaylistLoader:yo,Playlist:zo,Decrypter:$s,AsyncStream:Hs,decrypt:zs,utils:Ko,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,n,i,r){var a=e.playlists.map(function(e){var t,n;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||v.Number.MAX_VALUE,width:t,height:n,playlist:e}});Dl(a,function(e,t){return e.bandwidth-t.bandwidth});var s=(a=a.filter(function(e){return!zo.isIncompatible(e.playlist)})).filter(function(e){return zo.isEnabled(e.playlist)});s.length||(s=a.filter(function(e){return!zo.isDisabled(e.playlist)}));var o=s.filter(function(e){return e.bandwidth*Ml.BANDWIDTH_VARIANCE<t}),l=o[o.length-1],u=o.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(!1===r){var c=u||s[0]||a[0];return c?c.playlist:null}var d=o.filter(function(e){return e.width&&e.height});Dl(d,function(e,t){return e.width-t.width});var h=d.filter(function(e){return e.width===n&&e.height===i});l=h[h.length-1];var f=h.filter(function(e){return e.bandwidth===l.bandwidth})[0],g=void 0,p=void 0,m=void 0;f||(p=(g=d.filter(function(e){return e.width>n||e.height>i})).filter(function(e){return e.width===g[0].width&&e.height===g[0].height}),l=p[p.length-1],m=p.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var y=m||f||u||s[0]||a[0];return y?y.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Wl(this.tech_.el(),"width"),10),parseInt(Wl(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(zo.isEnabled);return Dl(e,function(e,t){return Xl(e,t)}),e.filter(function(e){return dl(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Xl,comparePlaylistResolution:function(e,t){var n=void 0,i=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||v.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||v.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:xo()};function Au(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null}function Tu(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.uri){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})}["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(Bu,t,{get:function(){return Jr.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Ml[t]},set:function(e){Jr.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?Jr.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Ml[t]=e}})});var Su,Uu="videojs-vhs";function Fu(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Uu);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}Bu.canPlaySource=function(){return Jr.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Bu.supportsNativeHls=(Su=d.createElement("video"),!!Jr.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(Su.canPlayType(e))})),Bu.supportsNativeDash=!!Jr.getTech("Html5").isSupported()&&/maybe|probably/i.test(d.createElement("video").canPlayType("application/dash+xml")),Bu.supportsTypeNatively=function(e){return"hls"===e?Bu.supportsNativeHls:"dash"===e&&Bu.supportsNativeDash},Bu.isSupported=function(){return Jr.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ku=(so(wu,Jr.getComponent("Component")),ro(wu,[{key:"setOptions_",value:function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=Fu();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ml.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ml.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Bu,this.options_.sourceType=Au(t),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e),i.setCurrentTime(e)},this.masterPlaylistController_=new pu(this.options_),this.playbackWatcher_=new bu(Jr.mergeOptions(this.options_,{seekable:function(){return i.seekable()},media:function(){return i.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){Jr.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Bu.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Bu.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=0<this.throughput?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){Jr.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Xo(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Xo(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){i.options_.useBandwidthFromLocalStorage&&function(e){if(window.localStorage){var t=Fu();t=t?Jr.mergeOptions(t,e):e;try{window.localStorage.setItem(Uu,JSON.stringify(t))}catch(e){return}}}({bandwidth:i.bandwidth,throughput:Math.round(i.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var n,e;e=(n=i).playlists,n.representations=function(){return e.master.playlists.filter(function(e){return!Uo(e)}).map(function(e,t){return new yu(n,e,e.uri)})},function(e){var t=e.masterPlaylistController_.mainSegmentLoader_,n=e.masterPlaylistController_.audioSegmentLoader_,i=Jr.players[e.tech_.options_.playerId];if(i.eme){var r=function(e,t,n){if(!e)return e;var i=void 0,r=void 0;if(n.mimeType_)i=t.mimeType_,r=n.mimeType_;else{var a=fl(t.mimeType_),s=a.parameters.codecs.split(","),o=void 0,l=void 0;s.forEach(function(e){gl(e=e.trim())?o=e:pl(e)&&(l=e)}),i=a.type+'; codecs="'+l+'"',r=a.type.replace("video","audio")+'; codecs="'+o+'"'}var u={},c=t.playlist_;for(var d in e)u[d]={audioContentType:r,videoContentType:i},c.contentProtection&&c.contentProtection[d]&&c.contentProtection[d].pssh&&(u[d].pssh=c.contentProtection[d].pssh),"string"==typeof e[d]&&(u[d].url=e[d]);return Jr.mergeOptions(e,u)}(e.source_.keySystems,t,n);r&&(i.currentSource().keySystems=r,11!==Jr.browser.IE_VERSION&&i.eme.initializeMediaKeys&&i.eme.initializeMediaKeys())}}(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Jr.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var n=this,e=Jr.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;t=n.qualityLevels_,(e=n).representations().forEach(function(e){t.addQualityLevel(e)}),Tu(t,e.playlists)}),this.playlists.on("mediachange",function(){Tu(n.qualityLevels_,n.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(wu.prototype.__proto__||Object.getPrototypeOf(wu.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n=0,i=void 0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+.25*a.duration)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:i},o=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)}(i,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t,n,i){var r=!(2<arguments.length&&void 0!==n)||n,a=3<arguments.length&&void 0!==i?i:2;return function e(t){var n=t.programTime,i=t.playlist,r=t.retryCount,a=void 0===r?2:r,s=t.seekTo,o=t.pauseAfterSeek,l=void 0===o||o,u=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!i||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var d=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return new Date(o.getTime()+1e3*l)<n?null:(o<n&&(i=s),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:zo.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(n,i);if(!d)return c({message:n+" was not found in the stream"});var h=d.segment,f=function(e,t){var n=void 0,i=void 0;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(h.dateTimeObject,n);if("estimate"===d.type)return 0===a?c({message:n+" is not buffered yet. Try again"}):(s(d.estimatedStart+f),void u.one("seeked",function(){e({programTime:n,playlist:i,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c})}));var g=h.start+f;u.one("seeked",function(){return c(null,u.currentTime())}),l&&u.pause(),s(g)}({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:a,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),wu);function wu(e,t,n){io(this,wu);var i=oo(this,(wu.__proto__||Object.getPrototypeOf(wu)).call(this,t,n.hls));if(t.options_&&t.options_.playerId){var r=Jr(t.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return Jr.log.warn("player.hls is deprecated. Use player.tech().hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),i},configurable:!0}),r.vhs=i,(r.dash=i).player_=r}if(i.tech_=t,i.source_=e,i.stats={},i.setOptions_(),i.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(d,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement;t&&t.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()}),i.on(i.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),i.on(i.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}var xu={name:"videojs-http-streaming",VERSION:"1.11.2",canHandleSource:function(e,t){var n=Jr.mergeOptions(Jr.options,1<arguments.length&&void 0!==t?t:{});return xu.canPlayType(e.type,n)},handleSource:function(e,t,n){var i=Jr.mergeOptions(Jr.options,2<arguments.length&&void 0!==n?n:{});return t.hls=new ku(e,t,i),t.hls.xhr=xo(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e,t){var n=Jr.mergeOptions(Jr.options,1<arguments.length&&void 0!==t?t:{}).hls.overrideNative,i=Au(e);return!i||Bu.supportsTypeNatively(i)&&!n?"":"maybe"}};return void 0!==Jr.MediaSource&&void 0!==Jr.URL||(Jr.MediaSource=Tl,Jr.URL=Sl),Tl.supportsNativeMediaSources()&&Jr.getTech("Html5").registerSourceHandler(xu,0),Jr.HlsHandler=ku,Jr.HlsSourceHandler=xu,Jr.Hls=Bu,Jr.use||Jr.registerComponent("Hls",Bu),Jr.options.hls=Jr.options.hls||{},Jr.registerPlugin?Jr.registerPlugin("reloadSourceOnError",Cu):Jr.plugin("reloadSourceOnError",Cu),Jr}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).immer={})}(this,function(e){"use strict";var t,h,y,n,i,r="undefined"!=typeof Symbol,a="undefined"!=typeof Map,s="undefined"!=typeof Set,c=r?Symbol("immer-nothing"):((t={})["immer-nothing"]=!0,t),o=r?Symbol("immer-draftable"):"__$immer_draftable",d=r?Symbol("immer-state"):"__$immer_state",l=r?Symbol.iterator:"@@iterator",u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function f(e,t){function n(){this.constructor=e}u(e,t),e.prototype=(n.prototype=t.prototype,new n)}function g(e){return!!e&&!!e[d]}function p(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[o]||!!e.constructor[o]||B(e)||A(e))}(i=h||(h={}))[i.Object=0]="Object",i[i.Array=1]="Array",i[i.Map=2]="Map",i[i.Set=3]="Set",(n=y||(y={}))[n.ProxyObject=0]="ProxyObject",n[n.ProxyArray=1]="ProxyArray",n[n.ES5Object=2]="ES5Object",n[n.ES5Array=3]="ES5Array",n[n.Map=4]="Map",n[n.Set=5]="Set";var m="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function v(n,i){b(n)===h.Object?m(n).forEach(function(e){return i(e,n[e],n)}):n.forEach(function(e,t){return i(t,e,n)})}function b(e){if(e||k(),e[d])switch(e[d].type){case y.ES5Object:case y.ProxyObject:return h.Object;case y.ES5Array:case y.ProxyArray:return h.Array;case y.Map:return h.Map;case y.Set:return h.Set}return Array.isArray(e)?h.Array:B(e)?h.Map:A(e)?h.Set:h.Object}function I(e,t){return b(e)===h.Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){return b(e)===h.Map?e.get(t):e[t]}function _(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function B(e){return a&&e instanceof Map}function A(e){return s&&e instanceof Set}function T(e){return e.copy||e.base}function S(i,r){if(void 0===r&&(r=!1),Array.isArray(i))return i.slice();var a=Object.create(Object.getPrototypeOf(i));return m(i).forEach(function(e){if(e!==d){var t=Object.getOwnPropertyDescriptor(i,e),n=t.value;if(t.get){if(!r)throw new Error("Immer drafts cannot have computed properties");n=t.get.call(i)}t.enumerable?a[e]=n:Object.defineProperty(a,e,{value:n,writable:!0,configurable:!0})}}),a}function U(e,t){if(p(e)&&!g(e)&&!Object.isFrozen(e)){var n=b(e);n===h.Set?e.add=e.clear=e.delete=F:n===h.Map&&(e.set=e.clear=e.delete=F),Object.freeze(e),t&&v(e,function(e,t){return U(t,!0)})}}function F(){throw new Error("This object has been frozen and should not be mutated")}function k(){throw new Error("Illegal state, please file a bug")}var w=function(){function n(e,t){this.drafts=[],this.parent=e,this.immer=t,this.canAutoFreeze=!0}return n.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},n.prototype.revoke=function(){this.leave(),this.drafts.forEach(x),this.drafts=null},n.prototype.leave=function(){this===n.current&&(n.current=this.parent)},n.enter=function(e){var t=new n(n.current,e);return n.current=t},n}();function x(e){var t=e[d];t.type===y.ProxyObject||t.type===y.ProxyArray?t.revoke():t.revoked=!0}function E(e,t,n){var i=n.drafts[0],r=void 0!==t&&t!==i;if(e.willFinalize(n,t,r),r){if(i[d].modified)throw n.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");p(t)&&(t=Q(e,t,n),n.parent||R(e,t)),n.patches&&(n.patches.push({op:"replace",path:[],value:t}),n.inversePatches.push({op:"replace",path:[],value:i[d].base}))}else t=Q(e,i,n,[]);return n.revoke(),n.patches&&n.patchListener(n.patches,n.inversePatches),t!==c?t:void 0}function Q(n,e,t,i){var r=e[d];if(!r)return Object.isFrozen(e)?e:G(n,e,t);if(r.scope!==t)return e;if(!r.modified)return R(n,r.base,!0),r.base;if(!r.finalized){if(r.finalized=!0,G(n,r.draft,t,i),n.onDelete&&r.type!==y.Set)if(n.useProxies)v(r.assigned,function(e,t){t||n.onDelete(r,e)});else{var a=r.base,s=r.copy;v(a,function(e){I(s,e)||n.onDelete(r,e)})}n.onCopy&&n.onCopy(r),n.autoFreeze&&t.canAutoFreeze&&U(r.copy,!1),i&&t.patches&&function(e,t,n,i){switch(e.type){case y.ProxyObject:case y.ES5Object:case y.Map:return h=t,f=n,g=i,p=(d=e).base,m=d.copy,v(d.assigned,function(e,t){var n=C(p,e),i=C(m,e),r=t?I(p,e)?"replace":"add":"remove";if(n!==i||"replace"!==r){var a=h.concat(e);f.push("remove"===r?{op:r,path:a}:{op:r,path:a,value:i}),g.push("add"===r?{op:"remove",path:a}:"remove"===r?{op:"add",path:a,value:n}:{op:"replace",path:a,value:n})}});case y.ES5Array:case y.ProxyArray:return function(e,t,n,i){var r,a,s=e.base,o=e.assigned,l=e.copy;l||k(),l.length<s.length&&(s=(r=[l,s])[0],l=r[1],n=(a=[i,n])[0],i=a[1]);for(var u=l.length-s.length,c=0;s[c]===l[c]&&c<s.length;)++c;for(var d=s.length;c<d&&s[d-1]===l[d+u-1];)--d;for(var h=c;h<d;++h)if(o[h]&&l[h]!==s[h]){var f=t.concat([h]);n.push({op:"replace",path:f,value:l[h]}),i.push({op:"replace",path:f,value:s[h]})}var g=n.length;for(h=d+u-1;d<=h;--h){f=t.concat([h]);n[g+h-d]={op:"add",path:f,value:l[h]},i.push({op:"remove",path:f})}}(e,t,n,i);case y.Set:a=t,s=n,o=i,l=(r=e).base,u=r.copy,c=0,l.forEach(function(e){if(!u.has(e)){var t=a.concat([c]);s.push({op:"remove",path:t,value:e}),o.unshift({op:"add",path:t,value:e})}c++}),c=0,u.forEach(function(e){if(!l.has(e)){var t=a.concat([c]);s.push({op:"add",path:t,value:e}),o.unshift({op:"remove",path:t,value:e})}c++})}var r,a,s,o,l,u,c,d,h,f,g,p,m}(r,i,t.patches,t.inversePatches)}return r.copy}function G(n,i,r,a){var s=i[d];return s&&(s.type!==y.ES5Object&&s.type!==y.ES5Array||(s.copy=S(s.draft,!0)),i=s.copy),v(i,function(e,t){return function n(i,r,a,s,e,t,o,l){if(o===e)throw Error("Immer forbids circular references");var u=!!s&&e===a,c=A(e);if(g(o)){var d=l&&u&&!c&&!I(s.assigned,t)?l.concat(t):void 0;(function(e,t,n){switch(b(e)){case h.Map:e.set(t,n);break;case h.Set:e.delete(t),e.add(n);break;default:e[t]=n}})(e,t,o=Q(i,o,r,d)),g(o)&&(r.canAutoFreeze=!1)}else{if(u&&_(o,C(s.base,t)))return;p(o)&&(v(o,function(e,t){return n(i,r,a,s,o,e,t,l)}),r.parent||R(i,o))}u&&i.onAssign&&!c&&i.onAssign(s,t,o)}(n,r,i,s,i,e,t,a)}),i}function R(e,t,n){void 0===n&&(n=!1),e.autoFreeze&&!g(t)&&U(t,n)}var L={get:function(e,t){if(t===d)return e;var n=e.drafts;if(!e.modified&&I(n,t))return n[t];var i=T(e)[t];if(e.finalized||!p(i))return i;if(e.modified){if(i!==Z(e.base,t))return i;n=e.copy}return n[t]=e.scope.immer.createProxy(i,e)},has:function(e,t){return t in T(e)},ownKeys:function(e){return Reflect.ownKeys(T(e))},set:function(e,t,n){if(!e.modified){var i=Z(e.base,t);if(n?_(i,n)||n===e.drafts[t]:_(i,n)&&t in e.base)return!0;N(e),O(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){return void 0!==Z(e.base,t)||t in e.base?(e.assigned[t]=!1,N(e),O(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var n=T(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&(i.writable=!0,i.configurable=e.type!==y.ProxyArray||"length"!==t),i},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},V={};function Z(e,t){var n=e[d],i=Reflect.getOwnPropertyDescriptor(n?T(n):e,t);return i&&i.value}function O(e){if(!e.modified){if(e.modified=!0,e.type===y.ProxyObject||e.type===y.ProxyArray){var n=e.copy=S(e.base);v(e.drafts,function(e,t){n[e]=t}),e.drafts=void 0}e.parent&&O(e.parent)}}function N(e){e.copy||(e.copy=S(e.base))}function W(e,t){var n=e[d];if(!n||n.finalizing)return e[t];n.finalizing=!0;var i=e[t];return n.finalizing=!1,i}function D(e){e.modified||(e.modified=!0,e.parent&&D(e.parent))}function X(e){e.copy||(e.copy=P(e.base))}function P(e){var t=e&&e[d];if(t){t.finalizing=!0;var n=S(t.draft,!0);return t.finalizing=!1,n}return S(e)}v(L,function(e,t){V[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),V.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return L.deleteProperty.call(this,e[0],t)},V.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return L.set.call(this,e[0],t,n,e[0])};var M={};function H(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(T(e)))}function Y(e){for(var t=e.length-1;0<=t;t--){var n=e[t][d];if(!n.modified)switch(n.type){case y.ES5Array:z(n)&&D(n);break;case y.ES5Object:j(n)&&D(n)}}}function j(e){for(var t=e.base,n=e.draft,i=Object.keys(n),r=i.length-1;0<=r;r--){var a=i[r],s=t[a];if(void 0===s&&!I(t,a))return!0;var o=n[a],l=o&&o[d];if(l?l.base!==s:!_(o,s))return!0}return i.length!==Object.keys(t).length}function z(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var J=function(e){if(!e)throw new Error("Map is not polyfilled");function t(e,t){return this[d]={type:y.Map,parent:t,scope:t?t.scope:w.current,modified:!1,finalized:!1,copy:void 0,assigned:void 0,base:e,draft:this,isManual:!1,revoked:!1},this}f(t,e);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return T(this[d]).size},enumerable:!0,configurable:!0}),n.has=function(e){return T(this[d]).has(e)},n.set=function(e,t){var n=this[d];return H(n),T(n).get(e)!==t&&(q(n),n.scope.immer.markChanged(n),n.assigned.set(e,!0),n.copy.set(e,t),n.assigned.set(e,!0)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[d];return H(t),q(t),t.scope.immer.markChanged(t),t.assigned.set(e,!1),t.copy.delete(e),!0},n.clear=function(){var e=this[d];return H(e),q(e),e.scope.immer.markChanged(e),e.assigned=new Map,e.copy.clear()},n.forEach=function(i,r){var a=this;T(this[d]).forEach(function(e,t,n){i.call(r,a.get(t),t,a)})},n.get=function(e){var t=this[d];H(t);var n=T(t).get(e);if(t.finalized||!p(n))return n;if(n!==t.base.get(e))return n;var i=t.scope.immer.createProxy(n,t);return q(t),t.copy.set(e,i),i},n.keys=function(){return T(this[d]).keys()},n.values=function(){var e,t=this,n=this.keys();return(e={})[l]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},n.entries=function(){var e,n=this,i=this.keys();return(e={})[l]=function(){return n.entries()},e.next=function(){var e=i.next();if(e.done)return e;var t=n.get(e.value);return{done:!1,value:[e.value,t]}},e},n[l]=function(){return this.entries()},t}(Map);function q(e){e.copy||(e.assigned=new Map,e.copy=new Map(e.base))}var K=function(e){if(!e)throw new Error("Set is not polyfilled");function t(e,t){return this[d]={type:y.Set,parent:t,scope:t?t.scope:w.current,modified:!1,finalized:!1,copy:void 0,base:e,draft:this,drafts:new Map,revoked:!1,isManual:!1},this}f(t,e);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return T(this[d]).size},enumerable:!0,configurable:!0}),n.has=function(e){var t=this[d];return H(t),t.copy?!!t.copy.has(e)||!(!t.drafts.has(e)||!t.copy.has(t.drafts.get(e))):t.base.has(e)},n.add=function(e){var t=this[d];return H(t),t.copy?t.copy.add(e):t.base.has(e)||($(t),t.scope.immer.markChanged(t),t.copy.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[d];return H(t),$(t),t.scope.immer.markChanged(t),t.copy.delete(e)||!!t.drafts.has(e)&&t.copy.delete(t.drafts.get(e))},n.clear=function(){var e=this[d];return H(e),$(e),e.scope.immer.markChanged(e),e.copy.clear()},n.values=function(){var e=this[d];return H(e),$(e),e.copy.values()},n.entries=function(){var e=this[d];return H(e),$(e),e.copy.entries()},n.keys=function(){return this.values()},n[l]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),i=n.next();!i.done;)e.call(t,i.value,i.value,this),i=n.next()},t}(Set);function $(n){n.copy||(n.copy=new Set,n.base.forEach(function(e){if(p(e)){var t=n.scope.immer.createProxy(e,n);n.drafts.set(e,t),n.copy.add(t)}else n.copy.add(e)}))}function ee(l,e){return e.forEach(function(e){var t=e.path,n=e.op;t.length||k();for(var i=l,r=0;r<t.length-1;r++)if(!(i=C(i,t[r]))||"object"!=typeof i)throw new Error("Cannot apply patch, path doesn't resolve: "+t.join("/"));var a=b(i),s=te(e.value),o=t[t.length-1];switch(n){case"replace":switch(a){case h.Map:return i.set(o,s);case h.Set:throw new Error('Sets cannot have "replace" patches.');default:return i[o]=s}case"add":switch(a){case h.Array:return i.splice(o,0,s);case h.Map:return i.set(o,s);case h.Set:return i.add(s);default:return i[o]=s}case"remove":switch(a){case h.Array:return i.splice(o,1);case h.Map:return i.delete(o);case h.Set:return i.delete(e.value);default:return delete i[o]}default:throw new Error("Unsupported patch operation: "+n)}}),l}function te(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(te);if(B(e))return new Map(Array.from(e.entries()).map(function(e){return[e[0],te(e[1])]}));if(A(e))return new Set(Array.from(e).map(te));var t=Object.create(Object.getPrototypeOf(e));for(var n in e)t[n]=te(e[n]);return t}function ne(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,r++)i[r]=a[s];return i}var ie={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:"undefined"!=typeof process?"production"!==process.env.NODE_ENV:"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},re=function(){function e(r){var a=this;this.useProxies=!1,this.autoFreeze=!1,v(ie,function(e,t){var n,i;a[e]=null!=(i=null===(n=r)||void 0===n?void 0:n[e])?i:t}),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}return e.prototype.produce=function(e,a,t){var n,i=this;if("function"==typeof e&&"function"!=typeof a){var s=a;a=e;var o=this;return function(e){var t=arguments,n=this;void 0===e&&(e=s);for(var i=[],r=1;r<arguments.length;r++)i[r-1]=t[r];return o.produce(e,function(e){return a.call.apply(a,ne([n,e],i))})}}if("function"!=typeof a)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==t&&"function"!=typeof t)throw new Error("The third argument to `produce` must be a function or undefined");if(p(e)){var r=w.enter(this),l=this.createProxy(e,void 0),u=!0;try{n=a(l),u=!1}finally{u?r.revoke():r.leave()}return"undefined"!=typeof Promise&&n instanceof Promise?n.then(function(e){return r.usePatches(t),E(i,e,r)},function(e){throw r.revoke(),e}):(r.usePatches(t),E(this,n,r))}if((n=a(e))!==c)return void 0===n&&(n=e),R(this,n,!0),n},e.prototype.produceWithPatches=function(r,e,t){var n,i,a=this;return"function"==typeof r?function(e){for(var t=arguments,n=[],i=1;i<arguments.length;i++)n[i-1]=t[i];return a.produceWithPatches(e,function(e){return r.apply(void 0,ne([e],n))})}:(t&&k(),[this.produce(r,e,function(e,t){n=e,i=t}),n,i])},e.prototype.createDraft=function(e){if(!p(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=w.enter(this),n=this.createProxy(e,void 0);return n[d].isManual=!0,t.leave(),n},e.prototype.finishDraft=function(e,t){var n=e&&e[d];if(!n||!n.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(n.finalized)throw new Error("The given draft is already finalized");var i=n.scope;return i.usePatches(t),E(this,void 0,i)},e.prototype.setAutoFreeze=function(e){this.autoFreeze=e},e.prototype.setUseProxies=function(e){this.useProxies=e},e.prototype.applyPatches=function(e,t){var n;for(n=t.length-1;0<=n;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}return g(e)?ee(e,t):this.produce(e,function(e){return ee(e,t.slice(n+1))})},e.prototype.createProxy=function(e,t){var n=B(e)?new J(e,t):A(e)?new K(e,t):this.useProxies?function(e,t){var n=Array.isArray(e),i={type:n?y.ProxyArray:y.ProxyObject,scope:t?t.scope:w.current,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null,isManual:!1},r=i,a=L;n&&(r=[i],a=V);var s=Proxy.revocable(r,a),o=s.revoke,l=s.proxy;return i.draft=l,i.revoke=o,l}(e,t):function(l,e){var u=Array.isArray(l),c=P(l);v(c,function(e){var t,n,i,r,a,s,o;t=c,n=e,i=u||(a=l,s=e,!(!(o=Object.getOwnPropertyDescriptor(a,s))||!o.enumerable)),(r=M[n])?r.enumerable=i:M[n]=r={configurable:!0,enumerable:i,get:function(){return function(e,t){H(e);var n=W(T(e),t);return e.finalizing?n:n===W(e.base,t)&&p(n)?(X(e),e.copy[t]=e.scope.immer.createProxy(n,e)):n}(this[d],n)},set:function(e){!function(e,t,n){if(H(e),e.assigned[t]=!0,!e.modified){if(_(n,W(T(e),t)))return;D(e),X(e)}e.copy[t]=n}(this[d],n,e)}},Object.defineProperty(t,n,r)});var t,n,i,r={type:u?y.ES5Array:y.ES5Object,scope:e?e.scope:w.current,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:e,base:l,draft:c,copy:null,revoked:!1,isManual:!1};return t=c,n=d,i=r,Object.defineProperty(t,n,{value:i,enumerable:!1,writable:!0}),c}(e,t);return(t?t.scope:w.current).drafts.push(n),n},e.prototype.willFinalize=function(e,t,n){var i,r,a;this.useProxies||(r=t,a=n,(i=e).drafts.forEach(function(e){e[d].finalizing=!0}),a?g(r)&&r[d].scope===i&&Y(i.drafts):(i.patches&&function t(e){if(e&&"object"==typeof e){var n=e[d];if(n){var i=n.base,r=n.draft,a=n.assigned,s=n.type;if(s===y.ES5Object)v(r,function(e){e!==d&&(void 0!==i[e]||I(i,e)?a[e]||t(r[e]):(a[e]=!0,D(n)))}),v(i,function(e){void 0!==r[e]||I(r,e)||(a[e]=!1,D(n))});else if(s===y.ES5Array){if(z(n)&&(D(n),a.length=!0),r.length<i.length)for(var o=r.length;o<i.length;o++)a[o]=!1;else for(o=i.length;o<r.length;o++)a[o]=!0;var l=Math.min(r.length,i.length);for(o=0;o<l;o++)void 0===a[o]&&t(r[o])}}}}(i.drafts[0]),Y(i.drafts)))},e.prototype.markChanged=function(e){this.useProxies?O(e):D(e)},e}(),ae=new re,se=ae.produce,oe=ae.produceWithPatches.bind(ae),le=ae.setAutoFreeze.bind(ae),ue=ae.setUseProxies.bind(ae),ce=ae.applyPatches.bind(ae),de=ae.createDraft.bind(ae),he=ae.finishDraft.bind(ae);e.Immer=re,e.applyPatches=ce,e.castDraft=function(e){return e},e.castImmutable=function(e){return e},e.createDraft=de,e.default=se,e.finishDraft=he,e.immerable=o,e.isDraft=g,e.isDraftable=p,e.nothing=c,e.original=function(e){if(e&&e[d])return e[d].base},e.produce=se,e.produceWithPatches=oe,e.setAutoFreeze=le,e.setUseProxies=ue,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Redux={})}(this,function(e){"use strict";var t,n,g=("function"==typeof(n=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol)?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},p={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e,t){return function(){return t(e.apply(this,arguments))}}function s(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}e.__DO_NOT_USE__ActionTypes=p,e.applyMiddleware=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(r){return function(){var e=r.apply(void 0,arguments),t=function(){throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}},i=a.map(function(e){return e(n)});return function(r){for(var e=1;arguments.length>e;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(a,!0).forEach(function(e){var t,n,i;t=r,i=a[n=e],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):s(a).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}({},e,{dispatch:t=o.apply(void 0,i)(e.dispatch)})}}},e.bindActionCreators=function(e,t){if("function"==typeof e)return a(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var i in e){var r=e[i];"function"==typeof r&&(n[i]=a(r,t))}return n},e.combineReducers=function(e){for(var t=Object.keys(e),h={},n=0;t.length>n;n++){var i=t[n];"function"==typeof e[i]&&(h[i]=e[i])}var f,r,g=Object.keys(h);try{r=h,Object.keys(r).forEach(function(e){var t=r[e];if(void 0===t(void 0,{type:p.INIT}))throw Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:p.PROBE_UNKNOWN_ACTION()}))throw Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+p.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){f=e}return function(e,t){if(void 0===e&&(e={}),f)throw f;for(var n=!1,i={},r=0;g.length>r;r++){var a=g[r],s=e[a],o=(0,h[a])(s,t);if(void 0===o){var l=(u=a,void 0,"Given "+((d=(c=t)&&c.type)&&'action "'+d+'"'||"an action")+', reducer "'+u+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw Error(l)}i[a]=o,n=n||o!==s}var u,c,d;return(n=n||g.length!==Object.keys(e).length)?i:e}},e.compose=o,e.createStore=function e(t,n,i){var r;if("function"==typeof n&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof n&&void 0===i&&(i=n,n=void 0),void 0!==i){if("function"!=typeof i)throw Error("Expected the enhancer to be a function.");return i(e)(t,n)}if("function"!=typeof t)throw Error("Expected the reducer to be a function.");var a=t,s=n,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function d(){if(u)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function h(t){if("function"!=typeof t)throw Error("Expected the listener to be a function.");if(u)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var n=!0;return c(),l.push(t),function(){if(n){if(u)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");n=!1,c();var e=l.indexOf(t);l.splice(e,1),o=null}}}function f(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw Error("Reducers may not dispatch actions.");try{u=!0,s=a(s,e)}finally{u=!1}for(var t=o=l,n=0;t.length>n;n++)(0,t[n])();return e}return f({type:p.INIT}),(r={dispatch:f,subscribe:h,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");a=e,f({type:p.REPLACE})}})[g]=function(){var e,n=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(d())}return t(),{unsubscribe:n(t)}}})[g]=function(){return this},e},r},Object.defineProperty(e,"__esModule",{value:!0})});var runtime=function(a){"use strict";var l,e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function s(e,t,n,i){var a,s,o,l,r=t&&t.prototype instanceof y?t:y,u=Object.create(r.prototype),c=new U(i||[]);return u._invoke=(a=e,s=n,o=c,l=h,function(e,t){if(l===g)throw new Error("Generator is already running");if(l===p){if("throw"===e)throw t;return k()}for(o.method=e,o.arg=t;;){var n=o.delegate;if(n){var i=A(n,o);if(i){if(i===m)continue;return i}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(l===h)throw l=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);l=g;var r=d(a,s,o);if("normal"===r.type){if(l=o.done?p:f,r.arg===m)continue;return{value:r.arg,done:o.done}}"throw"===r.type&&(l=p,o.method="throw",o.arg=r.arg)}}),u}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",f="suspendedYield",g="executing",p="completed",m={};function y(){}function o(){}function c(){}var v={};v[r]=function(){return this};var b=Object.getPrototypeOf,I=b&&b(b(F([])));I&&I!==e&&u.call(I,r)&&(v=I);var C=c.prototype=y.prototype=Object.create(v);function _(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function B(l){var t;this._invoke=function(n,i){function e(){return new Promise(function(e,t){!function t(e,n,i,r){var a=d(l[e],l,n);if("throw"!==a.type){var s=a.arg,o=s.value;return o&&"object"==typeof o&&u.call(o,"__await")?Promise.resolve(o.__await).then(function(e){t("next",e,i,r)},function(e){t("throw",e,i,r)}):Promise.resolve(o).then(function(e){s.value=e,i(s)},function(e){return t("throw",e,i,r)})}r(a.arg)}(n,i,e,t)})}return t=t?t.then(e,e):e()}}function A(e,t){var n=e.iterator[t.method];if(n===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,A(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=d(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,m):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function F(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:l,done:!0}}return o.prototype=C.constructor=c,c.constructor=o,c[i]=o.displayName="GeneratorFunction",a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(C),e},a.awrap=function(e){return{__await:e}},_(B.prototype),B.prototype[n]=function(){return this},a.AsyncIterator=B,a.async=function(e,t,n,i){var r=new B(s(e,t,n,i));return a.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},_(C),C[i]="Generator",C[r]=function(){return this},C.toString=function(){return"[object Generator]"},a.keys=function(n){var i=[];for(var e in n)i.push(e);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=F,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function e(e,t){return a.type="throw",a.arg=n,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=u.call(r,"catchLoc"),o=u.call(r,"finallyLoc");if(s&&o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&u.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:F(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),m}},a}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(e){Function("r","regeneratorRuntime = r")(runtime)}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).ReduxSaga={})}(this,function(e){"use strict";var t=function(e){return"@@redux-saga/"+e},r=t("CANCEL_PROMISE"),n=t("CHANNEL_END"),f=t("IO"),u=t("MATCH"),i=t("MULTICAST"),a=t("SAGA_ACTION"),s=t("SELF_CANCELLATION"),y=t("TASK"),v=t("TASK_CANCEL"),l=t("TERMINATE"),o=t("LOCATION");function c(){return(c=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var d=function(e){return null==e},h=function(e){return null!=e},g=function(e){return"function"==typeof e},p=function(e){return"string"==typeof e},m=Array.isArray,b=function(e){return e&&g(e.then)},I=function(e){return e&&g(e.next)&&g(e.throw)},C=function e(t){return t&&(p(t)||A(t)||g(t)||m(t)&&t.every(e))},_=function(e){return e&&g(e.take)&&g(e.close)},B=function(e){return g(e)&&e.hasOwnProperty("toString")},A=function(e){return!!e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},T=function(e){return _(e)&&e[i]},S=function(){return!0},U=function(){},F=function(e){return e},k=function(t,n){c(t,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(function(e){t[e]=n[e]})};function w(e,t){var n=e.indexOf(t);n<0||e.splice(n,1)}function x(e){var t=!1;return function(){t||(t=!0,e())}}var E=function(e){throw e},Q=function(e){return{value:e,done:!0}};function G(e,t,n){void 0===t&&(t=E),void 0===n&&(n="iterator");var i={meta:{name:n},next:e,throw:t,return:Q,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(i[Symbol.iterator]=function(){return i}),i}function R(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var L=function(e){return Array.apply(null,Array(e))},V=function(t){return function(e){return t(Object.defineProperty(e,a,{value:!0}))}},Z=function(e){return e===l},O=function(e){return e===v},N=function(e){return Z(e)||O(e)};function W(e,i){var r,t=Object.keys(e),a=t.length,s=0,o=m(e)?L(a):{},l={};return t.forEach(function(n){var e=function(e,t){r||(t||N(e)?(i.cancel(),i(e,t)):(o[n]=e,++s===a&&(r=!0,i(o))))};e.cancel=U,l[n]=e}),i.cancel=function(){r||(r=!0,t.forEach(function(e){return l[e].cancel()}))},l}function D(e){return{name:e.name||"anonymous",location:X(e)}}function X(e){return e[o]}var P={isEmpty:S,put:U,take:U};function M(n,i){void 0===n&&(n=10);var r=Array(n),a=0,s=0,o=0,l=function(e){r[s]=e,s=(s+1)%n,a++},t=function(){if(0!=a){var e=r[o];return r[o]=null,a--,o=(o+1)%n,e}},u=function(){for(var e=[];a;)e.push(t());return e};return{isEmpty:function(){return 0==a},put:function(e){var t;if(a<n)l(e);else switch(i){case 1:throw Error("Channel's Buffer overflow!");case 3:r[s]=e,o=s=(s+1)%n;break;case 4:t=2*n,r=u(),a=r.length,s=r.length,o=0,r.length=t,n=t,l(e)}},take:t,flush:u}}var H=function(){return P},Y=function(e){return M(e,3)},j=function(e){return M(e,4)},z=Object.freeze({__proto__:null,none:H,fixed:function(e){return M(e,1)},dropping:function(e){return M(e,2)},sliding:Y,expanding:j}),J=[],q=0;function K(e){try{te(),e()}finally{ne()}}function $(e){J.push(e),q||(te(),ie())}function ee(e){try{return te(),e()}finally{ie()}}function te(){q++}function ne(){q--}function ie(){var e;for(ne();!q&&void 0!==(e=J.shift());)K(e)}var re=function(e){return function(t){return e.some(function(e){return ue(e)(t)})}},ae=function(t){return function(e){return t(e)}},se=function(t){return function(e){return e.type===t+""}},oe=function(t){return function(e){return e.type===t}},le=function(){return S};function ue(e){var t="*"===e?le:p(e)?se:m(e)?re:B(e)?se:g(e)?ae:A(e)?oe:null;if(null===t)throw Error("invalid pattern: "+e);return t(e)}var ce,de,he={type:n},fe=function(e){return e&&e.type===n};function ge(t){void 0===t&&(t=j());var i=!1,r=[];return{take:function(e){i&&t.isEmpty()?e(he):t.isEmpty()?(r.push(e),e.cancel=function(){w(r,e)}):e(t.take())},put:function(e){if(!i){if(0===r.length)return t.put(e);r.shift()(e)}},flush:function(e){i&&t.isEmpty()?e(he):e(t.flush())},close:function(){if(!i){i=!0;var e=r;r=[];for(var t=0,n=e.length;t<n;t++)(0,e[t])(he)}}}}function pe(){var e,a=!1,s=[],o=s,n=function(){o===s&&(o=s.slice())},l=function(){a=!0;var e=s=o;o=[],e.forEach(function(e){e(he)})};return(e={})[i]=!0,e.put=function(e){if(!a)if(fe(e))l();else for(var t=s=o,n=0,i=t.length;n<i;n++){var r=t[n];r[u](e)&&(r.cancel(),r(e))}},e.take=function(e,t){void 0===t&&(t=le),a?e(he):(e[u]=t,n(),o.push(e),e.cancel=x(function(){n(),w(o,e)}))},e.close=l,e}function me(){var e=pe(),t=e.put;return e.put=function(e){e[a]?t(e):$(function(){t(e)})},e}"function"==typeof(de=("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()).Symbol)?de.observable?ce=de.observable:(ce=de("observable"),de.observable=ce):ce="@@observable";var ye=function(){return Math.random().toString(36).substring(7).split("").join(".")};ye(),ye();var ve=0,be=1,Ie=2,Ce=3,_e="TAKE",Be="RACE",Ae="CALL",Te="FORK",Se="CANCEL",Ue="SELECT",Fe="ACTION_CHANNEL",ke="CANCELLED",we="GET_CONTEXT",xe="SET_CONTEXT",Ee=Object.freeze({__proto__:null,TAKE:_e,PUT:"PUT",ALL:"ALL",RACE:Be,CALL:Ae,CPS:"CPS",FORK:Te,JOIN:"JOIN",CANCEL:Se,SELECT:Ue,ACTION_CHANNEL:Fe,CANCELLED:ke,FLUSH:"FLUSH",GET_CONTEXT:we,SET_CONTEXT:xe});function Qe(e,t){var n=e[r];g(n)&&(t.cancel=n),e.then(t,function(e){t(e,!0)})}var Ge,Re=0,Le=function(){return++Re};function Ve(e){e.isRunning()&&e.cancel()}var Ze=((Ge={})[_e]=function(e,t,n){var i=t.channel,r=void 0===i?e.channel:i,a=t.pattern,s=t.maybe,o=function(e){e instanceof Error?n(e,!0):!fe(e)||s?n(e):n(l)};try{r.take(o,h(a)?ue(a):null)}catch(e){return void n(e,!0)}n.cancel=o.cancel},Ge.PUT=function(t,e,n){var i=e.channel,r=e.action,a=e.resolve;$(function(){var e;try{e=(i?i.put:t.dispatch)(r)}catch(e){return void n(e,!0)}a&&b(e)?Qe(e,n):n(e)})},Ge.ALL=function(e,t,n,i){var r=i.digestEffect,a=Re,s=Object.keys(t);if(0!==s.length){var o=W(t,n);s.forEach(function(e){r(t[e],a,o[e],e)})}else n(m(t)?[]:{})},Ge[Be]=function(e,t,i,n){var r=n.digestEffect,a=Re,s=Object.keys(t),o=m(t)?L(s.length):{},l={},u=!1;s.forEach(function(n){var e=function(e,t){u||(t||N(e)?(i.cancel(),i(e,t)):(i.cancel(),u=!0,o[n]=e,i(o)))};e.cancel=U,l[n]=e}),i.cancel=function(){u||(u=!0,s.forEach(function(e){return l[e].cancel()}))},s.forEach(function(e){u||r(t[e],a,l[e],e)})},Ge[Ae]=function(e,t,n,i){var r=t.context,a=t.fn,s=t.args,o=i.task;try{var l=a.apply(r,s);if(b(l))return void Qe(l,n);if(I(l))return void Ye(e,l,o.context,Re,D(a),!1,n);n(l)}catch(e){n(e,!0)}},Ge.CPS=function(e,t,n){var i=t.context,r=t.fn,a=t.args;try{var s=function(e,t){d(e)?n(t):n(e,!0)};r.apply(i,a.concat(s)),s.cancel&&(n.cancel=s.cancel)}catch(e){n(e,!0)}},Ge[Te]=function(t,e,n,i){var r,a,s=e.fn,o=e.detached,l=i.task,u=function(e){var t=e.context,n=e.fn,i=e.args;try{var r=n.apply(t,i);if(I(r))return r;var a=!1;return G(function(e){return a?{value:e,done:!0}:(a=!0,{value:r,done:!b(r)})})}catch(e){return G(function(){throw e})}}({context:e.context,fn:s,args:e.args}),c=(a=s,(r=u).isSagaIterator?{name:r.meta.name}:D(a));ee(function(){var e=Ye(t,u,l.context,Re,c,o,void 0);o?n(e):e.isRunning()?(l.queue.addTask(e),n(e)):e.isAborted()?l.queue.abort(e.error()):n(e)})},Ge.JOIN=function(e,t,n,i){var r=i.task,a=function(e,t){if(e.isRunning()){var n={task:r,cb:t};t.cancel=function(){e.isRunning()&&w(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(m(t)){if(0===t.length)return void n([]);var s=W(t,n);t.forEach(function(e,t){a(e,s[t])})}else a(t,n)},Ge[Se]=function(e,t,n,i){t===s?Ve(i.task):m(t)?t.forEach(Ve):Ve(t),n()},Ge[Ue]=function(e,t,n){var i=t.selector,r=t.args;try{n(i.apply(void 0,[e.getState()].concat(r)))}catch(e){n(e,!0)}},Ge[Fe]=function(n,e,t){var i=e.pattern,r=ge(e.buffer),a=ue(i),s=function e(t){fe(t)||n.channel.take(e,a),r.put(t)},o=r.close;r.close=function(){s.cancel(),o()},n.channel.take(s,a),t(r)},Ge[ke]=function(e,t,n,i){n(i.task.isCancelled())},Ge.FLUSH=function(e,t,n){t.flush(n)},Ge[we]=function(e,t,n,i){n(i.task.context[t])},Ge[xe]=function(e,t,n,i){k(i.task.context,t),n()},Ge);function Oe(e,t){return e+"?"+t}function Ne(e){var t=e.name,n=e.location;return n?t+"  "+Oe(n.fileName,n.lineNumber):t}var We=null,De=[],Xe=function(e){e.crashedEffect=We,De.push(e)},Pe=function(){We=null,De.length=0},Me=function(e){We=e},He=function(){var e,t,n,i,r,a,s=De[0],o=De.slice(1),l=s.crashedEffect?(e=X(s.crashedEffect))?e.code+"  "+Oe(e.fileName,e.lineNumber):"":null;return["The above error occurred in task "+Ne(s.meta)+(l?" \n when executing effect "+l:"")].concat(o.map(function(e){return"    created by "+Ne(e.meta)}),[(t=De,n=function(e){return e.cancelledTasks},i=t,a=(r=[]).concat.apply(r,i.map(n)),a.length?["Tasks cancelled due to error:"].concat(a).join("\n"):"")]).join("\n")};function Ye(o,i,e,r,a,t,n){var l=o.finalizeRunEffect(function(e,t,n){if(b(e))Qe(e,n);else if(I(e))Ye(o,e,u.context,t,a,!1,n);else if(e&&e[f]){(0,Ze[e.type])(o,e.payload,n,c)}else n(e)});d.cancel=U;var s={meta:a,cancel:function(){s.status===ve&&(s.status=be,d(v))},status:ve},u=function(i,e,t,n,r,a,s){var o;void 0===s&&(s=U);var l,u,c=ve,d=null,h=[],f=Object.create(t),g=function(i,t,r){var a,s=[],o=!1;function l(e){t(),n(),r(e,!0)}function e(n){s.push(n),n.cont=function(e,t){o||(w(s,n),n.cont=U,t?l(e):(n===i&&(a=e),s.length||(o=!0,r(a))))}}function n(){o||(o=!0,s.forEach(function(e){e.cont=U,e.cancel()}),s=[])}return e(i),{addTask:e,cancelAll:n,abort:l,getTasks:function(){return s}}}(e,function(){h.push.apply(h,g.getTasks().map(function(e){return e.meta.name}))},p);function p(t,n){if(n){if(c=Ie,Xe({meta:r,cancelledTasks:h}),m.isRoot){var e=He();Pe(),i.onError(t,{sagaStack:e})}u=t,d&&d.reject(t)}else t===v?c=be:c!==be&&(c=Ce),l=t,d&&d.resolve(t);m.cont(t,n),m.joiners.forEach(function(e){e.cb(t,n)}),m.joiners=null}var m=((o={})[y]=!0,o.id=n,o.meta=r,o.isRoot=a,o.context=f,o.joiners=[],o.queue=g,o.cancel=function(){c===ve&&(c=be,g.cancelAll(),p(v,!1))},o.cont=s,o.end=p,o.setContext=function(e){k(f,e)},o.toPromise=function(){return d||((n={}).promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),d=n,c===Ie?d.reject(u):c!==ve&&d.resolve(l)),d.promise;var n},o.isRunning=function(){return c===ve},o.isCancelled=function(){return c===be||c===ve&&e.status===be},o.isAborted=function(){return c===Ie},o.result=function(){return l},o.error=function(){return u},o);return m}(o,s,e,r,a,t,n),c={task:u,digestEffect:h};return n&&(n.cancel=u.cancel),d(),u;function d(e,t){try{var n;t?(n=i.throw(e),Pe()):n=O(e)?(s.status=be,d.cancel(),g(i.return)?i.return(v):{done:!0,value:v}):Z(e)?g(i.return)?i.return():{done:!0}:i.next(e),n.done?(s.status!==be&&(s.status=Ce),s.cont(n.value)):h(n.value,r,d)}catch(e){if(s.status===be)throw e;s.status=Ie,s.cont(e,!0)}}function h(n,e,i,t){void 0===t&&(t="");var r,a=Le();function s(e,t){r||(r=!0,i.cancel=U,o.sagaMonitor&&(t?o.sagaMonitor.effectRejected(a,e):o.sagaMonitor.effectResolved(a,e)),t&&Me(n),i(e,t))}o.sagaMonitor&&o.sagaMonitor.effectTriggered({effectId:a,parentEffectId:e,label:t,effect:n}),s.cancel=U,i.cancel=function(){r||(r=!0,s.cancel(),s.cancel=U,o.sagaMonitor&&o.sagaMonitor.effectCancelled(a))},l(n,a,s)}}function je(e,t){for(var n=e.channel,i=void 0===n?me():n,r=e.dispatch,a=e.getState,s=e.context,o=void 0===s?{}:s,l=e.sagaMonitor,u=e.effectMiddlewares,c=e.onError,d=void 0===c?R:c,h=arguments.length,f=Array(2<h?h-2:0),g=2;g<h;g++)f[g-2]=arguments[g];var p,m=t.apply(void 0,f),y=Le();if(l&&(l.rootSagaStarted=l.rootSagaStarted||U,l.effectTriggered=l.effectTriggered||U,l.effectResolved=l.effectResolved||U,l.effectRejected=l.effectRejected||U,l.effectCancelled=l.effectCancelled||U,l.actionDispatched=l.actionDispatched||U,l.rootSagaStarted({effectId:y,saga:t,args:f})),u){var v=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}.apply(void 0,u);p=function(i){return function(e,t,n){return v(function(e){return i(e,t,n)})(e)}}}else p=F;var b={channel:i,dispatch:V(r),getState:a,sagaMonitor:l,onError:d,finalizeRunEffect:p};return ee(function(){var e=Ye(b,m,o,y,D(t),!0,void 0);return l&&l.effectResolved(y,e),e})}var ze=function(e,t){var n;return(n={})[f]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Je=function(e){return ze(Te,c({},e.payload,{detached:!0}))};function qe(e,t){return void 0===e&&(e="*"),C(e)?ze(_e,{pattern:e}):T(e)&&h(t)&&C(t)?ze(_e,{channel:e,pattern:t}):_(e)?ze(_e,{channel:e}):void 0}function Ke(e,t){return d(t)&&(t=e,e=void 0),ze("PUT",{channel:e,action:t})}function $e(e){var t=ze(Be,e);return t.combinator=!0,t}function et(e,t){var n,i=null;return g(e)?n=e:(n=m(e)?(i=e[0],e[1]):(i=e.context,e.fn),i&&p(n)&&g(i[n])&&(n=i[n])),{context:i,fn:n,args:t}}function tt(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ze(Ae,et(e,n))}function nt(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ze(Te,et(e,n))}function it(e){return void 0===e&&(e=s),ze(Se,e)}function rt(e,t){return ze(Fe,{pattern:e,buffer:t})}var at=tt.bind(null,function(t,n){var i;void 0===n&&(n=!0);var e=new Promise(function(e){i=setTimeout(e,t,n)});return e[r]=function(){clearTimeout(i)},e}),st=function(e){return{done:!0,value:e}},ot={};function lt(e){return _(e)?"channel":B(e)?e+"":g(e)?e.name:e+""}function ut(i,e,t){var r,a,s,o=e;function n(e,t){if(o===ot)return st(e);if(t&&!a)throw o=ot,t;r&&r(e);var n=t?i[a](t):i[o]();return s=n.effect,r=n.stateUpdater,a=n.errorState,(o=n.nextState)===ot?st(e):s}return G(n,function(e){return n(null,e)},t)}function ct(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a,s,o={done:!1,value:qe(e)},l=function(e){return{done:!1,value:nt.apply(void 0,[t].concat(i,[e]))}},u=function(e){return a=e},c=function(e){return s=e};return ut({q1:function(){return{nextState:"q2",effect:o,stateUpdater:c}},q2:function(){return a?{nextState:"q3",effect:(e=a,{done:!1,value:it(e)})}:{nextState:"q1",effect:l(s),stateUpdater:u};var e},q3:function(){return{nextState:"q1",effect:l(s),stateUpdater:u}}},"q1","takeLatest("+lt(e)+", "+t.name+")")}var dt=Object.freeze({__proto__:null,effectTypes:Ee,take:qe,takeMaybe:function(){var e=qe.apply(void 0,arguments);return e.payload.maybe=!0,e},put:Ke,putResolve:function(){var e=Ke.apply(void 0,arguments);return e.payload.resolve=!0,e},all:function(e){var t=ze("ALL",e);return t.combinator=!0,t},race:$e,call:tt,apply:function(e,t,n){return void 0===n&&(n=[]),ze(Ae,et([e,t],n))},cps:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ze("CPS",et(e,n))},fork:nt,spawn:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Je(nt.apply(void 0,[e].concat(n)))},join:function(e){return ze("JOIN",e)},cancel:it,select:function(e){void 0===e&&(e=F);for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ze(Ue,{selector:e,args:n})},actionChannel:rt,cancelled:function(){return ze(ke,{})},flush:function(e){return ze("FLUSH",e)},getContext:function(e){return ze(we,e)},setContext:function(e){return ze(xe,e)},delay:at,debounce:function(e,t,n){for(var i=arguments.length,r=Array(3<i?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];return nt.apply(void 0,[function(e,t,n){for(var i=arguments.length,r=Array(3<i?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var s,o,l={done:!1,value:qe(t)},u={done:!1,value:$e({action:qe(t),debounce:at(e)})},c=function(e){return s=e},d=function(e){return o=e};return ut({q1:function(){return{nextState:"q2",effect:l,stateUpdater:c}},q2:function(){return{nextState:"q3",effect:u,stateUpdater:d}},q3:function(){return o.debounce?{nextState:"q1",effect:(t=s,{done:!1,value:nt.apply(void 0,[n].concat(r,[t]))})}:{nextState:"q2",effect:(e=o.action,{done:!1,value:e}),stateUpdater:c};var e,t}},"q1","debounce("+lt(t)+", "+n.name+")")},e,t,n].concat(r))},retry:function(e,t,n){for(var i=arguments.length,r=Array(3<i?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];return tt.apply(void 0,[function(e,t,n){for(var i=e,r=arguments.length,a=Array(3<r?r-3:0),s=3;s<r;s++)a[s-3]=arguments[s];var o={done:!1,value:tt.apply(void 0,[n].concat(a))},l={done:!1,value:at(t)};return ut({q1:function(){return{nextState:"q2",effect:o,errorState:"q10"}},q2:function(){return{nextState:ot}},q10:function(e){if((i-=1)<=0)throw e;return{nextState:"q1",effect:l}}},"q1","retry("+n.name+")")},e,t,n].concat(r))},takeEvery:function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return nt.apply(void 0,[function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a,s={done:!1,value:qe(e)},o=function(e){return a=e};return ut({q1:function(){return{nextState:"q2",effect:s,stateUpdater:o}},q2:function(){return{nextState:"q1",effect:(e=a,{done:!1,value:nt.apply(void 0,[t].concat(i,[e]))})};var e}},"q1","takeEvery("+lt(e)+", "+t.name+")")},e,t].concat(i))},takeLatest:function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return nt.apply(void 0,[ct,e,t].concat(i))},takeLeading:function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return nt.apply(void 0,[function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a,s={done:!1,value:qe(e)},o=function(e){return a=e};return ut({q1:function(){return{nextState:"q2",effect:s,stateUpdater:o}},q2:function(){return{nextState:"q1",effect:(e=a,{done:!1,value:tt.apply(void 0,[t].concat(i,[e]))})};var e}},"q1","takeLeading("+lt(e)+", "+t.name+")")},e,t].concat(i))},throttle:function(e,t,n){for(var i=arguments.length,r=Array(3<i?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];return nt.apply(void 0,[function(e,t,n){for(var i=arguments.length,r=Array(3<i?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var s,o,l={done:!1,value:rt(t,Y(1))},u={done:!1,value:at(e)},c=function(e){return s=e},d=function(e){return o=e};return ut({q1:function(){return{nextState:"q2",effect:l,stateUpdater:d}},q2:function(){return{nextState:"q3",effect:{done:!1,value:qe(o)},stateUpdater:c}},q3:function(){return{nextState:"q4",effect:(e=s,{done:!1,value:nt.apply(void 0,[n].concat(r,[e]))})};var e},q4:function(){return{nextState:"q2",effect:u}}},"q1","throttle("+lt(t)+", "+n.name+")")},e,t,n].concat(r))}});e.CANCEL=r,e.END=he,e.SAGA_LOCATION=o,e.buffers=z,e.channel=ge,e.default=function(e){var t,n=void 0===e?{}:e,i=n.context,r=void 0===i?{}:i,a=n.channel,s=void 0===a?me():a,o=n.sagaMonitor,l=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;a.length>i;i++)t.indexOf(n=a[i])<0&&(r[n]=e[n]);return r}(n,["context","channel","sagaMonitor"]);function u(e){return t=je.bind(null,c({},l,{context:r,channel:s,dispatch:e.dispatch,getState:e.getState,sagaMonitor:o})),function(n){return function(e){o&&o.actionDispatched&&o.actionDispatched(e);var t=n(e);return s.put(e),t}}}return u.run=function(){return t.apply(void 0,arguments)},u.setContext=function(e){k(r,e)},u},e.detach=Je,e.effects=dt,e.eventChannel=function(e,t){void 0===t&&(t=H());var n,i=!1,r=ge(t),a=function(){i||(i=!0,g(n)&&n(),r.close())};return n=x(n=e(function(e){fe(e)?a():r.put(e)})),i&&n(),{take:r.take,flush:r.flush,close:a}},e.isEnd=fe,e.multicastChannel=pe,e.runSaga=je,e.stdChannel=me,Object.defineProperty(e,"__esModule",{value:!0})});