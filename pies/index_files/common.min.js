"use strict";PULSE.app.templates["common.media-list-items-wrapper"]=_.template("<% _.each( items, function( item ) { %> <li class=\"media-list__item\"> <%= render( { data: item.data, cssClass: mediaThumbnailClass }, 'common.media-thumbnail' ) %> </li> <% } ); %> "),PULSE.app.templates["common.dynamic-more"]=_.template('<li class="dynamic-more linked-list__item has-children"> <button class="linked-list__dropdown-label js-dropdown-btn" aria-haspopup="true"> More </button> <ul class="linked-list__dropdown js-dynamic-more-bucket" role="group" aria-expanded="false" aria-hidden="true"> </ul> </li> '),PULSE.app.templates["common.empty-state"]=_.template('<div class="empty-state"> <div class="empty-state__background"></div> <div class="empty-state__message"> <%= render( {\n            cssClass: \'icn-empty\',\n            name: \'suspension\'\n        }, \'common.svg-icon\' ) %> <h3 class="empty-state__message-label"><%= message %></h3> <span class="empty-state__summary"><%= summary %></span> </div> </div> '),PULSE.app.templates["common.gallery-thumbnail-meta"]=_.template('<p class="media-thumbnail__count"><%= data.pageInfo.numEntries %></p> '),PULSE.app.templates["common.image-element"]=_.template("<img src=\"<%= source %>\" class=\"img <%= typeof cssClass !== 'undefined' ? cssClass : '' %> <%= fadeInOnLoad ? 'js-faded-image fade-in-on-load' : '' %>\" alt=\"<%= title %>\"> "),PULSE.app.templates["common.information-popup"]=_.template('<div class="information-popup <%= cssClass %>"> <button class="information-popup__close js-close"> <%= render( {\n            cssClass: \'\',\n            name: \'close-hover\'\n        }, \'common.svg-icon\' ) %> </button> <div class="information-popup__item"> <div class="information-popup__icon"> <%= render( {\n                cssClass: \'\',\n                name: icon\n            }, \'common.svg-icon\' ) %> </div> <div class="information-popup__content"> <h1 class="information-popup__title"><%= title %></h1> <p class="information-popup__detail"><%= description %></p> </div> </div> </div>'),PULSE.app.templates["common.lazy-image"]=_.template("<div class=\"js-lazy-load lazy-image-wrapper\" data-picture-in-view=\"false\"> \x3c!-- <% if( data.useImg || data.url ) { %> <%= render( {\n            source: data.url,\n            cssClass: data.cssClass || '',\n            objectFit: data.objectFit && true,\n            fadeInOnLoad: true,\n            title: data.title\n        }, 'common.image-element' ) %> <% } else { %> <%= render( {\n            mediaQueryConfig: data.mediaQueryConfig,\n            cssClass: data.cssClass || '',\n            objectFit: data.objectFit && true,\n            fadeInOnLoad: true,\n            title: data.title\n        }, 'common.picture-element' ) %> <% } %> --\x3e \x3c!-- DO NOT REMOVE THE ABOVE --\x3e </div> "),PULSE.app.templates["common.media-meta"]=_.template("<% var userTimeZone = moment.tz.guess() %> <% if ( data.description ) { %> <p class=\"media-thumbnail__summary\"><%= PULSE.app.common.content.truncateText( data.description, 85 ) %></p> <% } %> <div class=\"media-thumbnail__meta\"> <span class=\"media-thumbnail__date\"> <%= render( {\n            cssClass: 'media-thumbnail__time-icon',\n            name: 'duration'\n        }, 'common.svg-icon' ) %> <time class=\"media-thumbnail__date-text js-datetime\" data-date=\"<%= moment( data.publishFrom ).tz( userTimeZone ) %>\"><%= moment( data.publishFrom ).tz( userTimeZone ).format( 'DD MMM YY' ) %></time> </span> <% if ( data.subtitle ) { %> <span class=\"media-thumbnail__topic-news\"> <% var iconName = data.type === 'text' ? 'topic-news' : 'topic-' + data.type; %> <%= render( {\n                cssClass: 'media-thumbnail__topic-news-icon u-hide-tablet',\n                name: iconName\n            }, 'common.svg-icon' ) %> <span class=\"media-thumbnail__topic-text\"><%= PULSE.app.common.content.truncateText( data.subtitle, 12 ) %></span> </span> <% } %> <% if ( data.type.toLowerCase() === 'playlist' ) { %> <p class=\"media-thumbnail__gallery-count\"> <%= render( {\n                cssClass: 'media-thumbnail__gallery-icon',\n                name: 'gallery'\n            }, 'common.svg-icon' ) %> <span class=\"media-thumbnail__count-text\"><%= data.items.length %></span> Photos </p> <% } %> </div> <% if ( data.type.toLowerCase() === 'playlist' ) { %> <%= render( {\n        cssClass: 'media-thumbnail__expand-icon',\n        name: 'expand-out'\n    }, 'common.svg-icon' ) %> <% } %> "),PULSE.app.templates["common.media-thumbnail-featured"]=_.template('<article class="media-thumbnail media-thumbnail--<%= data.contentType %> <% if ( typeof cssClass !== \'undefined\' ){ %> <%= cssClass %><% }%>" data-widget="lazy-load-images"> <a class="media-thumbnail__link js-visited-link" href="<%= data.link %>" title="<%= data.title %>"> <header class="media-thumbnail__image-container placeholder placeholder--dark"> <%= render( { data : {\n                mediaQueryConfig: data.mediaQueryConfig,\n                cssClass: data.cssClass,\n                objectFit: data.objectFit\n            } }, \'common.lazy-image\' ) %> </header> <div class="media-thumbnail__caption"> <span class="media-thumbnail__viewed"><%= PULSE.I18N.lookupKey( \'label.viewed\' ) %></span> <h1 class="media-thumbnail__title" data-text="<%= data.title %>"><%= PULSE.app.common.content.truncateText( data.title, 70 ) %></h1> <% if( data.type.toLowerCase() === \'text\' ) { %> <%= render( { data: data }, \'common.media-meta\' ) %> <% } %> </div> </a> </article> '),PULSE.app.templates["common.media-thumbnail"]=_.template('<% var publishLabel = PULSE.app.common.content.getPublishStringFromTag( data ) %> <% var modalId = \'\' %> <% var playlistSize = 0 %> <% if ( data.type.toLowerCase() === \'video\' ) { %> <% modalId = \'data-ui-modal="#VideoModal"\' %> <% } else if ( data.type.toLowerCase() === \'playlist\' ) { %> <% modalId = \'data-ui-modal="#GalleryModal"\' %> <% playlistSize = data.items.length %> <% } %> <article class="media-thumbnail media-thumbnail--<%= data.contentType %> <% if ( typeof cssClass !== \'undefined\' ){ %> <%= cssClass %><% }%> <%= data.branding %>" data-widget="lazy-load-images" <%= modalId %> <% if ( modalId ) { %> data-content-id="<%= data.id %>" data-ui-args=\'{"contentId": <%= data.id %>,\n        "mediaId": "<%= data.mediaId %>",\n        "mediaTitle": <%= PULSE.app.templating.helper.cleanString( data.title ) %>,\n        "mediaDescription": <%= PULSE.app.templating.helper.cleanString( data.description ) %>,\n        "subtitle": "<%= data.subtitle %>",\n        "playlistSize": "<%= playlistSize %>",\n        "coverItem": "<%= ( data.coverItem ? data.coverItem.id : {} ) %>",\n        "type": "<%= data.type %>",\n        "link": "<%= data.link %>",\n        "publishFrom": "<%= data.publishFrom + 1 %>",\n        "mediaDate": "<%= PULSE.app.templating.helper.getDateNice( data.publishFrom ) %>" }\' <% } %> > <a class="media-thumbnail__link js-visited-link" href="<%= data.link %>" title="<%= data.title %>"> <header class="media-thumbnail__image-container placeholder <%= data.placeholderClass %>"> <%= render( { data : {\n                mediaQueryConfig: data.mediaQueryConfig,\n                cssClass: data.cssClass,\n                objectFit: data.objectFit,\n                title: data.title\n            } }, \'common.lazy-image\' ) %> <% if( data.type.toLowerCase() === \'video\' ) { %> <div class="media-thumbnail__type-icon"> <%= render( {\n                        cssClass: \'icn-\' + data.type.toLowerCase(),\n                        name: data.type.toLowerCase()\n                    }, \'common.svg-icon\' ) %> <%= render( {\n                        cssClass: \'icn-\' + data.type.toLowerCase() + \' hover-icn\',\n                        name: data.type.toLowerCase()\n                    }, \'common.svg-icon\' ) %> </div> <% if ( data.duration && data.duration !== 0 ) { %> <div class="media-thumbnail__video-duration"> <span class="media-thumbnail__duration-text"> <%= PULSE.app.common.date.durationToTime( data.duration ) %> <span class="media-thumbnail__duration-text--alt"><%= PULSE.I18N.lookupKey( \'label.mins\' ) %></span> </span> </div> <% } %> <% } %> <% if ( data.type.toLowerCase() === \'playlist\' ) { %> <%= render( {\n                    cssClass: \'media-thumbnail__expand-icon\',\n                    name: \'expand-out\'\n                }, \'common.svg-icon\' ) %> <% } %> <% if ( publishLabel ) { %> <div class="media-thumbnail__publish-heading <%= publishLabel.cssClass %>"> <span class="media-thumbnail__publish-label"><%= publishLabel.label %></span> </div> <% } %> </header> <div class="media-thumbnail__caption"> <span class="media-thumbnail__viewed"><%= PULSE.I18N.lookupKey( \'label.viewed\' ) %></span> <% if ( data.type.toLowerCase() === \'playlist\' ) { %> <p class="media-thumbnail__gallery-count u-show-phablet"> <%= render( {\n                        cssClass: \'media-thumbnail__gallery-icon\',\n                        name: \'gallery\'\n                    }, \'common.svg-icon\' ) %> <span class="media-thumbnail__count-text"><%= data.items.length %></span> Photos </p> <% } %> <h1 class="media-thumbnail__title" data-text="<%= data.title %>"><%= PULSE.app.common.content.truncateText( data.title, 70 ) %></h1> <%= render( { data: data }, \'common.media-meta\' ) %> <% if ( data.branding ){ %> <span class="icn icn-<%= data.branding %>"></span> <% }%> </div> </a> </article> '),PULSE.app.templates["common.modal-all-items"]=_.template("<div class=\"modal__thumbnail-control modal__thumbnail-control--left js-thumbnail-prev is-inactive\"> <%= render( {\n        cssClass: 'modal__thumbnail-chevron',\n        name: 'chevron'\n    }, 'common.svg-icon' ) %> </div> <div class=\"modal__slide-container js-slider-container\"> <ul class=\"modal__expanded-list js-expanded-list\"> <%= render( { items, mediaThumbnailClass }, 'common.media-list-items-wrapper' ) %> </ul> </div> <div class=\"modal__thumbnail-control modal__thumbnail-control--right js-thumbnail-next is-inactive\"> <%= render( {\n        cssClass: 'modal__thumbnail-chevron',\n        name: 'chevron'\n    }, 'common.svg-icon' ) %> </div> "),PULSE.app.templates["common.modal-all-photos"]=_.template("<div class=\"modal__thumbnail-control modal__thumbnail-control--left js-thumbnail-prev is-inactive\"> <%= render( {\n        cssClass: 'modal__thumbnail-chevron',\n        name: 'chevron'\n    }, 'common.svg-icon' ) %> </div> <div class=\"modal__slide-container js-slider-container\"> <ul class=\"modal__expanded-list js-expanded-list\"> <% _.each( items, function( item, index ) { %> <li class=\"modal__expanded-item js-expanded-item <%if ( index === 0 ) { %>is-active<% } %>\" data-photo-index=\"<%= index %>\"> <div class=\"modal__item-container\"> <% let data = item.data %> <%= render( { data : {\n                        mediaQueryConfig: data.mediaQueryConfig,\n                        cssClass: 'modal__expand-thumbnail',\n                        objectFit: data.objectFit,\n                        title: data.title\n                    } }, 'common.lazy-image' ) %> <%= render( {\n                        cssClass: 'modal__photo-icon',\n                        name: 'photo'\n                    }, 'common.svg-icon' ) %> </div> </li> <% } ); %> </ul> </div> <div class=\"modal__thumbnail-control modal__thumbnail-control--right js-thumbnail-next is-inactive\"> <%= render( {\n        cssClass: 'modal__thumbnail-chevron',\n        name: 'chevron'\n    }, 'common.svg-icon' ) %> </div> "),PULSE.app.templates["common.modal-gallery-list"]=_.template('<ul class="modal__gallery-list js-gallery-list"> <% _.each( items, function( item, index ) { %> <li class="modal__gallery-item js-gallery-item <%= item.cssClass %>" data-photo-index="<%= index %>"> <%= render( { data : {\n                mediaQueryConfig: item.mediaQueryConfig,\n                cssClass: item.cssClass,\n                objectFit: item.objectFit\n            } }, \'common.lazy-image\' ) %> <div class="modal__photo-details"> <div class="modal__photo-index-count"> <span class="u-bold"><%= index + 1 %></span>/<%= items.length %> </div> <h3 class="modal__photo-title"><%= item.title %></h3> <% if ( item.description ) { %> <h3 class="modal__photo-description"><%= item.description %></h3> <% } %> </div> </li> <% } ); %> </ul> '),PULSE.app.templates["common.modal-gallery-main"]=_.template('<div class="modal__intro-image js-intro-image"> <%= render( { data : {\n        mediaQueryConfig: data.mediaQueryConfig,\n        cssClass: data.cssClass,\n        objectFit: data.objectFit\n    } }, \'common.lazy-image\' ) %> </div> <div class="modal__intro-content"> <div class="modal__intro-meta modal__animate-me js-animate-me"> <% if ( typeof subtitle !== \'undefined\' && subtitle ) { %> <span class="modal__topic-news"> <%= render( {\n                    cssClass: \'modal__topic-news-icon\',\n                    name: \'topic-news\'\n                }, \'common.svg-icon\' ) %> <span class="modal__topic-text"><%= subtitle %></span> </span> <% } %> <span class="modal__gallery-count"> <%= render( {\n                cssClass: \'modal__gallery-icon\',\n                name: \'gallery\'\n            }, \'common.svg-icon\' ) %> <span class="modal__gallery-count--alt"><%= playlistSize %></span> Photos </span> </div> <h1 class="modal__intro-title modal__animate-me js-animate-me"><%= title %></h1> <p class="modal__intro-summary modal__animate-me js-animate-me"><%= description %></p> <span class="modal__intro-date modal__animate-me js-animate-me">Published on <span class="modal__intro-date--alt"> <%= date %></span></span> <div class="modal__intro-button-container modal__animate-me js-animate-me"> <button class="modal__intro-button-cta button button--secondary-light js-start-button"> View now </button> </div> <%= render( {\n        cssClass: \'modal__intro-chevron u-show-tablet\',\n        name: \'chevron\'\n    }, \'common.svg-icon\' ) %> </div> '),PULSE.app.templates["common.modal-video-main"]=_.template('<div class="modal__intro-image js-intro-image"> <%= render( { data : {\n        mediaQueryConfig: data.mediaQueryConfig,\n        cssClass: data.cssClass,\n        objectFit: data.objectFit\n    } }, \'common.lazy-image\' ) %> </div> <div class="inline-player inline-player--modal js-video-container" data-widget="video-player"> <button class="inline-player__button js-start-button <%= typeof isLive !== \'undefined\' && isLive ? \'inline-player__button--live\' : \'\' %> "> <%= render( {\n            cssClass: \'inline-player__play-icon\',\n            name: \'video\'\n        }, \'common.svg-icon\' ) %> </button> <div class="inline-player__player-container"> <video id="aflm-modal-video-player_<%= data.id %>" data-video-id="<%= mediaId %>" data-account="<%= accountId %>" data-policy-key="<%= policyKey %>" data-player="<%= playerId %>" data-embed="default" class="inline-player__video video-js vjs-16-9" controls playsinline <% if ( muted ) { %> muted <% } %>> </video> </div> </div> <div class="modal__intro-content"> <div class="modal__intro-meta modal__animate-me js-animate-me"> <% if ( typeof subtitle !== \'undefined\' && subtitle ) { %> <span class="modal__topic-news"> <%= render( {\n                    cssClass: \'modal__topic-news-icon\',\n                    name: \'topic-news\'\n                }, \'common.svg-icon\' ) %> <span class="modal__topic-text"><%= subtitle %></span> </span> <% } %> <% if ( data.duration && data.duration !== 0 ) { %> <div class="modal__video-duration"> <%= render( {\n                    cssClass: \'modal__duration-icon\',\n                    name: \'content-video\'\n                }, \'common.svg-icon\' ) %> <span class="modal__duration-text"><%= PULSE.app.common.date.durationToTime( data.duration ) %></span> <span class="modal__duration-text--alt"><%= PULSE.I18N.lookupKey( \'label.mins\' ) %></span> </div> <% } %> </div> <h1 class="modal__intro-title modal__animate-me js-animate-me"><%= title %></h1> <p class="modal__intro-summary modal__animate-me js-animate-me"><%= description %></p> <span class="modal__intro-date modal__animate-me js-animate-me">Published on <span class="modal__intro-date--alt"> <%= date %></span></span> </div> <div class="modal__up-next modal__animate-me u-hide-tablet u-hide js-animate-me js-up-next"> <h2 class="modal__up-next-title"><%= PULSE.I18N.lookupKey( \'label.upNext.title\' ) %></h2> </div> '),PULSE.app.templates["common.modal"]=_.template('<figure class="modal js-modal" data-widget="lazy-load-images"> <button data-modal-action="close" class="modal__close"> <i class="icon">X</i> <span class="u-screen-reader"><%= PULSE.I18N.lookupKey( \'label.modalClose\' ) %></span> </button> <div class="modal__container" data-modal-action="close"> <%= data.lazyImage( { data : {\n            desktopImageUrl: data.leadMediaUrls.thumbnail,\n            desktopImageUrlRetina: data.leadMediaUrls.thumnailRetina,\n            mobileImageUrl: data.leadMediaUrls.thumbnailMobile,\n            mobileImageUrlRetina: data.leadMediaUrls.thumbnailMobileRetina,\n            cssClass: data.pictureCssClass,\n            objectFit: data.objectFit\n        } } ) %> <nav class="modal__nav"> <button data-modal-action="prev" class="modal__button"> <i class="icon">&larr;</i> <span class="u-screen-reader"><%= PULSE.I18N.lookupKey( \'label.modalPrevious\' ) %></span> </button> <button data-modal-action="next" class="modal__button"> <i class="icon">&rarr;</i> <span class="u-screen-reader"><%= PULSE.I18N.lookupKey( \'label.modalNext\' ) %></span> </button> </nav> </div> </figure> '),PULSE.app.templates["common.picture-element"]=_.template("<% if ( mediaQueryConfig ) { %> <picture class=\"<%= typeof cssClass !== 'undefined' ? cssClass : '' %> <%= objectFit ? 'object-fit-cover-picture' : 'picture' %>\" data-photo-id=\"<%= typeof photoId !== 'undefined' ? photoId : '' %>\"> <% _.each( mediaQueryConfig, function( conf ) { %> <% if ( conf.name === 'default' ) { %> <img class=\"<%= objectFit ? 'object-fit-cover-picture' : 'picture' %>__img <%= typeof fadeInOnLoad !== 'undefined' && fadeInOnLoad ? 'js-faded-image fade-in-on-load' : '' %>\" src=\"<%= conf.variantUrls[ 0 ] %>\" alt=\"<%= title %>\"> <% } else { %> <% let sourceConfig = helper.template.getSourceConfig( conf ) %> <source srcset=\"<%= sourceConfig.srcset %>\" media=\"<%= sourceConfig.mediaQuery %>\"> <% } %> <% } ); %> </picture> <% } else { %> <% /* @TODO */ %> <% } %>"),PULSE.app.templates["common.slider-pagination"]=_.template("<% if( slidenumbers > 1 ) { %> <ul class=\"slider-pagination js-pager-items u-hide-tablet\"> <% for(var i = 0; i < slidenumbers; i++){ %> <li> <button class=\"slider-pagination__button js-pager-btn <%= typeof activeIndex !== 'undefined' && activeIndex === i ? 'is-active' : '' %>\"></button> </li> <% } %> </ul> <% } %> "),PULSE.app.templates["common.svg-icon"]=_.template("<svg class=\"<%= typeof hideIcon !== 'undefined' && hideIcon ? '' : 'icon' %> <%= cssClass %>\"> <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"<%= environment.cdn %>i/svg-output/icons.svg#icn-<%= name %>\"></use> </svg> "),PULSE.app.templates["common.tooltip"]=_.template('<div class="tooltip__content"> <div class="tooltip__tooltip js-tooltip"> <span class="tooltip__label"><%= label %></span> <%= render( {\n            cssClass: \'tooltip__close js-tooltip-close\',\n            name: \'close-hover\'\n        }, \'common.svg-icon\' ) %> <span class="tooltip__text"><%= description %></span> <% if ( customTemplate ) { %> <%= PULSE.app.templating.render( {}, customTemplate ) %> <% } %> </div> </div> '),PULSE.app.templates["common.paginator"]=_.template('<% for ( var i = 0; i < slideNum; i++ ) { %> <li class="pager__container js-pager-container"> <button class="pager__button js-pager" aria-label="Goto Page <%= i + 1 %>"> <span class="u-screen-reader"><%= i + 1 %></span> </button> </li> <% } %> '),function(i,o){var c=["click","keypress"],d=["mousedown","touchdown"],r=13,s=32;i.addAriaClickListener=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=a?c.filter(function(e){return"click"!==e}).concat(d):c,r=a?d:"click",s=function(e){return u(e,n,r)?t(e):null},l=0;l<o.length;l++)e.addEventListener(o[l],s,i);return s},i.addMultiAriaClickListener=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];Array.prototype.slice.call(e).forEach(function(e){return i.addAriaClickListener(e,t,n,a)})},i.removeAriaClickListener=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?c.filter(function(e){return"click"!==e}).concat(d):c,a=0;a<n.length;a++)e.removeEventListener(n[a],t)},i.resetAriaMenuAttributes=function(e){e.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true")},i.toggleAriaMenuAttributes=function(e){var t=e.getAttribute("aria-expanded"),n=e.getAttribute("aria-hidden");if(void 0!==t){var a="true"===t?"false":"true";e.setAttribute("aria-expanded",a)}if(void 0!==n){var i="true"===n?"false":"true";e.setAttribute("aria-hidden",i)}},i.toggleZIndex=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"a",n=[].slice.call(e.querySelectorAll(t)),a=0;a<n.length;a++){var i="-1"===n[a].getAttribute("tabindex");o.style.hasClass(n[a],"js-no-keyboard-focus")||(i&&l(t)?n[a].removeAttribute("tabindex"):i?n[a].setAttribute("tabindex","0"):n[a].setAttribute("tabindex","-1"))}};var l=function(e){return"a"===e},u=function(e,t,n){var a=Array.isArray(n)?n.includes(e.type):e.type===n;return!(e.which!==r&&!a)||!(!t||e.which!==s)}}(PULSE.app.common,PULSE.core),function(e,t){t.arrayHelper={},t.arrayHelper.indexBy=function(e,n,a){return e.reduce(function(e,t){return e["string"==typeof n?t[n]:n.call(a,t)]=t,e},{})},t.arrayHelper.groupBy=function(e,o){return e.reduce(function(e,t,n,a){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:o(t);return(e[i]||(e[i]=[])).push(t),e},{})}}(PULSE.app,PULSE.app.common),function(e){var a=[],i=function(e){for(var t=void 0,n=0;n<a.length;n++)!(t=a[n])||e.target===t.preventTriggerOn||t.preventTriggerOn&&t.preventTriggerOn.contains(e.target)||t.element===e.target||t.preventTriggerOn===e.target||"function"!=typeof t.callback||t.callback(t.element)};e.closeOnOutsideClick={addElement:function(e,t,n){0===a.length&&document.addEventListener("click",i),a.push({element:e,callback:t,preventTriggerOn:n})},removeElement:function(e){for(var t=0;t<a.length;t++)a[t]&&a[t].element===e&&a.splice(t,1);0===a.length&&document.removeEventListener("click",i)}}}(PULSE.app.common);var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,r){r.content={};var n=[1,2],a=["breaking","exclusive"];r.content.hasTag=function(e,t){var n=!1;return 0<e.tags.length&&e.tags.forEach(function(e){void 0!==e.label&&e.label===t&&(n=!0)}),n},r.content.getPublishStringFromTag=function(e){var t="",n="";return e&&0<e.tags.length&&e.tags.forEach(function(e){-1!==a.indexOf(e.label)&&(t=PULSE.I18N.lookup("label.news."+e.label),n=e.label)}),{label:t,cssClass:n}},r.content.isPortrait=function(e){return!!e.originalDetails&&e.originalDetails.width<e.originalDetails.height},r.content.getContentModel=function(e,t){if("photo"!==e.type){var n=r.content.getImageFromContentItem(e);e.mediaQueryConfig=i(n,t),e.link=r.url.generateUrl(e)}else e.mediaQueryConfig=i(e,t),e.playlist?(e.link=r.url.generateUrl(e.playlist),e.link+=r.url.generateUrl(e)):e.link="";return moment(e.date).add(1,"hours").format("MMM D, YYYY, h:mma")!==moment(e.publishFrom).format("MMM D, YYYY, h:mma")&&(e.publishFrom=new Date(e.date).getTime()),e},r.content.getContentBranding=function(e){var t="";return e.tags&&e.tags.forEach(function(e){e.label.includes("brand:")&&(t=e.label.replace("brand:",""))}),t},r.content.truncateText=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"â€¦";return e.length<=t?e:0<=e.lastIndexOf(" ",t)?e.substring(0,e.lastIndexOf(" ",t)-1)+n:e.substring(0,t)+n},r.content.getTotalDuration=function(e){var t=e.reduce(function(e,t){return e+t.duration},0);return r.date.durationToTime(t)},r.content.getVariantUrls=function(a,e){var t,i={},o=function(e,t){var n=r.image.getVariantByTag(a,e);n&&(i[t]=n.url)};if(a.length)if(_.isArray(e))e.forEach(function(a){a.tags.forEach(function(e,t){var n=a.name+(0===t?"":"Retina");o(e,n)})});else if("object"===(void 0===e?"undefined":_typeof(e)))for(t in e)({}).hasOwnProperty.call(e,t)&&o(e[t],t);return i},r.content.getImageFromContentItem=function(e){var t=void 0;if("photo"===e.type)t=e;else if("video"===e.type&&e.thumbnail)t=e.thumbnail;else{var n=e.leadMedia||e.coverItem||e.promoItem;"playlist"===e.type&&e.coverItem&&"playlist"===e.coverItem.type&&(n=e.coverItem.coverItem),n&&("photo"===n.type?t=n:"video"===n.type&&n.thumbnail&&(t=n.thumbnail))}return t};var i=function(i,e){if(i&&i.onDemandUrl)return e.map(function(e){var a=_extends({},e),t=a.multipliers||n;return a.variantUrls=t.map(function(e){var t=(a.size.height||0)*e,n=(a.size.width||0)*e;return r.image.getOnDemandImageUrl(i,t,n)}),a})};r.content.formatPublishedAgoDate=function(e){var t=Date.now()-e,n="",a=Math.floor(t/36e5);return 1728e5<t?"":(0===a?n=PULSE.I18N.lookup("label.now"):1===a?n=PULSE.I18N.lookup("label.timestamp.hours.singular"):0<a&&a<24?n=PULSE.I18N.lookup("label.timestamp.hours.plural",{hours:a}):24<=a&&a<48&&(n=PULSE.I18N.lookup("label.timestamp.days.singular")),n)}}(PULSE.app,PULSE.app.common),function(e,c,t,d){e.date={},e.date.momentGetDaysFromRange=function(e,t,n,a){var i=e instanceof Date?e:new Date(e),o=t instanceof Date?t:new Date(t),r=[],s=i.getTime();a&&i.toLocaleDateString()!==o.toLocaleDateString()&&r.push({date:i,string:d&&n?d(i).locale(c.language).format(n):i.toLocaleDateString(),std:!!d&&d(i).format("DD-MM-YYYY")});do{s+=864e5;var l=new Date(s);r.push({date:l,string:d&&n?d(l).locale(c.language).format(n):l.toLocaleDateString(),std:!!d&&d(l).format("DD-MM-YYYY")})}while(s<o.getTime());return r},e.date.getTime=function(e){if(e){var t="string"==typeof e?new Date(e):e,n=t.getHours(),a=t.getMinutes();return n<10&&(n="0"+n),a<10&&(a="0"+a),n+":"+a}return null},e.date.getSinceString=function(e,t){if(e){var n=new Date,a=Math.floor((n-e)/1e3);return a<=0?t?t.justNow:"just now":a<60?Math.round(a)+(t?t.seconds:"s"):a<3600?Math.round(a/60)+(t?t.minutes:"m"):a<86400?Math.round(a/3600)+(t?t.hours:"h"):Math.round(a/86400)+(t?t.days:"d")}return""},e.date.durationToTime=function(e){var t=parseInt(e,10);if(t){var n=Math.floor(t/60),a=t-60*n;return n<10&&(n="0"+n),a<10&&(a="0"+a),n+":"+a}return"00:00"}}(PULSE.app.common,PULSE.app,PULSE.core,moment),function(e){e.event={},e.event.dispatch=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.body).dispatchEvent(new CustomEvent(e,{detail:t}))}}(PULSE.app.common),function(r,e){e.image={},e.image.getVariantByTag=function(e,t){for(var n=0;n<e.length;n++)if(e[n].tag.label===t)return e[n];return null},e.image.getOnDemandImageUrl=function(e,t,n){if(e&&e.onDemandUrl){var a=e.originalDetails.aspectRatio,i=[],o=n,r=t;return 4e3<o&&(r=(o=4e3)/a),4e3<r&&(o=(r=4e3)*a),r&&i.push("height="+r),o&&i.push("width="+o),0<i.length?e.onDemandUrl+"?"+i.join("&"):e.onDemandUrl+"?width=500"}},e.image.getVariantWithWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=1/0,o=!1;return e.forEach(function(e,t){var n=Math.abs(e.width-a);n<i&&(i=n,o=t)}),e[o]},e.image.getPlayerImage=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"XLarge",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window.PLAYER_HEADSHOT_YEAR,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"1",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"png",o=n;return"{$PLAYER_HEADSHOT_YEAR$}"!==o&&void 0!==o||(o=(new Date).getFullYear()),e?r.environment.playerImagePath+"/"+t+o+"/"+e+"."+i+"?i10c=img.resize(scale_height:"+a+")":null}}(PULSE.app,PULSE.app.common),PULSE.app.common.jsonInjector=function(e){var t=document.createElement("script");t.setAttribute("type","application/ld+json"),t.innerHTML=JSON.stringify(e);var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},function(o,n){var t={matchScore:{totalScore:0,goals:0,behinds:0}},a={period:{periodNumber:"",periodLabel:"",periodSeconds:""}};o.match={},o.match.getWinningSide=function(e){if(e.homeTeamScore&&e.awayTeamScore){var t=e.homeTeamScore.matchScore.totalScore,n=e.awayTeamScore.matchScore.totalScore;return n<t?"home":t<n?"away":"draw"}return""},o.match.getMatchStatus=function(e){switch(e){case n.MATCH_STATUS.SCHEDULED:case n.MATCH_STATUS.UNCONFIRMED_TEAMS:case n.MATCH_STATUS.CONFIRMED_TEAMS:case n.MATCH_STATUS.UPCOMING:return n.MATCH_STATUS.UPCOMING;case n.MATCH_STATUS.POSTGAME:case n.MATCH_STATUS.CONCLUDED:case n.MATCH_STATUS.COMPLETED:return n.MATCH_STATUS.COMPLETED;default:return n.MATCH_STATUS.LIVE}},o.match.getTeamName=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20;return e?e.name.length&&e.name.length>t?e.nickname:e.name:PULSE.I18N.lookup("label.team.tbc")},o.match.getSummary=function(e){if(e.homeTeamScore&&e.awayTeamScore){var t=e.homeTeamScore.matchScore.totalScore,n=e.awayTeamScore.matchScore.totalScore,a=e.status===o.CONSTANTS.MATCH_STATUS.LIVE?"label.match.summary.by":"label.match.summary.win",i="";return n<t?(i=t-n,PULSE.I18N.lookup(a,{team:e.teamNicknames.home,scoreDiff:i})):t<n?(i=n-t,PULSE.I18N.lookup(a,{team:e.teamNicknames.away,scoreDiff:i})):(a=e.status===o.CONSTANTS.MATCH_STATUS.LIVE?"label.match.summary.level":"label.match.summary.draw",PULSE.I18N.lookup(a))}return""},o.match.getLatestPeriod=function(e){if(e.matchClock&&e.matchClock.periods){var t=e.matchClock.periods.sort(function(e,t){return t.periodNumber-e.periodNumber})[0];return 4<t.periodNumber?t.periodLabel="ET"+(t.periodNumber-4):t.periodLabel="Q"+t.periodNumber,t.periodSummary=o.match.getPeriodSummary(e.status,t.periodNumber),t}return a},o.match.getPeriodSummary=function(e,t){switch(e){case n.MATCH_STATUS.POSTGAME:return PULSE.I18N.lookup("label.match.fullTime");case n.MATCH_STATUS.CONCLUDED:case n.MATCH_STATUS.COMPLETED:return PULSE.I18N.lookup("label.match.complete");default:return PULSE.I18N.lookup("label.match.time.q"+t)}},o.match.getRenderModel=function(e){return{status:e.status,homeTeamScore:e.homeTeamScore||t,awayTeamScore:e.awayTeamScore||t,summary:o.match.getSummary(e),period:o.match.getLatestPeriod(e),isLive:o.match.getIsLive(e.status,e.matchClock),winningSide:o.match.getWinningSide(e)}},o.match.getIsLive=function(e,t){return e===n.MATCH_STATUS.LIVE&&(!(!t||!t.periods)&&(1!==t.periods.length||0!==t.periods[0].periodSeconds))}}(PULSE.app.common,PULSE.app.common.CONSTANTS);_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};!function(i,o,r){i.common.misApi={};var s=void 0;i.common.misApi.requestToken=function(){var e=this,a=i.environment.cfsApi+"/WMCTok";return s||(s=new Promise(function(t,n){o.data.request(a,"POST",function(e){s=null,e.fullXhttpResponse.status===r.STATUS_CODES.SUCCESS&&e.token?(l(e.token),t()):(console.error("Unable to retrieve WMCTok",e.fullXhttpResponse),n())},e,null,null,null,null)})),s},i.common.misApi.getToken=function(){var a=this;return new Promise(function(e,t){var n=c();null!==n?e(n):a.requestToken().then(function(){e(c())},function(){void 0!==t&&t()})})},i.common.misApi.getHeaders=function(){var e=c();return null!==e?[{label:r.MIS_TOKEN_HEADER_PROP,value:e}]:null},i.common.misApi.request=function(e,t){i.common.misApi.getToken().then(function(){void 0!==t?t(n(e)):n(e)})};var n=function(t){var e=i.common.misApi.getHeaders();e||console.error("calling _requestData with no token");var n=_extends({target:i.common.misApi},t,{headers:e});return n.callback=function(e){e.fullXhttpResponse.status===r.STATUS_CODES.UNAUTHORIZED?(o.data.manager.remove(n),a(),i.common.misApi.request(t)):void 0!==t.callback&&t.callback(e)},o.data.manager.add(n)},l=function(e){sessionStorage.setItem(r.MIS_API_TOKEN,e)},c=function(){var e=sessionStorage.getItem(r.MIS_API_TOKEN);return null!==e&&0<e.length?e:null},a=function(){sessionStorage.removeItem(r.MIS_API_TOKEN)}}(PULSE.app,PULSE.core,PULSE.app.common.CONSTANTS),PULSE.app.common.prepareParams=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];if(void 0===a){console.warn("Value for '"+n+"' in object 'params' was undefined. The key '"+n+"' has been omitted from the query string. Please be explicit with values, e.g. boolean or empty string");continue}var i=[n,encodeURIComponent(a)];t.push(i.join("="))}return 0<t.length?"?"+t.join("&"):""},function(e){void 0===e.security&&(e.security={}),e.security.sanitize=function(e){return e.replace(/(&|<|"|\/|>|\(|\)|;)/g,"")}}(PULSE.app.common),function(e){e.team={},e.team.mapPositions=function(e){var t={FB:[],HB:[],C:[],HF:[],FF:[],FOL:[],IC:[]};return e.forEach(function(e){switch(e.position){case"BPL":case"BPR":case"FB":t.FB.push(e);break;case"HBFL":case"HBFR":case"CHB":t.HB.push(e);break;case"WL":case"WR":case"C":t.C.push(e);break;case"HFFL":case"HFFR":case"CHF":t.HF.push(e);break;case"FPL":case"FPR":case"FF":t.FF.push(e);break;case"RK":case"RR":case"R":t.FOL.push(e);break;case"INT":t.IC.push(e);break;default:console.warn("Position not mapped",e)}}),t}}(PULSE.app.common),function(e){e.template={},e.template.cleanString=function(e){return _.escape(JSON.stringify(e||""))},e.template.getNumberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.template.camelize=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")},e.template.getSourceConfig=function(e){var t="";t=1<e.variantUrls.length?e.variantUrls.join(", ")+" 2x":e.variantUrls.join("");var n=[];return void 0!==e.minWidth&&n.push("(min-width: "+e.minWidth+"px)"),void 0!==e.maxWidth&&n.push("(max-width: "+e.maxWidth+"px)"),{srcset:t,mediaQuery:n.join(" and ")}},e.template.formatTitle=function(e){var n=e;if(-1===n.indexOf("|")){var t=n.split(" ");return t[0]="<strong>"+t[0]+"</strong>",t.join(" ")}n.split("|").length%2==0&&(n+="|");var a=e.match(/(\|)([^|]+)(\|)/g);return a&&a.forEach(function(e){var t="<strong>"+e.substring(1,e.length-1)+"</strong>";n=n.split(e).join(t)}),n},e.template.pluralise=function(e,t,n,a){return(a?e+" ":"")+("1"===e.toString()?t:n)},e.template.separateCharacters=function(e,t){var n="";if(void 0!==e)for(var a=e.toString().split(""),i=t||"",o=0;o<a.length;o++)n+='<span class="'+i+'">'+a[o]+"</span>";return n}}(PULSE.app.common),function(r,s,n){n.url={},n.url.createContentPath=function(e,t,n,a){var i=e?e.toLowerCase()+"/":"",o=s.environment.aflApi+"/content/"+s.account+"/"+i+(n||s.defaultLanguage)+"/"+(a||"");return t&&(o+="?"+r.url.buildQueryString(t)),o},n.url.contains=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return window.location.pathname.split("/").slice(1,1+t).includes(e)},n.url.generateUrl=function(e){if(e.hotlinkUrl)return e.hotlinkUrl;var t="//"+s.environment.domain;switch(e.type.toLowerCase()){case"text":return t+="/news/"+e.id+"/"+n.url.urlify(e.title);case"video":return t+="/video/"+e.id+"/"+n.url.urlify(e.title)+"?videoId="+e.id+"&modal=true&type=video",e.playlistId?t+="&playlistId="+e.playlistId:t+="&publishFrom="+(e.publishFrom+1),t;case"playlist":return e.typeRestriction&&"photo"===e.typeRestriction.toLowerCase()&&(t+="/albums/"+e.id+"/"+n.url.urlify(e.title)+"?modal=true&type=gallery&playlistId="+e.id+"&playlistSize="+e.items.length),t;case"photo":return t+=n.url.generateUrl(e.playlist)+"/"+e.id+"/",e.description&&(t+=n.url.urlify(e.description)),t;default:return""}},n.url.getMatchURL=function(e,t){return e?"/matches/"+e+(void 0!==t?"#"+n.url.urlify(t):""):null},n.url.getMatchRadioURL=function(e){return"//"+s.environment.domain+"/matches/"+e+"/radio"},n.url.prepareParams=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];if(void 0===a){console.warn("Value for '"+n+"' in object 'params' was undefined. The key '"+n+"' has been omitted from the query string. Please be explicit with values, e.g. boolean or empty string");continue}var i=[n,encodeURIComponent(a)];t.push(i.join("="))}return 0<t.length?"?"+t.join("&"):""},n.url.createCanaryStreamPath=function(e){var t=s.environment.canary,n="";return e&&e.pageSize&&(n+="?pageSize="+e.pageSize),e&&e.network&&(n+=(n?"&":"?")+"network="+e.network),"local"===s.environment.label?t+n:e&&e.references?t+"account/"+PULSE.app.environment.cmsAccount+"/contentref/"+e.references+"/posts"+n:e&&e.streamId?t+"/stream/"+e.streamId+"/posts"+n:t+"stream/combinedstream/posts"+n},n.url.createCanaryPathFromId=function(e){return s.environment.canary+"stream/"+e+"/posts"},n.url.urlify=function(e){return e.toLowerCase().replace(/[^a-z0-9]+/gi,"-").replace(/-{2,}/g,"-").replace(/^-|-$/g,"")}}(PULSE.core,PULSE.app,PULSE.app.common),function(e){void 0===e.endpoints&&(e.endpoints={});var a=e.prepareParams;e.endpoints.football={awards:{historic:function(e,t,n){return"/football/competitions/"+e+"/awards/"+t+a(n)},compSeason:function(e,t){return"/football/compseasons/"+e+"/awards"+a(t)},season:function(e,t){return"/football/seasons/"+e+"/awards"+a(t)}},clubs:{all:function(e){return"/football/clubs"+a(e)},single:function(e,t){return"/football/clubs/"+e+a(t)}},competition:{all:function(e){return"/football/competitions"+a(e)},single:function(e,t){return"/football/competitions/"+e+a(t)},compseason:function(e,t){return"/football/competitions/"+e+"/compseasons"+a(t)},current:function(e,t){return"/football/competitions/"+e+"/compseasons/current"+a(t)}},competitionSeason:{single:function(e,t){return"/football/compseasons/"+e+a(t)},gameweeks:{all:function(e,t){return"/football/compseasons/"+e+"/gameweeks"+a(t)},single:function(e,t,n){return"/football/compseasons/"+e+"/gameweeks/"+t+a(n)},current:function(e,t){return"/football/compseasons/"+e+"/gameweeks/current"+a(t)},events:{single:function(e,t,n){return"/football/compseasons/"+e+"/gameweeks/"+t+"/events"+a(n)},current:function(e,t){return"/football/compseasons/"+e+"/gameweeks/current/events"+a(t)}},fixtures:function(e,t){return"/football/compseasons/"+e+"/gameweeks/current/fixtures"+a(t)}},standings:{all:function(e,t){return"/football/compseasons/"+e+"/standings"+a(t)},team:function(e,t,n){return"/football/compseasons/"+e+"/standings/team/{teamId}"+a(n)}},structure:function(e){return"/football/compseasons/"+e+"/structure"},teams:{all:function(e,t){return"/football/compseasons/"+e+"/teams"+a(t)},single:function(e,t,n){return"/football/compseasons/"+e+"/teams/{teamId}"+a(n)},performance:function(e,t,n){return"/football/compseasons/"+e+"/teams/{teamId}/performance"+a(n)}}},fixtures:{all:function(e){return"/football/fixtures"+a(e)},headtohead:function(e){return"/football/fixtures/headtohead"+a(e)},single:function(e,t){return"/football/fixtures/"+e+a(t)},summary:function(e,t){return"/football/fixtures/"+e+"/summary"+a(t)},textstream:function(e,t,n){return"/football/fixtures/"+e+"/textstream/"+t+a(n)}},gameweeks:{single:function(e,t){return"/football/gameweeks/"+e+a(t)}},grounds:{all:function(e){return"/football/grounds"+a(e)},single:function(e,t){return"/football/grounds/"+e+a(t)}},players:{all:function(e){return"/football/players"+a(e)},single:function(e,t){return"/football/players/"+e+a(t)},history:function(e,t){return"/football/players/"+e+"/history"+a(t)}},season:{all:function(e){return"/football/seasons"+a(e)}},standings:{all:function(e){return"/football/standings"+a(e)}},stats:{headtohead:function(e){return"/football/stats/headtohead"+a(e)},match:function(e,t){return"/football/stats/match/"+e+a(t)},player:function(e,t){return"/football/stats/player/"+e+a(t)},playerFixtures:function(e,t){return"/football/stats/player/"+e+"/fixtures"+a(t)},ranked:{players:function(e,t){return"/football/stats/ranked/players/"+e+a(t)},teams:function(e,t){return"/football/stats/ranked/teams/"+e+a(t)}},team:function(e,t){return"/football/stats/team/"+e+a(t)}},teams:{all:function(e){return"/football/teams"+a(e)},single:{team:function(e,t){return"/football/teams/"+e+a(t)},staff:function(e,t,n){return"/football/teams/"+e+"/compseasons/"+t+"/staff"+a(n)},stats:function(e,t,n){return"/football/teams/"+e+"/compseasons/"+t+"/stats"+a(n)},seasonStaff:function(e,t,n){return"/football/teams/"+e+"/seasons/"+t+"/staff"+a(n)}}},teamOfficials:{all:function(e){return"/football/teamofficials"+a(e)},single:function(e,t){return"/football/teamofficials/"+e+a(t)}},broadcastingSchedule:{countries:function(){return"/broadcasting-schedule/countries"},all:function(e){return"/football/broadcasting-schedule/fixtures"+a(e)},single:function(e,t){return"/football/broadcasting-schedule/fixtures/"+e+a(t)},highlights:function(e){return"/football/broadcasting-schedule/highlights-programs"+a(e)}},matchOfficials:{all:function(e){return"/football/matchofficials"+a(e)},single:function(e,t){return"/football/matchofficials/"+e+a(t)}}}}(PULSE.app.common);var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i,c,o){var r={},d=[],u=[];i.PlayerManager=function(){function e(){_classCallCheck(this,e),this.scriptSource="//players.brightcove.net/{{account}}/{{playerId}}_default/index.min.js",this.createScripts()}return _createClass(e,[{key:"timeoutOverlay",value:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.paused()?i.common.event.dispatch(o.EVENTS.VIDEO.OVERLAY,{},document.body):clearTimeout(t.timeout)},1e4)}},{key:"removePlayer",value:function(e){var t=d.indexOf(e);-1<t&&(d.splice(t,1),videojs(e).dispose(),clearTimeout(this.timeout))}},{key:"getPlayerWithName",value:function(t,e){var n=d.filter(function(e){return e===t});return 0<n.length?r[n[0]]:!(!e||!r[0])&&r[0]}},{key:"createPlayers",value:function(n){var a=this;d.forEach(function(e){videojs(e).ready(function(){r[this.id_]=new i.BrightCoveVideo(this.el_.parentElement,this);var e=document.querySelector('meta[property="video:ad-tag-url"]');if(e&&e.getAttribute("content")&&this.ima3&&(this.ima3.settings.serverUrl=e.getAttribute("content")),r[this.id_].type&&"audio"===r[this.id_].type.dataset.type){var t=r[this.id_].element.querySelector(".vjs-fullscreen-control");t&&t.parentNode.removeChild(t)}"function"==typeof n&&n(this.id_),videojs(this.id_).on("play",function(){i.common.event.dispatch(o.EVENTS.VIDEO.PLAY,{},document.body),clearTimeout(a.timeout)}),videojs(this.id_).on("ads-ad-ended",function(){this.ima3.adControlBar.el_.classList.add(o.U_HIDE)}),videojs(this.id_).on("ads-ad-started",function(){this.ima3.adControlBar.el_.classList.remove(o.U_HIDE)}),videojs(this.id_).on("pause",function(){i.common.event.dispatch(o.EVENTS.VIDEO.PAUSE,{},document.body),a.timeoutOverlay(this)}),videojs(this.id_).on("ended",function(){i.common.event.dispatch(o.EVENTS.VIDEO.END,{},document.body)});videojs(this.id_).on(["ratechange","volumechange","seeking"],a.timeoutOverlay.bind(a,this))})})}},{key:"createScripts",value:function(r){var s=this,l=this,e=document.querySelectorAll("video");Array.prototype.map.call(e,function(e){var t={account:e.getAttribute("data-account"),playerId:e.getAttribute("data-player"),elementId:e.getAttribute("id")};if(t.playerId&&t.account){-1===d.indexOf(t.elementId)&&d.push(t.elementId);var n=c.common.formatString(s.scriptSource,t),a=document.querySelector("script[data-player="+t.elementId+"]")||!1,i=u.indexOf(n);-1<u.indexOf(n)&&a&&(u.splice(i,1),a.parentElement.removeChild(a));var o=document.createElement("script");o.setAttribute("data-player",t.elementId),document.getElementsByTagName("body")[0].appendChild(o),o.onload=function(){l.createPlayers(r)},o.onerror=function(){var e=d.indexOf(t.elementId);-1<e&&d.splice(e,1)},o.src=n,u.push(n)}})}}]),e}(),i.videoPlayerManager=new i.PlayerManager}(PULSE.app,PULSE.core,PULSE.app.common.CONSTANTS);_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(n,t,a){n.BrightCoveVideo=function(){function n(e,t){_classCallCheck(this,n),this.name=t&&t.id_?t.id_:"default_player",this.api=t,this.catalog=this.api.catalog,this.players=document.querySelectorAll('[data-widget="video-player"]'),this.ready=!1,this.element=e,this.type=this.element.querySelector("[data-type]"),this.playButton=this.element.parentElement.querySelector(".js-start-button"),this.metaElements=!1,this.attemptToFindMetaDivs(),this.bindEvents()}return _createClass(n,[{key:"bindEvents",value:function(){var e=this;this.api&&this.api.player&&(this.player=this.api.player(),this.playButton&&a.addAriaClickListener(this.playButton,function(){e.play()}),document.body.addEventListener(a.CONSTANTS.EVENTS.VIDEO.OVERLAY,function(){t.style.removeClass(e.element.parentElement,a.CONSTANTS.IS_ACTIVE)}),this.ready=!0)}},{key:"play",value:function(){null!==this.player.player_&&(this.player.play(),t.style.addClass(this.element.parentElement,a.CONSTANTS.IS_ACTIVE))}},{key:"attemptToFindMetaDivs",value:function(){this.metaElements={title:this.element.querySelector(".videoTitle")||!1,description:this.element.querySelector(".videoDescription")||!1,date:this.element.querySelector(".videoDate")||!1}}}]),n}(),[].slice.call(document.querySelectorAll('[data-widget="video-player"]')).forEach(function(e){var t=e.querySelector("video").getAttribute("id");new n.BrightCoveVideo(e,{name:t})})}(PULSE.app,PULSE.core,PULSE.app.common),function(e,t,n,a){t.Adverts=function(){this.getAdvertWrappers(),n.event.windowResize.add({method:this.getAdvertWrappers.bind(this)})},t.Adverts.prototype.getAdvertWrappers=function(){var t=this;[].slice.call(document.querySelectorAll(".js-advert")).forEach(function(e){t.styleAdvert(e),t.getAdvertDimensionsList(e)})},t.Adverts.prototype.getAdvertDimensionsList=function(e){var t=e.getAttribute("data-advert-dimensions").split(", ").sort(function(e,t){return t-e});this.selectAdvertByWidth(e,t)},t.Adverts.prototype.selectAdvertByWidth=function(e,t){var n=t.filter(function(e){return e.split("x")[0]<window.innerWidth}).join(", ");this.createAdvert(e,n)},t.Adverts.prototype.createAdvert=function(e,t){if(e.dataset.previousSize!==t){e.setAttribute("data-previous-size",t);var n=e.getAttribute("data-advert-name"),a=document.createElement("span");a.id=n,a.className="tmframe",a.setAttribute("title",t),e.innerHTML="",e.appendChild(a),this.isInitialised&&_telstra.adlib?(_telstra.adlib.createAds(n),_telstra.adlib.targeting("device",i()),_telstra.adlib.refresh()):(this.injectAdverts(),this.isInitialised=!0)}},t.Adverts.prototype.injectAdverts=function(){window._telstra=window._telstra||{},_telstra.before=_telstra.before||[],_telstra.after=_telstra.after||[],_telstra.before.push(function(e){e.targeting("club",o()),e.publisher("afl.clubs"),e.area=r(),e.targeting("device",i())})},t.Adverts.prototype.styleAdvert=function(e){var n=this;new MutationObserver(function(e,t){e.filter(function(e){return"attributes"===e.type}).forEach(function(e){var t=e.target;switch(!0){case n.adVisible(t):n.showAd(e.target);break;default:n.hideAd(e.target)}}),e.filter(function(e){return"childList"===e.type}).forEach(function(t){[].slice.call(t.addedNodes).concat([].slice.call(t.removedNodes)).filter(function(e){return e.classList.contains("tmframe")}).forEach(function(e){0<e.offsetHeight&&n.showAd(t.target),n.hideAd(t.target)})})}).observe(e,{attributes:!0,attributeFilter:["style"],subtree:!0,childList:!0})},t.Adverts.prototype.hideAd=function(e){var t=e.closest(".advert"),n=e.closest(".widget--advert");t.classList.remove("advert--initialised"),n&&n.classList.add("u-hide")},t.Adverts.prototype.showAd=function(e){var t=e.closest(".advert"),n=e.closest(".widget--advert");t.classList.add("advert--initialised"),n&&n.classList.remove("u-hide")},t.Adverts.prototype.adVisible=function(e){return"none"!==getComputedStyle(e).display};var i=function(){return window.innerWidth>e.measurements.tablet?"desktop":window.innerWidth<e.measurements.tablet&&window.innerWidth>e.measurements.phablet?"tablet":"mobile"},o=function(){if(window.CLUB_LABEL)return a.CLUBS_PUBLISHER_VALUES[window.CLUB_LABEL]},r=function(){window.location.pathname.split("/");switch(!0){case t.url.contains(""):return"HOME";case t.url.contains("news"):return"NEWS";case t.url.contains("videos"):case t.url.contains("video"):return"VIDEOS";case t.url.contains("ladder"):return"LADDER";case t.url.contains("match-centre"):case t.url.contains("match"):return"MATCHES";case t.url.contains("fixture",2):case t.url.contains("fixtures",2):return"FIXTURE";case t.url.contains("players"):case t.url.contains("teams"):case t.url.contains("team"):return"TEAMS";case t.url.contains("injury-list",2):return"INJURY";default:return"BLANK"}};e.advertsInstance=new t.Adverts}(PULSE.app,PULSE.app.common,PULSE.core,PULSE.app.common.CONSTANTS);_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};!function(n){n.analytics.trackEvent=function(e){if(e){void 0!==window.dataLayer?dataLayer.push(_extends({},{event:"click",contentType:"widget"},e)):console.warn("dataLayer not found when trying to track event")}},n.analytics.addEventTracking=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;[].slice.call(e.querySelectorAll(".js-tracked-event")).filter(function(e){return"click"===e.getAttribute("data-event-type")}).forEach(function(e){n.common.addAriaClickListener(e,t)})};var t=function(e){var t=e.currentTarget;n.analytics.trackEvent({eventCategory:t.getAttribute("data-event-category"),eventLabel:t.getAttribute("data-event-label"),eventAction:t.getAttribute("data-event-action")})};n.analytics.addEventTracking()}(PULSE.app);_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};!function(i){i.analytics.trackArticleView=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t("articleView",e)},i.analytics.trackFixtureView=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t("virtualPageview",e)},i.analytics.trackLadderView=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t("virtualPageview",e)},i.analytics.trackGalleryModalView=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t("virtualPageview",e)};var t=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i.common.CONSTANTS.TRACKING.BASE,a=i.tracking.getSiteDetails();void 0!==window.dataLayer?dataLayer.push(_extends({event:e},n,a,t)):console.warn("dataLayer not found when trying to track articleView")}}(PULSE.app),function(e){e.ArticleTable=function(e){[].slice.call(e.children).filter(function(e){return"TABLE"===e.tagName}).forEach(function(e){var t=e.querySelector("tr"),n=t?t.children.length:0;e.outerHTML='<div class="table '+(4<n?"table--large":"")+'">'+e.outerHTML+"</div>"})},e.widgetInitialiser.addMultipleWidgetsByName("article-body",e.ArticleTable)}(PULSE.app),PULSE.app.common.configChecker=function(e,t,n){var a=[];return t=t||{},n.forEach(function(e){if(!t[e.namespace])switch(e.type){case"HTMLElement":t.container&&e.selector?(t[e.namespace]=t.container.querySelector(e.selector),t[e.namespace]||a.push("missing config."+e.namespace+", cannot find an element with the selector '"+e.selector+"'")):a.push("missing config."+e.namespace);break;case"NodeList":t.container&&e.selector?(t[e.namespace]=t.container.querySelectorAll(e.selector),t[e.namespace].length<1&&a.push("missing config."+e.namespace+", cannot find any elements with the selector '"+e.selector+"'")):a.push("missing config."+e.namespace);break;default:e.default?t[e.namespace]=e.default:a.push("missing config."+e.namespace)}}),0<a.length?(a.unshift("You have "+a.length+" errors initialising "+e),null):t},function(n,e){e.filterOptions=function(e,t){this.filters=e,this.updateReferences(t)},e.filterOptions.prototype.addRefsToFilters=function(){var e=this,t="";if("string"==typeof e.references)t+=e.references;else for(var n in e.references)e.references.hasOwnProperty(n)&&(0<t.length&&(t+=","),t+=n+":"+e.references[n]);e.filters.references=t},e.filterOptions.prototype.updateFilters=function(e){this.filters=n.object.extend(this.filters,e)},e.filterOptions.prototype.updateReferences=function(e){var t=this;void 0!==e&&(t.references&&"string"!=typeof t.references?t.references=n.object.extend(t.references,e):t.references=e,t.addRefsToFilters())},e.filterOptions.prototype.removeReference=function(e){delete this.references[e],this.addRefsToFilters()},e.filterOptions.prototype.get=function(){return this.filters}}(PULSE.core,PULSE.app.common),function(e,t,s,l){e.convertToUsersLocalTime=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;[].slice.call(e.querySelectorAll(".js-datetime")).forEach(function(e){var t=Number(e.dataset.date),n=e.dataset.format||"DD MMM YY";if(t){var a=new Date(t).getTime(),i=moment.tz.guess(),o=(new Date).getTime()-a,r=Math.floor(o/(s.TIME.ONE_MINUTE_IN_SECS*s.TIME.ONE_MINUTE_IN_SECS*s.TIME.ONE_SECOND_IN_MS));o>s.TIME.RELATIVE_TIME_END?(l.style.addClass(e,"u-datetime-notrel"),e.innerHTML=moment(t).tz(i).format(n)):0===r?e.innerHTML=PULSE.I18N.lookup("label.now"):1===r?e.innerHTML=PULSE.I18N.lookup("label.timestamp.hours.singular"):0<r&&r<s.TIME.ONE_DAY_IN_HOURS?e.innerHTML=PULSE.I18N.lookup("label.timestamp.hours.plural",{hours:r}):r>=s.TIME.ONE_DAY_IN_HOURS&&r<2*s.TIME.ONE_DAY_IN_HOURS?e.innerHTML=PULSE.I18N.lookup("label.timestamp.days.singular"):r>=s.TIME.ONE_DAY_IN_HOURS&&r<s.TIME.RELATIVE_TIME_END&&(e.innerHTML=PULSE.I18N.lookup("label.timestamp.days.plural",{days:Math.floor(r/s.TIME.ONE_DAY_IN_HOURS)}))}})}}(PULSE.app,PULSE.app.common,PULSE.app.common.CONSTANTS,PULSE.core);_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(t,a,i){t.InformationPopup=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.container=e,this.config=t,this.pathname=window.location.pathname,this.init()}return _createClass(n,[{key:"init",value:function(){var e=this.config.key||this.pathname;i.localStorage.getStorage("popup-"+e)||(i.localStorage.setStorage("popup-"+e,!0),this.element=t.templating.render(this.config,"common.information-popup",!0),this.container.insertAdjacentElement("beforeend",this.element),this.setListeners())}},{key:"setListeners",value:function(){var e=this;this.close=this.element.querySelector(".js-close"),this.close&&a.addAriaClickListener(this.close,function(){i.style.addClass(e.element,"is-hidden")})}}]),n}()}(PULSE.app,PULSE.app.common,PULSE.core),function(e,n){var a={root:null,rootMargin:"0px",threshold:.025};e.LazyLoad=function(e){var t=[].slice.call(e.querySelectorAll(".js-lazy-load")),n=this.getUnobservedElements(t);this.setObservableListener(n)},e.LazyLoad.prototype.getUnobservedElements=function(e){return e.filter(function(e){return e&&"true"!==e.getAttribute("data-picture-in-view")})},e.LazyLoad.prototype.setObservableListener=function(e){var t=this;t.observer=new IntersectionObserver(i,a),e.forEach(function(e){t.observer.observe(e)})};var i=function(e){e.forEach(function(e){var t=e.target;if(t){var n=t.getAttribute("data-picture-in-view");if(!1!==e.isIntersecting&&"true"!==n){t.setAttribute("data-picture-in-view","true");var a=r(t);a&&t.insertAdjacentHTML("beforeend",a.textContent.trim());var i=t.querySelector(".js-faded-image");i&&(i.complete?o(i,t):i.addEventListener("load",function(){o(i,t)}))}}})},o=function(e,t){n.style.addClass(e,"is-loaded"),n.style.addClass(t,"is-loaded")},r=function(e){for(var t=0;t<e.childNodes.length;t++)if(e.childNodes[t].nodeType===Node.COMMENT_NODE)return e.childNodes[t];return null};e.widgetInitialiser.addMultipleWidgetsByName("lazy-load-images",e.LazyLoad)}(PULSE.app,PULSE.core),function(a,i){var o={root:null,rootMargin:"0px",threshold:.5};a.ParallaxContent=function(e){var t=this;new a.LazyLoad(e),t.container=e,t.image=e.querySelector(".js-parallax"),s.call(t);var n=!1;i.event.windowOnScroll.add({method:function(){n||window.requestAnimationFrame(function(){s.call(t),n=!1}),n=!0}}),this.observer=new IntersectionObserver(r.bind(this),o),this.observer.observe(this.container)};var r=function(e){e.forEach(function(e){var t=e.target;if(t){var n=t.getAttribute("data-parallax-in-view");if(!1!==e.isIntersecting&&"true"!==n){t.setAttribute("data-parallax-in-view","true");var a=t.querySelector(".js-content");i.style.addClass(a,"is-active")}}})},s=function(){if(window.innerWidth>a.measurements.tablet){var e=this.container.getBoundingClientRect(),t=e.top<0?Math.abs(e.top):-Math.abs(e.top);this.image.style.transform="translate3d(0,"+t+"px,0)"}};a.widgetInitialiser.addMultipleWidgetsByName("parallax-content",a.ParallaxContent)}(PULSE.app,PULSE.core),function(l,c,d){l.PlayerHeadshot=function e(s){_classCallCheck(this,e),this.imgElements=s.querySelectorAll(".js-player-image"),this.imgElements.forEach(function(e){var t=e.dataset.player,n=c.CONSTANTS.PLAYER_IMAGE_SIZES[e.dataset.size],a=e.dataset.year,i=e.dataset.wrapperClass,o={cssClass:e.getAttribute("data-picture-classes"),objectFit:e.getAttribute("data-object-fit"),mediaQueryConfig:[{name:"desktop",tags:["Player Image Desktop","Player Image Desktop (Retina)"],variantUrls:[c.image.getPlayerImage(t,n.FOLDER,a,n.DESKTOP),c.image.getPlayerImage(t,n.FOLDER,a,n.DESKTOP_RETINA)],minWidth:l.measurements.tablet},{name:"mobile",tags:["Player Image Mobile","Player Image Mobile (Retina)"],variantUrls:[c.image.getPlayerImage(t,n.FOLDER,a,n.MOBILE_RETINA),c.image.getPlayerImage(t,n.FOLDER,a,n.MOBILE_RETINA)],maxWidth:l.measurements.tablet},{name:"default",variantUrls:[c.image.getPlayerImage(t,n.FOLDER,a,n.DESKTOP)]}],useImg:"true"===e.getAttribute("data-picture-in-view")},r=l.templating.render({data:o},"common.lazy-image",!0);i&&d.style.addClass(r,i),e.parentNode.replaceChild(r,e),new l.LazyLoad(s)})},l.widgetInitialiser.addMultipleWidgetsByName("player-headshot",l.PlayerHeadshot)}(PULSE.app,PULSE.app.common,PULSE.core);_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var a=[];e.validateConfig=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[]).forEach(function(e){n(e,t),i(e,t),o(t[e.namespace],e)}),!(0<a.length)||(a.unshift("You have "+a.length+" errors initialising "+e+"."),console.warn(a.join("\n")),!1)};var n=function(e,t){return!!t[e.namespace]||(a.push("Missing configuration property. config."+e.namespace+" is required and should be of type "+e.elementType),!1)},i=function(e,t){if(void 0!==e.namespace&&"undefined"!==e.elementType){var n=t[e.namespace];"object"===(void 0===n?"undefined":_typeof(n))?void 0===n.length||0!==n.length||a.push("Empty "+e.elementType.name+" under config."+e.namespace):a.push("Could not find "+e.elementType.name+" under config."+e.namespace)}},o=function(e,t){void 0!==e&&(e instanceof t.elementType||a.push("Incorrect type. Expected config."+t.namespace+" to be instance of "+t.elementType.name))}}(PULSE.app.common),function(e){var o="is-glued",i="js-was-glued",r="js-glue-placeholder";e.ViewportGlue=function(e){var t=this;t.container=e,t.items=[].slice.call(e.querySelectorAll(".js-will-glue")),t.heights=[],t.observer=s.call(t,t.items)};var s=function(e){var t={root:null,rootMargin:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"0px",threshold:[.025,1]},n=new IntersectionObserver(a.bind(this),t);return e.forEach(function(e){n.observe(e)}),n},a=function(e,t){var n=this,a=e.reduce(function(e,t){return t.boundingClientRect.top<=n.heights.reduce(d,0)&&!t.target.classList.contains(o)&&!t.target.classList.contains(r)&&e.exiting.push(t),0<t.boundingClientRect.top&&t.target.classList.contains(r)&&t.isIntersecting&&e.entering.push(t),e},{exiting:[],entering:[]});if(a.exiting.length||a.entering.length){t.disconnect(),a.exiting.forEach(function(e){l.call(n,e.target,n.heights.reduce(d,0)),n.heights.push(e.boundingClientRect.height)}),a.entering.forEach(function(e){c(e.target),n.heights.splice(n.heights.indexOf(e.boundingClientRect.height),1)});var i=n.heights.reduce(d,0);n.observer=s.call(n,n.items,"-"+i+"px 0px 0px 0px")}},l=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if("none"!==getComputedStyle(e,null).display){var n=document.createElement("div");n.classList.add(r),n.setAttribute("style","clear:both; height: "+e.clientHeight+"px; width: 100%;"),e.classList.add(o,i),e.setAttribute("style","top: "+t+"px;");var a=e.insertAdjacentElement("beforebegin",n);this.items.push(a)}},c=function(e){e.nextElementSibling.classList.remove(o,i),e.remove()},d=function(e,t){return e+t};e.widgetInitialiser.addMultipleWidgetsByName("viewport-glue",e.ViewportGlue)}(PULSE.app),function(e,n,t){t.VisitedLinks=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;n.localStorage.setStorage("visited-"+window.location.pathname,!0);var t=[].slice.call(e.querySelectorAll(".js-visited-link"));t.length&&t.filter(function(e){return!e.dataset.visited}).forEach(function(e){var t=e.pathname||e.dataset.href;t&&n.localStorage.getStorage("visited-"+t)&&(e.dataset.visited=!0)})},t.VisitedLinks()}(PULSE.app,PULSE.core,PULSE.app.common),function(e,s,n){var t,a=function(){var e=document.getElementById("js-cookie-notice");s.localStorage.setStorage("only-essential-cookies",!0);var t=document.querySelectorAll(".js-cookie-notice-btn");t.length&&(t.forEach(function(e){e.addEventListener("click",n.setCookies)}),s.style.removeClass(e,"u-hide"))};n.setCookies=function(e){var t=document.location.hostname,n=document.getElementById("js-cookie-notice"),a=e.currentTarget.dataset.acceptAllCookies,i=function(e){s.localStorage.setStorage("only-essential-cookies",e),s.localStorage.setStorage("cookie-policy-chosen",!0,730,!0,t)};if("true"===a){i(!1);var o=new CustomEvent("cookiesAccepted",{detail:"all"});window.dispatchEvent(o)}else if("false"===a){i(!0);var r=new CustomEvent("cookiesAccepted",{detail:"essential"});window.dispatchEvent(r)}s.style.addClass(n,"u-hide")},(t=s.localStorage.getStorage("cookie-policy-chosen",!0))&&"true"===t||a()}(PULSE.app,PULSE.core,PULSE.app.common),function(n,a){n.CookieToggle=function(e){var t=this;t.acceptBtn=e.querySelector(".js-accept-btn"),t.declineBtn=e.querySelector(".js-refuse-btn"),t.cookieName=e.dataset.cookieName,t.exclusionCookieName=t.cookieName+"_exclusion",t.renderButton(),t.listeners()},n.CookieToggle.prototype.renderButton=function(){var e=this,t="u-hide";a.localStorage.getStorage(e.exclusionCookieName,!0)?(a.style.removeClass(e.acceptBtn,t),a.style.addClass(e.declineBtn,t)):(a.style.addClass(e.acceptBtn,t),a.style.removeClass(e.declineBtn,t))},n.CookieToggle.prototype.listeners=function(){var t=this;t.declineBtn.addEventListener("click",function(){a.localStorage.setStorage(t.exclusionCookieName,!0,730,!0,n.environment.domain);var e=new CustomEvent("cookieDeclined",{detail:t.cookieName});window.dispatchEvent(e),t.renderButton()}),t.acceptBtn.addEventListener("click",function(){a.localStorage.clearStorage(t.exclusionCookieName,!0,n.environment.domain);var e=new CustomEvent("cookieAdded",{detail:t.cookieName});window.dispatchEvent(e),t.renderButton()})},n.widgetInitialiser.addMultipleWidgetsByName("cookie-toggle",n.CookieToggle)}(PULSE.app,PULSE.core),function(e,t,n){var a="is-active";t.FloatingBar=function(e){var t=this;t.container=e,t.scrollingArea=e.parentElement,t.scrollingAreaTopY=t.scrollingArea.getBoundingClientRect().top+document.body.scrollTop,t.scrollContainer=e.closest(".js-floating-bar-scroll"),t.fromModal=t.container.dataset.fromModal,t.progressBar=e.querySelector(".js-progress-bar"),t.scrollTop=document.body.scrollTop,t.scrolled=0,t.timeout,o.call(t),t.fromModal&&t.scrollContainer&&(t.containerScrolltop=t.scrollContainer.scrollTop,t.scrollContainer.addEventListener("scroll",function(){i.call(t)})),n.event.windowOnScroll.add({method:function(){i.call(t)}})};var i=function(){var e=this;e.viewportHeight=e.scrollingArea.scrollHeight+e.scrollingAreaTopY-document.body.clientHeight-e.container.clientHeight,e.fromModal?e.scrolled=(e.scrollContainer.scrollTop-e.containerScrolltop)/e.viewportHeight*100:e.scrolled=window.scrollY/e.viewportHeight*100,e.progressBar&&(e.progressBar.style.width=(100<e.scrolled?100:e.scrolled)+"%"),e.fromModal&&e.containerScrolltop>e.scrollContainer.scrollTop&&e.scrolled<=100?n.style.addClass(e.container,a):e.scrollTop>document.body.scrollTop&&e.scrolled<=100?n.style.addClass(e.container,a):n.style.removeClass(e.container,a),e.scrollTop=document.body.scrollTop,e.scrollContainer&&(e.containerScrolltop=e.scrollContainer.scrollTop),o.call(e)},o=function(){var e=this;clearTimeout(e.timeout),e.timeout=setTimeout(function(){(0===e.scrollTop||e.scrolled<=100)&&n.style.addClass(e.container,a)},2e3)};e.widgetInitialiser.addMultipleWidgetsByName("floating-bar",t.FloatingBar)}(PULSE.app,PULSE.app.common,PULSE.core),function(n){var a="dynamic-more__ghost";n.DynamicMore=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this;n.container=e,n.list=e.querySelector(".js-dynamic-list"),n.list.style.position="relative",n.items=e.querySelectorAll(".js-dynamic-child"),n.more=null,n.template=t||"common.dynamic-more",n.bucket=r.call(n,n.list);var a={root:n.list,rootMargin:"0px -"+n.more.clientWidth+"px 0px 0px",threshold:1},i=new IntersectionObserver(o.bind(n),a);n.items.forEach(function(e){return i.observe(e)})};var o=function(e){if(e[0].rootBounds.right){var t=this,n=e.reduce(i,{exiting:[],entering:[]});n.exiting.forEach(s.bind(t)),n.entering.forEach(l.bind(t)),t.bucket.children.length?t.more.classList.remove("u-hide"):t.more.classList.add("u-hide")}},r=function(e){var t=n.templating.render({},this.template,!0);return this.more=e.appendChild(t),e.querySelector(".js-dynamic-more-bucket")},i=function(e,t){return t.boundingClientRect.right>=t.rootBounds.right?e.exiting.push(t):e.entering.push(t),e},s=function(e){if("none"!==getComputedStyle(e.target,null).display){e.target.setAttribute("data-cloned",Date.now());var t=e.target.cloneNode(!0);this.bucket.appendChild(t),e.target.classList.add(a),e.target.style.left=e.boundingClientRect.left-e.rootBounds.left+"px"}},l=function(e){var t=this.bucket.querySelector('[data-cloned="'+e.target.getAttribute("data-cloned")+'"]');t&&(t.remove(),e.target.classList.remove(a),e.target.removeAttribute("data-cloned"),e.target.style.left="0")};n.widgetInitialiser.addMultipleWidgetsByName("dynamic-more",n.DynamicMore)}(PULSE.app),function(e,n,t){var a="js-mobile-nav-btn",i="js-dropdown-btn",o="dropdown-is-open",r="is-open";e.MobileNavigation=function(e){var t=this;t.container=e,t.list=e.querySelector(".js-mobile-nav"),t.button=e.querySelector("."+a),n.addAriaClickListener(t.container,t.delegateEvent.bind(t))},e.MobileNavigation.prototype.delegateEvent=function(e){if(e.target.classList.contains(a)&&this.toggleMenu(),e.target.classList.contains(i)){var t=this.list.querySelectorAll("."+i+" + ."+r);[].slice.call(t,this.toggleDropdown),this.toggleDropdown(e.target.nextElementSibling)}},e.MobileNavigation.prototype.toggleMenu=function(){t.style.toggleClass(this.list,r),t.style.toggleClass(this.button,"is-active")},e.MobileNavigation.prototype.toggleDropdown=function(e){t.style.toggleClass(e,r),this.list.querySelectorAll("."+i+" + ."+r).length?t.style.addClass(this.list,o):t.style.removeClass(this.list,o)},e.widgetInitialiser.addMultipleWidgetsByName("mobile-navigation",e.MobileNavigation)}(PULSE.app,PULSE.app.common,PULSE.core);_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,n,a){var i="js-match-clock",t=function(){function t(e){_classCallCheck(this,t),this.container=e,this.updateTime()}return _createClass(t,[{key:"updateTime",value:function(){this.timeout&&clearTimeout(this.timeout),n.style.hasClass(this.container,i)?this.timeElement=this.container:this.timeElement=this.container.querySelector("."+i),this.timeElement&&(this.duration=moment.duration("00:"+this.timeElement.innerHTML,"seconds"),this.direction=n.style.hasClass(this.timeElement.parentElement,"is-countdown")?"down":"up",this.tick())}},{key:"tick",value:function(){"up"===this.direction?this.duration=this.duration.add(1,"seconds"):"down"===this.direction&&(this.duration=this.duration.subtract(1,"seconds")),requestAnimationFrame(this.renderTime.bind(this)),this.timeout=setTimeout(this.tick.bind(this),a.TIME.ONE_SECOND_IN_MS)}},{key:"renderTime",value:function(){if(this.timeElement){var e="";"up"===this.direction?e=o(this.duration):"down"===this.direction&&(e=this.duration.asSeconds()<1?PULSE.I18N.lookup("label.mc.clock.startingSoon"):o(this.duration)),this.timeElement.innerHTML=e}}}]),t}(),o=function(e){return e.format("mm:ss",{trim:!1})};e.MatchClock=t}(PULSE.app,PULSE.core,PULSE.app.common.CONSTANTS),function(e,t){e.StructuredData=function(){n()&&this.generateData()},e.StructuredData.prototype.generateData=function(){var e=[{"@context":"https://schema.org","@type":"WebPage",name:a()||"",description:i()||""}];t.jsonInjector(e)};var n=function(){switch(!0){case t.url.contains(""):case t.url.contains("news"):return!1;case t.url.contains("videos"):case t.url.contains("video"):return!1;default:return!0}},a=function(){var e=document.querySelector('meta[property="og:title"]');if(e)return e.getAttribute("content")},i=function(){var e=document.querySelector('meta[property="og:description"]');if(e)return e.getAttribute("content")};new e.StructuredData}(PULSE.app,PULSE.app.common),function(s,t,o){var n="will-animate",a=[{namespace:"container"},{namespace:"slideContainer",type:"HTMLElement",selector:".js-slider"},{namespace:"sliderElements",type:"NodeList",selector:".js-slide"},{namespace:"nextButton",type:"HTMLElement",selector:".js-next-btn"},{namespace:"prevButton",type:"HTMLElement",selector:".js-prev-btn"},{namespace:"nudgeLeftClass",default:"nudge-left"},{namespace:"nudgeRightClass",default:"nudge-right"},{namespace:"pagerActiveClass",default:"is-active"},{namespace:"itemActiveClass",default:"item-active"},{namespace:"buttonHideClass",default:"u-hide"}],i={root:null,rootMargin:"0px",threshold:[.1,.9]};t.Slider=function(e){this.sliderInitialised=!1,this.activeItemIndex,this.config=t.configChecker("common.Slider",e,a),this.config&&(this.observer=new IntersectionObserver(c.bind(this),i),this.observer.observe(this.config.container))},t.Slider.prototype.initSlider=function(){var e=this;r.call(this),0!==e.config.perPage?(e.activeSlide=e.config.activeSlide||0,e.renderPagination(),e.sliderInitialised?e.setPagerListeners():e.setListeners(),e.slideTo(e.activeSlide),e.sliderInitialised=!0,setTimeout(function(){e.config.slideContainer.classList.add(n)},0),t.event.dispatch(t.CONSTANTS.EVENTS.SLIDER.INITIALISED,{},e.config.container)):console.error("Something went wrong with the slider for",e.config.container)},t.Slider.prototype.setListeners=function(){var e=this;e.config.nextButton.addEventListener("click",function(){e.scrollNext()}),e.config.prevButton.addEventListener("click",function(){e.scrollPrev()}),e.setPagerListeners(),e.lastWidth=window.innerWidth,o.event.windowResize.add({method:function(){e.lastWidth!==window.innerWidth&&(e.resetSlider.call(e),e.lastWidth=window.innerWidth)}}),e.interval=null,e.config.slideContainer.addEventListener("scroll",function(){e.interval||e.checkScroll()})},t.Slider.prototype.setPagerListeners=function(){var e=this;if(e.config.pagerElements)for(var t=0;t<e.config.pagerElements.length;t++)e.config.pagerElements[t].addEventListener("click",e.slideTo.bind(e,t))},t.Slider.prototype.scrollNext=function(){var e=this;e.activeSlide!==e.slideNum-1&&(e.activeSlide++,e.slideTo(e.activeSlide),e.config.nextCallback&&e.config.nextCallback(e.activeSlide))},t.Slider.prototype.nudgeLeft=function(){o.style.toggleClass(this.config.slideContainer,this.config.nudgeLeftClass)},t.Slider.prototype.nudgeRight=function(){o.style.toggleClass(this.config.slideContainer,this.config.nudgeRightClass)},t.Slider.prototype.isPaginating=function(){return!!this.config.pagerItemsContainer&&this.config.pagerItemsContainer.offsetParent},t.Slider.prototype.scrollPrev=function(){var e=this;0!==e.activeSlide&&(e.activeSlide--,e.slideTo(e.activeSlide),e.config.previousCallback&&e.config.previousCallback(e.activeSlide))},t.Slider.prototype.slideTo=function(e){var t=this,n=t.activeSlide<e;t.activeSlide=e,t.updateControls(),t.setActiveItems();var a=t.getNumberOfActiveItems();if(a<t.config.perPage){var i=t.slideWidth*e,o=t.slideWidth-t.slideWidth/t.config.perPage*a,r=t.activeItemIndex-(t.config.perPage-a);t.setActiveItems(r),t.slidePos=i-o}else t.slidePos=t.slideWidth*e;window.innerWidth>s.measurements.tablet?t.config.slideContainer.style.transform="translate3d( -"+t.slidePos+"px, 0, 0)":(t.config.slideContainer.style.transform="translate3d( 0, 0, 0)",t.config.slideContainer.scrollLeft=t.slidePos),t.config.paginationCallback&&t.config.paginationCallback(n),t.config.slideChangeCallback&&t.config.slideChangeCallback(t.activeSlide)},t.Slider.prototype.updateControls=function(){var e=this;if(e.activeSlide>=e.slideNum-1?o.style.addClass(e.config.nextButton,e.config.buttonHideClass):o.style.hasClass(e.config.nextButton,e.config.buttonHideClass)&&o.style.removeClass(e.config.nextButton,e.config.buttonHideClass),0===e.activeSlide?o.style.addClass(e.config.prevButton,e.config.buttonHideClass):o.style.hasClass(e.config.prevButton,e.config.buttonHideClass)&&o.style.removeClass(e.config.prevButton,e.config.buttonHideClass),e.config.pagerElements)for(var t=0;t<e.config.pagerElements.length;t++)t===e.activeSlide?o.style.addClass(e.config.pagerElements[t],e.config.pagerActiveClass):o.style.removeClass(e.config.pagerElements[t],e.config.pagerActiveClass)},t.Slider.prototype.renderPagination=function(){this.config.pagerElements&&(this.config.pagerItemsContainer.innerHTML=s.templating.render({activeIndex:this.config.activeSlide,slidenumbers:this.getNumberOfSlides()+1},"common.slider-pagination"))},t.Slider.prototype.getNumberOfActiveItems=function(){return this.config.slideContainer.querySelectorAll("."+this.config.itemActiveClass).length},t.Slider.prototype.getNumberOfSlides=function(){return Math.ceil(this.config.sliderElements.length/this.config.perPage-1)},t.Slider.prototype.getActiveSlide=function(){return this.activeSlide},t.Slider.prototype.getItemSlide=function(e){return Array.prototype.slice.call(this.config.sliderElements).indexOf(e)/this.config.perPage},t.Slider.prototype.setActiveItems=function(e){for(var t=this,n=0;n<t.config.sliderElements.length;n++)o.style.removeClass(t.config.sliderElements[n],t.config.itemActiveClass);var a=t.activeSlide*t.config.perPage;e&&(a=e),t.activeItemIndex=a;for(var i=0;i<t.config.perPage&&t.config.sliderElements[a];i++)o.style.addClass(t.config.sliderElements[a],t.config.itemActiveClass),a++},t.Slider.prototype.resetSlider=function(){var e=this;e.config.slideContainer.classList.remove(n),setTimeout(function(){e.initSlider()},0),t.event.dispatch(t.CONSTANTS.EVENTS.SLIDER.INITIALISED,{},e.config.container)},t.Slider.prototype.checkScroll=function(){var t=this,n=t.config.slideContainer.scrollLeft;t.interval=setInterval(function(){var e=t.config.slideContainer.scrollLeft;if(e===n){clearInterval(t.interval),t.interval=null;window.innerWidth<1.5*t.slideWidth&&t.snapSlider()}else n=e},50)},t.Slider.prototype.snapSlider=function(){for(var e=this,t=e.config.sliderElements[0].getBoundingClientRect(),n=t.width,a=n*e.config.perPage,i=e.config.slideContainer.scrollLeft,o=(window.innerWidth-a)/2,r=Math.abs(t.left+i)-o,s=0;s<e.config.sliderElements.length;s++){var l=e.config.sliderElements[s];if((i-(l.offsetLeft-n/2))*(i-(l.offsetLeft+n/2))<=0){var c=s;return e.config.slideContainer.scrollLeft=n*c+r,void(e.activeSlide!==s&&(e.activeSlide=s,e.updateControls(),e.setActiveItems(),e.config.slideChangeCallback&&e.config.slideChangeCallback(e.activeSlide)))}}};var r=function(){var t=this,e=[].slice.call(this.config.slideContainer.children);this.config.perPage=e.filter(function(e){return l(e,t.config.slideContainer)}).length||1,this.slidePos=0;var n=this.config.sliderElements[0].getBoundingClientRect();this.itemWidth=n.width,this.slideWidth=this.itemWidth*this.config.perPage,this.slideNum=Math.ceil(this.config.sliderElements.length/this.config.perPage)},l=function(e,t){var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=Math.ceil(n.left)>=Math.floor(a.left),o=Math.floor(n.right)<=Math.ceil(a.right);return i&&o},c=function(e){var n=this;Array.prototype.forEach.call(e,function(e){var t=e.target;e.isIntersecting&&"true"!==t.dataset.calculationsComplete&&(n.initSlider(),t.dataset.calculationsComplete="true")})}}(PULSE.app,PULSE.app.common,PULSE.core),function(a,e,t){var i=".js-copy-url",o=".js-copy-message",r=".js-expand",s=".js-close",l="is-open",c="u-hide",n="is-active",d="social-share__copy-message--fail";t.SharePage=function(e,t){var n=this;n.element=e,n.bodyContent=n.element.getAttribute("data-body"),n.copyBtn=n.element.querySelector(i),n.copyMessage=n.element.querySelector(o),n.url=n.element.getAttribute("data-link-to")?window.location.origin+n.element.getAttribute("data-link-to"):t,n.openButton=n.element.querySelector(r),n.closeButton=n.element.querySelector(s),n.setExpandableListeners(),n.setListeners()},t.SharePage.prototype.setExpandableListeners=function(){var e=this;t.addAriaClickListener(e.openButton,function(){navigator.share?navigator.share({title:e.bodyContent,text:e.bodyContent,url:window.location.href}):e.element.classList.add(l)}),t.addAriaClickListener(e.closeButton,function(){e.element.classList.remove(l)})},t.SharePage.prototype.setListeners=function(){var n=this;t.addAriaClickListener(n.element,function(e){var t=n.getSocialDataset(e.target);t&&t.socialService&&(a.socialHelpers[t.socialService].sharePage(window.location.href,!1,n.updateBodyContent()),n.element.classList.remove(l))}),document.queryCommandSupported("copy")?t.addAriaClickListener(n.copyBtn,function(){return n.copyUrl()}):n.copyButton.classList.add(c)},t.SharePage.prototype.copyUrl=function(){var e=this,t=window.location.href;clipboard.writeText(t).then(function(){return e.copyUrlMessage()},function(){return e.copyUrlMessage(!0)})},t.SharePage.prototype.copyUrlMessage=function(e){var t=this;t.copyBtn.classList.add(n),e&&(t.copyMessage.classList.add(d),t.copyMessage.innerHTML="URL could not be copied"),setTimeout(function(){t.copyBtn.classList.remove(n)},2e3)},t.SharePage.prototype.getSocialDataset=function(e){var t=e;if(this.element.getAttribute("data-social-service"))return this.element.dataset;do{if(t.getAttribute("data-social-service"))return t.dataset;t=t.parentElement}while(t!==this.element);return!1},t.SharePage.prototype.updateBodyContent=function(){return this.element.getAttribute("data-body")}}(PULSE.app,PULSE.core,PULSE.app.common),function(e){var o="twitter",r="facebook",s="googleplus",l="facebookMessenger",t=function(e){this.name=e,this.socialLinks={twitter:{url:"http://www.twitter.com/intent/tweet?text="},facebook:{url:"http://www.facebook.com/sharer/sharer.php?u="},facebookMessenger:{url:"fb-messenger://share/?link="},googleplus:{url:"http://plus.google.com/share?url="},whatsapp:{url:"whatsapp://send?text="},email:{url:"mailto:?body="}},this.defaultWindowConfiguration={width:"500",height:"500",menubar:0,location:1,resizable:0,scrollbars:0,status:0,titlebar:0,toolbar:0}};t.prototype.buildShareUrl=function(e,t){var n=e||window.location.href,a=c(),i=this.socialLinks[this.name].url;switch(this.name){case r:case s:case l:return i+encodeURIComponent(n);case o:return t?i+encodeURIComponent(t+" "+n):a?i+encodeURIComponent(a+" "+n):i+encodeURIComponent(n);default:return a?i+encodeURIComponent(a+" "+n):i+encodeURIComponent(t+" "+n)}},t.prototype.makeWindowConfigString=function(e){var n=e||this.defaultWindowConfiguration;return Object.keys(n).reduce(function(e,t){return e+(t+"=")+n[t]+","},[])},t.prototype.sharePage=function(e,t,n){var a=this.buildShareUrl(e,n),i=this.makeWindowConfigString(t);window.open(a,"_blank",i)};var c=function(){return document.querySelector(".js-page-title")};e.socialHelpers={twitter:new t(o),facebook:new t(r),google:new t(s),email:new t("email"),whatsapp:new t("whatsapp"),facebookMessenger:new t(l)}}(PULSE.app),PULSE.app.common.scrollElementAnimated=function(i,e,t,o,r){var s,l=e.offsetTop;isNaN(t)||(l+=t),isNaN(o)&&(o=100);var n=l<i.scrollTop;s=n?requestAnimationFrame(function e(){var t=i.scrollTop,n=t-o;i.scrollTop=n<=l?l:n,t<=l||0===i.scrollTop?cancelAnimationFrame(s):requestAnimationFrame(e)}):requestAnimationFrame(function e(){var t=i.scrollTop,n=t+o;i.scrollTop=l<=n?l:n;var a=i.scrollTop+i.offsetHeight===i.scrollHeight;l<=t||a?(cancelAnimationFrame(s),"function"==typeof r&&r()):requestAnimationFrame(e)})},function(e,o,r){e.Webview=function(){"true"===r.url.getParam("webview")&&this.isWebview()},e.Webview.prototype.isWebview=function(){var e=document.getElementById("telstra-bar"),t=document.getElementById("main-navigation"),n=document.getElementById("main-content"),a=document.getElementById("footer-menu"),i=document.getElementById("telstra-footer");r.style.addClass(e,o.U_HIDE),r.style.addClass(t,o.U_HIDE),r.style.addClass(n,"is-webview"),r.style.addClass(a,o.U_HIDE),r.style.addClass(i,o.U_HIDE)},e.webview=new e.Webview}(PULSE.app.common,PULSE.app.common.CONSTANTS,PULSE.core);_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(o,i,r,s){var e="gallery-modal",l={LAZY_IMAGE:"common.lazy-image"},c="u-body-fixed",d="close",u="open",m="ready",n="expand-items";o.PlaylistModal=function(){function t(e){_classCallCheck(this,t),this.container=e,this.modalSelector="#"+e.id,this.modalId=e.dataset.modalId,this.pageSize=e.dataset.pageSize,this.galleryContainer=e.querySelector(".js-modal-gallery"),this.expandAllItems=e.querySelector(".js-expand-thumbs"),this.allItems=this.container.querySelector(".js-all-items"),this.loader=this.container.querySelector(".js-modal-loader"),this.fullScreenButton=this.container.querySelector(".js-modal-fullscreen"),this.modalConfig={selector:'[data-ui-modal="'+this.modalSelector+'"]',openClass:"open",modalWrapId:this.modalId,openCallback:this.openModal.bind(this),closeCallback:this.closeModal.bind(this),modalWrapClass:"modal-wrap",modalContentWrapClass:"modal-content"},h.call(this)}return _createClass(t,[{key:"checkUrlForModal",value:function(e){var t=this,n=new URL(window.location.href),a=n.searchParams.get("modal"),i=n.searchParams.get("type");a&&e===i&&("video"===i&&(this.muted=!0),setTimeout(function(){t.openModal()},600))}},{key:"openModal",value:function(e){var t=this;this.firstPlay=!0,this.modalObject=e,p.call(this),i.style.addClass(this.container,u),i.style.addClass(this.modal,u),this.scrollPosition=window.scrollY,this.pageUrl=window.location.href,setTimeout(function(){document.body.classList.add(c),i.style.addClass(t.container,m)},600);var n=this.modalObject?this.modalObject.config.current.uiArgs.directContentReference:null,a=this.modalObject?this.modalObject.config.current.uiArgs.promoTitle:null;setTimeout(function(){n?t.renderDirectReference():t.makeRequest()},200),n?i.style.addClass(this.container,"promo-modal"):i.style.removeClass(this.container,"promo-modal"),a?i.style.addClass(this.container,"promo-title"):i.style.removeClass(this.container,"promo-title"),i.style.removeClass(this.modal,d),this.loader&&this.loader.classList.remove(s.U_HIDE),this.fullScreenButton&&i.style.addClass(this.fullScreenButton,s.U_HIDE),this.updateUrl(),this.updateVirtualTracking(),this.updatePageMetaTags()}},{key:"closeModal",value:function(){i.style.removeClass(document.body,c),i.style.addClass(this.modal,d),i.style.removeClass(this.container,m),i.style.removeClass(this.container,n),history.replaceState("","",this.pageUrl),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),void 0!==this.timeout&&clearTimeout(this.timeout),window.scrollTo(0,this.scrollPosition),this.updatePageMetaTags()}},{key:"makeRequest",value:function(){var e={url:a.call(this).endpoint,method:"GET",callback:this.renderModalContent,target:this};i.data.request(e.url,e.method,e.callback,e.target)}},{key:"renderThumbnailSlider",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l.MODAL_ALL_ITEMS;this.modal.querySelector(".js-playlist-count").innerHTML=e.length;var n={},a=s.VARIANT_CONFIGURATIONS.GALLERY_MODAL_THUMBNAIL;n.items=e.map(function(e){var t=e.response||e,n=r.content.getContentModel(t,a);return n.lazyImage=o.templates[l.LAZY_IMAGE],n.objectFit=!0,n.contentType=t.type,{data:n}}),n.mediaThumbnailClass="media-thumbnail--modal js-expanded-item",this.allItems.innerHTML=o.templating.render(n,t),o.convertToUsersLocalTime(this.allItems),new o.LazyLoad(this.allItems),this.thumbnails=[].slice.call(this.allItems.querySelectorAll(".js-expanded-item")),this.thumbnailList=this.allItems.querySelector(".js-expanded-list"),this.thumbnailPrev=this.allItems.querySelector(".js-thumbnail-prev"),this.thumbnailNext=this.allItems.querySelector(".js-thumbnail-next"),this.slider=new r.Slider({container:this.container.querySelector(".js-slider-container"),perPage:6,slideContainer:this.thumbnailList,sliderElements:this.thumbnails,nextButton:this.thumbnailNext,prevButton:this.thumbnailPrev,itemActiveClass:"is-active",buttonHideClass:"is-inactive"}),this.listenForThumbnailEvents()}},{key:"updateUrl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=new URL(window.location.href),n=""!==e?e:this.modalObject?this.modalObject.config.current.uiArgs.link:window.location.href;t.searchParams.get("tagNames")&&(n+="&tagNames="+t.searchParams.get("tagNames")),t.searchParams.get("references")&&(n+="&references="+t.searchParams.get("references")),history.pushState({},{},n)}},{key:"updatePageMetaTags",value:function(){var e=document.querySelector('meta[property="og:url"]'),t=document.querySelector('meta[name="twitter:url"]'),n=new URL(window.location.href);e&&e.setAttribute("content",n),t&&t.setAttribute("content",n)}},{key:"updateVirtualTracking",value:function(){this.modalId===e&&o.analytics.trackGalleryModalView()}}]),t}();var a=function(){var e=new URL(window.location.href);this.playlistId=e.searchParams.get("playlistId");var t=this.playlistId?"playlist":e.searchParams.get("type"),n=e.searchParams.get("publishFrom"),a={pageSize:this.pageSize,tagNames:e.searchParams.get("tagNames"),references:e.searchParams.get("references"),detail:"DETAILED"};"video"===e.searchParams.get("type")&&"video"===t&&(a.publishedBefore=n),"video"===e.searchParams.get("type")&&"playlist"===t&&(a.pageSize="");var i={filter:a,type:t,playlistId:this.playlistId};return i.endpoint=o.common.url.createContentPath(i.type,i.filter,"en",i.playlistId),i},p=function(){this.mainContainer=this.container.querySelector(".js-modal-main"),this.mainContainer.innerHTML="",this.allItems&&(this.allItems.innerHTML="")},h=function(){document.querySelectorAll('[data-ui-modal="'+this.modalSelector+'"]').forEach(function(e){r.addAriaClickListener(e,function(e){e.preventDefault()})})}}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.app.common.CONSTANTS);_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var _get=function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(a):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(l,t,a,c,i){var d="common.lazy-image",n="common.modal-gallery-list",u="common.modal-all-photos",o="show",r="in-active",s="is-active",m="is-loaded",p="is-selected",h="expand-items";l.GalleryModal=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.nextControl=t.container.querySelector(".js-modal-control-next"),t.prevControl=t.container.querySelector(".js-modal-control-prev"),t.initModal(),t.setListeners(),t.checkUrlForModal("gallery"),t}return _inherits(n,e),_createClass(n,[{key:"initModal",value:function(){void 0===l.GalleryPlaylistModal&&(l.GalleryPlaylistModal=new t.modal(this.modalConfig)),this.modal=document.getElementById(this.modalId)}},{key:"setListeners",value:function(){var e=this;this.container.querySelector(".js-modal-close").addEventListener("click",function(e){e.preventDefault(),l.GalleryPlaylistModal&&l.GalleryPlaylistModal.close()}),c.addAriaClickListener(this.nextControl,b.bind(this)),c.addAriaClickListener(this.prevControl,y.bind(this)),c.addAriaClickListener(this.expandAllItems,function(){e.container.classList.toggle(h)})}},{key:"closeModal",value:function(){_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"closeModal",this).call(this),a.style.removeClass(this.galleryContainer,o),a.style.removeClass(this.prevControl,r),c.removeAriaClickListener(this.startButton,b.bind(this))}},{key:"renderModalContent",value:function(o){if(o&&o.items&&o.items.length){var e={},r=i.VARIANT_CONFIGURATIONS.GALLERY_MODAL,s=i.VARIANT_CONFIGURATIONS.GALLERY_MODAL_PORTRAIT;e.items=o.items.map(function(e){var t=e.response||e,n=r,a=!1;c.content.isPortrait(t)&&(a=!0,n=s);var i=c.content.getContentModel(t,n);return i.lazyImage=l.templates[d],i.objectFit=!0,i.contentType=t.type,i.isPortrait=a,i.cssClass=a?"is-portrait":"",t.id===o.coverItem.id&&(i.coverItem=!0),_extends({},i)}),o.coverItem&&(new c.PlaylistSlide(this.container,e,{contentId:o.id,title:o.title,description:o.description,subtitle:o.subtitle,date:moment(o.publishFrom).format("lll")}),this.loader&&this.loader.classList.add(i.U_HIDE)),f.call(this,e.items),this.renderThumbnailSlider(o.items,u)}}},{key:"listenForThumbnailEvents",value:function(){var a=this;this.thumbnails.forEach(function(n){c.addAriaClickListener(n,function(e){e.preventDefault();var t=n.dataset.photoIndex;t!==a.thumbIndex&&(g.call(a,t),v.call(a,t),a.thumbIndex=t)})})}}]),n}(l.PlaylistModal);var f=function(e){var t={items:e};this.galleryContainer.innerHTML=l.templating.render(t,n),new l.LazyLoad(this.galleryContainer),this.galleryList=[].slice.call(this.container.querySelectorAll(".js-gallery-item")),this.startButton=this.container.querySelector(".js-start-button"),c.addAriaClickListener(this.startButton,b.bind(this))},g=function(e){if(this.thumbnails.forEach(function(e){e.classList.remove(p)}),this.thumbnails[Number(e)].classList.add(p),this.slider){var t=this.slider.getItemSlide(this.thumbnails[Number(e)]);this.slider.slideTo(parseInt(t))}},v=function(e){a.style.hasClass(this.prevControl,r)&&a.style.removeClass(this.prevControl,r);var t=this.galleryList.find(function(e){return a.style.hasClass(e,s)}),n=0;t&&(n=Number(e)),S.call(this,n,t)},y=function(){var e=0,t=this.galleryList.find(function(e){return a.style.hasClass(e,s)});t&&(e=Number(t.dataset.photoIndex)-1),this.galleryList[e]||(e=this.galleryList.length-1),S.call(this,e,t),g.call(this,e)},b=function(){var e=0;a.style.hasClass(this.prevControl,r)&&a.style.removeClass(this.prevControl,r);var t=this.galleryList.find(function(e){return a.style.hasClass(e,s)});t&&(e=Number(t.dataset.photoIndex)+1),this.galleryList[e]||(e=0),S.call(this,e,t),g.call(this,e)},S=function(e,t){this.galleryContainer.classList.add(o);var n=this.galleryList[e].querySelector(".js-faded-image");n&&(n.classList.add(m),this.galleryList[e].classList.add(s),t&&t.classList.remove(s))};l.widgetInitialiser.addWidget("gallery-modal",l.GalleryModal)}(PULSE.app,PULSE.ui,PULSE.core,PULSE.app.common,PULSE.app.common.CONSTANTS),function(a,o,i){var r=".js-lazy-load",s=".js-body-content",l=".js-modal",c="[ data-modal ]",d=function(){return e},u=function(){return t};i.Modal=function(e,t){var n=this;n.root=e,n.imageSelector=r,n.containerSelector=t.containerSelector||s,n.modalSelector=t.modalSelector||l,n.modalMarker=t.modalMarker||c,n.renderModal=t.renderModal||d(),n.onDomUpdate=t.onDomUpdate||u(),n.modal=null,n.ancestor=null,n.container=document.querySelector(n.containerSelector),n.container&&i.addAriaClickListener(n.root,n.delegateClick.bind(n))},i.Modal.prototype.doModal=function(e){var t=this,n=t.renderModal(e);n&&(t.modal?t.modal.outerHTML=n:t.container.insertAdjacentHTML("beforeend",n),t.modal=t.container.querySelector(t.modalSelector),t.onDomUpdate(t.modal))},i.Modal.prototype.delegateClick=function(e){var t=this;t.ancestor=e.target.closest(t.modalMarker),t.ancestor&&(e.preventDefault(),t.doModal(t.ancestor))},i.Modal.prototype.closeModalInstance=function(){var e=this;e.boundEvents&&i.removeAriaClickListener(e.modal,e.boundEvents),e.modal.remove(),e.modal=null};var e=function(e){var t=e.querySelector(this.imageSelector);if(!t)return"";var n={leadMediaUrls:{thumbnail:t.getAttribute("data-desktop-img"),thumbnailRetina:t.getAttribute("data-desktop-img-retina"),thumbnailMobile:t.getAttribute("data-mobile-img"),thumbnailMobileRetina:t.getAttribute("data-mobile-img-retina")},lazyImage:a.templates["common.lazy-image"],objectFit:!1};return a.templating.render({data:n,PULSE:PULSE},"common.modal")},t=function(e){e&&(new a.LazyLoad(e),n.call(this,e),p.call(this,e))},n=function(e){this.boundEvents=i.addAriaClickListener(e,m.bind(this))},m=function(e){var t=e.target.dataset.modalAction,n=void 0;if("prev"===t?n=this.ancestor.previousElementSibling:"next"===t&&(n=this.ancestor.nextElementSibling),n&&void 0!==n.dataset.modal)return this.closeModalInstance(),void n.click();"close"===e.target.dataset.modalAction&&this.closeModalInstance()},p=function(e){var t=e.querySelector("[ data-modal-action='prev' ]"),n=e.querySelector("[ data-modal-action='next' ]"),a=this.ancestor.previousElementSibling,i=this.ancestor.nextElementSibling;a?o.style.removeClass(t,"disable"):o.style.addClass(t,"disable"),i?o.style.removeClass(n,"disable"):o.style.addClass(n,"disable")}}(PULSE.app,PULSE.core,PULSE.app.common),function(a,e,i){var o="fade-up",r="is-loaded";e.PlaylistSlide=function(e,t,n){var a=this;e&&t&&n&&(a.container=e,a.data=t,a.config=n,a.data.items?a.coverItem=a.data.items.find(function(e){return e.coverItem}):a.coverItem=t,a.coverItem&&s.call(a))};var s=function(){var t=this,n={contentId:t.config.id,date:t.config.date,description:t.config.description,mediaId:t.config.mediaId||t.data.mediaId,title:t.config.title,playlistSize:t.data.items?t.data.items.length:0,subtitle:t.config.subtitle,data:t.coverItem,accountId:t.config.accountId,muted:t.config.muted,policyKey:t.config.policyKey,playerId:t.config.playerId};n.data.tags&&0<n.data.tags.length&&n.data.tags.forEach(function(e){e.label.startsWith("Premium:")&&(n.policyKey=t.config.policyKeyRestricted,n.playerId=t.config.playerIdRestricted)});var e="video"===t.coverItem.type?"common.modal-video-main":"common.modal-gallery-main";"video"===t.coverItem.type&&"OOYALA"==t.data.platform&&(n.mediaId="ref:"+n.mediaId),t.mainContent=t.container.querySelector(".js-modal-main"),t.mainContent.innerHTML=a.templating.render(n,e),new a.LazyLoad(t.mainContent),l.call(t)},l=function(){var e=this;e.introImageContainer=e.mainContent.querySelector(".js-intro-image"),e.introImage=e.introImageContainer.querySelector(".js-lazy-load");new MutationObserver(t.bind(e)).observe(e.introImage,{attributes:!0,childList:!0,subtree:!0})},t=function(e,t){for(var n=0;n<e.length;n++){var a=e[n].target;if("class"===e[n].attributeName&&i.style.hasClass(a,r))return t.disconnect(),void c.call(this)}},c=function(){var n=this;[].slice.call(n.mainContent.querySelectorAll(".js-animate-me")).forEach(function(e,t){e&&d.call(n,e,o,100*(t+1))}),n.config.initiated&&"undefined"!==n.config.initiated||setTimeout(function(){n.container.classList.add("hover"),setTimeout(function(){n.container.classList.remove("hover")},600)},200)},d=function(e,t,n){setTimeout(function(){e.classList.add(t)},n)}}(PULSE.app,PULSE.app.common,PULSE.core);_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),_get=function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(a):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(a,t,i,o,r){var n="common.lazy-image",s="common.modal-all-items",l="expand-items";a.VideoModal=function(e){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.initiated=!1,t.initModal(),t.setListeners(),t.checkUrlForModal("video"),t}return _inherits(n,e),_createClass(n,[{key:"initModal",value:function(){this.muted=!1,void 0===a.VideoPlayerModal&&(a.VideoPlayerModal=new t.modal(this.modalConfig)),this.modal=document.getElementById(this.modalId),this.playerName="",this.autoplay="false"!==r.localStorage.getStorage("autoplay"),null===this.autoplay&&(this.autoplay=!0,r.localStorage.setStorage("autoplay",this.autoplay)),this.playUpNext=this.autoplay,this.firstPlay=!0}},{key:"setListeners",value:function(){var t=this,e=this;e.isPlaying=!1,this.container.querySelector(".js-modal-close").addEventListener("click",function(e){e.preventDefault(),clearTimeout(t.timeout),a.VideoPlayerModal&&a.VideoPlayerModal.close()}),i.addAriaClickListener(this.expandAllItems,function(){e.muted=!1,e.videoPlayer.api.paused()?e.isPlaying&&(e.isPlaying=!1,e.videoPlayer.play()):(e.isPlaying=!0,e.videoPlayer.api.pause(),r.style.removeClass(e.videoContainer,o.IS_ACTIVE)),r.style.toggleClass(t.container,l)}),i.addAriaClickListener(this.fullScreenButton,function(){t.videoPlayer.api.requestFullscreen()}),this.setVideoListeners()}},{key:"closeModal",value:function(){_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"closeModal",this).call(this),this.disposeVideo(),this.initiated=!1}},{key:"disposeVideo",value:function(){""!==this.playerName&&(this.isPlaying=!1,a.videoPlayerManager.removePlayer(this.playerName))}},{key:"listenForThumbnailEvents",value:function(){var n=this;this.scrollContainer=this.container.querySelector(".js-floating-bar-scroll"),this.thumbnails.forEach(function(t){i.addAriaClickListener(t,function(e){e.preventDefault(),n.muted=!1,n.playNextVideo(t),n.scrollContainer.scrollTo(0,0)})})}},{key:"listenForAutoplay",value:function(){var t=this;this.autoplayToggle=this.container.querySelector(".js-autoplay-toggle"),this.autoplayToggle.checked=this.autoplay,i.addAriaClickListener(this.autoplayToggle,function(e){e.stopPropagation(),t.autoplay=e.target.checked,t.playUpNext=t.autoplay,r.localStorage.setStorage("autoplay",t.autoplay)});var e=this.mainContainer.querySelector(".js-start-button");i.addAriaClickListener(e,function(){t.muted=!1,void 0!==t.timeout&&clearTimeout(t.timeout)})}},{key:"setupCurrentNext",value:function(n){var a=void 0;this.currentItem=this.data.find(function(e,t){return a=t+1,e.id===n||e.response===n}),this.currentItem=this.currentItem.response||this.currentItem,this.currentItem.playlistId=this.playlistId||!1,this.nextItem=a<this.data.length?this.data[a]:this.data[0],this.nextItem=this.nextItem.response||this.nextItem}},{key:"renderModalContent",value:function(e){if(e){this.mainContainer=this.container.querySelector(".js-modal-main"),this.data=e.content||e.items;var t=new URL(window.location.href),n=this.modalObject?this.modalObject.config.current.uiArgs.contentId:parseInt(t.searchParams.get("videoId"))||this.data[0].id;this.setupCurrentNext(n),this.renderSlide(),this.renderThumbnailSlider(this.data,s),this.updateNowAndNext()}}},{key:"renderDirectReference",value:function(){this.currentItem=this.mockObject(this.modalObject.config.current.uiArgs.mediaId);this.mainContent=this.container.querySelector(".js-modal-main"),this.mainContent.innerHTML=a.templating.render(this.currentItem,"common.modal-video-main"),this.expandAllItems.classList.add("u-visually-hidden"),this.initVideo()}},{key:"mockObject",value:function(e){return{id:e,contentId:"",date:"",description:"",mediaId:e,title:this.modalObject.config.current.uiArgs.promoTitle,playlistSize:0,subtitle:null,data:{id:e,accountId:this.container.dataset.accountId,type:"video",title:"",description:""},accountId:this.container.dataset.accountId,muted:!1,policyKey:this.container.dataset.policyKey,playerId:this.container.dataset.playerId,isLive:!0}}},{key:"renderSlide",value:function(){var e=c(this.currentItem,o.VARIANT_CONFIGURATIONS.GALLERY_MODAL);this.updateUrl(e.link),this.updatePageMetaTags(),this.playlistSlide=new i.PlaylistSlide(this.container,e,{contentId:this.currentItem.id,title:this.currentItem.title,description:this.currentItem.description,subtitle:this.currentItem.subtitle,date:moment(this.currentItem.publishFrom).format("lll"),policyKey:this.container.dataset.policyKey,playerId:this.container.dataset.playerId,policyKeyRestricted:this.container.dataset.policyKeyRestricted,playerIdRestricted:this.container.dataset.playerIdRestricted,accountId:this.container.dataset.accountId,initiated:this.initiated,muted:this.muted}),this.initUpNext(),this.initVideo(),this.listenForAutoplay()}},{key:"initUpNext",value:function(){var t=this;this.upNextContainer=this.mainContainer.querySelector(".js-up-next");var e={data:c(this.nextItem,o.VARIANT_CONFIGURATIONS.GALLERY_MODAL_THUMBNAIL),cssClass:"media-thumbnail--transparent media-thumbnail--dark media-thumbnail--up-next js-up-next-item"};this.upNextContainer.insertAdjacentHTML("beforeend",a.templating.render(e,"common.media-thumbnail")),r.style.removeClass(this.upNextContainer,o.U_HIDE),new a.LazyLoad(this.upNextContainer),this.nextVideo=this.upNextContainer.querySelector(".js-up-next-item"),i.addAriaClickListener(this.nextVideo,function(e){e.preventDefault(),t.muted=!1,t.playNextVideo(t.nextVideo)})}},{key:"setVideoListeners",value:function(){var e=this,t=function(){e.playNextVideo(e.nextVideo,e.autoplay)};0<arguments.length&&void 0!==arguments[0]&&arguments[0]?document.body.removeEventListener(i.CONSTANTS.EVENTS.VIDEO.END,t.bind(this)):(document.body.addEventListener(i.CONSTANTS.EVENTS.VIDEO.END,t.bind(this)),document.body.addEventListener(i.CONSTANTS.EVENTS.VIDEO.PLAY,function(){e.firstPlay=!1,r.style.removeClass(e.container,l),r.style.removeClass(e.fullScreenButton,o.U_HIDE)}),document.body.addEventListener(i.CONSTANTS.EVENTS.VIDEO.PAUSE,function(){r.style.addClass(e.fullScreenButton,o.U_HIDE)}))}},{key:"initVideo",value:function(){var e=this,t=this;this.playerName="aflm-modal-video-player_"+this.currentItem.id,this.videoContainer=this.container.querySelector('[data-widget="video-player"]'),a.videoPlayerManager.createScripts(function(){e.videoPlayer=a.videoPlayerManager.getPlayerWithName(e.playerName),t.initiated&&e.videoPlayer&&e.playUpNext&&e.videoPlayer.play(),e.setVideoListeners(!0),t.initiated=!0}),this.initiated&&r.style.removeClass(this.container,l)}},{key:"updateNowAndNext",value:function(){var n=this;this.thumbnails.forEach(function(e){var t=parseInt(e.dataset.contentId,10);t===n.currentItem.id?(e.parentElement.setAttribute("data-content",PULSE.I18N.lookup("label.nowPlaying")),r.style.addClass(e.parentElement,o.IS_ACTIVE)):t===n.nextItem.id?(e.parentElement.setAttribute("data-content",PULSE.I18N.lookup("label.upNext")),r.style.addClass(e.parentElement,o.IS_ACTIVE)):r.style.removeClass(e.parentElement,o.IS_ACTIVE)})}},{key:"playNextVideo",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.playUpNext=t;var n=parseInt(e.dataset.contentId,10);n!==this.currentItem.id&&(this.disposeVideo(),this.setupCurrentNext(n),this.renderSlide(),this.updateNowAndNext())}}]),n}(a.PlaylistModal);var c=function(e,t){return e&&t?_extends({},i.content.getContentModel(e,t),{lazyImage:a.templates[n],objectFit:!0,contentType:e.type}):{}};a.widgetInitialiser.addWidget("video-modal",a.VideoModal)}(PULSE.app,PULSE.ui,PULSE.app.common,PULSE.app.common.CONSTANTS,PULSE.core);